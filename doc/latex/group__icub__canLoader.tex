\hypertarget{group__icub__canLoader}{}\doxysection{can\+Loader}
\label{group__icub__canLoader}\index{canLoader@{canLoader}}


Use this application to download your firmware in DSP boards.  


Collaboration diagram for can\+Loader\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=314pt]{group__icub__canLoader}
\end{center}
\end{figure}
Use this application to download your firmware in DSP boards. 

\hypertarget{group__tutorial__perceptiveModels_intro_sec}{}\doxysubsection{Description}\label{group__tutorial__perceptiveModels_intro_sec}
Can\+Loder20 is a YARP based application that allows the firmware update of the DSP boards of \mbox{\hyperlink{namespaceiCub}{i\+Cub}}. The board types currently supported by the Can\+Loader application are\+:
\begin{DoxyItemize}
\item MC4 (Motorola 56807 DSP for control of bushed CC motors)
\item BLL (Motorola 56807 DSP for control of brushless motors)
\item STRAIN (DSPIC 30f4013 6 axis force/torque sensor)
\item MAIS (DSPIC 30f4013 Hall-\/effect position sensor) \+\_\+ SKIN (DSPIC 30f4011 Tactile Sensor board) In order to successfully transfer the firmware to the boards using the Can\+Loader application, the desired boards must be powered on and properly connected to the CAN Bus using either the \textquotesingle{}ecan\textquotesingle{} or \textquotesingle{}pcan\textquotesingle{} or \textquotesingle{}cfw2can\textquotesingle{} or \textquotesingle{}socketcan\textquotesingle{} CAN Bus driver, or, alternatively, can\+Loader can program the boards connected to a ETH board. The Can\+Loader application can run in two different modalities\+:
\item Graphical User Interface (GUI) modality\+: This modality allows the user to examinate the status of the DSP boards detected on the specified CAN Bus, to download the firmware to multiple bords and to change other settings, such as the individual CAN addresses or the identification labels.
\item Command line modality\+: This modality allows to the user to update the firmware of one DSP board in a fast and scriptable way. The application requires in input a set of parameters (specified in the parameters section) in order to identify the board to be updated. The application returns a value that specifies the result of the download.
\end{DoxyItemize}\hypertarget{group__tutorial__perceptiveModels_lib_sec}{}\doxysubsection{Libraries}\label{group__tutorial__perceptiveModels_lib_sec}
YARP libraries.\hypertarget{group__tutorial__perceptiveModels_parameters_sec}{}\doxysubsection{Parameters}\label{group__tutorial__perceptiveModels_parameters_sec}
You can use the can\+Loader application in two ways\+: using a GUI or by command line. The GUI is executed by default if the can\+Loader application is launched without parameters. For example\+: ./can\+Loader executes the graphical version of the can\+Loader.

To use the can\+Loader application by command line, without the graphical interface, use the following syntax\+: ./can\+Loader --can\+Device\+Type t --can\+Device\+Num x --board\+Id y --firmware my\+Firmware.\+out.\+S ./can\+Loader --can\+Device\+Type ETH --can\+Device\+Num 1$\vert$2 --board\+Id y --firmware my\+Firmware.\+out.\+S --board\+IPAddr aaa.\+aaa.\+aaa.\+aaa All of the parameters are mandatory. A description of the parameters follows\+: --can\+Device\+Type t\+: specifies the type of can\+Bus\+Driver used. The parameter t can assume the values \textquotesingle{}ecan\textquotesingle{} or \textquotesingle{}pcan\textquotesingle{} or \textquotesingle{}cfw2can\textquotesingle{} or \textquotesingle{}socketcan\textquotesingle{} --can\+Device\+Num x\+: specifies the can\+Bus identification number. The parameter x can be 0,1,2 or 3. --board\+Id y\+: specifies the can address of the board on which the firmware will be downloaded. The parameter y ranges from 1 to 15. --firmware my\+Firmware.\+out.\+S\+: specifies the file name containing the firmware (binary code) that will be downloaded. --board\+IPAddr aaa.\+aaa.\+aaa.\+aaa\+: it is the ETH board IP address.\hypertarget{group__tutorial__ationPrimitives_portsa_sec}{}\doxysubsection{Ports Accessed}\label{group__tutorial__ationPrimitives_portsa_sec}
None\hypertarget{group__tutorial__ationPrimitives_portsc_sec}{}\doxysubsection{Ports Created}\label{group__tutorial__ationPrimitives_portsc_sec}
None\hypertarget{group__tutorial__ationPrimitives_in_files_sec}{}\doxysubsection{Input Data Files}\label{group__tutorial__ationPrimitives_in_files_sec}
The can\+Loader application requires in input a file containing the firmware that will be downloaded. The extension of the firmware file is typically \textquotesingle{}.out.\+s\textquotesingle{} for the Motorola DSP-\/based boards and \textquotesingle{}.hex\textquotesingle{} fot DSPIC-\/based boards. The name of the file containing the firmware is specified using the --firmware parameter if the can\+Loader application is executed by command line or browsing the directories if the GUI is used.\hypertarget{group__tutorial__ationPrimitives_out_data_sec}{}\doxysubsection{Output Data Files}\label{group__tutorial__ationPrimitives_out_data_sec}
No output files are generated by the can\+Loader application.

If the application is executed using the command line modality, the following codes are retuned by the application, identifying the status (success or not) of the download.

\#define ALL\+\_\+\+OK 0

\#define INVALID\+\_\+\+CMD\+\_\+\+STRING -\/1

\#define INVALID\+\_\+\+PARAM\+\_\+\+CANTYPE -\/2

\#define INVALID\+\_\+\+PARAM\+\_\+\+CANNUM -\/3

\#define INVALID\+\_\+\+PARAM\+\_\+\+BOARDID -\/4

\#define INVALID\+\_\+\+PARAM\+\_\+\+FILE -\/5

\#define ERR\+\_\+\+NO\+\_\+\+BOARDS\+\_\+\+FOUND -\/10

\#define ERR\+\_\+\+BOARD\+\_\+\+ID\+\_\+\+NOT\+\_\+\+FOUND -\/11

\#define ERR\+\_\+\+UNKNOWN -\/12

\#define DOWNLOADERR\+\_\+\+NOT\+\_\+\+CONNECTED -\/20

\#define DOWNLOADERR\+\_\+\+BOARD\+\_\+\+NOT\+\_\+\+SEL -\/21

\#define DOWNLOADERR\+\_\+\+FILE\+\_\+\+NOT\+\_\+\+SEL -\/22

\#define DOWNLOADERR\+\_\+\+FILE\+\_\+\+NOT\+\_\+\+OPEN -\/23

\#define DOWNLOADERR\+\_\+\+BOARD\+\_\+\+NOT\+\_\+\+START -\/24

\#define DOWNLOADERR\+\_\+\+TRANSFER\+\_\+\+ERROR -\/25

In this way, an external script that invokes the can\+Loader application can check the result of the firmware download operation.\hypertarget{group__tutorial__ationPrimitives_conf_file_sec}{}\doxysubsection{Configuration Files}\label{group__tutorial__ationPrimitives_conf_file_sec}
The can\+Loader application uses a configuration file (config.\+txt) located in the same diretory of the executable. The configuration file specifies the filename of the firmware used in the last download operation. If the configuration file is not found when the can\+Loader application is executed in graphical modality, a new config.\+txt is generated. The configuration file is not used when the can\+Loader is executed in command line modality.\hypertarget{group__tutorial__perceptiveModels_tested_os_sec}{}\doxysubsection{Tested OS}\label{group__tutorial__perceptiveModels_tested_os_sec}
Linux and Windows.\hypertarget{group__icub__faceExpressions_example_sec}{}\doxysubsection{Example Instantiation of the Module}\label{group__icub__faceExpressions_example_sec}
can\+Loader can\+Loader --help can\+Loader --can\+Device\+Type esd --can\+Device\+Num 2 --board\+Id 1 --firmware my\+Firmware.\+out.\+S can\+Loader --can\+Device\+Type ETH --can\+Device\+Num 1 --board\+Id 4 --firmware my\+Firmware.\+out.\+S --board\+IPAddr 10.\+0.\+1.\+8

\begin{DoxyAuthor}{Author}
Marco Randazzo
\end{DoxyAuthor}
Copyright (C) 2008 Robot\+Cub Consortium

Copy\+Policy\+: Released under the terms of the GNU GPL v2.\+0.

This file can be edited at src/my\+Module/main.\+cpp. 