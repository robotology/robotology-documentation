\hypertarget{group__iDynInv}{}\doxysection{i\+Dyn\+Inv}
\label{group__iDynInv}\index{iDynInv@{iDynInv}}


Classes for force/torque computation in a dynamic chain, where a single FT sensor is placed.  


Collaboration diagram for i\+Dyn\+Inv\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=209pt]{group__iDynInv}
\end{center}
\end{figure}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classiCub_1_1iDyn_1_1iDynInvSensor}{i\+Cub\+::i\+Dyn\+::i\+Dyn\+Inv\+Sensor}}
\begin{DoxyCompactList}\small\item\em A class for computing force/moment of a sensor placed anywhere in a kinematic chain; its position in the chain is defined wrt a certain link in the chain; this class can be useful to estimate the FT measurements of the sensor. \end{DoxyCompactList}\item 
class \mbox{\hyperlink{classiCub_1_1iDyn_1_1iDynInvSensorArm}{i\+Cub\+::i\+Dyn\+::i\+Dyn\+Inv\+Sensor\+Arm}}
\begin{DoxyCompactList}\small\item\em A class for computing force/moment of the FT sensor placed in the middle of the \mbox{\hyperlink{namespaceiCub}{i\+Cub}}\textquotesingle{}s left or right arm. \end{DoxyCompactList}\item 
class \mbox{\hyperlink{classiCub_1_1iDyn_1_1iDynInvSensorArmNoTorso}{i\+Cub\+::i\+Dyn\+::i\+Dyn\+Inv\+Sensor\+Arm\+No\+Torso}}
\begin{DoxyCompactList}\small\item\em A class for computing force/moment of the FT sensor placed in the middle of the \mbox{\hyperlink{namespaceiCub}{i\+Cub}}\textquotesingle{}s left or right arm. \end{DoxyCompactList}\item 
class \mbox{\hyperlink{classiCub_1_1iDyn_1_1iDynInvSensorLeg}{i\+Cub\+::i\+Dyn\+::i\+Dyn\+Inv\+Sensor\+Leg}}
\begin{DoxyCompactList}\small\item\em A class for computing force/moment of the FT sensor placed in the middle of the \mbox{\hyperlink{namespaceiCub}{i\+Cub}}\textquotesingle{}s left or right leg. \end{DoxyCompactList}\item 
class \mbox{\hyperlink{classiCub_1_1iDyn_1_1iDynSensor}{i\+Cub\+::i\+Dyn\+::i\+Dyn\+Sensor}}
\begin{DoxyCompactList}\small\item\em A class for computing forces and torques in a \mbox{\hyperlink{classiCub_1_1iDyn_1_1iDynChain}{i\+Dyn\+Chain}}, when a force/torque sensor is placed in the middle of the kinematic chain and it is the only available sensor for measuring forces and moments; the sensor position in the chain must be set; the computation of joint forces, moments and torques is performed by an Inverse Newton-\/\+Euler method. \end{DoxyCompactList}\item 
class \mbox{\hyperlink{classiCub_1_1iDyn_1_1iDynSensorArm}{i\+Cub\+::i\+Dyn\+::i\+Dyn\+Sensor\+Arm}}
\begin{DoxyCompactList}\small\item\em A class for computing joint force/moment/torque of an \mbox{\hyperlink{namespaceiCub}{i\+Cub}} arm (left/right) given the FT measurements of the sensor placed in the middle of the arm. \end{DoxyCompactList}\item 
class \mbox{\hyperlink{classiCub_1_1iDyn_1_1iDynSensorArmNoTorso}{i\+Cub\+::i\+Dyn\+::i\+Dyn\+Sensor\+Arm\+No\+Torso}}
\begin{DoxyCompactList}\small\item\em A class for computing joint force/moment/torque of an \mbox{\hyperlink{namespaceiCub}{i\+Cub}} arm (left/right) given the FT measurements of the sensor placed in the middle of the arm. \end{DoxyCompactList}\item 
class \mbox{\hyperlink{classiCub_1_1iDyn_1_1iDynSensorLeg}{i\+Cub\+::i\+Dyn\+::i\+Dyn\+Sensor\+Leg}}
\begin{DoxyCompactList}\small\item\em A class for computing joint force/moment/torque of an \mbox{\hyperlink{namespaceiCub}{i\+Cub}} leg (left/right) given the FT measurements of the sensor placed in the middle of the leg. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Classes for force/torque computation in a dynamic chain, where a single FT sensor is placed. 

Using Newton-\/\+Euler formula it is possible to compute an estimate of the FT sensor measurements. \mbox{\hyperlink{classiCub_1_1iDyn_1_1iDynInvSensor}{i\+Dyn\+Inv\+Sensor}} is the generic class which takes a \mbox{\hyperlink{classiCub_1_1iDyn_1_1iDynChain}{i\+Dyn\+Chain}}, sets a generic sensor attached to the chain, and manages the proper computations. \mbox{\hyperlink{classiCub_1_1iDyn_1_1iDynInvSensorArm}{i\+Dyn\+Inv\+Sensor\+Arm}} and \mbox{\hyperlink{classiCub_1_1iDyn_1_1iDynInvSensorLeg}{i\+Dyn\+Inv\+Sensor\+Leg}} are specific classes performing computations for \mbox{\hyperlink{namespaceiCub}{i\+Cub}} arms and legs\+: by choosing left/right part, they automatically set the proper FT sensor parameters. Given single FT sensor measurements it is also possible to compute link/joint force/moment/torque. As \mbox{\hyperlink{classiCub_1_1iDyn_1_1iDynInvSensor}{i\+Dyn\+Inv\+Sensor}}, \mbox{\hyperlink{classiCub_1_1iDyn_1_1iDynSensor}{i\+Dyn\+Sensor}} attachs a FT sensor into a \mbox{\hyperlink{classiCub_1_1iDyn_1_1iDynChain}{i\+Dyn\+Chain}}; exploiting the sensor force/moment measurements, and applying the inverse formula of Newton-\/\+Euler recursive algorithm, it is possible to compute joint torques given single FT measurements. The dynamical parameters necessary to the algorithm are read automatically from the \mbox{\hyperlink{classiCub_1_1iDyn_1_1iDynChain}{i\+Dyn\+Chain}} (consisting of i\+Dyn\+Links), whereas the FT sensor must be set from \mbox{\hyperlink{classiCub_1_1iDyn_1_1iDynSensor}{i\+Dyn\+Sensor}} constructor.\hypertarget{group__tutorial__perceptiveModels_tested_os_sec}{}\doxysubsection{Tested OS}\label{group__tutorial__perceptiveModels_tested_os_sec}
Windows\hypertarget{group__icub__faceExpressions_example_sec}{}\doxysubsection{Example Instantiation of the Module}\label{group__icub__faceExpressions_example_sec}
Set a \mbox{\hyperlink{classiCub_1_1iDyn_1_1iDynInvSensor}{i\+Dyn\+Inv\+Sensor}} for \mbox{\hyperlink{namespaceiCub}{i\+Cub}}\textquotesingle{}s left arm, with force/moment computation in the static case (STATIC), and verbose (VERBOSE==1) output\+:

{\ttfamily  \mbox{\hyperlink{classiCub_1_1iDyn_1_1iCubArmDyn}{i\+Cub\+Arm\+Dyn}} $\ast$arm = new \mbox{\hyperlink{classiCub_1_1iDyn_1_1iCubArmDyn}{i\+Cub\+Arm\+Dyn}}(\char`\"{}left\char`\"{}); } ~\newline
{\ttfamily  \mbox{\hyperlink{classiCub_1_1iDyn_1_1iDynInvSensorArm}{i\+Dyn\+Inv\+Sensor\+Arm}} arm\+WSensor\+Solver = new i\+Dyn\+Inv\+Sensor\+Arm(arm,\+STATIC,\+VERBOSE); } ~\newline
 Note that by setting the arm as \char`\"{}left\char`\"{}, the sensor is automatically set as the left sensor of the arm. Then start retrieving the sensor force/moment. First the chain must be updated with the current angle configuration\+:

{\ttfamily  arm-\/$>$set\+Ang(q); } ~\newline
{\ttfamily  arm-\/$>$set\+DAng(dq); } ~\newline
{\ttfamily  arm-\/$>$set\+D2\+Ang(ddq); } ~\newline
 Then the arm dynamics must be solved, in order to find each links\textquotesingle{} force/moment, etc\+:

{\ttfamily  arm-\/$>$compute\+Newton\+Euler(w0,dw0,d2p0,\+Fend,\+Mend); } ~\newline
 Finally we can compute the sensor force and moment, attaching the sensor to its link (whose force/moment have been previously computed)\+:

{\ttfamily  arm\+WSensor\+Solver-\/$>$compute\+Sensor\+Force\+Moment(); } ~\newline
 The sensor force/moment can be retrieved separately (3x1 vectors) or together (6x1 vector).

{\ttfamily  Vector F = arm\+WSensor\+Solver-\/$>$get\+Sensor\+Force(); } ~\newline
{\ttfamily  Vector Mu = arm\+WSensor\+Solver-\/$>$get\+Sensor\+Moment(); } ~\newline
{\ttfamily  Vector FMu = arm\+WSensor\+Solver-\/$>$get\+Sensor\+Force\+Moment(); } ~\newline
\hypertarget{group__icub__faceExpressions_example_sec}{}\doxysubsection{Example Instantiation of the Module}\label{group__icub__faceExpressions_example_sec}
Set a \mbox{\hyperlink{classiCub_1_1iDyn_1_1iDynSensor}{i\+Dyn\+Sensor}} for \mbox{\hyperlink{namespaceiCub}{i\+Cub}}\textquotesingle{}s left arm, with force/moment computation in the static case (STATIC), and verbose (VERBOSE==1) output\+:

{\ttfamily  \mbox{\hyperlink{classiCub_1_1iDyn_1_1iCubArmDyn}{i\+Cub\+Arm\+Dyn}} $\ast$arm = new \mbox{\hyperlink{classiCub_1_1iDyn_1_1iCubArmDyn}{i\+Cub\+Arm\+Dyn}}(\char`\"{}left\char`\"{}); } ~\newline
{\ttfamily  \mbox{\hyperlink{classiCub_1_1iDyn_1_1iDynSensorArm}{i\+Dyn\+Sensor\+Arm}} arm\+WSensor\+Solver = new i\+Dyn\+Sensor\+Arm(arm,\+STATIC,\+VERBOSE); } ~\newline
 Note that by setting the arm as \char`\"{}left\char`\"{}, the sensor is automatically set as the left sensor of the arm. The chain must be updated with the current angle configuration, and the sensor measurements must be put into two (3x1) vectors or one (6x1).

{\ttfamily  arm-\/$>$set\+Ang(q); } ~\newline
{\ttfamily  Vector FM = measure\+From\+Sensor();} ~\newline
{\ttfamily  Vector F = measure\+Force\+From\+Sensor();} ~\newline
{\ttfamily  Vector M = measure\+Moment\+From\+Sensor();} ~\newline
 In both cases, we can give the compute method our measurements\+:

{\ttfamily  arm\+WSensor\+Solver-\/$>$compute\+From\+Sensor\+Newton\+Euler(\+FM); } ~\newline
{\ttfamily  arm\+WSensor\+Solver-\/$>$compute\+From\+Sensor\+Newton\+Euler(\+F,\+M); } ~\newline
 The arm joints force/moment/torque can be now retrieved\+:

{\ttfamily  Matrix F = arm\+WSensor\+Solver-\/$>$get\+Forces(); } ~\newline
{\ttfamily  Matrix Mu = arm\+WSensor\+Solver-\/$>$get\+Moments(); } ~\newline
{\ttfamily  Vector Tau = arm\+WSensor\+Solver-\/$>$get\+Torques(); } ~\newline
 \begin{DoxyAuthor}{Author}
Serena Ivaldi
\end{DoxyAuthor}
Copyright (C) 2010 Robot\+Cub Consortium Copy\+Policy\+: Released under the terms of the GNU GPL v2.\+0. 