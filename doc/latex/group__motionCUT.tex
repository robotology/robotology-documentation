\hypertarget{group__motionCUT}{}\doxysection{motion\+CUT}
\label{group__motionCUT}\index{motionCUT@{motionCUT}}


Independent Motion Detector Version\+:1.\+0.  


Collaboration diagram for motion\+CUT\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=270pt]{group__motionCUT}
\end{center}
\end{figure}
Independent Motion Detector Version\+:1.\+0. 

\begin{DoxyAuthor}{Author}
Carlo Ciliberto \href{mailto:carlo.ciliberto@iit.it}{\texttt{ carlo.\+ciliberto@iit.\+it}}, Ugo Pattacini \href{mailto:ugo.pattacini@iit.it}{\texttt{ ugo.\+pattacini@iit.\+it}} ~\newline
 
\end{DoxyAuthor}
\begin{DoxyCopyright}{Copyright}
Released under the terms of the GNU GPL v2.\+0 
\end{DoxyCopyright}
\hypertarget{group__tutorial__perceptiveModels_intro_sec}{}\doxysubsection{Description}\label{group__tutorial__perceptiveModels_intro_sec}
The module exploits the pyramidal Lucas-\/\+Kanade algorithm to detect independent moving points over a selectable grid of nodes. The algorithm is designed in such a way that it works also -\/ and especially -\/ with moving cameras.

\begin{DoxyNote}{Note}
The name motion\+CUT stands for {\itshape motion Cover/\+Uncover Trick} and refers to its working principle that is detailed in the paper\+: Ciliberto C., Pattacini U., Natale L., Nori F. and Metta G., "{}Reexamining Lucas-\/\+Kanade Method for Real-\/\+Time Independent Motion Detection\+: Application to the \mbox{\hyperlink{namespaceiCub}{i\+Cub}} Humanoid Robot"{}, {\itshape IEEE/\+RSJ International Conference on Intelligent Robots and Systems}, San Francisco, CA, USA, 2011.

{\bfseries{If you\textquotesingle{}re going to use the motion\+CUT for your work, please quote it within any resulting publication}}.

We warmly suggest to use Open\+CV in conjunction with multi-\/threading layers such as TBB in order to achieve high performances for motion detection. Refer to the Open\+CV documentation for the details.

A video on \mbox{\hyperlink{namespaceiCub}{i\+Cub}} employing {\itshape motion\+CUT} can be seen \href{http://www.youtube.com/watch?v=Ql8Qe0oxHaY}{\texttt{ here}}.
\end{DoxyNote}
\hypertarget{group__tutorial__perceptiveModels_parameters_sec}{}\doxysubsection{Parameters}\label{group__tutorial__perceptiveModels_parameters_sec}

\begin{DoxyItemize}
\item -- name \+: Specifies the stem name of ports created by the module.
\item -- cover\+Xratio \+: Portion of the x-\/axis of the image covered by the grid nodes. Example\+: if the value is 0.\+75, then the central 3/4 of the x-\/axis will be covered with points.
\item -- cover\+Yratio \+: Portion of the y-\/axis of the image covered by the grid nodes. Example\+: if the value is 0.\+75, then the central 3/4 of the y-\/axis will be covered with points.
\item -- nodes\+Step \+: Step (in pixels) between two consecutive grid nodes.
\item -- win\+Size \+: Window size used by the algorithm.
\item -- recog\+Thres \+: Error threshold (in percentage) that allows discriminating between background and independent moving nodes as result of a matching carried out on the windows whose size is determined by \textquotesingle{}win\+Size\textquotesingle{} parameter. Usually very small values, such as 0.\+5\%, have to be used. Indicatively, a value of 0.\+5\% means that the two templates for the matching must have a similarity measure of 99.\+5\% to prevent the relative node from being recognized as independent moving node. Importantly, this parameter is also significantly affected by how well the matching is performed; as result, for increasing Open\+CV versions, the threshold needs to be reduced (e.\+g. 0.\+01\%).
\item -- adj\+Nodes\+Thres \+: This parameter allows filtering out the {\itshape salt-\/and-\/pepper} noise over the output image, by specifying the minimum number of adjacent nodes that must be active (i.\+e. that undergo the motion) in the neighbourhood of any single node to keep it active.
\item -- blob\+Min\+Size\+Thres \+: This parameter allows filtering out blobs whose nodes number is lower than the provided value.
\item -- frames\+Persistence \+: This parameter allows increasing the node persistence over consecutive frames implementing a sort of low-\/pass filter. Its value specifies the number of consecutive frames for which if a node gets active it is kept on.
\item -- crop\+Size \+: This parameter allows changing the the side of a squared cropping window placed on the center of the largest blob detected. Default value is {\itshape auto}, meaning that the cropping window will adapt to the size of the blob. 
\end{DoxyItemize}\hypertarget{group__rpcIdl_inputports_sec}{}\doxysubsection{Input Ports}\label{group__rpcIdl_inputports_sec}

\begin{DoxyItemize}
\item /motion\+CUT/img\+:i \mbox{[}yarp\+::sig\+::\+Image\mbox{]} \mbox{[}default carrier\+:udp\mbox{]}\+: Accepts the incoming images.
\end{DoxyItemize}\hypertarget{group__rpcIdl_outputports_sec}{}\doxysubsection{Output Ports}\label{group__rpcIdl_outputports_sec}

\begin{DoxyItemize}
\item /motion\+CUT/img\+:o \mbox{[}yarp\+::sig\+::\+Image\mbox{]} \mbox{[}default carrier\+:udp\mbox{]}\+: Outputs the input images with the grid layer on top. This port propagates the time-\/stamp carried by the input image.
\item /motion\+CUT/nodes\+:o \mbox{[}yarp\+::os\+::\+Bottle\mbox{]} \mbox{[}default carrier\+:udp\mbox{]}\+: Outputs the input x-\/y location of the currently active nodes in this format\+: (nodes\+Step \textquotesingle{}val\textquotesingle{}) (\textquotesingle{}n0.\+x\textquotesingle{} \textquotesingle{}n0.\+y\textquotesingle{}) (\textquotesingle{}n1.\+x\textquotesingle{} \textquotesingle{}n1.\+y\textquotesingle{}) ... . This port propagates the time-\/stamp carried by the input image.
\item /motion\+CUT/blobs\+:o \mbox{[}yarp\+::os\+::\+Bottle\mbox{]} \mbox{[}default carrier\+:udp\mbox{]}\+: Outputs the input x-\/y location of blobs centroids along with their size in this format\+: (\textquotesingle{}b0.\+cx\textquotesingle{} \textquotesingle{}b0.\+cy\textquotesingle{} \textquotesingle{}b0.\+size\textquotesingle{}) (\textquotesingle{}b1.\+cx\textquotesingle{} \textquotesingle{}b1.\+cy\textquotesingle{} \textquotesingle{}b1.\+size\textquotesingle{}) ... . The output blobs list is sorted according to their size (decreasing order). This port propagates the time-\/stamp carried by the input image.
\item /motion\+CUT/crop\+:o \mbox{[}yarp\+::sig\+::\+Image\mbox{]} \mbox{[}default carrier\+:udp\mbox{]}\+: Outputs a window of fixed size obtained from a ROI around the center of mass of the largest blob detected.
\item /motion\+CUT/opt\+:o \mbox{[}yarp\+::sig\+::\+Image\mbox{]} \mbox{[}default carrier\+:udp\mbox{]}\+: Outputs monochrome images containing just the grid nodes signaling independent movements. This port propagates the time-\/stamp carried by the input image.
\end{DoxyItemize}\hypertarget{group__rpcIdl_services_sec}{}\doxysubsection{Services}\label{group__rpcIdl_services_sec}

\begin{DoxyItemize}
\item /motion\+CUT/rpc \mbox{[}rpc-\/server\mbox{]}\+: \begin{DoxyVerb}   The parameters winSize, recogThres, adjNodesThres, blobMinSizeThres, framesPersistence, cropSize,
   verbosity can be changed/retrieved through the commands set/get. Moreover, the further
   switch inhibition can be accessed in order to enable/disable the motion detection at run-time.
\end{DoxyVerb}
 . This service is described in () 
\end{DoxyItemize}