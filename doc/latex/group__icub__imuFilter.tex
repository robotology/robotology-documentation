\hypertarget{group__icub__imuFilter}{}\doxysection{imu\+Filter}
\label{group__icub__imuFilter}\index{imuFilter@{imuFilter}}


imu\+Filter.\+h device driver for apply a filter to remove gyro bias  


Collaboration diagram for imu\+Filter\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=317pt]{group__icub__imuFilter}
\end{center}
\end{figure}
imu\+Filter.\+h device driver for apply a filter to remove gyro bias 

This device driver applies filtering to remove gyro bias. ~\newline
At startup it tries to attach directly to the IMU devcice of the specified robot or through a Multiple\+Analog\+Sensors\+Client(using the subdevice mechanism).\hypertarget{group__tutorial__perceptiveModels_parameters_sec}{}\doxysubsection{Parameters}\label{group__tutorial__perceptiveModels_parameters_sec}
--name(\char`\"{}imu\+Filter\char`\"{}) // module\textquotesingle{}s name; all the open ports will be tagged with the prefix /name.

--robot(\char`\"{}icub\char`\"{}) // name of the robot to connect to.

--gyro-\/order(5) // Order of the median filter for the gyro data

--mag-\/order(51) // Order of the median filter for the magnetometer data.

--mag-\/vel-\/thres-\/up(0.\+04) // Magnetic field up-\/threshold for stopping bias adaption.

--mag-\/vel-\/thres-\/down(0.\+02) // Magnetic field down-\/threshold for starting bias adaption.

--bias-\/gain(0.\+001) // Gain to integrate gyro bias.

--verbose(false) // If specified enable verbosity.

--proxy-\/remote // Required only if run with multipleanalgosensorsclient as subdevice, port prefix of the multipleanalogsensorsserver publishing the imu.

--proxy-\/local // Required only if run with multipleanalgosensorsclient as subdevice, port prefix of the multipleanalogsensorsclinet to be created.\hypertarget{group__icub__imuFilter_deployment}{}\doxysubsubsection{how to run the imu\+Filter}\label{group__icub__imuFilter_deployment}
The {\ttfamily imu\+Filter} can be instantiated using the yarprobotinterface with the following xml files\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{<?\textcolor{keyword}{xml} \textcolor{keyword}{version}=\textcolor{stringliteral}{"{}1.0"{}} \textcolor{keyword}{encoding}=\textcolor{stringliteral}{"{}UTF-\/8"{}} ?>}
\DoxyCodeLine{<!\textcolor{keyword}{DOCTYPE} \textcolor{keyword}{devices} \textcolor{keyword}{PUBLIC} \textcolor{stringliteral}{"{}-\///YARP//DTD yarprobotinterface 3.0//EN"{}} \textcolor{stringliteral}{"{}http://www.yarp.it/DTD/yarprobotinterfaceV3.0.dtd"{}}>}
\DoxyCodeLine{}
\DoxyCodeLine{}
\DoxyCodeLine{    <\textcolor{keywordtype}{device} \textcolor{keyword}{xmlns:xi}=\textcolor{stringliteral}{"{}http://www.w3.org/2001/XInclude"{}} \textcolor{keyword}{name}=\textcolor{stringliteral}{"{}head-\/imuFilter"{}} \textcolor{keyword}{type}=\textcolor{stringliteral}{"{}imuFilter"{}}>}
\DoxyCodeLine{        <\textcolor{keywordtype}{param} \textcolor{keyword}{name}=\textcolor{stringliteral}{"{}period"{}}>       10                  </\textcolor{keywordtype}{param}>}
\DoxyCodeLine{        <\textcolor{keywordtype}{param} \textcolor{keyword}{name}=\textcolor{stringliteral}{"{}name"{}}>     /\textcolor{keyword}{imuFilter}       </\textcolor{keywordtype}{param}>}
\DoxyCodeLine{}
\DoxyCodeLine{}
\DoxyCodeLine{        <\textcolor{keywordtype}{action} \textcolor{keyword}{phase}=\textcolor{stringliteral}{"{}startup"{}} \textcolor{keyword}{level}=\textcolor{stringliteral}{"{}5"{}} \textcolor{keyword}{type}=\textcolor{stringliteral}{"{}attach"{}}>}
\DoxyCodeLine{            <\textcolor{keywordtype}{paramlist} \textcolor{keyword}{name}=\textcolor{stringliteral}{"{}networks"{}}>}
\DoxyCodeLine{                \textcolor{comment}{Òçéb }}
\DoxyCodeLine{\textcolor{comment}{hõéb }}
\DoxyCodeLine{\textcolor{comment}{                     or in body\_part-\/ebX-\/inertials.xml -\/-\/>}}
\DoxyCodeLine{                <\textcolor{keywordtype}{elem} \textcolor{keyword}{name}=\textcolor{stringliteral}{"{}SetOfIMUs"{}}> \textcolor{keyword}{head-\/inertial}</\textcolor{keywordtype}{elem}>}
\DoxyCodeLine{            </\textcolor{keywordtype}{paramlist}>}
\DoxyCodeLine{        </\textcolor{keywordtype}{action}>}
\DoxyCodeLine{}
\DoxyCodeLine{        <\textcolor{keywordtype}{action} \textcolor{keyword}{phase}=\textcolor{stringliteral}{"{}shutdown"{}} \textcolor{keyword}{level}=\textcolor{stringliteral}{"{}5"{}} \textcolor{keyword}{type}=\textcolor{stringliteral}{"{}detach"{}} />}
\DoxyCodeLine{    </\textcolor{keywordtype}{device}}

\end{DoxyCode}



\begin{DoxyCode}{0}
\DoxyCodeLine{<?\textcolor{keyword}{xml} \textcolor{keyword}{version}=\textcolor{stringliteral}{"{}1.0"{}} \textcolor{keyword}{encoding}=\textcolor{stringliteral}{"{}UTF-\/8"{}} ?>}
\DoxyCodeLine{<!\textcolor{keyword}{DOCTYPE} \textcolor{keyword}{devices} \textcolor{keyword}{PUBLIC} \textcolor{stringliteral}{"{}-\///YARP//DTD yarprobotinterface 3.0//EN"{}} \textcolor{stringliteral}{"{}http://www.yarp.it/DTD/yarprobotinterfaceV3.0.dtd"{}}>}
\DoxyCodeLine{}
\DoxyCodeLine{}
\DoxyCodeLine{    <\textcolor{keywordtype}{device} \textcolor{keyword}{xmlns:xi}=\textcolor{stringliteral}{"{}http://www.w3.org/2001/XInclude"{}} \textcolor{keyword}{name}=\textcolor{stringliteral}{"{}head-\/imuFilter\_wrapper"{}} \textcolor{keyword}{type}=\textcolor{stringliteral}{"{}multipleanalogsensorsserver"{}}>}
\DoxyCodeLine{        <\textcolor{keywordtype}{param} \textcolor{keyword}{name}=\textcolor{stringliteral}{"{}period"{}}>       10                  </\textcolor{keywordtype}{param}>}
\DoxyCodeLine{        <\textcolor{keywordtype}{param} \textcolor{keyword}{name}=\textcolor{stringliteral}{"{}name"{}}>     /\textcolor{keyword}{imuFilter}       </\textcolor{keywordtype}{param}>}
\DoxyCodeLine{}
\DoxyCodeLine{}
\DoxyCodeLine{        <\textcolor{keywordtype}{action} \textcolor{keyword}{phase}=\textcolor{stringliteral}{"{}startup"{}} \textcolor{keyword}{level}=\textcolor{stringliteral}{"{}6"{}} \textcolor{keyword}{type}=\textcolor{stringliteral}{"{}attach"{}}>}
\DoxyCodeLine{            <\textcolor{keywordtype}{paramlist} \textcolor{keyword}{name}=\textcolor{stringliteral}{"{}networks"{}}>}
\DoxyCodeLine{                \textcolor{comment}{Òçéb }}
\DoxyCodeLine{\textcolor{comment}{hõéb }}
\DoxyCodeLine{\textcolor{comment}{                     or in body\_part-\/ebX-\/inertials.xml -\/-\/>}}
\DoxyCodeLine{                <\textcolor{keywordtype}{elem} \textcolor{keyword}{name}=\textcolor{stringliteral}{"{}SetOfIMUs"{}}> \textcolor{keyword}{head-\/imuFilter} </\textcolor{keywordtype}{elem}>}
\DoxyCodeLine{            </\textcolor{keywordtype}{paramlist}>}
\DoxyCodeLine{        </\textcolor{keywordtype}{action}>}
\DoxyCodeLine{}
\DoxyCodeLine{        <\textcolor{keywordtype}{action} \textcolor{keyword}{phase}=\textcolor{stringliteral}{"{}shutdown"{}} \textcolor{keyword}{level}=\textcolor{stringliteral}{"{}6"{}} \textcolor{keyword}{type}=\textcolor{stringliteral}{"{}detach"{}} />}
\DoxyCodeLine{    </\textcolor{keywordtype}{device}>}

\end{DoxyCode}


Alternatively it can be run using yarpdev through this command line\+:

yarpdev --device imu\+Filter --subdevice multipleanalogsensorsclient --proxy-\/remote MASServer\+Name --proxy-\/local MASClient\+Name\hypertarget{group__icub__imuFilter_usage_sec}{}\doxysubsection{Usage}\label{group__icub__imuFilter_usage_sec}
The canonical way to use the imu\+Filter is to instantiate in the client code a Multiple\+Analog\+Sensors\+Client specifying as $<$remote$>$ argument the $<$name$>$ used for the imu\+Filter.

Another way is reading through the streaming port $<$name$>$/measures\+:o.\hypertarget{group__tutorial__ationPrimitives_portsc_sec}{}\doxysubsection{Ports Created}\label{group__tutorial__ationPrimitives_portsc_sec}
The imu\+Filter device is executed combined with the network wrapper multipleanalogsensorsserver. It opens the followig ports\+:

Output ports\+:


\begin{DoxyItemize}
\item $<$name$>$/bias\+:o streams out a yarp\+::sig\+::\+Vector representing the current estimate of the gyro bias.
\item $<$name$>$/measures\+:o streams out the imu data filtered serialized through the yarp\+::os\+::\+Bottle.
\item $<$name$>$/rpc\+:o rpc to retrieve the Multiple\+Analog\+Sensors\+Metadata.
\end{DoxyItemize}

\begin{DoxyAuthor}{Author}
Ugo Pattacini, Nicolo\textquotesingle{} Genesio 
\end{DoxyAuthor}
