<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>iCub-main: objectsPropertiesCollector</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">iCub-main
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">objectsPropertiesCollector<div class="ingroups"><a class="el" href="group__icub__modules__all.html">Software</a> &raquo; <a class="el" href="group__icub__module.html">iCub modules</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Provides a on-line yarp-oriented database to collect properties of objects that are of interest for your specific application.  
</p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Collaboration diagram for objectsPropertiesCollector:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="group__objectsPropertiesCollector.png" border="0" usemap="#agroup____objectsPropertiesCollector" alt=""/></div>
<map name="agroup____objectsPropertiesCollector" id="agroup____objectsPropertiesCollector">
<area shape="rect" href="group__icub__module.html" title="This is the list of iCub modules, i.e." alt="" coords="5,5,116,31"/>
<area shape="rect" title="Provides a on&#45;line yarp&#45;oriented database to collect properties of objects that are of interest for y..." alt="" coords="164,5,357,31"/>
</map>
</div>
<p>Provides a on-line yarp-oriented database to collect properties of objects that are of interest for your specific application. </p>
<p>Copyright (C) 2010 RobotCub Consortium</p>
<p>Author: Ugo Pattacini</p>
<p>Date: first release 06/10/2010</p>
<p>CopyPolicy: Released under the terms of the GNU GPL v2.0.</p>
<h1><a class="anchor" id="intro_sec"></a>
Description</h1>
<p>Provides a on-line yarp-oriented database to collect properties such as positions, colors, shapes, grasping points and so on about objects that are of interest for your specific application, i.e. normally real objects that the robot can play with but ideally any kind of objects you can think of. The user can set, get, add, remove items and make queries to the database. <br  />
 Importantly, the module is capable of running in real-time.</p>
<h1><a class="anchor" id="proto_sec"></a>
Protocol</h1>
<p>Notation used hereafter to explain available commands: [.] is a Vocab, "." is a string, &lt;.&gt; is a Value (i.e. string, double, int) or a List (so that also complex properties such as images can be attached to the objects).</p>
<p>Reserved properties tags:</p>
<ul>
<li><em>id</em> is used to specify the unique integer identifier assigned to each stored item.</li>
<li><em>lifeTimer</em> specifies the forgetting factor given in seconds, meaning that after <em>lifeTimer</em> seconds since its creation, the item is removed automatically from the database. The user can read this property at run-time, can even modify it or assign it to an object after its creation.</li>
<li><em>propSet</em> is used to specify a list of properties over which execute the given command.</li>
</ul>
<p>The commands sent as bottles to the module port /&lt;moduleName&gt;/rpc are the following:</p>
<p><b>add</b> <br  />
<em>Format</em>: [add] (("prop0" &lt;val0&gt;) ("prop1" &lt;val1&gt;) ...) <br  />
<em>Reply</em>: [nack]; [ack] ("id" &lt;num&gt;) <br  />
 <em>Action</em>: a new item is added to the database with the given properties. <br  />
 A unique identifier is returned that is used to access the item.</p>
<p><b>del</b> <br  />
<em>Format</em>: [del] (("id" &lt;num&gt;) (propSet ("prop0" "prop1" ...))) <br  />
<em>Reply</em>: [nack]; [ack] <br  />
 <em>Action</em>: remove from the database the specified properties belonging to the item specified with the given identifier. <br  />
 The special command "del ((id &lt;num&gt;))" removes the whole item.<br  />
The special command "[del] (all)" clears the current content of the database.</p>
<p><b>get</b> <br  />
<em>Format</em>: [get] (("id" &lt;num&gt;) (propSet ("prop0" "prop1" ...))) <br  />
<em>Reply</em>: [nack]; [ack] (("prop0" &lt;val0&gt;) ("prop1" &lt;val1&gt;) ...) <br  />
 <em>Action</em>: return the required properties assigned to the stored item. <br  />
 The special command "[get] ((id &lt;num&gt;))" returns all the properties.</p>
<p><b>set</b> <br  />
<em>Format</em>: [set] (("id" &lt;num&gt;) ("prop0" &lt;val0&gt;) ...) <br  />
 <em>Reply</em>: [nack]; [ack] <br  />
 <em>Action</em>: add/modify properties of the stored item.</p>
<p><b>lock</b> <br  />
<em>Format</em>: [lock] (("id" &lt;num&gt;)) <br  />
 <em>Reply</em>: [nack]; [ack] <br  />
 <em>Action</em>: lock the specified item; this way only the port owner can modify it later on through a [set] request.</p>
<p><b>unlock</b> <br  />
<em>Format</em>: [unlock] (("id" &lt;num&gt;)) <br  />
 <em>Reply</em>: [nack]; [ack] <br  />
 <em>Action</em>: unlock the specified item.</p>
<p><b>owner</b> <br  />
<em>Format</em>: [owner] (("id" &lt;num&gt;)) <br  />
 <em>Reply</em>: [nack]; [ack] ("owner_name") <br  />
 <em>Action</em>: ask for the port name of the item owner; a name equal to "all" means that the item is not locked by any agent.</p>
<p><b>time</b> <br  />
<em>Format</em>: [time] (("id" &lt;num&gt;)) <br  />
 <em>Reply</em>: [nack]; [ack] (&lt;time&gt;) <br  />
 <em>Action</em>: retrieve the time elapsed in seconds from the last change occured on the stored item. <br  />
 Negative values of &lt;time&gt; indicates that the item has not been modified since it was loaded within the database.</p>
<p><b>dump</b> <br  />
 <em>Format</em>: [dump] <br  />
 <em>Reply</em>: [ack] <br  />
 <em>Action</em>: ask the database to dump on the screen all the stored items along with their properties.</p>
<p><b>synchronous broadcast</b> <br  />
 <em>Format</em>: [sync] [start] &lt;T&gt;/[stop] <br  />
 <em>Reply</em>: [nack]; [ack] <br  />
 <em>Action</em>: ask the database to start/stop broadcasting its content to a yarp port each &lt;T&gt; seconds. The parameter &lt;T&gt; is optional.</p>
<p><b>asynchronous broadcast</b> <br  />
 <em>Format</em>: [async] [on]/[off] <br  />
 <em>Reply</em>: [nack]; [ack] <br  />
 <em>Action</em>: ask the database to enable/disable the broadcast toward a yarp port whenever a change in the content occurs.</p>
<p><b>ask</b> <br  />
<em>Format</em>: [ask] (("prop0" "&lt;" &lt;val0&gt;) || ("prop1" "&gt;=" &lt;val1&gt;) ...) <br  />
 <em>Reply</em>: [nack]; [ack] ("id" (&lt;num0&gt; &lt;num1&gt; ...)) <br  />
 <em>Action</em>: query the database to find all the items whose properties match the conditions given in the command. You can compose multiple conditions using the boolean operators such as "||" for <em>or</em> and "&amp;&amp;" for <em>and</em> and each condition has to be expressed giving the property name, the value to compare with and the corresponding relational operator (e.g. "&gt;", "&lt;=", "==", ...).<br  />
 Commands such as "[ask] ((prop0) || (prop1))" will query whether the properties exist or not. <br  />
 The special command "[ask] 
(all)" returns the whole set of ids present within the database. <br  />
 In order to simplify the implementation, nested conditions such as (cond1) &amp;&amp; ((cond2) || (cond3)) are not handled; however, this is not a real limitation since nested conditions can be properly expanded: indeed, the previous example can be cast back to (cond1)&amp;&amp;(cond2) || (cond1)&amp;&amp;(cond3).</p>
<p><b>quit</b> <br  />
 <em>Format</em>: [quit] <br  />
 <em>Reply</em>: [ack] <br  />
 <em>Action</em>: quit the module.</p>
<h1><a class="anchor" id="lib_sec"></a>
Libraries</h1>
<ul>
<li>YARP libraries.</li>
</ul>
<h1><a class="anchor" id="parameters_sec"></a>
Parameters</h1>
<p>&ndash;name <em>moduleName</em> </p><ul>
<li>The parameter <em>moduleName</em> identifies the module's name; all the open ports will be tagged with the prefix /&lt;moduleName&gt;/. If not specified <em>objectsPropertiesCollector</em> is assumed.</li>
</ul>
<p>&ndash;db <em>dbFileName</em> </p><ul>
<li>The parameter <em>dbFileName</em> specifies the name of the database to load at startup (if already existing) and save at shutdown.</li>
</ul>
<p>&ndash;context <em>contextName</em> </p><ul>
<li>To specify the context where to search for the database file; <em>objectsPropertiesCollector</em> is the default context.</li>
</ul>
<p>&ndash;no-load-db</p><ul>
<li>If this options is given then an empty database is started.</li>
</ul>
<p>&ndash;no-save-db</p><ul>
<li>If this option is given then the content of database is not saved at shutdown.</li>
</ul>
<p>&ndash;sync-bc &lt;T&gt;</p><ul>
<li>Broadcast the database content each <em>T</em> seconds. If not specified, a period of 1.0 second is assumed.</li>
</ul>
<p>&ndash;async-bc</p><ul>
<li>Broadcast the database content whenever a change occurs.</li>
</ul>
<p>&ndash;stats</p><ul>
<li>Enable statistics printouts.</li>
</ul>
<h1><a class="anchor" id="portsa_sec"></a>
Ports Accessed</h1>
<p>None.</p>
<h1><a class="anchor" id="portsc_sec"></a>
Ports Created</h1>
<ul>
<li><em>/</em> &lt;moduleName&gt;/rpc the remote procedure call port used to send requests to the database and receive replies.</li>
<li><em>/</em> &lt;moduleName&gt;/broadcast:o the port used to broadcast the database content in synchronous and asynchronous mode.</li>
<li><em>/</em> &lt;moduleName&gt;/modify:i the port used to modify the database content complying with the data format implemented for the broadcast port.</li>
</ul>
<h1><a class="anchor" id="in_files_sec"></a>
Input Data Files</h1>
<p>None.</p>
<h1><a class="anchor" id="out_data_sec"></a>
Output Data Files</h1>
<p>None.</p>
<h1><a class="anchor" id="conf_file_sec"></a>
Configuration Files</h1>
<p>None.</p>
<h1><a class="anchor" id="tested_os_sec"></a>
Tested OS</h1>
<p>Linux and Windows.</p>
<h1><a class="anchor" id="reqexample_sec"></a>
Examples</h1>
<p>Several examples of the requests you may forward to the database:</p>
<div class="fragment"><div class="line">command: [<a class="code" href="namespacestrain_1_1dsp_1_1q15.html#af5c1f1ef9d4141e9b874abd615106401">add</a>] ((name ball) (color red) (<a class="code" href="compute__ekf__sym_8m.html#abe119338ba11d7fd166333a3941bc2c4">x</a> 1)) </div>
<div class="line">reply: [<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fdacee8aa0fdd5c1ef3adb3c501fd914bbf">ack</a>] (<span class="keywordtype">id</span> 0) </div>
<div class="line"> </div>
<div class="line">command: [<a class="code" href="namespacestrain_1_1dsp_1_1q15.html#af5c1f1ef9d4141e9b874abd615106401">add</a>] ((name octopus) (color blue) (<a class="code" href="compute__ekf__sym_8m.html#abe119338ba11d7fd166333a3941bc2c4">x</a> 2)) </div>
<div class="line">reply: [<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fdacee8aa0fdd5c1ef3adb3c501fd914bbf">ack</a>] (<span class="keywordtype">id</span> 1) </div>
<div class="line"> </div>
<div class="line">command: [set] ((<span class="keywordtype">id</span> 1) (<a class="code" href="compute__ekf__sym_8m.html#abe119338ba11d7fd166333a3941bc2c4">x</a> 3)) </div>
<div class="line">reply: [<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fdacee8aa0fdd5c1ef3adb3c501fd914bbf">ack</a>] </div>
<div class="line"> </div>
<div class="line">command: [get] ((<span class="keywordtype">id</span> 1)) </div>
<div class="line">reply: [<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fdacee8aa0fdd5c1ef3adb3c501fd914bbf">ack</a>] ((name octopus) (color blue) (<a class="code" href="compute__ekf__sym_8m.html#abe119338ba11d7fd166333a3941bc2c4">x</a> 3))</div>
<div class="line"> </div>
<div class="line">command: [ask] ((<a class="code" href="compute__ekf__sym_8m.html#abe119338ba11d7fd166333a3941bc2c4">x</a> &lt; 10) &amp;&amp; (color == blue)) </div>
<div class="line">reply: [<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fdacee8aa0fdd5c1ef3adb3c501fd914bbf">ack</a>] (id (1))</div>
<div class="ttc" id="aST__M1__dataType_8h_html_a15adfd049ddfba39d5286280f0bc13fdacee8aa0fdd5c1ef3adb3c501fd914bbf"><div class="ttname"><a href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fdacee8aa0fdd5c1ef3adb3c501fd914bbf">ack</a></div><div class="ttdeci">@ ack</div><div class="ttdef"><b>Definition:</b> <a href="ST__M1__dataType_8h_source.html#l00065">ST_M1_dataType.h:65</a></div></div>
<div class="ttc" id="acompute__ekf__sym_8m_html_abe119338ba11d7fd166333a3941bc2c4"><div class="ttname"><a href="compute__ekf__sym_8m.html#abe119338ba11d7fd166333a3941bc2c4">x</a></div><div class="ttdeci">x</div><div class="ttdef"><b>Definition:</b> <a href="compute__ekf__sym_8m_source.html#l00021">compute_ekf_sym.m:21</a></div></div>
<div class="ttc" id="anamespacestrain_1_1dsp_1_1q15_html_af5c1f1ef9d4141e9b874abd615106401"><div class="ttname"><a href="namespacestrain_1_1dsp_1_1q15.html#af5c1f1ef9d4141e9b874abd615106401">strain::dsp::q15::add</a></div><div class="ttdeci">Q15 add(const Q15 a, const Q15 b)</div><div class="ttdef"><b>Definition:</b> <a href="strain_8cpp_source.html#l01209">strain.cpp:1209</a></div></div>
</div><!-- fragment --><dl class="section author"><dt>Author</dt><dd>Ugo Pattacini </dd></dl>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Mar 26 2024 16:02:19 for iCub-main by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
