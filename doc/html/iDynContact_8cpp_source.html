<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>iCub-main: icub-main/src/libraries/iDyn/src/iDynContact.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">iCub-main
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_3650c6ebe9b4f4be91d544083c621a97.html">icub-main</a></li><li class="navelem"><a class="el" href="dir_c832326c483d60f4fafaf82b45eb7180.html">src</a></li><li class="navelem"><a class="el" href="dir_e37b8589c1598fb5caf001352e07eaab.html">libraries</a></li><li class="navelem"><a class="el" href="dir_20a85657c688488bc6be0f02432fff59.html">iDyn</a></li><li class="navelem"><a class="el" href="dir_2e802fcf6401ef91db976c65d88a91c7.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">iDynContact.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="iDynContact_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/* </span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">* Copyright (C) 2010 RobotCub Consortium, European Commission FP6 Project IST-004370</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">* Author: Andrea Del Prete</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">* email:   andrea.delprete@iit.it</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">* website: www.robotcub.org</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">* Permission is granted to copy, distribute, and/or modify this program</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">* under the terms of the GNU General Public License, version 2 or any</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">* later version published by the Free Software Foundation.</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">*</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">* A copy of the license can be found at</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">* http://www.robotcub.org/icub/license/gpl.txt</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">*</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">* This program is distributed in the hope that it will be useful, but</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">* WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">* Public License for more details</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160; </div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="iDynContact_8h.html">iCub/iDyn/iDynContact.h</a>&gt;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &lt;yarp/math/SVD.h&gt;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160; </div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="keyword">using namespace </span>std;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="keyword">using namespace </span>yarp::sig;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="keyword">using namespace </span>yarp::math;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespaceiCub_1_1iKin.html">iCub::iKin</a>;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespaceiCub_1_1iDyn.html">iCub::iDyn</a>;</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespaceiCub_1_1ctrl.html">iCub::ctrl</a>;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespaceiCub_1_1skinDynLib.html">iCub::skinDynLib</a>;</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160; </div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160; </div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160; </div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment">//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">// IDYN CONTACT SOLVER</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span></div>
<div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#aefcb2c949d8465c17bd799dcf97ac7f3">   39</a></span>&#160;iDynContactSolver::iDynContactSolver(<a class="code" href="classiCub_1_1iDyn_1_1iDynChain.html">iDynChain</a> *_c, <span class="keyword">const</span> <span class="keywordtype">string</span> &amp;_info, <span class="keyword">const</span> <a class="code" href="namespaceiCub_1_1iDyn.html#a6b03dffbe5b7a4931b1d7afeff96b362">NewEulMode</a> _mode, <a class="code" href="namespaceiCub_1_1skinDynLib.html#add9bfc7bd9eeccb70837cfb9401a46fd">BodyPart</a> _bodyPart, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> verb)</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;:<a class="code" href="classiCub_1_1iDyn_1_1iDynSensor.html">iDynSensor</a>(_c, _info, _mode, verb), bodyPart(_bodyPart){}</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span></div>
<div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#ad1650f847cf3c5de91ce41bddc4a194b">   42</a></span>&#160;<a class="code" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#aefcb2c949d8465c17bd799dcf97ac7f3">iDynContactSolver::iDynContactSolver</a>(<a class="code" href="classiCub_1_1iDyn_1_1iDynChain.html">iDynChain</a> *_c, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> sensLink, <a class="code" href="classiCub_1_1iDyn_1_1SensorLinkNewtonEuler.html">SensorLinkNewtonEuler</a> *sensor, </div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;                                    <span class="keyword">const</span> <span class="keywordtype">string</span> &amp;_info, <span class="keyword">const</span> <a class="code" href="namespaceiCub_1_1iDyn.html#a6b03dffbe5b7a4931b1d7afeff96b362">NewEulMode</a> _mode, <a class="code" href="namespaceiCub_1_1skinDynLib.html#add9bfc7bd9eeccb70837cfb9401a46fd">BodyPart</a> _bodyPart, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> verb)</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;:<a class="code" href="classiCub_1_1iDyn_1_1iDynSensor.html">iDynSensor</a>(_c, _info, _mode, verb), bodyPart(_bodyPart)</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;{</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <a class="code" href="classiCub_1_1iDyn_1_1iDynInvSensor.html#ad0b547d3af86e724581a0a423e5a3ba4">lSens</a> = sensLink;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <a class="code" href="classiCub_1_1iDyn_1_1iDynInvSensor.html#ac3345e0c98effaecc39ec3c227a7df5c">sens</a> = sensor;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;}</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<a class="code" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#aefcb2c949d8465c17bd799dcf97ac7f3">iDynContactSolver::iDynContactSolver</a>(<a class="code" href="classiCub_1_1iDyn_1_1iDynChain.html">iDynChain</a> *_c, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> sensLink, <span class="keyword">const</span> Matrix &amp;_H, <span class="keyword">const</span> Matrix &amp;_HC, <span class="keywordtype">double</span> _m, </div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;                                     <span class="keyword">const</span> Matrix &amp;_I, <span class="keyword">const</span> <span class="keywordtype">string</span> &amp;_info, <span class="keyword">const</span> <a class="code" href="namespaceiCub_1_1iDyn.html#a6b03dffbe5b7a4931b1d7afeff96b362">NewEulMode</a> _mode, <a class="code" href="namespaceiCub_1_1skinDynLib.html#add9bfc7bd9eeccb70837cfb9401a46fd">BodyPart</a> _bodyPart, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> verb)</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;:<a class="code" href="classiCub_1_1iDyn_1_1iDynSensor.html">iDynSensor</a>(_c, sensLink, _H, _HC, _m, _I, _info, _mode, verb), bodyPart(_bodyPart){}</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span></div>
<div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a448d112ec6bcd5b6e5cb372e0dd5839a">   54</a></span>&#160;<a class="code" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a448d112ec6bcd5b6e5cb372e0dd5839a">iDynContactSolver::~iDynContactSolver</a>(){}</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span></div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#af3f91e18b533b4faf0ffa8b6a20e661c">   56</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#af3f91e18b533b4faf0ffa8b6a20e661c">iDynContactSolver::addContact</a>(<span class="keyword">const</span> <a class="code" href="classiCub_1_1skinDynLib_1_1dynContact.html">dynContact</a> &amp;contact)</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;{</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="comment">// check that the contact body part is the same of the sensor</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="keywordflow">if</span>(contact.<a class="code" href="classiCub_1_1skinDynLib_1_1dynContact.html#a697bbda77e5876ddbee01b8ee908ce7e">getBodyPart</a>()!=<a class="code" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#aed4cf2bd1123ef778afb80eeb69366a3">bodyPart</a>)</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    {</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="classiCub_1_1iDyn_1_1iDynInvSensor.html#ad10428c6d5b061f647e2c79acb03261f">verbose</a>)</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;            printf(<span class="stringliteral">&quot;Error: trying to add a %s contact to a %s sensor!\n&quot;</span>, contact.<a class="code" href="classiCub_1_1skinDynLib_1_1dynContact.html#a88c85d4686167625b23bd968e8b6e708">getBodyPartName</a>().c_str(), <a class="code" href="namespaceiCub_1_1skinDynLib.html#a6855d36a10aba372ee0765ce87cf7d77">BodyPart_s</a>[<a class="code" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#aed4cf2bd1123ef778afb80eeb69366a3">bodyPart</a>].c_str());</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    }</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <a class="code" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a7bef85069778152085e9e748fba2dbeb">contactList</a>.push_back(contact);</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;}</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span></div>
<div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a37784019c5862a19d4e8028ca6debd18">   69</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a37784019c5862a19d4e8028ca6debd18">iDynContactSolver::addContacts</a>(<span class="keyword">const</span> <a class="code" href="classiCub_1_1skinDynLib_1_1dynContactList.html">dynContactList</a> &amp;contacts)</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;{</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="comment">//contactList.insert(contactList.end(), contacts.begin(), contacts.end());</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="keywordtype">bool</span> res=<span class="keyword">true</span>;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="keywordflow">for</span>(dynContactList::const_iterator it=contacts.begin();it!=contacts.end();it++)</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        res &amp;= <a class="code" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#af3f91e18b533b4faf0ffa8b6a20e661c">addContact</a>(*it);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;}</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span></div>
<div class="line"><a name="l00078"></a><span class="lineno"><a class="line" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a8f6512c832a87cd27f238c8e9839bff7">   78</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a8f6512c832a87cd27f238c8e9839bff7">iDynContactSolver::clearContactList</a>()</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;{</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a7bef85069778152085e9e748fba2dbeb">contactList</a>.empty())</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        <a class="code" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a7bef85069778152085e9e748fba2dbeb">contactList</a>.clear();</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;}</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment">//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="keyword">const</span> <a class="code" href="classiCub_1_1skinDynLib_1_1dynContactList.html">dynContactList</a>&amp; <a class="code" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a82296850c1b0cbc1cd4321d5da7e1940">iDynContactSolver::computeExternalContacts</a>(<span class="keyword">const</span> Vector &amp;FMsens)</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;{</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="classiCub_1_1iDyn_1_1iDynSensor.html#a13390f3a4c9d2b50c40cafbc9c40865e">setSensorMeasures</a>(FMsens))                      <span class="comment">// set the sensor measure</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a568322437a2c34200beb9f156e5f50b2">nullList</a>;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a82296850c1b0cbc1cd4321d5da7e1940">computeExternalContacts</a>();</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;}</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span></div>
<div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a82296850c1b0cbc1cd4321d5da7e1940">   91</a></span>&#160;<span class="keyword">const</span> <a class="code" href="classiCub_1_1skinDynLib_1_1dynContactList.html">dynContactList</a>&amp; <a class="code" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a82296850c1b0cbc1cd4321d5da7e1940">iDynContactSolver::computeExternalContacts</a>()</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;{</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a7bef85069778152085e9e748fba2dbeb">contactList</a>.size()==0)</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    {</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        <span class="comment">// if there are no contacts assume a contact at the end effector</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        <a class="code" href="classiCub_1_1skinDynLib_1_1dynContact.html">dynContact</a> c(<a class="code" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#aed4cf2bd1123ef778afb80eeb69366a3">bodyPart</a>, <a class="code" href="classiCub_1_1iDyn_1_1iDynInvSensor.html#afd5f31dac8757dd0223178d89c7364c2">chain</a>-&gt;<a class="code" href="classiCub_1_1iKin_1_1iKinChain.html#acfd767b8edb2f4b26c0af2317dd08cc0">getN</a>()-1, <a class="code" href="compute__ekf__sym_8m.html#a35baefda5ec044ac7c1f5a41815b5b45">zeros</a>(3));</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <a class="code" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a7bef85069778152085e9e748fba2dbeb">contactList</a>.push_back(c);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    }</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160; </div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="comment">// initialize the dynamics at the end effector and the kinematics at the base</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classiCub_1_1iDyn_1_1iDynInvSensor.html#afd5f31dac8757dd0223178d89c7364c2">chain</a>-&gt;<a class="code" href="classiCub_1_1iDyn_1_1iDynChain.html#a5867a432b6e22f661fb24cbe3fba7400">NE</a> == NULL)</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    {</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        <a class="code" href="classiCub_1_1iDyn_1_1iDynInvSensor.html#afd5f31dac8757dd0223178d89c7364c2">chain</a>-&gt;<a class="code" href="classiCub_1_1iDyn_1_1iDynChain.html#a62e5118e60d93cc13302d3093693db35">prepareNewtonEuler</a>(<a class="code" href="classiCub_1_1iDyn_1_1iDynInvSensor.html#a517c69012c9de5535b9e3a0872f2c336">mode</a>);</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        <a class="code" href="classiCub_1_1iDyn_1_1iDynInvSensor.html#afd5f31dac8757dd0223178d89c7364c2">chain</a>-&gt;<a class="code" href="classiCub_1_1iDyn_1_1iDynChain.html#a822ddb0c3990d159b967f49af31a18da">initNewtonEuler</a>();       <span class="comment">// here I assume the chain base is still</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    }</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    </div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="comment">// KINEMATIC PHASE</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <a class="code" href="classiCub_1_1iDyn_1_1iDynInvSensor.html#afd5f31dac8757dd0223178d89c7364c2">chain</a>-&gt;<a class="code" href="classiCub_1_1iDyn_1_1iDynChain.html#a388b3a98a05bfd8836f34403db146298">computeKinematicNewtonEuler</a>();               <span class="comment">// compute kinematics of all the links</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <a class="code" href="classiCub_1_1iDyn_1_1iDynInvSensor.html#ac3345e0c98effaecc39ec3c227a7df5c">sens</a>-&gt;<a class="code" href="classiCub_1_1iDyn_1_1SensorLinkNewtonEuler.html#a9774fb9400e060ed935ae066c80d226f">ForwardAttachToLink</a>(<a class="code" href="classiCub_1_1iDyn_1_1iDynInvSensor.html#afd5f31dac8757dd0223178d89c7364c2">chain</a>-&gt;<a class="code" href="classiCub_1_1iDyn_1_1iDynChain.html#ace1a833900dd414bc1dc6d4cd4555c96">refLink</a>(<a class="code" href="classiCub_1_1iDyn_1_1iDynInvSensor.html#ad0b547d3af86e724581a0a423e5a3ba4">lSens</a>));   <span class="comment">// compute kinematics of the sensor sub-link</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160; </div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="comment">// FIND THE BOUND OF THE SUBCHAIN WHERE EXT CONTACTS ARE APPLIED</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> firstContactLink, lastContactLink;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <a class="code" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#aeffe038ffba9cd9e7b5d71e0b9657c5f">findContactSubChain</a>(firstContactLink, lastContactLink);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="comment">/*if(verbose)</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment">        fprintf(stdout, &quot;Estimating %d contacts between link %d and %d\n&quot;, </span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment">            contactList.size(), firstContactLink, lastContactLink);*/</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keywordflow">if</span>(firstContactLink&lt;<a class="code" href="classiCub_1_1iDyn_1_1iDynInvSensor.html#ad0b547d3af86e724581a0a423e5a3ba4">lSens</a>)</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    {</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="classiCub_1_1iDyn_1_1iDynInvSensor.html#ad10428c6d5b061f647e2c79acb03261f">verbose</a>)</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;            <a class="code" href="saveNetwork_8m.html#a0eba6f64b9c26507a877bcb0c4f270e2">fprintf</a>(stderr, <span class="stringliteral">&quot;Contacts before the sensor link. Impossible to compute the external contacts!\n&quot;</span>);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a568322437a2c34200beb9f156e5f50b2">nullList</a>;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    }</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160; </div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="comment">// PROPAGATE WRENCH FORWARD, UP TO THE FIRST LINK A CONTACT IS APPLIED TO</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <a class="code" href="classiCub_1_1iDyn_1_1iDynInvSensor.html#ac3345e0c98effaecc39ec3c227a7df5c">sens</a>-&gt;<a class="code" href="classiCub_1_1iDyn_1_1SensorLinkNewtonEuler.html#a640c3b09562694af030f87c2918a97f7">ForwardForcesMomentsToLink</a>(<a class="code" href="classiCub_1_1iDyn_1_1iDynInvSensor.html#afd5f31dac8757dd0223178d89c7364c2">chain</a>-&gt;<a class="code" href="classiCub_1_1iDyn_1_1iDynChain.html#ace1a833900dd414bc1dc6d4cd4555c96">refLink</a>(<a class="code" href="classiCub_1_1iDyn_1_1iDynInvSensor.html#ad0b547d3af86e724581a0a423e5a3ba4">lSens</a>));    <span class="comment">// propagate wrench from sensor to hosting link</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="keywordflow">if</span>(firstContactLink==<a class="code" href="classiCub_1_1iDyn_1_1iDynInvSensor.html#ad0b547d3af86e724581a0a423e5a3ba4">lSens</a>)</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    {</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        <span class="comment">// if there&#39;re contacts on the sensor link we need to propagate the wrench to the previous link</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        <span class="comment">// (here we are assuming that the contacts are detected by the F/T sensor, no matter their application point)</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        <a class="code" href="classiCub_1_1iDyn_1_1iDynInvSensor.html#afd5f31dac8757dd0223178d89c7364c2">chain</a>-&gt;<a class="code" href="classiCub_1_1iDyn_1_1iDynChain.html#a5867a432b6e22f661fb24cbe3fba7400">NE</a>-&gt;<a class="code" href="classiCub_1_1iDyn_1_1OneChainNewtonEuler.html#aa8744f6311596b8db2be424f72bd4f2f">BackwardWrenchFromAtoB</a>(<a class="code" href="classiCub_1_1iDyn_1_1iDynInvSensor.html#ad0b547d3af86e724581a0a423e5a3ba4">lSens</a>-1, <a class="code" href="classiCub_1_1iDyn_1_1iDynInvSensor.html#ad0b547d3af86e724581a0a423e5a3ba4">lSens</a>-1);</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    }</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(firstContactLink&gt;<a class="code" href="classiCub_1_1iDyn_1_1iDynInvSensor.html#ad0b547d3af86e724581a0a423e5a3ba4">lSens</a>+1)</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        <a class="code" href="classiCub_1_1iDyn_1_1iDynInvSensor.html#afd5f31dac8757dd0223178d89c7364c2">chain</a>-&gt;<a class="code" href="classiCub_1_1iDyn_1_1iDynChain.html#a5867a432b6e22f661fb24cbe3fba7400">NE</a>-&gt;<a class="code" href="classiCub_1_1iDyn_1_1OneChainNewtonEuler.html#afecac3e906aace18401c150dae21ec3e">ForwardWrenchFromAtoB</a>(<a class="code" href="classiCub_1_1iDyn_1_1iDynInvSensor.html#ad0b547d3af86e724581a0a423e5a3ba4">lSens</a>+1, firstContactLink-1);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160; </div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="comment">// PROPAGATE WRENCH BACKWARD, FROM THE E.E. UP TO THE LAST LINK A CONTACT IS APPLIED TO</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <a class="code" href="classiCub_1_1iDyn_1_1iDynInvSensor.html#afd5f31dac8757dd0223178d89c7364c2">chain</a>-&gt;<a class="code" href="classiCub_1_1iDyn_1_1iDynChain.html#a5867a432b6e22f661fb24cbe3fba7400">NE</a>-&gt;<a class="code" href="classiCub_1_1iDyn_1_1OneChainNewtonEuler.html#a3813936102cee1b63238d6cb51b65a7e">initWrenchEnd</a>(<a class="code" href="compute__ekf__sym_8m.html#a35baefda5ec044ac7c1f5a41815b5b45">zeros</a>(3), <a class="code" href="compute__ekf__sym_8m.html#a35baefda5ec044ac7c1f5a41815b5b45">zeros</a>(3));</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <a class="code" href="classiCub_1_1iDyn_1_1iDynInvSensor.html#afd5f31dac8757dd0223178d89c7364c2">chain</a>-&gt;<a class="code" href="classiCub_1_1iDyn_1_1iDynChain.html#a5867a432b6e22f661fb24cbe3fba7400">NE</a>-&gt;<a class="code" href="classiCub_1_1iDyn_1_1OneChainNewtonEuler.html#aa8744f6311596b8db2be424f72bd4f2f">BackwardWrenchFromAtoB</a>(<a class="code" href="classiCub_1_1iDyn_1_1iDynInvSensor.html#afd5f31dac8757dd0223178d89c7364c2">chain</a>-&gt;<a class="code" href="classiCub_1_1iKin_1_1iKinChain.html#acfd767b8edb2f4b26c0af2317dd08cc0">getN</a>()-1, lastContactLink);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160; </div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="comment">// BUILD AND SOLVE THE LINEAR SYSTEM AX=B RELATIVE TO THE CONTACT SUB-CHAIN</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="comment">// the reference frame is the &lt;firstContactLink-1&gt; </span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    Matrix <a class="code" href="sine_8m.html#a3b98e2dffc6cb06a89dcb0d5c60a0206">A</a> = <a class="code" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a7f0ad3049ce0d6aaf56d947e3ee8734b">buildA</a>(firstContactLink, lastContactLink);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    Vector B = <a class="code" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a7b6d4003bcc1bc93d30c964302d32203">buildB</a>(firstContactLink, lastContactLink);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    Matrix pinv_A = pinv(<a class="code" href="sine_8m.html#a3b98e2dffc6cb06a89dcb0d5c60a0206">A</a>, <a class="code" href="namespaceiCub_1_1iDyn.html#a0182f1dc2b63d75421ac043930229cf6">TOLLERANCE</a>);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    Vector X = pinv_A * B;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    </div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="comment">// SET THE COMPUTED VALUES IN THE CONTACT LIST</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> unknownInd = 0;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    Matrix <a class="code" href="compute__ekf__fast_8m.html#afaafc315b95987fc2b071bcd8f698b81">H</a>, R;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordflow">for</span>(dynContactList::iterator it = <a class="code" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a7bef85069778152085e9e748fba2dbeb">contactList</a>.begin(); it!=<a class="code" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a7bef85069778152085e9e748fba2dbeb">contactList</a>.end(); it++)</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    {</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <span class="keywordflow">if</span>(it-&gt;isForceDirectionKnown())</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;            it-&gt;setForceModule( X(unknownInd++));</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        {</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;            <a class="code" href="compute__ekf__fast_8m.html#afaafc315b95987fc2b071bcd8f698b81">H</a> = <a class="code" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#af884c0a02b55d58a30cdc2c5e88a33bd">getHFromAtoB</a>(it-&gt;getLinkNumber(), firstContactLink-1);</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;            R = <a class="code" href="compute__ekf__fast_8m.html#afaafc315b95987fc2b071bcd8f698b81">H</a>.submatrix(0,2,0,2);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            it-&gt;setForce( R * X.subVector(unknownInd, unknownInd+2));</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            unknownInd += 3;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;            <span class="keywordflow">if</span>(!it-&gt;isMomentKnown())</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;            {</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                it-&gt;setMoment(R * X.subVector(unknownInd, unknownInd+2));</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                unknownInd += 3;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;            }</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        }</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    }</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160; </div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="comment">//propagate the wrench backward from the sensor</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordflow">if</span>(firstContactLink==<a class="code" href="classiCub_1_1iDyn_1_1iDynInvSensor.html#ad0b547d3af86e724581a0a423e5a3ba4">lSens</a>) <span class="comment">// if there is a contact on the sensor link you have to propagate the wrench of the previous link</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <a class="code" href="classiCub_1_1iDyn_1_1iDynInvSensor.html#afd5f31dac8757dd0223178d89c7364c2">chain</a>-&gt;<a class="code" href="classiCub_1_1iDyn_1_1iDynChain.html#a5867a432b6e22f661fb24cbe3fba7400">NE</a>-&gt;<a class="code" href="classiCub_1_1iDyn_1_1OneChainNewtonEuler.html#aa98938cee37439723e2fb26d0e6d4b6a">BackwardWrenchToBase</a>(<a class="code" href="classiCub_1_1iDyn_1_1iDynInvSensor.html#ad0b547d3af86e724581a0a423e5a3ba4">lSens</a>-1);</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <a class="code" href="classiCub_1_1iDyn_1_1iDynInvSensor.html#afd5f31dac8757dd0223178d89c7364c2">chain</a>-&gt;<a class="code" href="classiCub_1_1iDyn_1_1iDynChain.html#a5867a432b6e22f661fb24cbe3fba7400">NE</a>-&gt;<a class="code" href="classiCub_1_1iDyn_1_1OneChainNewtonEuler.html#aa98938cee37439723e2fb26d0e6d4b6a">BackwardWrenchToBase</a>(<a class="code" href="classiCub_1_1iDyn_1_1iDynInvSensor.html#ad0b547d3af86e724581a0a423e5a3ba4">lSens</a>);</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160; </div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="comment">// RETURN A CONST REFERENCE TO THE CONTACT LIST</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a7bef85069778152085e9e748fba2dbeb">contactList</a>;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;}</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment">//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span></div>
<div class="line"><a name="l00177"></a><span class="lineno"><a class="line" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a8f8d87314fe65b5d3026653b516ed7f9">  177</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a8f8d87314fe65b5d3026653b516ed7f9">iDynContactSolver::computeWrenchFromSensorNewtonEuler</a>()</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;{</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="comment">// in the external contact computations also the internal wrenches</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="comment">// are computed, from the base to the end effector</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="comment">// (except for the contact subchain, but now we suppose only 1 contact at a time)</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <a class="code" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a82296850c1b0cbc1cd4321d5da7e1940">computeExternalContacts</a>();</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160; </div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="comment">// now we can compute all torques</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <a class="code" href="classiCub_1_1iDyn_1_1iDynInvSensor.html#afd5f31dac8757dd0223178d89c7364c2">chain</a>-&gt;<a class="code" href="classiCub_1_1iDyn_1_1iDynChain.html#a5867a432b6e22f661fb24cbe3fba7400">NE</a>-&gt;<a class="code" href="classiCub_1_1iDyn_1_1OneChainNewtonEuler.html#ab12a4ce116509a3240c8312d595733b7">computeTorques</a>();</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;}</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment">//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span></div>
<div class="line"><a name="l00188"></a><span class="lineno"><a class="line" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a7f0ad3049ce0d6aaf56d947e3ee8734b">  188</a></span>&#160;Matrix <a class="code" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a7f0ad3049ce0d6aaf56d947e3ee8734b">iDynContactSolver::buildA</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> firstContactLink, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> lastContactLink)</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;{</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> unknownNum = <a class="code" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a6c5d39327caca3ae3f93212b9cd3e177">getUnknownNumber</a>();</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    Matrix <a class="code" href="sine_8m.html#a3b98e2dffc6cb06a89dcb0d5c60a0206">A</a>(6, unknownNum);</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160; </div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="comment">// For each contact add some columns to A:</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="comment">//    * wrench: add 6 columns, 3 composed by I_3 above and the S(r_E) below, 3 composed by 0_3 above and I_3 below</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="comment">//    * pure force: add 3 columns composed by I_3 above and the S(r_E) below</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="comment">//    * force module: add 1 column composed by the force direction unit vector above and the cross product between </span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="comment">//          the contact point and the force direction unit vector below    </span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> colInd = 0;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    Matrix <a class="code" href="compute__ekf__fast_8m.html#afaafc315b95987fc2b071bcd8f698b81">H</a>, R;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    Matrix eye3x3 = eye(3,3);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    Matrix zero3x3 = <a class="code" href="compute__ekf__sym_8m.html#a35baefda5ec044ac7c1f5a41815b5b45">zeros</a>(3,3);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    Vector r, temp1, temp2;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    dynContactList::const_iterator it = <a class="code" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a7bef85069778152085e9e748fba2dbeb">contactList</a>.begin();</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160; </div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordflow">for</span>(; it!=<a class="code" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a7bef85069778152085e9e748fba2dbeb">contactList</a>.end(); it++)</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    {</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        <span class="comment">// compute the rototranslation matrix from &lt;firstContactLink-1&gt; to the current link</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        <a class="code" href="compute__ekf__fast_8m.html#afaafc315b95987fc2b071bcd8f698b81">H</a> = <a class="code" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#af884c0a02b55d58a30cdc2c5e88a33bd">getHFromAtoB</a>(firstContactLink-1, it-&gt;getLinkNumber());</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        R = <a class="code" href="compute__ekf__fast_8m.html#afaafc315b95987fc2b071bcd8f698b81">H</a>.submatrix(0,2,0,2);</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        r = <a class="code" href="compute__ekf__fast_8m.html#afaafc315b95987fc2b071bcd8f698b81">H</a>.subcol(0,3,3);</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160; </div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        <span class="keywordflow">if</span>(it-&gt;isForceDirectionKnown())</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        {                    <span class="comment">// 1 UNKNOWN: FORCE MODULE</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            temp1 = R*it-&gt;getForceDirection();       <span class="comment">// force direction unit vector</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            temp2 = R*it-&gt;getCoP();</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;            temp2 += r;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;            <a class="code" href="sine_8m.html#a3b98e2dffc6cb06a89dcb0d5c60a0206">A</a>.setSubcol(temp1, 0, colInd);</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;            <a class="code" href="sine_8m.html#a3b98e2dffc6cb06a89dcb0d5c60a0206">A</a>.setSubcol(<a class="code" href="group__Maths.html#gaf7eef875cc229edd04aaa3e8fcbad989">cross</a>(temp2, temp1), 3, colInd++);</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        }</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        {                                              <span class="comment">// 3 UNKNOWNS: FORCE</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;            temp1 = R*it-&gt;getCoP();</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;            temp1 += r;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            <a class="code" href="sine_8m.html#a3b98e2dffc6cb06a89dcb0d5c60a0206">A</a>.setSubmatrix(eye3x3, 0, colInd);</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;            <a class="code" href="sine_8m.html#a3b98e2dffc6cb06a89dcb0d5c60a0206">A</a>.setSubmatrix(crossProductMatrix(temp1), 3, colInd);</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;            colInd += 3;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;            </div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;            <span class="keywordflow">if</span>(!it-&gt;isMomentKnown())</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;            {                       <span class="comment">// 6 UNKNOWNS: FORCE AND MOMENT</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                <a class="code" href="sine_8m.html#a3b98e2dffc6cb06a89dcb0d5c60a0206">A</a>.setSubmatrix(zero3x3, 0, colInd);</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                <a class="code" href="sine_8m.html#a3b98e2dffc6cb06a89dcb0d5c60a0206">A</a>.setSubmatrix(eye3x3, 3, colInd);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                colInd += 3;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;            }</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        }</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    }</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="sine_8m.html#a3b98e2dffc6cb06a89dcb0d5c60a0206">A</a>;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;}</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="comment">//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span></div>
<div class="line"><a name="l00239"></a><span class="lineno"><a class="line" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a7b6d4003bcc1bc93d30c964302d32203">  239</a></span>&#160;Vector <a class="code" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a7b6d4003bcc1bc93d30c964302d32203">iDynContactSolver::buildB</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> firstContactLink, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> lastContactLink)</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;{</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    Matrix <a class="code" href="compute__ekf__fast_8m.html#afaafc315b95987fc2b071bcd8f698b81">H</a>, R;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    Vector r;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160; </div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="comment">// Initialize the force part of the B vector (first 3 components) as:</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="comment">//    * minus the force applied on the first link</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="comment">//    * plus the force exchanged by the last link on the next one</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    Matrix Hlast = <a class="code" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#af884c0a02b55d58a30cdc2c5e88a33bd">getHFromAtoB</a>(firstContactLink-1, lastContactLink);</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    Matrix Rlast = Hlast.submatrix(0,2,0,2);</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    Vector rLast = Hlast.subcol(0,3,3);</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="comment">//Vector rLast = Hlast.submatrix(0,2,3,3).getCol(0);</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    Vector Bforce = Rlast * <a class="code" href="classiCub_1_1iDyn_1_1iDynInvSensor.html#afd5f31dac8757dd0223178d89c7364c2">chain</a>-&gt;<a class="code" href="classiCub_1_1iDyn_1_1iDynChain.html#a3eebc2452755786abf4d3115380e146d">getForce</a>(lastContactLink); </div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    Bforce -= <a class="code" href="classiCub_1_1iDyn_1_1iDynInvSensor.html#afd5f31dac8757dd0223178d89c7364c2">chain</a>-&gt;<a class="code" href="classiCub_1_1iDyn_1_1iDynChain.html#a3eebc2452755786abf4d3115380e146d">getForce</a>(firstContactLink-1);</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160; </div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="comment">// For each link add the mass multiplied by the linear accelleration of the COM</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=firstContactLink; i&lt;=lastContactLink; i++)</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    {</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        <a class="code" href="compute__ekf__fast_8m.html#afaafc315b95987fc2b071bcd8f698b81">H</a> = <a class="code" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#af884c0a02b55d58a30cdc2c5e88a33bd">getHFromAtoB</a>(firstContactLink-1, i);</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        R = <a class="code" href="compute__ekf__fast_8m.html#afaafc315b95987fc2b071bcd8f698b81">H</a>.submatrix(0,2,0,2);</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        Bforce += <a class="code" href="classiCub_1_1iDyn_1_1iDynInvSensor.html#afd5f31dac8757dd0223178d89c7364c2">chain</a>-&gt;<a class="code" href="classiCub_1_1iDyn_1_1iDynChain.html#a84332234635c4a40641dc133d33089f6">getMass</a>(i) * R * <a class="code" href="classiCub_1_1iDyn_1_1iDynInvSensor.html#afd5f31dac8757dd0223178d89c7364c2">chain</a>-&gt;<a class="code" href="classiCub_1_1iDyn_1_1iDynChain.html#a13027cd7699b0af6bfaca05ae0b29673">getLinAccCOM</a>(i);</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    }</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160; </div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="comment">// initialize the moment part (computed w.r.t. the begin of the first link) of the B vector (last 3 components) as:</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="comment">//  * the moment exerted by the last link on the next one</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="comment">//  * minus the moment applied on the first link</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="comment">//  * the displacement between the beginning of the first link and the end of the last link, </span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="comment">//    vector product the force exerted by the last link on the next one</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    Vector Bmoment = Rlast * <a class="code" href="classiCub_1_1iDyn_1_1iDynInvSensor.html#afd5f31dac8757dd0223178d89c7364c2">chain</a>-&gt;<a class="code" href="classiCub_1_1iDyn_1_1iDynChain.html#a7e632a6a6787ae80218a2ae8c8458ca3">getMoment</a>(lastContactLink);</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    Bmoment -= <a class="code" href="classiCub_1_1iDyn_1_1iDynInvSensor.html#afd5f31dac8757dd0223178d89c7364c2">chain</a>-&gt;<a class="code" href="classiCub_1_1iDyn_1_1iDynChain.html#a7e632a6a6787ae80218a2ae8c8458ca3">getMoment</a>(firstContactLink-1);</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    Bmoment += <a class="code" href="group__Maths.html#gaf7eef875cc229edd04aaa3e8fcbad989">cross</a>(rLast, Rlast* <a class="code" href="classiCub_1_1iDyn_1_1iDynInvSensor.html#afd5f31dac8757dd0223178d89c7364c2">chain</a>-&gt;<a class="code" href="classiCub_1_1iDyn_1_1iDynChain.html#a3eebc2452755786abf4d3115380e146d">getForce</a>(lastContactLink));</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160; </div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="comment">// Then for each link add:</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="comment">//  * the gravitational contribution</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="comment">//  * the inertia contribution</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="comment">//  * the Coriol contribution</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <a class="code" href="classiCub_1_1iDyn_1_1iDynLink.html">iDynLink</a>* link;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=firstContactLink; i&lt;=lastContactLink; i++)</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    {</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        link = <a class="code" href="classiCub_1_1iDyn_1_1iDynInvSensor.html#afd5f31dac8757dd0223178d89c7364c2">chain</a>-&gt;<a class="code" href="classiCub_1_1iDyn_1_1iDynChain.html#ace1a833900dd414bc1dc6d4cd4555c96">refLink</a>(i);</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160; </div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        <a class="code" href="compute__ekf__fast_8m.html#afaafc315b95987fc2b071bcd8f698b81">H</a> = <a class="code" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#af884c0a02b55d58a30cdc2c5e88a33bd">getHFromAtoB</a>(firstContactLink-1, i);</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        <a class="code" href="compute__ekf__fast_8m.html#afaafc315b95987fc2b071bcd8f698b81">H</a> *= link-&gt;<a class="code" href="classiCub_1_1iDyn_1_1iDynLink.html#a81f51e5355bcd58932882f298eff53fd">getCOM</a>();</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        R = <a class="code" href="compute__ekf__fast_8m.html#afaafc315b95987fc2b071bcd8f698b81">H</a>.submatrix(0,2,0,2);</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        r = <a class="code" href="compute__ekf__fast_8m.html#afaafc315b95987fc2b071bcd8f698b81">H</a>.subcol(0,3,3);        <span class="comment">// vector from &lt;firstContactLink-1&gt; to COM of i</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        </div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        Bmoment += link-&gt;<a class="code" href="classiCub_1_1iDyn_1_1iDynLink.html#ab390ce92e572c40fecc2b7fd19ebc6a7">getMass</a>() * <a class="code" href="group__Maths.html#gaf7eef875cc229edd04aaa3e8fcbad989">cross</a>(r, R * link-&gt;<a class="code" href="classiCub_1_1iDyn_1_1iDynLink.html#a207d8e189a578f3d2d13ee6294d3bac6">getLinAccC</a>());</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        Bmoment += R * (link-&gt;<a class="code" href="classiCub_1_1iDyn_1_1iDynLink.html#a1174a4bf195bfd58f2f6334c70a58ff7">getInertia</a>() * link-&gt;<a class="code" href="classiCub_1_1iDyn_1_1iDynLink.html#ad9f40129628d01f3b732c7004b82d2b6">getdW</a>() +</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                                 <a class="code" href="group__Maths.html#gaf7eef875cc229edd04aaa3e8fcbad989">cross</a>(link-&gt;<a class="code" href="classiCub_1_1iDyn_1_1iDynLink.html#ac30023ca7d06dc07ba03d11af8b1c97f">getW</a>(), link-&gt;<a class="code" href="classiCub_1_1iDyn_1_1iDynLink.html#a1174a4bf195bfd58f2f6334c70a58ff7">getInertia</a>()*link-&gt;<a class="code" href="classiCub_1_1iDyn_1_1iDynLink.html#ac30023ca7d06dc07ba03d11af8b1c97f">getW</a>()));</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    }</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160; </div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="keywordflow">return</span> cat(Bforce, Bmoment);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;}</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="comment">//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span></div>
<div class="line"><a name="l00293"></a><span class="lineno"><a class="line" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a18878e1666923940064af44be1bf18da">  293</a></span>&#160;<span class="keyword">const</span> <a class="code" href="classiCub_1_1skinDynLib_1_1dynContactList.html">dynContactList</a>&amp; <a class="code" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a18878e1666923940064af44be1bf18da">iDynContactSolver::getContactList</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a7bef85069778152085e9e748fba2dbeb">contactList</a>;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;}</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="comment">//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span></div>
<div class="line"><a name="l00298"></a><span class="lineno"><a class="line" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a48f8b7c0c0e15c6105c970f3c21bf757">  298</a></span>&#160;Vector <a class="code" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a48f8b7c0c0e15c6105c970f3c21bf757">iDynContactSolver::getForceMomentEndEff</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="comment">// returns the end effector wrench, if any, otherwise return zeros</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="keywordtype">int</span> eeInd = <a class="code" href="classiCub_1_1iDyn_1_1iDynInvSensor.html#afd5f31dac8757dd0223178d89c7364c2">chain</a>-&gt;<a class="code" href="classiCub_1_1iKin_1_1iKinChain.html#acfd767b8edb2f4b26c0af2317dd08cc0">getN</a>()-1;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keywordflow">for</span>(dynContactList::const_iterator it=<a class="code" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a7bef85069778152085e9e748fba2dbeb">contactList</a>.begin(); it!=<a class="code" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a7bef85069778152085e9e748fba2dbeb">contactList</a>.end();it++)</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        <span class="keywordflow">if</span>(it-&gt;getLinkNumber() == eeInd)</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;            <span class="keywordflow">return</span> it-&gt;getForceMoment();</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="compute__ekf__sym_8m.html#a35baefda5ec044ac7c1f5a41815b5b45">zeros</a>(6);</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;}</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="comment">//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span></div>
<div class="line"><a name="l00308"></a><span class="lineno"><a class="line" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#aeffe038ffba9cd9e7b5d71e0b9657c5f">  308</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#aeffe038ffba9cd9e7b5d71e0b9657c5f">iDynContactSolver::findContactSubChain</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> &amp;firstLink, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> &amp;lastLink)</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;{</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    dynContactList::const_iterator it=<a class="code" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a7bef85069778152085e9e748fba2dbeb">contactList</a>.begin();</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    firstLink = <a class="code" href="classiCub_1_1iDyn_1_1iDynInvSensor.html#afd5f31dac8757dd0223178d89c7364c2">chain</a>-&gt;<a class="code" href="classiCub_1_1iKin_1_1iKinChain.html#acfd767b8edb2f4b26c0af2317dd08cc0">getN</a>()+1; </div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    lastLink = 0;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160; </div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="keywordflow">for</span>(; it!=<a class="code" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a7bef85069778152085e9e748fba2dbeb">contactList</a>.end(); it++)</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    {</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> l = it-&gt;getLinkNumber();</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        <span class="keywordflow">if</span>(l&gt;lastLink)</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;            lastLink = l;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        <span class="keywordflow">if</span>(l&lt;firstLink)</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;            firstLink = l;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    }</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;}</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="comment">//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span></div>
<div class="line"><a name="l00324"></a><span class="lineno"><a class="line" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#af884c0a02b55d58a30cdc2c5e88a33bd">  324</a></span>&#160;Matrix <a class="code" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#af884c0a02b55d58a30cdc2c5e88a33bd">iDynContactSolver::getHFromAtoB</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> a, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> b)</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;{</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <span class="keywordflow">if</span>(a==b)</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        <span class="keywordflow">return</span> eye(4,4);</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160; </div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="keywordflow">if</span>(a&gt;b)</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    {</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        Matrix Hinv = <a class="code" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#af884c0a02b55d58a30cdc2c5e88a33bd">getHFromAtoB</a>(b, a);</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        <span class="keywordflow">return</span> SE3inv(Hinv);</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    }</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    </div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    Matrix <a class="code" href="compute__ekf__fast_8m.html#afaafc315b95987fc2b071bcd8f698b81">H</a> = <a class="code" href="classiCub_1_1iDyn_1_1iDynInvSensor.html#afd5f31dac8757dd0223178d89c7364c2">chain</a>-&gt;<a class="code" href="classiCub_1_1iDyn_1_1iDynChain.html#ace1a833900dd414bc1dc6d4cd4555c96">refLink</a>(a+1)-&gt;<a class="code" href="classiCub_1_1iDyn_1_1iDynLink.html#aae2762a126bc6960ad784927f54214b8">getH</a>();     <span class="comment">// initialize H with the rototranslation from &lt;a&gt; to &lt;a+1&gt;</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=a+2; i&lt;=b; i++)</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        <a class="code" href="compute__ekf__fast_8m.html#afaafc315b95987fc2b071bcd8f698b81">H</a> *= <a class="code" href="classiCub_1_1iDyn_1_1iDynInvSensor.html#afd5f31dac8757dd0223178d89c7364c2">chain</a>-&gt;<a class="code" href="classiCub_1_1iDyn_1_1iDynChain.html#ace1a833900dd414bc1dc6d4cd4555c96">refLink</a>(i)-&gt;<a class="code" href="classiCub_1_1iDyn_1_1iDynLink.html#aae2762a126bc6960ad784927f54214b8">getH</a>();</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="compute__ekf__fast_8m.html#afaafc315b95987fc2b071bcd8f698b81">H</a>;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;}</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="comment">//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span></div>
<div class="line"><a name="l00341"></a><span class="lineno"><a class="line" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a6d5da7064cf6f70ab31d2e378c126df1">  341</a></span>&#160;Vector <a class="code" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a6d5da7064cf6f70ab31d2e378c126df1">iDynContactSolver::projectContact2Root</a>(<span class="keyword">const</span> <a class="code" href="classiCub_1_1skinDynLib_1_1dynContact.html">dynContact</a> &amp;c)</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;{</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    Vector wrench = c.<a class="code" href="classiCub_1_1skinDynLib_1_1dynContact.html#ab67dd9361de5e34eaa6f089c4c583a35">getForceMoment</a>();</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    Matrix H_02L = <a class="code" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#af884c0a02b55d58a30cdc2c5e88a33bd">getHFromAtoB</a>(0, c.<a class="code" href="classiCub_1_1skinDynLib_1_1dynContact.html#a053b3e83b431182591fb2fcf3e789ec4">getLinkNumber</a>());  <span class="comment">// rototraslation from 0 to contact link</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    Matrix H_r20 = <a class="code" href="classiCub_1_1iDyn_1_1iDynInvSensor.html#afd5f31dac8757dd0223178d89c7364c2">chain</a>-&gt;<a class="code" href="classiCub_1_1iKin_1_1iKinChain.html#aa52e9972a9fd592f75787ef4073085e3">getH0</a>();  <span class="comment">// rototraslation from root to 0</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    Matrix R_r2L = H_r20.submatrix(0,2,0,2) * H_02L.submatrix(0,2,0,2); <span class="comment">// rotation from root to contact link</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="keywordflow">return</span> R_r2L*wrench;    <span class="comment">// project the wrench from the link frame to the root frame</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;}</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="comment">//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span></div>
<div class="line"><a name="l00350"></a><span class="lineno"><a class="line" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a6c5d39327caca3ae3f93212b9cd3e177">  350</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a6c5d39327caca3ae3f93212b9cd3e177">iDynContactSolver::getUnknownNumber</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    dynContactList::const_iterator it=<a class="code" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a7bef85069778152085e9e748fba2dbeb">contactList</a>.begin();</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> unknowns=0;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160; </div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="keywordflow">for</span>(; it!=<a class="code" href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a7bef85069778152085e9e748fba2dbeb">contactList</a>.end(); it++)</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    {</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        <span class="keywordflow">if</span>(it-&gt;isMomentKnown())</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        {</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;            <span class="keywordflow">if</span>(it-&gt;isForceDirectionKnown())</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                unknowns++;     <span class="comment">// 1 unknown (force module)</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                unknowns+=3;    <span class="comment">// 3 unknowns (force)</span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        }</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;            unknowns+=6;        <span class="comment">// 6 unknowns (force and moment)</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    }</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="keywordflow">return</span> unknowns;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;}</div>
<div class="ttc" id="aclassiCub_1_1iDyn_1_1OneChainNewtonEuler_html_a3813936102cee1b63238d6cb51b65a7e"><div class="ttname"><a href="classiCub_1_1iDyn_1_1OneChainNewtonEuler.html#a3813936102cee1b63238d6cb51b65a7e">iCub::iDyn::OneChainNewtonEuler::initWrenchEnd</a></div><div class="ttdeci">bool initWrenchEnd(const yarp::sig::Vector &amp;F0, const yarp::sig::Vector &amp;Mu0)</div><div class="ttdoc">[classic] Initialize the end-effector finalLink with measured or known wrench</div><div class="ttdef"><b>Definition:</b> <a href="iDynInv_8cpp_source.html#l01828">iDynInv.cpp:1828</a></div></div>
<div class="ttc" id="aclassiCub_1_1iDyn_1_1OneChainNewtonEuler_html_aa8744f6311596b8db2be424f72bd4f2f"><div class="ttname"><a href="classiCub_1_1iDyn_1_1OneChainNewtonEuler.html#aa8744f6311596b8db2be424f72bd4f2f">iCub::iDyn::OneChainNewtonEuler::BackwardWrenchFromAtoB</a></div><div class="ttdeci">bool BackwardWrenchFromAtoB(unsigned int lA, unsigned int lB)</div><div class="ttdoc">Base function for inverse Newton-Euler: from the lA-th link to the lB-th, backward of forces and mome...</div><div class="ttdef"><b>Definition:</b> <a href="iDynInv_8cpp_source.html#l01995">iDynInv.cpp:1995</a></div></div>
<div class="ttc" id="aclassiCub_1_1iDyn_1_1OneChainNewtonEuler_html_aa98938cee37439723e2fb26d0e6d4b6a"><div class="ttname"><a href="classiCub_1_1iDyn_1_1OneChainNewtonEuler.html#aa98938cee37439723e2fb26d0e6d4b6a">iCub::iDyn::OneChainNewtonEuler::BackwardWrenchToBase</a></div><div class="ttdeci">bool BackwardWrenchToBase(unsigned int lSens)</div><div class="ttdoc">[classic/inverse] Base function for inverse Newton-Euler: from the i-th link to the base,...</div><div class="ttdef"><b>Definition:</b> <a href="iDynInv_8cpp_source.html#l01947">iDynInv.cpp:1947</a></div></div>
<div class="ttc" id="aclassiCub_1_1iDyn_1_1OneChainNewtonEuler_html_ab12a4ce116509a3240c8312d595733b7"><div class="ttname"><a href="classiCub_1_1iDyn_1_1OneChainNewtonEuler.html#ab12a4ce116509a3240c8312d595733b7">iCub::iDyn::OneChainNewtonEuler::computeTorques</a></div><div class="ttdeci">void computeTorques()</div><div class="ttdoc">Computes all the torques in the chain, assuming that all the internal wrenches have been already comp...</div><div class="ttdef"><b>Definition:</b> <a href="iDynInv_8cpp_source.html#l01892">iDynInv.cpp:1892</a></div></div>
<div class="ttc" id="aclassiCub_1_1iDyn_1_1OneChainNewtonEuler_html_afecac3e906aace18401c150dae21ec3e"><div class="ttname"><a href="classiCub_1_1iDyn_1_1OneChainNewtonEuler.html#afecac3e906aace18401c150dae21ec3e">iCub::iDyn::OneChainNewtonEuler::ForwardWrenchFromAtoB</a></div><div class="ttdeci">bool ForwardWrenchFromAtoB(unsigned int lA, unsigned int lB)</div><div class="ttdoc">Base function for inverse Newton-Euler: from the lA-th link to the lB-th, forward of forces and momen...</div><div class="ttdef"><b>Definition:</b> <a href="iDynInv_8cpp_source.html#l01976">iDynInv.cpp:1976</a></div></div>
<div class="ttc" id="aclassiCub_1_1iDyn_1_1SensorLinkNewtonEuler_html"><div class="ttname"><a href="classiCub_1_1iDyn_1_1SensorLinkNewtonEuler.html">iCub::iDyn::SensorLinkNewtonEuler</a></div><div class="ttdoc">A class for setting a virtual sensor link.</div><div class="ttdef"><b>Definition:</b> <a href="iDynInv_8h_source.html#l00718">iDynInv.h:719</a></div></div>
<div class="ttc" id="aclassiCub_1_1iDyn_1_1SensorLinkNewtonEuler_html_a640c3b09562694af030f87c2918a97f7"><div class="ttname"><a href="classiCub_1_1iDyn_1_1SensorLinkNewtonEuler.html#a640c3b09562694af030f87c2918a97f7">iCub::iDyn::SensorLinkNewtonEuler::ForwardForcesMomentsToLink</a></div><div class="ttdeci">void ForwardForcesMomentsToLink(iDynLink *link)</div><div class="ttdoc">Forward the sensor forces and moments, measured by the sensor, to the reference frame of the link whe...</div><div class="ttdef"><b>Definition:</b> <a href="iDynInv_8cpp_source.html#l01340">iDynInv.cpp:1340</a></div></div>
<div class="ttc" id="aclassiCub_1_1iDyn_1_1SensorLinkNewtonEuler_html_a9774fb9400e060ed935ae066c80d226f"><div class="ttname"><a href="classiCub_1_1iDyn_1_1SensorLinkNewtonEuler.html#a9774fb9400e060ed935ae066c80d226f">iCub::iDyn::SensorLinkNewtonEuler::ForwardAttachToLink</a></div><div class="ttdeci">void ForwardAttachToLink(iDynLink *link)</div><div class="ttdoc">Compute w,dw,ddp,dppC given the reference frame of the link where the sensor is.</div><div class="ttdef"><b>Definition:</b> <a href="iDynInv_8cpp_source.html#l01326">iDynInv.cpp:1326</a></div></div>
<div class="ttc" id="aclassiCub_1_1iDyn_1_1iDynChain_html"><div class="ttname"><a href="classiCub_1_1iDyn_1_1iDynChain.html">iCub::iDyn::iDynChain</a></div><div class="ttdoc">A Base class for defining a Serial Link Chain, using dynamics and kinematics.</div><div class="ttdef"><b>Definition:</b> <a href="iDyn_8h_source.html#l00532">iDyn.h:533</a></div></div>
<div class="ttc" id="aclassiCub_1_1iDyn_1_1iDynChain_html_a13027cd7699b0af6bfaca05ae0b29673"><div class="ttname"><a href="classiCub_1_1iDyn_1_1iDynChain.html#a13027cd7699b0af6bfaca05ae0b29673">iCub::iDyn::iDynChain::getLinAccCOM</a></div><div class="ttdeci">const yarp::sig::Vector &amp; getLinAccCOM(const unsigned int i) const</div><div class="ttdoc">Returns the i-th link linear acceleration of the COM.</div><div class="ttdef"><b>Definition:</b> <a href="iDyn_8cpp_source.html#l00722">iDyn.cpp:722</a></div></div>
<div class="ttc" id="aclassiCub_1_1iDyn_1_1iDynChain_html_a388b3a98a05bfd8836f34403db146298"><div class="ttname"><a href="classiCub_1_1iDyn_1_1iDynChain.html#a388b3a98a05bfd8836f34403db146298">iCub::iDyn::iDynChain::computeKinematicNewtonEuler</a></div><div class="ttdeci">void computeKinematicNewtonEuler()</div><div class="ttdoc">Calls the proper method to compute kinematics variables: either ForwardKinematicFromBase() or Backwar...</div><div class="ttdef"><b>Definition:</b> <a href="iDyn_8cpp_source.html#l00992">iDyn.cpp:992</a></div></div>
<div class="ttc" id="aclassiCub_1_1iDyn_1_1iDynChain_html_a3eebc2452755786abf4d3115380e146d"><div class="ttname"><a href="classiCub_1_1iDyn_1_1iDynChain.html#a3eebc2452755786abf4d3115380e146d">iCub::iDyn::iDynChain::getForce</a></div><div class="ttdeci">const yarp::sig::Vector &amp; getForce(const unsigned int iLink) const</div><div class="ttdoc">Returns the i-th link force.</div><div class="ttdef"><b>Definition:</b> <a href="iDyn_8cpp_source.html#l00766">iDyn.cpp:766</a></div></div>
<div class="ttc" id="aclassiCub_1_1iDyn_1_1iDynChain_html_a5867a432b6e22f661fb24cbe3fba7400"><div class="ttname"><a href="classiCub_1_1iDyn_1_1iDynChain.html#a5867a432b6e22f661fb24cbe3fba7400">iCub::iDyn::iDynChain::NE</a></div><div class="ttdeci">OneChainNewtonEuler * NE</div><div class="ttdoc">pointer to OneChainNewtonEuler class, to be used for computing forces and torques</div><div class="ttdef"><b>Definition:</b> <a href="iDyn_8h_source.html#l00554">iDyn.h:554</a></div></div>
<div class="ttc" id="aclassiCub_1_1iDyn_1_1iDynChain_html_a62e5118e60d93cc13302d3093693db35"><div class="ttname"><a href="classiCub_1_1iDyn_1_1iDynChain.html#a62e5118e60d93cc13302d3093693db35">iCub::iDyn::iDynChain::prepareNewtonEuler</a></div><div class="ttdeci">void prepareNewtonEuler(const NewEulMode NewEulMode_s=DYNAMIC)</div><div class="ttdoc">Prepare for the Newton-Euler recursive computation of forces and torques.</div><div class="ttdef"><b>Definition:</b> <a href="iDyn_8cpp_source.html#l00916">iDyn.cpp:916</a></div></div>
<div class="ttc" id="aclassiCub_1_1iDyn_1_1iDynChain_html_a7e632a6a6787ae80218a2ae8c8458ca3"><div class="ttname"><a href="classiCub_1_1iDyn_1_1iDynChain.html#a7e632a6a6787ae80218a2ae8c8458ca3">iCub::iDyn::iDynChain::getMoment</a></div><div class="ttdeci">const yarp::sig::Vector &amp; getMoment(const unsigned int iLink) const</div><div class="ttdoc">Returns the i-th link moment.</div><div class="ttdef"><b>Definition:</b> <a href="iDyn_8cpp_source.html#l00777">iDyn.cpp:777</a></div></div>
<div class="ttc" id="aclassiCub_1_1iDyn_1_1iDynChain_html_a822ddb0c3990d159b967f49af31a18da"><div class="ttname"><a href="classiCub_1_1iDyn_1_1iDynChain.html#a822ddb0c3990d159b967f49af31a18da">iCub::iDyn::iDynChain::initNewtonEuler</a></div><div class="ttdeci">bool initNewtonEuler(const yarp::sig::Vector &amp;w0, const yarp::sig::Vector &amp;dw0, const yarp::sig::Vector &amp;ddp0, const yarp::sig::Vector &amp;Fend, const yarp::sig::Vector &amp;Muend)</div><div class="ttdoc">Initialize the Newton-Euler method by setting the base (virtual link) velocity and accelerations ( w0...</div></div>
<div class="ttc" id="aclassiCub_1_1iDyn_1_1iDynChain_html_a84332234635c4a40641dc133d33089f6"><div class="ttname"><a href="classiCub_1_1iDyn_1_1iDynChain.html#a84332234635c4a40641dc133d33089f6">iCub::iDyn::iDynChain::getMass</a></div><div class="ttdeci">double getMass(const unsigned int i) const</div><div class="ttdoc">Returns the i-th link mass.</div><div class="ttdef"><b>Definition:</b> <a href="iDyn_8cpp_source.html#l00822">iDyn.cpp:822</a></div></div>
<div class="ttc" id="aclassiCub_1_1iDyn_1_1iDynChain_html_ace1a833900dd414bc1dc6d4cd4555c96"><div class="ttname"><a href="classiCub_1_1iDyn_1_1iDynChain.html#ace1a833900dd414bc1dc6d4cd4555c96">iCub::iDyn::iDynChain::refLink</a></div><div class="ttdeci">iDynLink * refLink(const unsigned int i)</div><div class="ttdoc">Returns a pointer to the ith iDynLink.</div><div class="ttdef"><b>Definition:</b> <a href="iDyn_8cpp_source.html#l00755">iDyn.cpp:755</a></div></div>
<div class="ttc" id="aclassiCub_1_1iDyn_1_1iDynContactSolver_html_a18878e1666923940064af44be1bf18da"><div class="ttname"><a href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a18878e1666923940064af44be1bf18da">iCub::iDyn::iDynContactSolver::getContactList</a></div><div class="ttdeci">const iCub::skinDynLib::dynContactList &amp; getContactList() const</div><div class="ttdef"><b>Definition:</b> <a href="iDynContact_8cpp_source.html#l00293">iDynContact.cpp:293</a></div></div>
<div class="ttc" id="aclassiCub_1_1iDyn_1_1iDynContactSolver_html_a37784019c5862a19d4e8028ca6debd18"><div class="ttname"><a href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a37784019c5862a19d4e8028ca6debd18">iCub::iDyn::iDynContactSolver::addContacts</a></div><div class="ttdeci">bool addContacts(const iCub::skinDynLib::dynContactList &amp;contacts)</div><div class="ttdoc">Add the specified elements to the contact list.</div><div class="ttdef"><b>Definition:</b> <a href="iDynContact_8cpp_source.html#l00069">iDynContact.cpp:69</a></div></div>
<div class="ttc" id="aclassiCub_1_1iDyn_1_1iDynContactSolver_html_a448d112ec6bcd5b6e5cb372e0dd5839a"><div class="ttname"><a href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a448d112ec6bcd5b6e5cb372e0dd5839a">iCub::iDyn::iDynContactSolver::~iDynContactSolver</a></div><div class="ttdeci">~iDynContactSolver()</div><div class="ttdoc">Default destructor.</div><div class="ttdef"><b>Definition:</b> <a href="iDynContact_8cpp_source.html#l00054">iDynContact.cpp:54</a></div></div>
<div class="ttc" id="aclassiCub_1_1iDyn_1_1iDynContactSolver_html_a48f8b7c0c0e15c6105c970f3c21bf757"><div class="ttname"><a href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a48f8b7c0c0e15c6105c970f3c21bf757">iCub::iDyn::iDynContactSolver::getForceMomentEndEff</a></div><div class="ttdeci">yarp::sig::Vector getForceMomentEndEff() const</div><div class="ttdoc">Returns the end effector force-moment as a single (6x1) vector.</div><div class="ttdef"><b>Definition:</b> <a href="iDynContact_8cpp_source.html#l00298">iDynContact.cpp:298</a></div></div>
<div class="ttc" id="aclassiCub_1_1iDyn_1_1iDynContactSolver_html_a568322437a2c34200beb9f156e5f50b2"><div class="ttname"><a href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a568322437a2c34200beb9f156e5f50b2">iCub::iDyn::iDynContactSolver::nullList</a></div><div class="ttdeci">const iCub::skinDynLib::dynContactList nullList</div><div class="ttdef"><b>Definition:</b> <a href="iDynContact_8h_source.html#l00058">iDynContact.h:58</a></div></div>
<div class="ttc" id="aclassiCub_1_1iDyn_1_1iDynContactSolver_html_a6c5d39327caca3ae3f93212b9cd3e177"><div class="ttname"><a href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a6c5d39327caca3ae3f93212b9cd3e177">iCub::iDyn::iDynContactSolver::getUnknownNumber</a></div><div class="ttdeci">unsigned int getUnknownNumber() const</div><div class="ttdef"><b>Definition:</b> <a href="iDynContact_8cpp_source.html#l00350">iDynContact.cpp:350</a></div></div>
<div class="ttc" id="aclassiCub_1_1iDyn_1_1iDynContactSolver_html_a6d5da7064cf6f70ab31d2e378c126df1"><div class="ttname"><a href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a6d5da7064cf6f70ab31d2e378c126df1">iCub::iDyn::iDynContactSolver::projectContact2Root</a></div><div class="ttdeci">yarp::sig::Vector projectContact2Root(const iCub::skinDynLib::dynContact &amp;c)</div><div class="ttdoc">Compute the wrench of the specified contact expressed w.r.t.</div><div class="ttdef"><b>Definition:</b> <a href="iDynContact_8cpp_source.html#l00341">iDynContact.cpp:341</a></div></div>
<div class="ttc" id="aclassiCub_1_1iDyn_1_1iDynContactSolver_html_a7b6d4003bcc1bc93d30c964302d32203"><div class="ttname"><a href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a7b6d4003bcc1bc93d30c964302d32203">iCub::iDyn::iDynContactSolver::buildB</a></div><div class="ttdeci">yarp::sig::Vector buildB(unsigned int firstContactLink, unsigned int lastContactLink)</div><div class="ttdef"><b>Definition:</b> <a href="iDynContact_8cpp_source.html#l00239">iDynContact.cpp:239</a></div></div>
<div class="ttc" id="aclassiCub_1_1iDyn_1_1iDynContactSolver_html_a7bef85069778152085e9e748fba2dbeb"><div class="ttname"><a href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a7bef85069778152085e9e748fba2dbeb">iCub::iDyn::iDynContactSolver::contactList</a></div><div class="ttdeci">iCub::skinDynLib::dynContactList contactList</div><div class="ttdoc">list of contacts acting on the link chain</div><div class="ttdef"><b>Definition:</b> <a href="iDynContact_8h_source.html#l00056">iDynContact.h:56</a></div></div>
<div class="ttc" id="aclassiCub_1_1iDyn_1_1iDynContactSolver_html_a7f0ad3049ce0d6aaf56d947e3ee8734b"><div class="ttname"><a href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a7f0ad3049ce0d6aaf56d947e3ee8734b">iCub::iDyn::iDynContactSolver::buildA</a></div><div class="ttdeci">yarp::sig::Matrix buildA(unsigned int firstContactLink, unsigned int lastContactLink)</div><div class="ttdef"><b>Definition:</b> <a href="iDynContact_8cpp_source.html#l00188">iDynContact.cpp:188</a></div></div>
<div class="ttc" id="aclassiCub_1_1iDyn_1_1iDynContactSolver_html_a82296850c1b0cbc1cd4321d5da7e1940"><div class="ttname"><a href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a82296850c1b0cbc1cd4321d5da7e1940">iCub::iDyn::iDynContactSolver::computeExternalContacts</a></div><div class="ttdeci">const iCub::skinDynLib::dynContactList &amp; computeExternalContacts()</div><div class="ttdoc">Compute an estimate of the external contact wrenches (assuming the F/T sensor measure have already be...</div><div class="ttdef"><b>Definition:</b> <a href="iDynContact_8cpp_source.html#l00091">iDynContact.cpp:91</a></div></div>
<div class="ttc" id="aclassiCub_1_1iDyn_1_1iDynContactSolver_html_a8f6512c832a87cd27f238c8e9839bff7"><div class="ttname"><a href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a8f6512c832a87cd27f238c8e9839bff7">iCub::iDyn::iDynContactSolver::clearContactList</a></div><div class="ttdeci">void clearContactList()</div><div class="ttdoc">Clear the contact list.</div><div class="ttdef"><b>Definition:</b> <a href="iDynContact_8cpp_source.html#l00078">iDynContact.cpp:78</a></div></div>
<div class="ttc" id="aclassiCub_1_1iDyn_1_1iDynContactSolver_html_a8f8d87314fe65b5d3026653b516ed7f9"><div class="ttname"><a href="classiCub_1_1iDyn_1_1iDynContactSolver.html#a8f8d87314fe65b5d3026653b516ed7f9">iCub::iDyn::iDynContactSolver::computeWrenchFromSensorNewtonEuler</a></div><div class="ttdeci">void computeWrenchFromSensorNewtonEuler()</div><div class="ttdoc">Compute an estimate of the external and internal contact wrenches (joint torques included).</div><div class="ttdef"><b>Definition:</b> <a href="iDynContact_8cpp_source.html#l00177">iDynContact.cpp:177</a></div></div>
<div class="ttc" id="aclassiCub_1_1iDyn_1_1iDynContactSolver_html_aed4cf2bd1123ef778afb80eeb69366a3"><div class="ttname"><a href="classiCub_1_1iDyn_1_1iDynContactSolver.html#aed4cf2bd1123ef778afb80eeb69366a3">iCub::iDyn::iDynContactSolver::bodyPart</a></div><div class="ttdeci">iCub::skinDynLib::BodyPart bodyPart</div><div class="ttdef"><b>Definition:</b> <a href="iDynContact_8h_source.html#l00060">iDynContact.h:60</a></div></div>
<div class="ttc" id="aclassiCub_1_1iDyn_1_1iDynContactSolver_html_aefcb2c949d8465c17bd799dcf97ac7f3"><div class="ttname"><a href="classiCub_1_1iDyn_1_1iDynContactSolver.html#aefcb2c949d8465c17bd799dcf97ac7f3">iCub::iDyn::iDynContactSolver::iDynContactSolver</a></div><div class="ttdeci">iDynContactSolver(iDynChain *_c, const std::string &amp;_info=&quot;&quot;, const NewEulMode _mode=DYNAMIC, iCub::skinDynLib::BodyPart bodyPart=iCub::skinDynLib::BODY_PART_UNKNOWN, unsigned int verb=iCub::skinDynLib::NO_VERBOSE)</div><div class="ttdoc">Constructor.</div><div class="ttdef"><b>Definition:</b> <a href="iDynContact_8cpp_source.html#l00039">iDynContact.cpp:39</a></div></div>
<div class="ttc" id="aclassiCub_1_1iDyn_1_1iDynContactSolver_html_aeffe038ffba9cd9e7b5d71e0b9657c5f"><div class="ttname"><a href="classiCub_1_1iDyn_1_1iDynContactSolver.html#aeffe038ffba9cd9e7b5d71e0b9657c5f">iCub::iDyn::iDynContactSolver::findContactSubChain</a></div><div class="ttdeci">void findContactSubChain(unsigned int &amp;firstLink, unsigned int &amp;lastLink)</div><div class="ttdef"><b>Definition:</b> <a href="iDynContact_8cpp_source.html#l00308">iDynContact.cpp:308</a></div></div>
<div class="ttc" id="aclassiCub_1_1iDyn_1_1iDynContactSolver_html_af3f91e18b533b4faf0ffa8b6a20e661c"><div class="ttname"><a href="classiCub_1_1iDyn_1_1iDynContactSolver.html#af3f91e18b533b4faf0ffa8b6a20e661c">iCub::iDyn::iDynContactSolver::addContact</a></div><div class="ttdeci">bool addContact(const iCub::skinDynLib::dynContact &amp;contact)</div><div class="ttdoc">Add a new element to the contact list.</div><div class="ttdef"><b>Definition:</b> <a href="iDynContact_8cpp_source.html#l00056">iDynContact.cpp:56</a></div></div>
<div class="ttc" id="aclassiCub_1_1iDyn_1_1iDynContactSolver_html_af884c0a02b55d58a30cdc2c5e88a33bd"><div class="ttname"><a href="classiCub_1_1iDyn_1_1iDynContactSolver.html#af884c0a02b55d58a30cdc2c5e88a33bd">iCub::iDyn::iDynContactSolver::getHFromAtoB</a></div><div class="ttdeci">yarp::sig::Matrix getHFromAtoB(unsigned int a, unsigned int b)</div><div class="ttdoc">Compute the rototraslation matrix from frame a to frame b.</div><div class="ttdef"><b>Definition:</b> <a href="iDynContact_8cpp_source.html#l00324">iDynContact.cpp:324</a></div></div>
<div class="ttc" id="aclassiCub_1_1iDyn_1_1iDynInvSensor_html_a517c69012c9de5535b9e3a0872f2c336"><div class="ttname"><a href="classiCub_1_1iDyn_1_1iDynInvSensor.html#a517c69012c9de5535b9e3a0872f2c336">iCub::iDyn::iDynInvSensor::mode</a></div><div class="ttdeci">NewEulMode mode</div><div class="ttdoc">static/dynamic/etc..</div><div class="ttdef"><b>Definition:</b> <a href="iDynInv_8h_source.html#l01234">iDynInv.h:1234</a></div></div>
<div class="ttc" id="aclassiCub_1_1iDyn_1_1iDynInvSensor_html_ac3345e0c98effaecc39ec3c227a7df5c"><div class="ttname"><a href="classiCub_1_1iDyn_1_1iDynInvSensor.html#ac3345e0c98effaecc39ec3c227a7df5c">iCub::iDyn::iDynInvSensor::sens</a></div><div class="ttdeci">SensorLinkNewtonEuler * sens</div><div class="ttdoc">the sensor</div><div class="ttdef"><b>Definition:</b> <a href="iDynInv_8h_source.html#l01230">iDynInv.h:1230</a></div></div>
<div class="ttc" id="aclassiCub_1_1iDyn_1_1iDynInvSensor_html_ad0b547d3af86e724581a0a423e5a3ba4"><div class="ttname"><a href="classiCub_1_1iDyn_1_1iDynInvSensor.html#ad0b547d3af86e724581a0a423e5a3ba4">iCub::iDyn::iDynInvSensor::lSens</a></div><div class="ttdeci">unsigned int lSens</div><div class="ttdoc">the link where the sensor is attached to</div><div class="ttdef"><b>Definition:</b> <a href="iDynInv_8h_source.html#l01228">iDynInv.h:1228</a></div></div>
<div class="ttc" id="aclassiCub_1_1iDyn_1_1iDynInvSensor_html_ad10428c6d5b061f647e2c79acb03261f"><div class="ttname"><a href="classiCub_1_1iDyn_1_1iDynInvSensor.html#ad10428c6d5b061f647e2c79acb03261f">iCub::iDyn::iDynInvSensor::verbose</a></div><div class="ttdeci">unsigned int verbose</div><div class="ttdoc">verbosity flag</div><div class="ttdef"><b>Definition:</b> <a href="iDynInv_8h_source.html#l01236">iDynInv.h:1236</a></div></div>
<div class="ttc" id="aclassiCub_1_1iDyn_1_1iDynInvSensor_html_afd5f31dac8757dd0223178d89c7364c2"><div class="ttname"><a href="classiCub_1_1iDyn_1_1iDynInvSensor.html#afd5f31dac8757dd0223178d89c7364c2">iCub::iDyn::iDynInvSensor::chain</a></div><div class="ttdeci">iDynChain * chain</div><div class="ttdoc">the iDynChain describing the robotic chain</div><div class="ttdef"><b>Definition:</b> <a href="iDynInv_8h_source.html#l01232">iDynInv.h:1232</a></div></div>
<div class="ttc" id="aclassiCub_1_1iDyn_1_1iDynLink_html"><div class="ttname"><a href="classiCub_1_1iDyn_1_1iDynLink.html">iCub::iDyn::iDynLink</a></div><div class="ttdoc">A base class for defining a Link with standard Denavit-Hartenberg convention, providing kinematic and...</div><div class="ttdef"><b>Definition:</b> <a href="iDyn_8h_source.html#l00117">iDyn.h:118</a></div></div>
<div class="ttc" id="aclassiCub_1_1iDyn_1_1iDynLink_html_a1174a4bf195bfd58f2f6334c70a58ff7"><div class="ttname"><a href="classiCub_1_1iDyn_1_1iDynLink.html#a1174a4bf195bfd58f2f6334c70a58ff7">iCub::iDyn::iDynLink::getInertia</a></div><div class="ttdeci">const yarp::sig::Matrix &amp; getInertia() const</div><div class="ttdoc">Get the inertia matrix.</div><div class="ttdef"><b>Definition:</b> <a href="iDyn_8cpp_source.html#l00406">iDyn.cpp:406</a></div></div>
<div class="ttc" id="aclassiCub_1_1iDyn_1_1iDynLink_html_a207d8e189a578f3d2d13ee6294d3bac6"><div class="ttname"><a href="classiCub_1_1iDyn_1_1iDynLink.html#a207d8e189a578f3d2d13ee6294d3bac6">iCub::iDyn::iDynLink::getLinAccC</a></div><div class="ttdeci">const yarp::sig::Vector &amp; getLinAccC() const</div><div class="ttdoc">Get the linear acceleration of the COM.</div><div class="ttdef"><b>Definition:</b> <a href="iDyn_8cpp_source.html#l00421">iDyn.cpp:421</a></div></div>
<div class="ttc" id="aclassiCub_1_1iDyn_1_1iDynLink_html_a81f51e5355bcd58932882f298eff53fd"><div class="ttname"><a href="classiCub_1_1iDyn_1_1iDynLink.html#a81f51e5355bcd58932882f298eff53fd">iCub::iDyn::iDynLink::getCOM</a></div><div class="ttdeci">const yarp::sig::Matrix &amp; getCOM() const</div><div class="ttdoc">Get the roto-translational matrix describing the COM.</div><div class="ttdef"><b>Definition:</b> <a href="iDyn_8cpp_source.html#l00412">iDyn.cpp:412</a></div></div>
<div class="ttc" id="aclassiCub_1_1iDyn_1_1iDynLink_html_aae2762a126bc6960ad784927f54214b8"><div class="ttname"><a href="classiCub_1_1iDyn_1_1iDynLink.html#aae2762a126bc6960ad784927f54214b8">iCub::iDyn::iDynLink::getH</a></div><div class="ttdeci">const yarp::sig::Matrix &amp; getH()</div><div class="ttdoc">Redefine the getH of iKinLink so that it does not compute the H matrix if the joint angles have not c...</div><div class="ttdef"><b>Definition:</b> <a href="iDyn_8cpp_source.html#l00445">iDyn.cpp:445</a></div></div>
<div class="ttc" id="aclassiCub_1_1iDyn_1_1iDynLink_html_ab390ce92e572c40fecc2b7fd19ebc6a7"><div class="ttname"><a href="classiCub_1_1iDyn_1_1iDynLink.html#ab390ce92e572c40fecc2b7fd19ebc6a7">iCub::iDyn::iDynLink::getMass</a></div><div class="ttdeci">double getMass() const</div><div class="ttdoc">Get the link mass.</div><div class="ttdef"><b>Definition:</b> <a href="iDyn_8cpp_source.html#l00407">iDyn.cpp:407</a></div></div>
<div class="ttc" id="aclassiCub_1_1iDyn_1_1iDynLink_html_ac30023ca7d06dc07ba03d11af8b1c97f"><div class="ttname"><a href="classiCub_1_1iDyn_1_1iDynLink.html#ac30023ca7d06dc07ba03d11af8b1c97f">iCub::iDyn::iDynLink::getW</a></div><div class="ttdeci">const yarp::sig::Vector &amp; getW() const</div><div class="ttdoc">Get the angular velocity of the link.</div><div class="ttdef"><b>Definition:</b> <a href="iDyn_8cpp_source.html#l00415">iDyn.cpp:415</a></div></div>
<div class="ttc" id="aclassiCub_1_1iDyn_1_1iDynLink_html_ad9f40129628d01f3b732c7004b82d2b6"><div class="ttname"><a href="classiCub_1_1iDyn_1_1iDynLink.html#ad9f40129628d01f3b732c7004b82d2b6">iCub::iDyn::iDynLink::getdW</a></div><div class="ttdeci">const yarp::sig::Vector &amp; getdW() const</div><div class="ttdoc">Get the angular acceleration of the link.</div><div class="ttdef"><b>Definition:</b> <a href="iDyn_8cpp_source.html#l00416">iDyn.cpp:416</a></div></div>
<div class="ttc" id="aclassiCub_1_1iDyn_1_1iDynSensor_html"><div class="ttname"><a href="classiCub_1_1iDyn_1_1iDynSensor.html">iCub::iDyn::iDynSensor</a></div><div class="ttdoc">A class for computing forces and torques in a iDynChain, when a force/torque sensor is placed in the ...</div><div class="ttdef"><b>Definition:</b> <a href="iDynInv_8h_source.html#l01577">iDynInv.h:1578</a></div></div>
<div class="ttc" id="aclassiCub_1_1iDyn_1_1iDynSensor_html_a13390f3a4c9d2b50c40cafbc9c40865e"><div class="ttname"><a href="classiCub_1_1iDyn_1_1iDynSensor.html#a13390f3a4c9d2b50c40cafbc9c40865e">iCub::iDyn::iDynSensor::setSensorMeasures</a></div><div class="ttdeci">bool setSensorMeasures(const yarp::sig::Vector &amp;F, const yarp::sig::Vector &amp;Mu)</div><div class="ttdoc">Set the sensor measured force and moment.</div></div>
<div class="ttc" id="aclassiCub_1_1iKin_1_1iKinChain_html_aa52e9972a9fd592f75787ef4073085e3"><div class="ttname"><a href="classiCub_1_1iKin_1_1iKinChain.html#aa52e9972a9fd592f75787ef4073085e3">iCub::iKin::iKinChain::getH0</a></div><div class="ttdeci">yarp::sig::Matrix getH0() const</div><div class="ttdoc">Returns H0, the rigid roto-translation matrix from the root reference frame to the 0th frame.</div><div class="ttdef"><b>Definition:</b> <a href="iKinFwd_8h_source.html#l00564">iKinFwd.h:564</a></div></div>
<div class="ttc" id="aclassiCub_1_1iKin_1_1iKinChain_html_acfd767b8edb2f4b26c0af2317dd08cc0"><div class="ttname"><a href="classiCub_1_1iKin_1_1iKinChain.html#acfd767b8edb2f4b26c0af2317dd08cc0">iCub::iKin::iKinChain::getN</a></div><div class="ttdeci">unsigned int getN() const</div><div class="ttdoc">Returns the number of Links belonging to the Chain.</div><div class="ttdef"><b>Definition:</b> <a href="iKinFwd_8h_source.html#l00550">iKinFwd.h:550</a></div></div>
<div class="ttc" id="aclassiCub_1_1skinDynLib_1_1dynContactList_html"><div class="ttname"><a href="classiCub_1_1skinDynLib_1_1dynContactList.html">iCub::skinDynLib::dynContactList</a></div><div class="ttdoc">Class representing a list of external contacts.</div><div class="ttdef"><b>Definition:</b> <a href="dynContactList_8h_source.html#l00042">dynContactList.h:43</a></div></div>
<div class="ttc" id="aclassiCub_1_1skinDynLib_1_1dynContact_html"><div class="ttname"><a href="classiCub_1_1skinDynLib_1_1dynContact.html">iCub::skinDynLib::dynContact</a></div><div class="ttdoc">Class representing an external contact acting on a link of the robot body.</div><div class="ttdef"><b>Definition:</b> <a href="dynContact_8h_source.html#l00051">dynContact.h:52</a></div></div>
<div class="ttc" id="aclassiCub_1_1skinDynLib_1_1dynContact_html_a053b3e83b431182591fb2fcf3e789ec4"><div class="ttname"><a href="classiCub_1_1skinDynLib_1_1dynContact.html#a053b3e83b431182591fb2fcf3e789ec4">iCub::skinDynLib::dynContact::getLinkNumber</a></div><div class="ttdeci">virtual unsigned int getLinkNumber() const</div><div class="ttdoc">Get the link number (where 0 is the first link of the chain).</div><div class="ttdef"><b>Definition:</b> <a href="dynContact_8cpp_source.html#l00084">dynContact.cpp:84</a></div></div>
<div class="ttc" id="aclassiCub_1_1skinDynLib_1_1dynContact_html_a697bbda77e5876ddbee01b8ee908ce7e"><div class="ttname"><a href="classiCub_1_1skinDynLib_1_1dynContact.html#a697bbda77e5876ddbee01b8ee908ce7e">iCub::skinDynLib::dynContact::getBodyPart</a></div><div class="ttdeci">virtual BodyPart getBodyPart() const</div><div class="ttdoc">Get the body part of the contact.</div><div class="ttdef"><b>Definition:</b> <a href="dynContact_8cpp_source.html#l00086">dynContact.cpp:86</a></div></div>
<div class="ttc" id="aclassiCub_1_1skinDynLib_1_1dynContact_html_a88c85d4686167625b23bd968e8b6e708"><div class="ttname"><a href="classiCub_1_1skinDynLib_1_1dynContact.html#a88c85d4686167625b23bd968e8b6e708">iCub::skinDynLib::dynContact::getBodyPartName</a></div><div class="ttdeci">virtual std::string getBodyPartName() const</div><div class="ttdoc">Get the name of the contact body part.</div><div class="ttdef"><b>Definition:</b> <a href="dynContact_8cpp_source.html#l00088">dynContact.cpp:88</a></div></div>
<div class="ttc" id="aclassiCub_1_1skinDynLib_1_1dynContact_html_ab67dd9361de5e34eaa6f089c4c583a35"><div class="ttname"><a href="classiCub_1_1skinDynLib_1_1dynContact.html#ab67dd9361de5e34eaa6f089c4c583a35">iCub::skinDynLib::dynContact::getForceMoment</a></div><div class="ttdeci">virtual yarp::sig::Vector getForceMoment() const</div><div class="ttdoc">Get the contact force and moment in a single (6x1) vector.</div><div class="ttdef"><b>Definition:</b> <a href="dynContact_8cpp_source.html#l00072">dynContact.cpp:72</a></div></div>
<div class="ttc" id="acompute__ekf__fast_8m_html_afaafc315b95987fc2b071bcd8f698b81"><div class="ttname"><a href="compute__ekf__fast_8m.html#afaafc315b95987fc2b071bcd8f698b81">H</a></div><div class="ttdeci">H</div><div class="ttdef"><b>Definition:</b> <a href="compute__ekf__fast_8m_source.html#l00027">compute_ekf_fast.m:27</a></div></div>
<div class="ttc" id="acompute__ekf__sym_8m_html_a35baefda5ec044ac7c1f5a41815b5b45"><div class="ttname"><a href="compute__ekf__sym_8m.html#a35baefda5ec044ac7c1f5a41815b5b45">zeros</a></div><div class="ttdeci">zeros(2, 2) eye(2</div></div>
<div class="ttc" id="agroup__Maths_html_gaf7eef875cc229edd04aaa3e8fcbad989"><div class="ttname"><a href="group__Maths.html#gaf7eef875cc229edd04aaa3e8fcbad989">iCub::ctrl::cross</a></div><div class="ttdeci">yarp::sig::Vector cross(const yarp::sig::Matrix &amp;A, int colA, const yarp::sig::Matrix &amp;B, int colB)</div><div class="ttdoc">Returns the cross product between two vectors given in the form: matrix(:,col).</div></div>
<div class="ttc" id="aiDynContact_8h_html"><div class="ttname"><a href="iDynContact_8h.html">iDynContact.h</a></div></div>
<div class="ttc" id="anamespaceiCub_1_1ctrl_html"><div class="ttname"><a href="namespaceiCub_1_1ctrl.html">iCub::ctrl</a></div><div class="ttdef"><b>Definition:</b> <a href="adaptWinPolyEstimator_8h_source.html#l00037">adaptWinPolyEstimator.h:38</a></div></div>
<div class="ttc" id="anamespaceiCub_1_1iDyn_html"><div class="ttname"><a href="namespaceiCub_1_1iDyn.html">iCub::iDyn</a></div><div class="ttdef"><b>Definition:</b> <a href="iDyn_8h_source.html#l00081">iDyn.h:82</a></div></div>
<div class="ttc" id="anamespaceiCub_1_1iDyn_html_a0182f1dc2b63d75421ac043930229cf6"><div class="ttname"><a href="namespaceiCub_1_1iDyn.html#a0182f1dc2b63d75421ac043930229cf6">iCub::iDyn::TOLLERANCE</a></div><div class="ttdeci">static double const TOLLERANCE</div><div class="ttdef"><b>Definition:</b> <a href="iDynContact_8h_source.html#l00044">iDynContact.h:44</a></div></div>
<div class="ttc" id="anamespaceiCub_1_1iDyn_html_a6b03dffbe5b7a4931b1d7afeff96b362"><div class="ttname"><a href="namespaceiCub_1_1iDyn.html#a6b03dffbe5b7a4931b1d7afeff96b362">iCub::iDyn::NewEulMode</a></div><div class="ttdeci">NewEulMode</div><div class="ttdef"><b>Definition:</b> <a href="iDynInv_8h_source.html#l00064">iDynInv.h:64</a></div></div>
<div class="ttc" id="anamespaceiCub_1_1iKin_html"><div class="ttname"><a href="namespaceiCub_1_1iKin.html">iCub::iKin</a></div><div class="ttdef"><b>Definition:</b> <a href="iKinFwd_8h_source.html#l00071">iKinFwd.h:72</a></div></div>
<div class="ttc" id="anamespaceiCub_1_1skinDynLib_html"><div class="ttname"><a href="namespaceiCub_1_1skinDynLib.html">iCub::skinDynLib</a></div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00035">common.h:36</a></div></div>
<div class="ttc" id="anamespaceiCub_1_1skinDynLib_html_a6855d36a10aba372ee0765ce87cf7d77"><div class="ttname"><a href="namespaceiCub_1_1skinDynLib.html#a6855d36a10aba372ee0765ce87cf7d77">iCub::skinDynLib::BodyPart_s</a></div><div class="ttdeci">const std::string BodyPart_s[]</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00049">common.h:49</a></div></div>
<div class="ttc" id="anamespaceiCub_1_1skinDynLib_html_add9bfc7bd9eeccb70837cfb9401a46fd"><div class="ttname"><a href="namespaceiCub_1_1skinDynLib.html#add9bfc7bd9eeccb70837cfb9401a46fd">iCub::skinDynLib::BodyPart</a></div><div class="ttdeci">BodyPart</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00044">common.h:44</a></div></div>
<div class="ttc" id="asaveNetwork_8m_html_a0eba6f64b9c26507a877bcb0c4f270e2"><div class="ttname"><a href="saveNetwork_8m.html#a0eba6f64b9c26507a877bcb0c4f270e2">fprintf</a></div><div class="ttdeci">fprintf(fid,'\n')</div></div>
<div class="ttc" id="asine_8m_html_a3b98e2dffc6cb06a89dcb0d5c60a0206"><div class="ttname"><a href="sine_8m.html#a3b98e2dffc6cb06a89dcb0d5c60a0206">A</a></div><div class="ttdeci">A</div><div class="ttdef"><b>Definition:</b> <a href="sine_8m_source.html#l00016">sine.m:16</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Mar 26 2024 16:02:17 for iCub-main by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
