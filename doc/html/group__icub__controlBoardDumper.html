<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>iCub-main: controlBoardDumper</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">iCub-main
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">controlBoardDumper<div class="ingroups"><a class="el" href="group__icub__modules__all.html">Software</a> &raquo; <a class="el" href="group__icub__tools.html">Tools</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>A basic module for collecting data (position, current, applied voltage, pid errors, ...) from a controlBoard and sending them trough a yarp port.  
</p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Collaboration diagram for controlBoardDumper:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="group__icub__controlBoardDumper.png" border="0" usemap="#agroup____icub____controlBoardDumper" alt=""/></div>
<map name="agroup____icub____controlBoardDumper" id="agroup____icub____controlBoardDumper">
<area shape="rect" href="group__icub__tools.html" title="This is a list of iCub basic tools." alt="" coords="5,5,60,31"/>
<area shape="rect" title="A basic module for collecting data (position, current, applied voltage, pid errors,..." alt="" coords="108,5,265,31"/>
</map>
</div>
<p>A basic module for collecting data (position, current, applied voltage, pid errors, ...) from a controlBoard and sending them trough a yarp port. </p>
<p>These data can then be dumped to a file using yarpdatadumper. Time stamp is forwarded if present in the collected data. If not present a time stamp is added. <b> Remark: </b> all collected data are obtained by a remoteControlBoard connected with a controlBoard. Therefore, collected data needs to be available to the controlBoard. When using the <a class="el" href="namespaceiCub.html" title="This file contains the definition of unique IDs for the body parts and the skin parts of the robot.">iCub</a> canbus protocol this is not necessary guaranteed for all data: data are available only if the corresponding broadcast is enabled. This can be easily done by seeting the proper entry in the controlBoard configuration file (e.g. icub_right_arm_safe.ini):</p>
<ul>
<li>
broadcast_pos: if 1 enables getEncoders (joint position) </li>
<li>
broadcast_vel_acc: if 1 enables getEncoderSpeeds (joint velocity) and getEncoderAccelerations (joint acceleration) </li>
<li>
broadcast_pid: if 1 enables getOutputs (voltage give to the motor) </li>
<li>
broadcast_pid_err: if 1 enables getPositionErrors and getTorqueErrors (pid tracking error) </li>
<li>
broadcast_current: if 1 enables getCurrents (current given to the motor) </li>
</ul>
<h1><a class="anchor" id="intro_sec"></a>
Description</h1>
<p>Data from a control board can be easily accessed trough suitable interfaces (IPositionControl, IAmplifierControl, IPidControl ...) and corresponding functions (getEncoders, getCurrrents, getOutputs, ...). The module (controlBoardDumper) accesses all these data and make them available on the network opening suitable yarp ports. The data are collected at a fixed frequency by a suitable thread whose frequency can be changed.</p>
<h1><a class="anchor" id="libraries_sec"></a>
Libraries</h1>
<p>Yarp libraries.</p>
<h1><a class="anchor" id="parameters_sec"></a>
Parameters</h1>
<p>The module uses the ResourceFinder class as a way to retrieve its own configuration. In particular, the default config file is controlBoardDumper.ini and it is assumed to be in the app/dumpControlBoardData/conf directory. The file structure is the following:</p>
<div class="fragment"><div class="line">robot        icub             <span class="comment">//the robot name [default: icub]</span></div>
<div class="line"> </div>
<div class="line">part         <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>                <span class="comment">//the robot part to be dumped [default: head]</span></div>
<div class="line"> </div>
<div class="line">rate         r                <span class="comment">//[ms] the sampling time for collected data [default: 500]</span></div>
<div class="line"> </div>
<div class="line">joints       (i1 i2 i3...iN)  <span class="comment">//indexes of the joints to be read [default: (0 1)]</span></div>
<div class="line"> </div>
<div class="line">dataToDump   (data1...dataN)  <span class="comment">//type of data to be collected [default: all possible data, except debug interface (getRotorxxx)]</span></div>
<div class="line"> </div>
<div class="line">dataToDumpAll                 <span class="comment">// will dump all data, including the debug interface (getRotorxxx)</span></div>
<div class="line"> </div>
<div class="line">logToFile                     <span class="comment">//if present, this options creates a log file for each data port</span></div>
<div class="ttc" id="ashow__eyes__axes_8m_html_ac483f6ce851c9ecd9fb835ff7551737c"><div class="ttname"><a href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a></div><div class="ttdeci">p</div><div class="ttdef"><b>Definition:</b> <a href="show__eyes__axes_8m_source.html#l00023">show_eyes_axes.m:23</a></div></div>
</div><!-- fragment --><p>If no such file can be found, the application is started with the default parameters. The first parameter ('robot' with default value 'icub') specifies the robot name. The second parameter ('part' with default 'head') specifies the used part. The third parameter ('rate' with default '500') specifies the acquisition rate. The parameter dataToDump can assume the following values: </p><ul>
<li>
getEncoders (joint position) </li>
<li>
getEncoderSpeeds (joint velocity) </li>
<li>
getEncoderAccelerations (joint acceleration) </li>
<li>
getPositionErrors (difference between desired and actual position) </li>
<li>
getTorqueErrors (difference between desired and measured torque, if available) </li>
<li>
getOutputs (voltage (PWM) given to the motor) </li>
<li>
getCurrents (current given to the motor) </li>
<li>
getTorques (joint torques, if available) </li>
<li>
getPosPidReferences (last position referenece) </li>
<li>
getTrqPidReferences (last torque reference) </li>
<li>
getRotorPositions (hires rotor position, if debug interface is available) </li>
<li>
getRotorSpeeds (hires rotor velocity, if debug interface is available) </li>
<li>
getRotorAccelerations (hires rotor acceleration, if debug interface is available) </li>
<li>
getControlModes (joint control mode) </li>
<li>
getInteractionModes (joint interaction mode) </li>
</ul>
<p>Other data can be easily added by modyfing the classes in the file <a class="el" href="genericControlBoardDumper_8cpp.html">genericControlBoardDumper.cpp</a> which contains a class named <a class="el" href="classGetData.html">GetData</a> with a method getData which can be used to instantiate a thread controlBoardDumper which does not depend on the specific interface (e.g. IPositionControl) or function (e.g. getEncoders).</p>
<p>Please note that for dumping the getRototxxx data the debugInterface is required. This means the robot must instantiate the debugInterfaceWrapper in order to have remote access to those data.</p>
<p>The module can also be executed from a command line with the following format: </p><div class="fragment"><div class="line">controlBoardDumper --robot r --part <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> --rate r --joints <span class="stringliteral">&quot;(i1 i2 i3...iN)&quot;</span></div>
</div><!-- fragment --><p> for example: </p><div class="fragment"><div class="line">controlBoardDumper --robot icub --part head --rate 20 --joints <span class="stringliteral">&quot;(0 1 2)&quot;</span></div>
</div><!-- fragment --><p>In this case all the following standard data will be dumped:  getEncoders  getEncoderSpeeds  getEncoderAccelerations  getPositionErrors  getTorqueErrors  getOutputs  getCurrents  getTorques</p>
<p>To dump only specific data you can use the &ndash;dataToDump option</p>
<div class="fragment"><div class="line">controlBoardDumper --robot r --part <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> --rate r --joints <span class="stringliteral">&quot;(i1 i2 i3...iN)&quot;</span> --dataToDump <span class="stringliteral">&quot;(data1...dataN)&quot;</span></div>
</div><!-- fragment --><p>and the example is: </p><div class="fragment"><div class="line">controlBoardDumper --robot icub --part head --rate 20 --joints <span class="stringliteral">&quot;(0 1 2)&quot;</span> --dataToDump <span class="stringliteral">&quot;(getCurrents getOutputs)&quot;</span></div>
</div><!-- fragment --><p>To dump all the data, including the debug ones, you can use the dataToDumpAll option controlBoardDumper &ndash;robot r &ndash;part p &ndash;rate r &ndash;joints "(i1 i2 i3...iN)" &ndash;dataToDumpAll</p>
<p>and the example is: </p><div class="fragment"><div class="line">controlBoardDumper --robot icub --part head --rate 20 --joints <span class="stringliteral">&quot;(0 1 2)&quot;</span> --dataToDumpAll</div>
</div><!-- fragment --><h1><a class="anchor" id="portsa_sec"></a>
Ports Accessed</h1>
<p>For each part initalized (e.g. head): </p><ul>
<li>
/icub/head/rpc:i </li>
<li>
/icub/head/command:i </li>
<li>
/icub/head/state:i </li>
</ul>
<h1><a class="anchor" id="portsc_sec"></a>
Ports Created</h1>
<p>For each part initalized (e.g. head): </p><ul>
<li>
/robot/controlBoardDumper/part/data e.g. /icub/controlBoardDumper/head/getEncoders </li>
</ul>
<dl class="section author"><dt>Author</dt><dd>Francesco Nori</dd></dl>
<p>Copyright (C) 2008 RobotCub Consortium</p>
<p>CopyPolicy: Released under the terms of the GNU GPL v2.0.</p>
<p>This file can be edited at src/controlBoardDumper/main.cpp. </p>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Mar 26 2024 16:02:19 for iCub-main by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
