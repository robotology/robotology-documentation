<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>iCub-main: iKinGazeCtrl</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">iCub-main
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">iKinGazeCtrl<div class="ingroups"><a class="el" href="group__icub__modules__all.html">Software</a> &raquo; <a class="el" href="group__icub__module.html">iCub modules</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Gaze controller based on iKin.  
</p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Collaboration diagram for iKinGazeCtrl:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="group__iKinGazeCtrl.png" border="0" usemap="#agroup____iKinGazeCtrl" alt=""/></div>
<map name="agroup____iKinGazeCtrl" id="agroup____iKinGazeCtrl">
<area shape="rect" title="Gaze controller based on iKin." alt="" coords="164,5,267,31"/>
<area shape="rect" href="group__icub__module.html" title="This is the list of iCub modules, i.e." alt="" coords="5,5,116,31"/>
</map>
</div>
<p>Gaze controller based on iKin. </p>
<p>Copyright (C) 2010 RobotCub Consortium</p>
<p>Authors: Ugo Pattacini, Alessandro Roncone</p>
<p>CopyPolicy: Released under the terms of the GNU GPL v2.0.</p>
<h1><a class="anchor" id="intro_sec"></a>
Description</h1>
<p>This module provides a controller for the <a class="el" href="namespaceiCub.html" title="This file contains the definition of unique IDs for the body parts and the skin parts of the robot.">iCub</a> gaze capable of steering the neck and the eyes independently performing saccades, pursuit, vergence, OCR (oculo-collic reflex) and VOR (vestibulo-ocular reflex relying on inertial data).</p>
<p>The controller can be seen as cartesian gaze controller since it receives as input a 3D position in the task space. Nonetheless, further command modalities are available: 1) the coordinates (u,v) of just one pixel in the image plane along with a guessed component z in the eye's reference frame can be provided, or alternatively the vergence angle; 2) the position of the target within the two image planes can be converted in the 3D task space using the monocular approach coupled with a pid on the component z; 3) the head-centered azimuth and elevation angles along with the vergence angle can be given to the module both in absolute and relative mode.</p>
<p>Moreover, this module also implements the server part of the <a href="http://wiki.icub.org/yarpdoc/classyarp_1_1dev_1_1IGazeControl.html">Gaze Control Interface</a>. For a tutorial on how to use the interface, please go <a class="el" href="icub_gaze_interface.html">here</a>.</p>
<dl class="section note"><dt>Note</dt><dd>If the torso is not detected alive then the module will try to keep on working with just the head part.</dd>
<dd>
<b>If you're going to use this controller for your work, please quote it within any resulting publication</b>: Roncone A., Pattacini U., Metta G. &amp; Natale L., "A Cartesian 6-DoF Gaze Controller for Humanoid Robots", <em>Proceedings of Robotics: Science and Systems</em>, Ann Arbor, MI, June 18-22, 2016.</dd></dl>
<p><b>Reminder</b> <br  />
If you experience a slow speed motion, please check the shift factors settings within your low-level configuration file of the head part: they should be properly tuned. Usually a value of 8 is enough.</p>
<p>Rule: a lower shift factor allows to yield an higher joint speed and at the same time it increases the value of minimum speed that can be executed.</p>
<p>Example: look in the file <em>icub_head_torso.ini</em> of your robot setup; you should find something similar to: </p><div class="fragment"><div class="line">[VELOCITY]</div>
<div class="line">Shifts 8 8 8 8 8 8 ...</div>
</div><!-- fragment --><p>Read more on <a href="http://wiki.icub.org/wiki/ControlBoard_configuration_file#Shifts">Shifts Factors</a>.</p>
<dl class="section note"><dt>Note</dt><dd>A video on <a class="el" href="namespaceiCub.html" title="This file contains the definition of unique IDs for the body parts and the skin parts of the robot.">iCub</a> gazing can be seen <a href="https://youtu.be/I4ZKfAvs1y0">here</a>.</dd></dl>
<h1><a class="anchor" id="lib_sec"></a>
Libraries</h1>
<ul>
<li>YARP libraries.</li>
<li><a class="el" href="group__iKin.html">iKin</a> library (it requires IPOPT lib: see the <a href="http://wiki.icub.org/wiki/Installing_IPOPT">wiki</a>).</li>
</ul>
<h1><a class="anchor" id="parameters_sec"></a>
Parameters</h1>
<p>&ndash;context <em>dir</em> </p><ul>
<li>Resource finder default searching directory for configuration files; if not specified, <em>iKinGazeCtrl</em> is assumed. Beware of the <a href="http://www.yarp.it/yarp_data_dirs.html">context search policy</a>.</li>
</ul>
<p>&ndash;from <em>file</em> </p><ul>
<li>Resource finder default configuration file; if not specified, <em>config.ini</em> is assumed.</li>
</ul>
<p>&ndash;name <em>ctrlName</em> </p><ul>
<li>The parameter <em>ctrlName</em> identifies the controller's name; all the open ports will be tagged with the prefix /&lt;ctrlName&gt;. If not specified, <em>iKinGazeCtrl</em> is assumed.</li>
</ul>
<p>&ndash;robot <em>name</em> </p><ul>
<li>The parameter <em>name</em> selects the robot name to connect to; if not specified, <em>icub</em> is assumed.</li>
</ul>
<p>&ndash;head <em>name</em> </p><ul>
<li>The parameter <em>name</em> selects the robot's head port to connect to; if not specified, <em>head</em> is assumed.</li>
</ul>
<p>&ndash;torso <em>name</em> </p><ul>
<li>The parameter <em>name</em> selects the robot's torso port to connect to; if not specified, <em>torso</em> is assumed. The special string <em>off</em> can be used to skip opening the torso device. <br  />
</li>
</ul>
<p>&ndash;trajectory_time::neck <em>time</em> </p><ul>
<li>Specify the neck trajectory execution time in point-to-point movements [expressed in seconds]; by default <em>time</em> is 0.75 seconds. (Tneck cannot be set equal or lower than Teyes).</li>
</ul>
<p>&ndash;trajectory_time::eyes <em>time</em> </p><ul>
<li>Specify the eyes trajectory execution time in point-to-point movements [expressed in seconds]; by default <em>time</em> is 0.25 seconds.</li>
</ul>
<p>&ndash;cameras::context <em>dir</em> </p><ul>
<li>The parameter <em>dir</em> specifies the context used to locate the cameras parameters file (see below).</li>
</ul>
<p>&ndash;cameras::file <em>file</em> </p><ul>
<li>The parameter <em>file</em> specifies the file name used to read cameras parameters.</li>
</ul>
<p>&ndash;saccades <em>switch</em> </p><ul>
<li>Enable/disable saccadic movements; the parameter <em>switch</em> can be therefore ["on"|"off"], being "on" by default.</li>
</ul>
<p>&ndash;neck_position_control <em>switch</em> </p><ul>
<li>Enable/disable low-level position control of the neck; the parameter <em>switch</em> can be therefore ["on"|"off"], being "on" by default.</li>
</ul>
<p>&ndash;imu::mode <em>switch</em> </p><ul>
<li>Enable/disable stabilization using IMU data; the parameter <em>switch</em> can be therefore ["on"|"off"], being "on" by default.</li>
</ul>
<p>&ndash;imu::source_port_name <em>name</em> </p><ul>
<li>Allow specifying a different source port for the IMU data (see IMU filtering tools such as e.g. imuFilter).</li>
</ul>
<p>&ndash;imu::stabilization_gain <em>gain</em> </p><ul>
<li>Specify the integral gain (in [1/s]) used for gaze stabilization; the <em>gain</em> is 11.0 [1/s] by default.</li>
</ul>
<p>&ndash;imu::gyro_noise_threshold <em>thres</em> </p><ul>
<li>Specify a different threshold <em>thres</em> given in [deg/s] to filter out the residual bias in gyro readouts.</li>
</ul>
<p>&ndash;imu::vor <em>gain</em> </p><ul>
<li>Specify the contribution of the vestibulo-ocular reflex (VOR) in computing the final counter-rotation of the eyes due to neck rotation. To turn off the VOR just set the <em>gain</em> equal to 0.0. By default <em>gain</em> is 1.0, that means <em>"full
  contribution"</em>. If <em>imu::mode</em> is "off", then the gain is 0.0 by default. Values of the gain greater than 1.0 mean <em>"contribution amplified"</em>. &ndash;imu::timeout</li>
<li>Specify the read timeout (in seconds) for the imu data. The default is 0.04 seconds.</li>
</ul>
<p>&ndash;ocr <em>gain</em> </p><ul>
<li>Specify the contribution of the oculo-collic reflex (OCR) in computing the counter-rotation of the eyes due to neck rotation. To turn off the OCR just set the <em>gain</em> equal to 0.0. Default values are 0.0 if <em>imu::mode</em> is "off", 1.0 otherwise.</li>
</ul>
<p>&ndash;ping_robot_tmo <em>tmo</em> </p><ul>
<li>The parameter <em>tmo</em> is the timeout (in seconds) that allows starting up the robot before connecting to it; by default we have a timeout of 40.0 [s].</li>
</ul>
<p>&ndash;eye_tilt::min <em>min</em> </p><ul>
<li>The parameter <em>min</em> specifies the minimum eye tilt angle [deg] in order to prevent the eye from being covered by the eyelid (when they're wide open) while moving; default value is -12 [deg].</li>
</ul>
<p>&ndash;eye_tilt::max <em>max</em> </p><ul>
<li>The parameter <em>max</em> specifies the maximum eye tilt angle [deg] in order to prevent the eye from being covered by the eyelid (when they're wide open) while moving; default value is 15 [deg].</li>
</ul>
<p>&ndash;min_abs_vel <em>vel</em> </p><ul>
<li>The parameter <em>vel</em> specifies the minimum absolute velocity that can be achieved by the robot [deg/s] due to the approximation performed while delivering data over the network. By default this value is 0.0 having no result on the controller's operations. In case it is different from 0.0, the controller will implement a bang-bang approach whenever the velocity to be delivered goes under the minimum threshold.</li>
</ul>
<p>&ndash;head_version <em>ver</em> </p><ul>
<li>This option specifies the kinematic structure of the head; the value <em>ver</em> is a string (e.g., "v1.0", "v2.0"), being "v1.0" the default.</li>
</ul>
<p>&ndash;verbose</p><ul>
<li>Enable some output print-out.</li>
</ul>
<p>&ndash;tweak::file <em>file</em> </p><ul>
<li>The parameter <em>file</em> specifies the file name (located in module context) used to read/write options that are tweakable by the user; if not provided, <em>tweak.ini</em> is assumed.</li>
</ul>
<p>&ndash;tweak::overwrite <em>switch</em> </p><ul>
<li>If "on", at startup default values and cameras values retrieved from file will be overwritten by those values contained in the tweak file. The <em>switch</em> is "on" by default.</li>
</ul>
<h1><a class="anchor" id="portsa_sec"></a>
Ports Accessed</h1>
<p>The ports the module is connected to: e.g. /icub/head/command:i and so on.</p>
<h1><a class="anchor" id="portsc_sec"></a>
Ports Created</h1>
<p>There are different ways of commanding a new target fixation point:</p>
<ul>
<li>by sending the absolute 3D position to gaze at in the task space through /&lt;ctrlName&gt;/xd:i port.</li>
<li>by localizing the target in just one image plane and then sending its coordinates together with a guessed component z in the eye's reference frame to the /&lt;ctrlName&gt;/mono:i port. Alternatively, the z component can be replaced by the vergence angle. <b>In this mode the cameras intrinsic parameters are required</b>.</li>
<li>by localizing the target in the two image planes and thus sending its coordinates to the /&lt;ctrlName&gt;/stereo:i port. This strategy employs the monocular approach along with a pid that varies the component z incrementally according to the actual error; to achieve that it's required to feed continuosly the port with new feedback while converging to the target. <b>In this mode the cameras intrinsic parameters are required</b>.</li>
<li>by sending the head-centered azimuth/elevation couple in degrees wrt either to the current head position or to the absolute head position (computed with the robot looking straight ahead and all neck and eyes encoders zeroed). Vergence is also to be given either in relative mode or absolute mode. <br  />
 In this mode a final conversion to 3D points is always performed wrt to the absolute head position since the controller is intrinsically cartesian. Moreover, as the center of the head varies over time because of the motion induced by the neck, the ultimate target vergence given for instance as delta wrt the current one may differ from what expected beacuse what is actually achieved is the corresponding 3D point.</li>
</ul>
<p>The module creates the usual ports required for the communication with the robot (through interfaces) and the following ports:</p>
<ul>
<li><em>/</em> &lt;ctrlName&gt;/xd:i receives the target fixation point. It accepts 3 double (also as a Bottle object) for xyz coordinates.</li>
<li><em>/</em> &lt;ctrlName&gt;/mono:i receives the current target position expressed in one image plane. The input data format is the Bottle [type u v z], where <em>type</em> can be "left" or "right", <em> (u,v) </em> is the pixel coordinates and <em>z</em> is the guessed z-component in the eye's reference frame. An alternative command modality employs the vergence given in degrees in place of the z-component and its format is: [type u v "ver" ver].</li>
<li><em>/</em> &lt;ctrlName&gt;/stereo:i receives the current target position expressed in image planes. It accepts 4 double (also as a Bottle object) in this order: [ul vl ur vr].</li>
<li><em>/</em> &lt;ctrlName&gt;/angles:i receives the current target position expressed as azimuth/elevation/vergence triplet in degrees. It accepts 1 string and 3 doubles (also as a Bottle object) in this order: [mode azi ele ver], where <em>mode</em> can be <em>rel</em> or <em>abs</em>. A positive azimuth will turn the gaze to the right, whereas a positive elevation will move the gaze upward.</li>
<li><em>/</em> &lt;ctrlName&gt;/x:o returns the actual fixation point (Vector of 3 double). Units in meters.</li>
<li><em>/</em> &lt;ctrlName&gt;/q:o returns the actual joints configuration during movement (Vector of 9 double). The order for torso angles is the one defined by kinematic chain. Units in degrees.</li>
<li><em>/</em> &lt;ctrlName&gt;/angles:o returns the current azimuth/elevation couple wrt to the absolute head position, together with the current vergence (Vector of 3 double). Units in degrees.</li>
<li><em>/</em> &lt;ctrlName&gt;/events:o streams out the event associated to the controller's state. <br  />
 Available events are:<ul>
<li>"motion-onset" &lt;time&gt;: sent out at the beginning of the motion; comprise the time instant of the source when the event took place.</li>
<li>"motion-done" &lt;time&gt;: sent out at the end of the motion; comprise the time instant of the source when the event took place.</li>
<li>"motion-ongoing" &lt;time&gt; &lt;checkpoint&gt;: sent out when the portion of path given in [0,1] by the checkpoint parameter has been attained; comprise the time instant of the source when the event took place as well as the checkpoint.</li>
<li>"saccade-onset" &lt;time&gt;: sent out at the beginning of the saccade; comprise the time instant of the source when the event took place.</li>
<li>"saccade-done" &lt;time&gt;: sent out at the end of the saccade; comprise the time instant of the source when the event took place.</li>
<li>"stabilization-on" &lt;time&gt;: notify that gaze stabilization has been turned on; comprise the time instant of the source when the event took place.</li>
<li>"stabilization-off" &lt;time&gt;: notify that gaze stabilization has been turned off; comprise the time instant of the source when the event took place.</li>
<li>"closing" &lt;time&gt;: sent out when the controller is being shut down; comprise the time instant of the source when the event took place.</li>
<li>"suspended" &lt;time&gt;: sent out when the controller is suspended; comprise the time instant of the source when the event took place.</li>
<li>"resumed" &lt;time&gt;: sent out when the controller is resumed; comprise the time instant of the source when the event took place.</li>
<li>"comm-timeout" &lt;time&gt;: sent out when the controller gets suspended because of a communication timeout; comprise the time instant of the source when the event took place.</li>
</ul>
</li>
<li><em>/</em> &lt;ctrlName&gt;/rpc remote procedure call. <br  />
 Recognized remote commands (be careful, <b>commands dealing with geometric projections will only work if the cameras intrinsic parameters are provided</b>):<ul>
<li>[stop]: stop the motion immediately.</li>
<li>[bind] [pitch] &lt;min&gt; &lt;max&gt;: bind the neck pitch within a range given in degrees.</li>
<li>[bind] [roll] &lt;min&gt; &lt;max&gt;: bind the neck roll within a range given in degrees.</li>
<li>[bind] [yaw] &lt;min&gt; &lt;max&gt;: bind the neck yaw within a range given in degrees.</li>
<li>[bind] [eyes] &lt;ver&gt;: bind the eyes to look always straight ahead (the tilt can vary) with a specified vergence given in degrees.</li>
<li>[clear] [pitch]: restore the neck pitch range.</li>
<li>[clear] [roll]: restore the neck roll range.</li>
<li>[clear] [yaw]: restore the neck yaw range.</li>
<li>[clear] [eyes]: restore the eyes movements.</li>
<li>[get] [Tneck]: returns the neck movements execution time.</li>
<li>[get] [Teyes]: returns the eyes movements execution time.</li>
<li>[get] [vor]: returns the vor gain.</li>
<li>[get] [ocr]: returns the ocr gain.</li>
<li>[get] [sacc]: returns the saccades control status [0/1].</li>
<li>[get] [sinh]: returns the saccades inhibition period [s].</li>
<li>[get] [sact]: returns the saccades activation angle [deg].</li>
<li>[get] [track]: returns the current controller's tracking mode [0/1].</li>
<li>[get] [stab]: returns 1 iff gaze stabilization is active, 0 otherwise.</li>
<li>[get] [done]: returns 1 iff motion is done, 0 otherwise.</li>
<li>[get] [sdon]: returns 1 iff saccade is done, 0 if still underway.</li>
<li>[get] [pitch]: returns in degrees the current range of neck pitch joint.</li>
<li>[get] [roll]: returns in degrees the current range of neck roll joint.</li>
<li>[get] [yaw]: returns in degrees the current range of neck yaw joint.</li>
<li>[get] [eyes]: returns in degrees the vergence set when eyes are bound to look straight ahead; a negative values means no constraint.</li>
<li>[get] [ntol]: returns in degrees the current user tolerance for gazing with the neck.</li>
<li>[get] [des]: returns the desired head joints angles that achieve the target [deg].</li>
<li>[get] [vel]: returns the head joints velocities commanded by the controller [deg/s].</li>
<li>[get] [pose] &lt;type&gt;: returns (enclosed in a list) the left eye pose if type=="left", the right eye pose if type=="right" and the head-centered pose if type=="head". The pose is given in axis/angle representation (i.e. 7-componenets vector). Additionally, a stamp is appended as further list accounting for the time (second element of the list) relative to the encoders positions used to compute the pose.</li>
<li>[get] [2D] (&lt;type&gt; &lt;x&gt; &lt;y&gt; &lt;z&gt;): returns the 2D pixel point whose cartesian coordinates (x,y,z) are given wrt the root reference frame as the result of its projection into the image plane &lt;type&gt; ["left"|"right"].</li>
<li>[get] [3D] [mono] (&lt;type&gt; &lt; u&gt; &lt;v&gt; &lt;z&gt;): returns the 3D point whose projected pixel coordinates (u,v) in the image plane &lt;type&gt; ["left"|"right"] along with third component &lt;z&gt; in the eye's reference frame are given.</li>
<li>[get] [3D] [stereo] (&lt; ul&gt; &lt;vl&gt; &lt;ur&gt; &lt;vr&gt;): returns the 3D point whose projected pixels coordinates (ul,vl) and (ur,vr) in the image planes are provided as the result of the triangulation. <dl class="section note"><dt>Note</dt><dd>The triangulation is deeply affected by uncertainties in the cameras extrinsic parameters and cameras alignment.</dd></dl>
</li>
<li>[get] [3D] [proj] (&lt;type&gt; &lt; u&gt; &lt;v&gt; &lt; a&gt; &lt; b&gt; &lt; c&gt; &lt;d&gt;): returns the 3D point with projected pixel coordinates (u,v) in the image plane &lt;type&gt; ["left"|"right"] that results from the intersection with the plane expressed with its implicit equation ax+by+cz+d=0 in the root reference frame.</li>
<li>[get] [3D] [ang] (&lt;type&gt; &lt;azi&gt; &lt;ele&gt; &lt;ver&gt;): transforms angular coordinates into cartesian coordinates. The option &lt;type&gt; can be ["abs"|"rel"].</li>
<li>[get] [ang] (&lt;x&gt; &lt;y&gt; &lt;z&gt;): transforms cartesian coordinates into absolute angular coordinates.</li>
<li>[get] [pid]: returns (enclosed in a list) a property-like bottle containing the pid values used to converge to the target with stereo input.</li>
<li>[get] [info]: returns (enclosed in a list) a property-like bottle containing useful information, such as the "head_version" (e.g. "1.0", "2.0", ...), the "min_allowed_vergence" (in degrees), a list of the available "events", the intrinsic and extrinsic camera parameters used.</li>
<li>[get] [tweak]: returns (enclosed in a list) a property-like bottle containing low-level information on the current controller's configuration.</li>
<li>[set] [Tneck] &lt;val&gt;: sets a new movements execution time for neck movements.</li>
<li>[set] [Teyes] &lt;val&gt;: sets a new movements execution time for eyes movements.</li>
<li>[set] [vor] &lt;val&gt;: sets a new gain for vor.</li>
<li>[set] [ocr] &lt;val&gt;: sets a new gain for ocr.</li>
<li>[set] [sacc] &lt;val&gt;: enables/disables saccades; val can be [0/1].</li>
<li>[set] [sinh] &lt;val&gt;: sets the saccades inhibition period [s].</li>
<li>[set] [sact] &lt;val&gt;: sets the saccades activation angle [deg].</li>
<li>[set] [ntol] &lt;val&gt;: sets in degrees the new user tolerance for gazing with the neck.</li>
<li>[set] [track] &lt;val&gt;: sets the controller's tracking mode; val can be [0/1].</li>
<li>[set] [stab] &lt;val&gt;: turns on/off the gaze stabilization (if enabled at start-up); val can be [0/1].</li>
<li>[set] <a href="(prop0 (&lt;val&gt; &lt;val&gt; ...)) (prop1) (&lt;val&gt;
      &lt;val&gt; ...)">pid</a>: sets the pid values used to converge to the target with stereo input. The pid is implemented in parallel form (<a class="el" href="group__PIDs.html">PIDs</a>). Aside from the usual pid parameters a further option "dominantEye" is available that enables the user to chose the dominant eye employed for the monocular approach.</li>
<li>[set] <a href="(prop0 (&lt;val&gt; &lt;val&gt; ...)) (prop1) (&lt;val&gt;
      &lt;val&gt; ...)">tweak</a>: sets parameters for the low-level controller's configuration.</li>
<li>[look] [3D] (&lt;x&gt; &lt;y&gt; &lt;z&gt;): yields gazing at target specified as 3D point. Distances are in meters.</li>
<li>[look] [mono] (&lt;type&gt; &lt; u&gt; &lt;v&gt; &lt;z&gt;): yields gazing at target specified in terms of pixel coordinates (u,v) in the image plane &lt;type&gt; ["left"|"right"] along with third component &lt;z&gt; in the eye's reference frame. Distances are in meters.</li>
<li>[look] [mono] (&lt;type&gt; &lt; u&gt; &lt;v&gt; "ver" &lt;ver&gt;): yields gazing at target specified in terms of pixel coordinates (u,v) in the image plane &lt;type&gt; ["left"|"right"] along with the vergence &lt;ver&gt;. Angles are in degrees.</li>
<li>[look] [stereo] (&lt; ul&gt; &lt;vl&gt; &lt;ur&gt; &lt;vr&gt;): yields gazing at target specified in terms of projected pixels coordinates (ul,vl) and (ur,vr) in the image planes.</li>
<li>[look] [ang] (&lt;type&gt; &lt;azi&gt; &lt;ele&gt; &lt;ver&gt;): yields gazing at target specified in angular coordinates. The option &lt;type&gt; can be ["abs"|"rel"]. Angles are in degrees.</li>
<li>[store]: store the controller context returning an integer identifier. The context comprises the values of internal controller variables, such as the tracking mode, the trajectory time and so on.</li>
<li>[restore] &lt;id&gt;: restore a previously stored controller context referred by the identifier <em>id</em>.</li>
<li><a href="id0&gt; &lt;id1&gt; ...">del</a>: delete all the contexts whose ids are contained in the list.</li>
<li>[register] [ongoing] &lt;checkpoint&gt;: register the "motion-ongoing" event with the given checkpoint in [0,1].</li>
<li>[unregister] [ongoing] &lt;checkpoint&gt;: unregister the "motion-ongoing" event with the given checkpoint in [0,1].</li>
<li>[list] [ongoing]: return the list of registered "motion-ongoing" events.</li>
<li>[susp]: suspend the module.</li>
<li>[run]: resume the module.</li>
<li>[status]: returns "running" or "suspended".</li>
<li>[quit]: quit the module.</li>
</ul>
</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>When the tracking mode is active and the controller has reached the target, it keeps on sending velocities to the head in order to compensate for any movements induced by the torso. If tracking mode is switched off, the controller automatically disconnects once the target is attained and reconnects at the next requested target. The controller starts by default in non-tracking mode.</dd></dl>
<h1><a class="anchor" id="coor_sys_sec"></a>
Coordinate System</h1>
<p>Positions (meters) refer to the root reference frame attached to the waist as in the <a href="http://wiki.icub.org/wiki/ICubForwardKinematics">wiki</a>.</p>
<h1><a class="anchor" id="in_files_sec"></a>
Input Data Files</h1>
<p>None.</p>
<h1><a class="anchor" id="out_data_sec"></a>
Output Data Files</h1>
<p>None.</p>
<h1><a class="anchor" id="conf_file_sec"></a>
Configuration Files</h1>
<p>A configuration file passed through <em>&ndash;cameras::file</em> contains the fields required to specify the cameras intrinsic parameters along with a roto-translation matrix appended to the eye kinematic (see the iKinChain::setHN method) in order to achieve the alignment with the optical axes compensating for possible unknown offsets.</p>
<p>The final roto-translation matrix is meaningful only as result of the calibration of the cameras extrinsic parameters that can be obtained for instance through the <a class="el" href="group__icub__stereoCalib.html">stereoCalib</a> module.</p>
<p>Example:</p>
<div class="fragment"><div class="line">[CAMERA_CALIBRATION_RIGHT]</div>
<div class="line">fx 225.904</div>
<div class="line">fy 227.041</div>
<div class="line">cx 157.858</div>
<div class="line">cy 113.51</div>
<div class="line"> </div>
<div class="line">[CAMERA_CALIBRATION_LEFT]</div>
<div class="line">fx 219.057</div>
<div class="line">fy 219.028</div>
<div class="line">cx 174.742</div>
<div class="line">cy 102.874</div>
<div class="line"> </div>
<div class="line">[ALIGN_KIN_LEFT]</div>
<div class="line">HN (0.0 1.0 2.0 ... 15.0)  <span class="comment">// list of 4x4 doubles (per rows)</span></div>
<div class="line"> </div>
<div class="line">[ALIGN_KIN_RIGHT]</div>
<div class="line">HN (0.0 1.0 2.0 ... 15.0)  <span class="comment">// list of 4x4 doubles (per rows)</span></div>
</div><!-- fragment --><h1><a class="anchor" id="tested_os_sec"></a>
Tested OS</h1>
<p>Windows, Linux</p>
<dl class="section author"><dt>Author</dt><dd>Ugo Pattacini, Alessandro Roncone </dd></dl>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Mar 26 2024 16:02:19 for iCub-main by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
