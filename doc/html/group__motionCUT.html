<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>iCub-main: motionCUT</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">iCub-main
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">motionCUT<div class="ingroups"><a class="el" href="group__icub__modules__all.html">Software</a> &raquo; <a class="el" href="group__icub__module.html">iCub modules</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Independent Motion Detector Version:1.0.  
</p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Collaboration diagram for motionCUT:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="group__motionCUT.png" border="0" usemap="#agroup____motionCUT" alt=""/></div>
<map name="agroup____motionCUT" id="agroup____motionCUT">
<area shape="rect" title="Independent Motion Detector Version:1.0." alt="" coords="164,5,259,31"/>
<area shape="rect" href="group__icub__module.html" title="This is the list of iCub modules, i.e." alt="" coords="5,5,116,31"/>
</map>
</div>
<p>Independent Motion Detector Version:1.0. </p>
<dl class="section author"><dt>Author</dt><dd>Carlo Ciliberto <a href="#" onclick="location.href='mai'+'lto:'+'car'+'lo'+'.ci'+'li'+'ber'+'to'+'@ii'+'t.'+'it'; return false;">carlo<span style="display: none;">.nosp@m.</span>.cil<span style="display: none;">.nosp@m.</span>ibert<span style="display: none;">.nosp@m.</span>o@ii<span style="display: none;">.nosp@m.</span>t.it</a>, Ugo Pattacini <a href="#" onclick="location.href='mai'+'lto:'+'ugo'+'.p'+'att'+'ac'+'ini'+'@i'+'it.'+'it'; return false;">ugo.p<span style="display: none;">.nosp@m.</span>atta<span style="display: none;">.nosp@m.</span>cini@<span style="display: none;">.nosp@m.</span>iit.<span style="display: none;">.nosp@m.</span>it</a> <br  />
 </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Released under the terms of the GNU GPL v2.0 </dd></dl>
<h1><a class="anchor" id="intro_sec"></a>
Description</h1>
<p>The module exploits the pyramidal Lucas-Kanade algorithm to detect independent moving points over a selectable grid of nodes. The algorithm is designed in such a way that it works also - and especially - with moving cameras.</p>
<dl class="section note"><dt>Note</dt><dd>The name motionCUT stands for <em>motion Cover/Uncover Trick</em> and refers to its working principle that is detailed in the paper: Ciliberto C., Pattacini U., Natale L., Nori F. and Metta G., "Reexamining Lucas-Kanade Method for Real-Time Independent Motion Detection: Application to the <a class="el" href="namespaceiCub.html" title="This file contains the definition of unique IDs for the body parts and the skin parts of the robot.">iCub</a> Humanoid Robot", <em>IEEE/RSJ International Conference on Intelligent Robots and Systems</em>, San Francisco, CA, USA, 2011.</dd>
<dd>
<b>If you're going to use the motionCUT for your work, please quote it within any resulting publication</b>.</dd>
<dd>
We warmly suggest to use OpenCV in conjunction with multi-threading layers such as TBB in order to achieve high performances for motion detection. Refer to the OpenCV documentation for the details.</dd>
<dd>
A video on <a class="el" href="namespaceiCub.html" title="This file contains the definition of unique IDs for the body parts and the skin parts of the robot.">iCub</a> employing <em>motionCUT</em> can be seen <a href="http://www.youtube.com/watch?v=Ql8Qe0oxHaY">here</a>.</dd></dl>
<h1><a class="anchor" id="parameters_sec"></a>
Parameters</h1>
<ul>
<li>&ndash; name : Specifies the stem name of ports created by the module.</li>
<li>&ndash; coverXratio : Portion of the x-axis of the image covered by the grid nodes. Example: if the value is 0.75, then the central 3/4 of the x-axis will be covered with points.</li>
<li>&ndash; coverYratio : Portion of the y-axis of the image covered by the grid nodes. Example: if the value is 0.75, then the central 3/4 of the y-axis will be covered with points.</li>
<li>&ndash; nodesStep : Step (in pixels) between two consecutive grid nodes.</li>
<li>&ndash; winSize : Window size used by the algorithm.</li>
<li>&ndash; recogThres : Error threshold (in percentage) that allows discriminating between background and independent moving nodes as result of a matching carried out on the windows whose size is determined by 'winSize' parameter. Usually very small values, such as 0.5%, have to be used. Indicatively, a value of 0.5% means that the two templates for the matching must have a similarity measure of 99.5% to prevent the relative node from being recognized as independent moving node. Importantly, this parameter is also significantly affected by how well the matching is performed; as result, for increasing OpenCV versions, the threshold needs to be reduced (e.g. 0.01%).</li>
<li>&ndash; adjNodesThres : This parameter allows filtering out the <em>salt-and-pepper</em> noise over the output image, by specifying the minimum number of adjacent nodes that must be active (i.e. that undergo the motion) in the neighbourhood of any single node to keep it active.</li>
<li>&ndash; blobMinSizeThres : This parameter allows filtering out blobs whose nodes number is lower than the provided value.</li>
<li>&ndash; framesPersistence : This parameter allows increasing the node persistence over consecutive frames implementing a sort of low-pass filter. Its value specifies the number of consecutive frames for which if a node gets active it is kept on.</li>
<li>&ndash; cropSize : This parameter allows changing the the side of a squared cropping window placed on the center of the largest blob detected. Default value is <em>auto</em>, meaning that the cropping window will adapt to the size of the blob. </li>
</ul>
<h1><a class="anchor" id="inputports_sec"></a>
Input Ports</h1>
<ul>
<li>/motionCUT/img:i [yarp::sig::Image] [default carrier:udp]: Accepts the incoming images.</li>
</ul>
<h1><a class="anchor" id="outputports_sec"></a>
Output Ports</h1>
<ul>
<li>/motionCUT/img:o [yarp::sig::Image] [default carrier:udp]: Outputs the input images with the grid layer on top. This port propagates the time-stamp carried by the input image.</li>
<li>/motionCUT/nodes:o [yarp::os::Bottle] [default carrier:udp]: Outputs the input x-y location of the currently active nodes in this format: (nodesStep 'val') ('n0.x' 'n0.y') ('n1.x' 'n1.y') ... . This port propagates the time-stamp carried by the input image.</li>
<li>/motionCUT/blobs:o [yarp::os::Bottle] [default carrier:udp]: Outputs the input x-y location of blobs centroids along with their size in this format: ('b0.cx' 'b0.cy' 'b0.size') ('b1.cx' 'b1.cy' 'b1.size') ... . The output blobs list is sorted according to their size (decreasing order). This port propagates the time-stamp carried by the input image.</li>
<li>/motionCUT/crop:o [yarp::sig::Image] [default carrier:udp]: Outputs a window of fixed size obtained from a ROI around the center of mass of the largest blob detected.</li>
<li>/motionCUT/opt:o [yarp::sig::Image] [default carrier:udp]: Outputs monochrome images containing just the grid nodes signaling independent movements. This port propagates the time-stamp carried by the input image.</li>
</ul>
<h1><a class="anchor" id="services_sec"></a>
Services</h1>
<ul>
<li>/motionCUT/rpc [rpc-server]: <pre class="fragment">   The parameters winSize, recogThres, adjNodesThres, blobMinSizeThres, framesPersistence, cropSize,
   verbosity can be changed/retrieved through the commands set/get. Moreover, the further
   switch inhibition can be accessed in order to enable/disable the motion detection at run-time.
</pre> . This service is described in () </li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Mar 26 2024 16:02:20 for iCub-main by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
