<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>iCub-main: The Layout System</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">iCub-main
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">The Layout System </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The layout system is responsible for positioning and scaling layout elements such as axis rects, legends and plot titles in a <a class="el" href="classQCustomPlot.html" title="The central class of the library.">QCustomPlot</a>.</p>
<h1><a class="anchor" id="layoutsystem-classesandmechanisms"></a>
Classes and mechanisms</h1>
<p>The layout system is based on the abstract base class <a class="el" href="classQCPLayoutElement.html">QCPLayoutElement</a>. All objects that take part in the layout system derive from this class, either directly or indirectly.</p>
<p>Since <a class="el" href="classQCPLayoutElement.html" title="The abstract base class for all objects that form the layout system.">QCPLayoutElement</a> itself derives from <a class="el" href="classQCPLayerable.html">QCPLayerable</a>, a layout element may draw its own content. However, it is perfectly possible for a layout element to only serve as a structuring and/or positioning element, not drawing anything on its own.</p>
<h2><a class="anchor" id="layoutsystem-rects"></a>
Rects of a layout element</h2>
<p>A layout element is a rectangular object described by two rects: the inner rect (<a class="el" href="classQCPLayoutElement.html#a208effccfe2cca4a0eaf9393e60f2dd4">QCPLayoutElement::rect</a>) and the outer rect (<a class="el" href="classQCPLayoutElement.html#a38975ea13e36de8e53391ce41d94bc0f">QCPLayoutElement::setOuterRect</a>). The inner rect is calculated automatically by applying the margin (<a class="el" href="classQCPLayoutElement.html#a8f450b1f3f992ad576fce2c63d8b79cf">QCPLayoutElement::setMargins</a>) inward from the outer rect. The inner rect is meant for main content while the margin area may either be left blank or serve for displaying peripheral graphics. For example, <a class="el" href="classQCPAxisRect.html">QCPAxisRect</a> positions the four main axes at the sides of the inner rect, so graphs end up inside it and the axis labels and tick labels are in the margin area.</p>
<h2><a class="anchor" id="layoutsystem-margins"></a>
Margins</h2>
<p>Each layout element may provide a mechanism to automatically determine its margins. Internally, this is realized with the <a class="el" href="classQCPLayoutElement.html#a005c9f0fe84bc1591a2cf2c46fd477b4">QCPLayoutElement::calculateAutoMargin</a> function which takes a <a class="el" href="namespaceQCP.html#a7e487e3e2ccb62ab7771065bab7cae54">QCP::MarginSide</a> and returns an integer value which represents the ideal margin for the specified side. The automatic margin will be used on the sides specified in <a class="el" href="classQCPLayoutElement.html#accfda49994e3e6d51ed14504abf9d27d">QCPLayoutElement::setAutoMargins</a>. By default, it is set to <a class="el" href="namespaceQCP.html#a7e487e3e2ccb62ab7771065bab7cae54a43d7361cb0c5244eabdc962021bffebc">QCP::msAll</a> meaning automatic margin calculation is enabled for all four sides. In this case, a minimum margin may be set with <a class="el" href="classQCPLayoutElement.html#a0a8a17abc16b7923159fcc7608f94673">QCPLayoutElement::setMinimumMargins</a>, to prevent the automatic margin mechanism from setting margins smaller than desired for a specific situation. If automatic margin calculation is unset for a specific side, the margin of that side can be controlled directy via <a class="el" href="classQCPLayoutElement.html#a8f450b1f3f992ad576fce2c63d8b79cf">QCPLayoutElement::setMargins</a>.</p>
<p>If multiple layout ements are arranged next to or beneath each other, it may be desirable to align their inner rects on certain sides. Since they all might have different automatic margins, this usually isn't the case. The class <a class="el" href="classQCPMarginGroup.html">QCPMarginGroup</a> and <a class="el" href="classQCPLayoutElement.html#a516e56f76b6bc100e8e71d329866847d">QCPLayoutElement::setMarginGroup</a> fix this by allowing to synchronize multiple margins. See the documentation there for details.</p>
<h2><a class="anchor" id="layoutsystem-layout"></a>
Layouts</h2>
<p>As mentioned, a <a class="el" href="classQCPLayoutElement.html" title="The abstract base class for all objects that form the layout system.">QCPLayoutElement</a> may have an arbitrary number of child layout elements and in princple can have the only purpose to manage/arrange those child elements. This is what the subclass <a class="el" href="classQCPLayout.html">QCPLayout</a> specializes on. It is a <a class="el" href="classQCPLayoutElement.html" title="The abstract base class for all objects that form the layout system.">QCPLayoutElement</a> itself but has no visual representation. It defines an interface to add, remove and manage child layout elements. <a class="el" href="classQCPLayout.html" title="The abstract base class for layouts.">QCPLayout</a> isn't a usable layout though, it's an abstract base class that concrete layouts derive from, like <a class="el" href="classQCPLayoutGrid.html">QCPLayoutGrid</a> which arranges its child elements in a grid and <a class="el" href="classQCPLayoutInset.html">QCPLayoutInset</a> which allows placing child elements freely inside its rect.</p>
<p>Since a <a class="el" href="classQCPLayout.html" title="The abstract base class for layouts.">QCPLayout</a> is a layout element itself, it may be placed inside other layouts. This way, complex hierarchies may be created, offering very flexible arrangements.</p>
<div class="image">
<img src="LayoutsystemSketch.png" alt=""/>
</div>
<p>Above is a sketch of the default <a class="el" href="classQCPLayoutGrid.html">QCPLayoutGrid</a> accessible via <a class="el" href="classQCustomPlot.html#af1a1f1f571237deb7c2bd34a5e9f018f">QCustomPlot::plotLayout</a>. It shows how two child layout elements are placed inside the grid layout next to each other in cells (0, 0) and (0, 1).</p>
<h2><a class="anchor" id="layoutsystem-plotlayout"></a>
The top level plot layout</h2>
<p>Every <a class="el" href="classQCustomPlot.html" title="The central class of the library.">QCustomPlot</a> has one top level layout of type <a class="el" href="classQCPLayoutGrid.html">QCPLayoutGrid</a>. It is accessible via <a class="el" href="classQCustomPlot.html#af1a1f1f571237deb7c2bd34a5e9f018f">QCustomPlot::plotLayout</a> and contains (directly or indirectly via other sub-layouts) all layout elements in the <a class="el" href="classQCustomPlot.html" title="The central class of the library.">QCustomPlot</a>. By default, this top level grid layout contains a single cell which holds the main axis rect.</p>
<h2><a class="anchor" id="layoutsystem-examples"></a>
Examples</h2>
<p><b>Adding a plot title</b> is a typical and simple case to demonstrate basic workings of the layout system. </p><div class="fragment"><div class="line"><span class="comment">// first we create and prepare a plot title layout element:</span></div>
<div class="line"><a class="code" href="classQCPPlotTitle.html">QCPPlotTitle</a> *title = <span class="keyword">new</span> <a class="code" href="classQCPPlotTitle.html">QCPPlotTitle</a>(customPlot);</div>
<div class="line">title-&gt;<a class="code" href="classQCPPlotTitle.html#aae5a93e88050dfb2cbf6adc087516821">setText</a>(<span class="stringliteral">&quot;Plot Title Example&quot;</span>);</div>
<div class="line">title-&gt;<a class="code" href="classQCPPlotTitle.html#a199fc7170802ea65006c371875349e37">setFont</a>(QFont(<span class="stringliteral">&quot;sans&quot;</span>, 12, QFont::Bold));</div>
<div class="line"><span class="comment">// then we add it to the main plot layout:</span></div>
<div class="line">customPlot-&gt;plotLayout()-&gt;insertRow(0); <span class="comment">// insert an empty row above the axis rect</span></div>
<div class="line">customPlot-&gt;plotLayout()-&gt;addElement(0, 0, title); <span class="comment">// place the title in the empty cell we&#39;ve just created</span></div>
<div class="ttc" id="aclassQCPPlotTitle_html"><div class="ttname"><a href="classQCPPlotTitle.html">QCPPlotTitle</a></div><div class="ttdoc">A layout element displaying a plot title text.</div><div class="ttdef"><b>Definition:</b> <a href="qcustomplot_8h_source.html#l02269">qcustomplot.h:2270</a></div></div>
<div class="ttc" id="aclassQCPPlotTitle_html_a199fc7170802ea65006c371875349e37"><div class="ttname"><a href="classQCPPlotTitle.html#a199fc7170802ea65006c371875349e37">QCPPlotTitle::setFont</a></div><div class="ttdeci">void setFont(const QFont &amp;font)</div><div class="ttdoc">Sets the font of the title text.</div><div class="ttdef"><b>Definition:</b> <a href="qcustomplot_8cpp_source.html#l13578">qcustomplot.cpp:13578</a></div></div>
<div class="ttc" id="aclassQCPPlotTitle_html_aae5a93e88050dfb2cbf6adc087516821"><div class="ttname"><a href="classQCPPlotTitle.html#aae5a93e88050dfb2cbf6adc087516821">QCPPlotTitle::setText</a></div><div class="ttdeci">void setText(const QString &amp;text)</div><div class="ttdoc">Sets the text that will be displayed to text.</div><div class="ttdef"><b>Definition:</b> <a href="qcustomplot_8cpp_source.html#l13568">qcustomplot.cpp:13568</a></div></div>
</div><!-- fragment --> <div class="image">
<img src="layoutsystem-addingplottitle.png" alt=""/>
</div>
<p><b>Arranging multiple axis rects</b> actually is the central purpose of the layout system. </p><div class="fragment"><div class="line">customPlot-&gt;plotLayout()-&gt;clear(); <span class="comment">// let&#39;s start from scratch and remove the default axis rect</span></div>
<div class="line"><span class="comment">// add the first axis rect in second row (row index 1):</span></div>
<div class="line"><a class="code" href="classQCPAxisRect.html">QCPAxisRect</a> *topAxisRect = <span class="keyword">new</span> <a class="code" href="classQCPAxisRect.html">QCPAxisRect</a>(customPlot);</div>
<div class="line">customPlot-&gt;plotLayout()-&gt;addElement(1, 0, topAxisRect);</div>
<div class="line"><span class="comment">// create a sub layout that we&#39;ll place in first row:</span></div>
<div class="line"><a class="code" href="classQCPLayoutGrid.html">QCPLayoutGrid</a> *subLayout = <span class="keyword">new</span> <a class="code" href="classQCPLayoutGrid.html">QCPLayoutGrid</a>;</div>
<div class="line">customPlot-&gt;plotLayout()-&gt;<a class="code" href="classQCPLayoutGrid.html#adff1a2ca691ed83d2d24a4cd1fe17012">addElement</a>(0, 0, subLayout);</div>
<div class="line"><span class="comment">// add two axis rects in the sub layout next to each other:</span></div>
<div class="line"><a class="code" href="classQCPAxisRect.html">QCPAxisRect</a> *leftAxisRect = <span class="keyword">new</span> <a class="code" href="classQCPAxisRect.html">QCPAxisRect</a>(customPlot);</div>
<div class="line"><a class="code" href="classQCPAxisRect.html">QCPAxisRect</a> *rightAxisRect = <span class="keyword">new</span> <a class="code" href="classQCPAxisRect.html">QCPAxisRect</a>(customPlot);</div>
<div class="line">subLayout-&gt;<a class="code" href="classQCPLayoutGrid.html#adff1a2ca691ed83d2d24a4cd1fe17012">addElement</a>(0, 0, leftAxisRect);</div>
<div class="line">subLayout-&gt;<a class="code" href="classQCPLayoutGrid.html#adff1a2ca691ed83d2d24a4cd1fe17012">addElement</a>(0, 1, rightAxisRect);</div>
<div class="line">subLayout-&gt;<a class="code" href="classQCPLayoutGrid.html#ae38f31a71687b9d7ee3104852528fb50">setColumnStretchFactor</a>(0, 3); <span class="comment">// left axis rect shall have 60% of width</span></div>
<div class="line">subLayout-&gt;<a class="code" href="classQCPLayoutGrid.html#ae38f31a71687b9d7ee3104852528fb50">setColumnStretchFactor</a>(1, 2); <span class="comment">// right one only 40% (3:2 = 60:40)</span></div>
<div class="line"><span class="comment">// since we&#39;ve created the axis rects and axes from scratch, we need to place them on</span></div>
<div class="line"><span class="comment">// according layers, if we don&#39;t want the grid to be drawn above the axes etc.</span></div>
<div class="line"><span class="comment">// place the axis on &quot;axes&quot; layer and grids on the &quot;grid&quot; layer, which is below &quot;axes&quot;:</span></div>
<div class="line">QList&lt;QCPAxis*&gt; allAxes;</div>
<div class="line">allAxes &lt;&lt; topAxisRect-&gt;<a class="code" href="classQCPAxisRect.html#a8db4722cb93e9c4a6f0d91150c200867">axes</a>() &lt;&lt; leftAxisRect-&gt;<a class="code" href="classQCPAxisRect.html#a8db4722cb93e9c4a6f0d91150c200867">axes</a>() &lt;&lt; rightAxisRect-&gt;<a class="code" href="classQCPAxisRect.html#a8db4722cb93e9c4a6f0d91150c200867">axes</a>();</div>
<div class="line"><span class="keywordflow">foreach</span> (<a class="code" href="classQCPAxis.html">QCPAxis</a> *axis, allAxes)</div>
<div class="line">{</div>
<div class="line">  axis-&gt;<a class="code" href="classQCPLayerable.html#ab0d0da6d2de45a118886d2c8e16d5a54">setLayer</a>(<span class="stringliteral">&quot;axes&quot;</span>);</div>
<div class="line">  axis-&gt;<a class="code" href="classQCPAxis.html#a63f1dd2df663680d2a8d06c19592dd63">grid</a>()-&gt;<a class="code" href="classQCPLayerable.html#ab0d0da6d2de45a118886d2c8e16d5a54">setLayer</a>(<span class="stringliteral">&quot;grid&quot;</span>);</div>
<div class="line">}</div>
<div class="ttc" id="aclassQCPAxisRect_html"><div class="ttname"><a href="classQCPAxisRect.html">QCPAxisRect</a></div><div class="ttdoc">Holds multiple axes and arranges them in a rectangular shape.</div><div class="ttdef"><b>Definition:</b> <a href="qcustomplot_8h_source.html#l01948">qcustomplot.h:1949</a></div></div>
<div class="ttc" id="aclassQCPAxisRect_html_a8db4722cb93e9c4a6f0d91150c200867"><div class="ttname"><a href="classQCPAxisRect.html#a8db4722cb93e9c4a6f0d91150c200867">QCPAxisRect::axes</a></div><div class="ttdeci">QList&lt; QCPAxis * &gt; axes(QCPAxis::AxisTypes types) const</div><div class="ttdoc">Returns all axes on the axis rect sides specified with types.</div><div class="ttdef"><b>Definition:</b> <a href="qcustomplot_8cpp_source.html#l11858">qcustomplot.cpp:11858</a></div></div>
<div class="ttc" id="aclassQCPAxis_html"><div class="ttname"><a href="classQCPAxis.html">QCPAxis</a></div><div class="ttdoc">Manages a single axis inside a QCustomPlot.</div><div class="ttdef"><b>Definition:</b> <a href="qcustomplot_8h_source.html#l00979">qcustomplot.h:980</a></div></div>
<div class="ttc" id="aclassQCPAxis_html_a63f1dd2df663680d2a8d06c19592dd63"><div class="ttname"><a href="classQCPAxis.html#a63f1dd2df663680d2a8d06c19592dd63">QCPAxis::grid</a></div><div class="ttdeci">QCPGrid * grid() const</div><div class="ttdoc">Returns the QCPGrid instance belonging to this axis.</div><div class="ttdef"><b>Definition:</b> <a href="qcustomplot_8h_source.html#l01131">qcustomplot.h:1131</a></div></div>
<div class="ttc" id="aclassQCPLayerable_html_ab0d0da6d2de45a118886d2c8e16d5a54"><div class="ttname"><a href="classQCPLayerable.html#ab0d0da6d2de45a118886d2c8e16d5a54">QCPLayerable::setLayer</a></div><div class="ttdeci">Q_SLOT bool setLayer(QCPLayer *layer)</div><div class="ttdoc">Sets the layer of this layerable object.</div><div class="ttdef"><b>Definition:</b> <a href="qcustomplot_8cpp_source.html#l00974">qcustomplot.cpp:974</a></div></div>
<div class="ttc" id="aclassQCPLayoutGrid_html"><div class="ttname"><a href="classQCPLayoutGrid.html">QCPLayoutGrid</a></div><div class="ttdoc">A layout that arranges child elements in a grid.</div><div class="ttdef"><b>Definition:</b> <a href="qcustomplot_8h_source.html#l00756">qcustomplot.h:757</a></div></div>
<div class="ttc" id="aclassQCPLayoutGrid_html_adff1a2ca691ed83d2d24a4cd1fe17012"><div class="ttname"><a href="classQCPLayoutGrid.html#adff1a2ca691ed83d2d24a4cd1fe17012">QCPLayoutGrid::addElement</a></div><div class="ttdeci">bool addElement(int row, int column, QCPLayoutElement *element)</div><div class="ttdoc">Adds the element to cell with row and column.</div><div class="ttdef"><b>Definition:</b> <a href="qcustomplot_8cpp_source.html#l02686">qcustomplot.cpp:2686</a></div></div>
<div class="ttc" id="aclassQCPLayoutGrid_html_ae38f31a71687b9d7ee3104852528fb50"><div class="ttname"><a href="classQCPLayoutGrid.html#ae38f31a71687b9d7ee3104852528fb50">QCPLayoutGrid::setColumnStretchFactor</a></div><div class="ttdeci">void setColumnStretchFactor(int column, double factor)</div><div class="ttdoc">Sets the stretch factor of column.</div><div class="ttdef"><b>Definition:</b> <a href="qcustomplot_8cpp_source.html#l02730">qcustomplot.cpp:2730</a></div></div>
</div><!-- fragment --> <div class="image">
<img src="layoutsystem-multipleaxisrects.png" alt=""/>
</div>
 </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Mar 26 2024 16:02:19 for iCub-main by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
