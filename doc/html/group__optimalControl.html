<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>iCub-main: Optimal Control</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">iCub-main
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a>  </div>
  <div class="headertitle">
<div class="title">Optimal Control<div class="ingroups"><a class="el" href="group__icub__modules__all.html">Software</a> &raquo; <a class="el" href="group__icub__libraries.html">Libraries</a> &raquo; <a class="el" href="group__ctrlLib.html">ctrlLib</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Class for optimal control based on Discrete Algebraic Riccati Equation (DARE).  
<a href="#details">More...</a></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Collaboration diagram for Optimal Control:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="group__optimalControl.png" border="0" usemap="#agroup____optimalControl" alt=""/></div>
<map name="agroup____optimalControl" id="agroup____optimalControl">
<area shape="rect" href="group__ctrlLib.html" title="Classes for control engineering: filtering, fitting, Kalman estimation, PIDs and more topics are expe..." alt="" coords="5,5,68,31"/>
<area shape="rect" title="Class for optimal control based on Discrete Algebraic Riccati Equation (DARE)." alt="" coords="116,5,241,31"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiCub_1_1ctrl_1_1Riccati.html">iCub::ctrl::Riccati</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Classic <a class="el" href="classiCub_1_1ctrl_1_1Riccati.html" title="Classic Riccati recursive formula for optimal control in a LQ problem.">Riccati</a> recursive formula for optimal control in a LQ problem.  <a href="classiCub_1_1ctrl_1_1Riccati.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Class for optimal control based on Discrete Algebraic Riccati Equation (DARE). </p>
<h1><a class="anchor" id="intro_sec"></a>
Description</h1>
<p>The class Riccati can be used for optimal control based on Discrete Algebraic Riccati Equation (DARE). The DARE is used to compute the linear gain matrix of the feedback controls. In the following, the basics of a LQR (linear quadratic regulation) problem are reported.</p>
<p>Given the linear system: </p><p class="formulaDsp">
\[ x_{i+1} = A x_i + B u_i \ , \ i=0,1,\ldots,N-1 \]
</p>
<p> with the known initial state \( x_0 = \hat{x} \), and the quadratic cost \( J \): </p><p class="formulaDsp">
\[ J = \sum^{N-1}_{i=0} \left[ x^\top_i V x_i + u^\top_i P u_i \right] + x^\top_N V_N x_N \]
</p>
<p> with \( V=V^\top \geq 0 \), \( V_N=V^\top_N \geq 0 \), \( P=P^\top&gt;0 \), the problem is to find the sequence of optimal controls \( u^\circ_0, \ldots, u^\circ_{N-1} \) minimizing \(J\). The optimal controls can be found via dynamic programming, and a closed form solution can be found. At time instant \(i\) the optimal cost-to-go and control are: </p><p class="formulaDsp">
\[ J^\circ(x_{i}) = x^\top_{i} \ T_{i} \ x_{i} \ , \ u^\circ_{i} = - L_i \ x_{i} \]
</p>
<p> where \( L_i \) is: </p><p class="formulaDsp">
\[ L_i = (P+B^\top T_{i+1} B)^{-1} B^\top T_{i+1} A \]
</p>
<p> whilst \( T_i \) is computed after the `&lsquo;discrete time algebraic Riccati equation&rsquo;': </p><p class="formulaDsp">
\[ T_N = V_N \ , \ T_i = V + A^\top [ T_{i+1} - T_{i+1} B (P+B^\top T_{i+1} B)^{-1} B^\top T_{i+1} ] A \]
</p>
<h1><a class="anchor" id="code_example_sec"></a>
Example</h1>
<div class="fragment"><div class="line">Riccati r(<a class="code" href="sine_8m.html#a3b98e2dffc6cb06a89dcb0d5c60a0206">A</a>,B,V,P,VN,<span class="keyword">true</span>);</div>
<div class="line">r.solveRiccati(steps);</div>
<div class="line"><span class="keywordflow">for</span>(i=0; i&lt;steps; i++)</div>
<div class="line">{</div>
<div class="line">   u=r.doLQcontrol(i,<a class="code" href="compute__ekf__sym_8m.html#abe119338ba11d7fd166333a3941bc2c4">x</a>);</div>
<div class="line">   <a class="code" href="compute__ekf__sym_8m.html#abe119338ba11d7fd166333a3941bc2c4">x</a>=<a class="code" href="sine_8m.html#a3b98e2dffc6cb06a89dcb0d5c60a0206">A</a>*<a class="code" href="compute__ekf__sym_8m.html#abe119338ba11d7fd166333a3941bc2c4">x</a>+B*u;</div>
<div class="line">} </div>
<div class="ttc" id="acompute__ekf__sym_8m_html_abe119338ba11d7fd166333a3941bc2c4"><div class="ttname"><a href="compute__ekf__sym_8m.html#abe119338ba11d7fd166333a3941bc2c4">x</a></div><div class="ttdeci">x</div><div class="ttdef"><b>Definition:</b> <a href="compute__ekf__sym_8m_source.html#l00021">compute_ekf_sym.m:21</a></div></div>
<div class="ttc" id="asine_8m_html_a3b98e2dffc6cb06a89dcb0d5c60a0206"><div class="ttname"><a href="sine_8m.html#a3b98e2dffc6cb06a89dcb0d5c60a0206">A</a></div><div class="ttdeci">A</div><div class="ttdef"><b>Definition:</b> <a href="sine_8m_source.html#l00016">sine.m:16</a></div></div>
</div><!-- fragment --><dl class="section author"><dt>Author</dt><dd>Serena Ivaldi</dd></dl>
<p>Copyright (C) 2010 RobotCub Consortium</p>
<p>CopyPolicy: Released under the terms of the GNU GPL v2.0. </p>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Mar 26 2024 16:02:19 for iCub-main by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
