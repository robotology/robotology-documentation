<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>iCub-main: icub-main/src/libraries/icubmod/canBusMotionControl/CanBusMotionControl.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">iCub-main
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_3650c6ebe9b4f4be91d544083c621a97.html">icub-main</a></li><li class="navelem"><a class="el" href="dir_c832326c483d60f4fafaf82b45eb7180.html">src</a></li><li class="navelem"><a class="el" href="dir_e37b8589c1598fb5caf001352e07eaab.html">libraries</a></li><li class="navelem"><a class="el" href="dir_78d2ecdfd6030b414d3effa815879b10.html">icubmod</a></li><li class="navelem"><a class="el" href="dir_e4d3c894be2c15ba3da514f7ba859ccc.html">canBusMotionControl</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">CanBusMotionControl.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="CanBusMotionControl_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// -*- mode:C++; tab-width:4; c-basic-offset:4; indent-tabs-mode:nil -*-</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160; </div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">* Copyright (C) 2008 Robotcub Consortium</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">* Author: Lorenzo Natale</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">* CopyPolicy: Released under the terms of the GNU GPL v2.0.</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">*</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160; </div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160; </div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &lt;cstdarg&gt;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &lt;cstdio&gt;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &lt;cstring&gt;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &lt;cmath&gt;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160; </div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160; </div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &lt;yarp/os/Time.h&gt;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &lt;yarp/dev/PolyDriver.h&gt;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &lt;ace/config.h&gt;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &lt;ace/Log_Msg.h&gt;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &lt;yarp/os/LogStream.h&gt;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &lt;yarp/os/Log.h&gt;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160; </div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">//the following activates the DEBUG macro in canControlUtil.h</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">//#define CAN_DEBUG</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">//#define CANBUSMC_DEBUG</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160; </div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ThreadTable2_8h.html">ThreadTable2.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ThreadPool2_8h.html">ThreadPool2.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160; </div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CanBusMotionControl_8h.html">CanBusMotionControl.h</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160; </div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="can__string__generic_8h.html">can_string_generic.h</a>&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="messages_8h.html">messages.h</a>&quot;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &lt;yarp/os/Log.h&gt;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &lt;yarp/os/LogStream.h&gt;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &lt;yarp/dev/ControlBoardInterfacesImpl.h&gt;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160; </div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="canControlConstants_8h.html">canControlConstants.h</a>&quot;</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="canControlUtils_8h.html">canControlUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160; </div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#ifdef WIN32</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">    #pragma warning(once:4355)</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160; </div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="CanBusMotionControl_8cpp.html#a69602775927cc5539c5d78d79cd0a973">   56</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="CanBusMotionControl_8cpp.html#a69602775927cc5539c5d78d79cd0a973">REPORT_PERIOD</a>=6; <span class="comment">//seconds</span></div>
<div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="CanBusMotionControl_8cpp.html#a29c8e26191fdd1aa2db47d6906ae1a14">   57</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code" href="CanBusMotionControl_8cpp.html#a29c8e26191fdd1aa2db47d6906ae1a14">BCAST_STATUS_TIMEOUT</a>=6; <span class="comment">//seconds</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160; </div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="keyword">using namespace </span>std;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespaceyarp.html">yarp</a>;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="keyword">using namespace </span>yarp::os;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespaceyarp_1_1dev.html">yarp::dev</a>;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160; </div>
<div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="CanBusMotionControl_8cpp.html#acbf0048ef8c7caa8bdd9defc76fb0def">   64</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="CanBusMotionControl_8cpp.html#acbf0048ef8c7caa8bdd9defc76fb0def">PRINT_CAN_MESSAGE</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *str, CanMessage &amp;m)</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;{</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="preprocessor">#ifdef CANBUSMC_DEBUG</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    yDebug(<span class="stringliteral">&quot;%s&quot;</span>, str);</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    yDebug(<span class="stringliteral">&quot; S:%d R:%d Ch:%d M:%d\n&quot;</span>, <a class="code" href="canControlUtils_8h.html#ab1b7c20c98149177b4a08c9b8227ac6e">getSender</a>(m), <a class="code" href="canControlUtils_8h.html#a6a6fc113eb9bd6a5be6e43737403df92">getRcp</a>(m), m.getData()[0]&amp;0x80, m.getData()[0]&amp;0x7F);</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;}</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160; </div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="CanBusMotionControl_8cpp.html#a35a12201dd9ff39ea640f1d8b39f0770">   72</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="CanBusMotionControl_8cpp.html#a35a12201dd9ff39ea640f1d8b39f0770">NOT_YET_IMPLEMENTED</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *txt)</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;{</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    yError(<span class="stringliteral">&quot;%s not yet implemented for CanBusMotionControl\n&quot;</span>, txt);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160; </div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;}</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160; </div>
<div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="CanBusMotionControl_8cpp.html#a1711c4677515dd7b3a4e0813cb08528b">   79</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="CanBusMotionControl_8cpp.html#a1711c4677515dd7b3a4e0813cb08528b">NOT_YET_IMPLEMENTED_WARNING</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *txt)</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;{</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    yWarning(<span class="stringliteral">&quot;%s not yet implemented for CanBusMotionControl\n&quot;</span>, txt);</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160; </div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;}</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160; </div>
<div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="CanBusMotionControl_8cpp.html#ac7fb8baadd4641d17b25e7076ff25336">   86</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="CanBusMotionControl_8cpp.html#ac7fb8baadd4641d17b25e7076ff25336">DEPRECATED</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> *txt)</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;{</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    yError(<span class="stringliteral">&quot;%s has been deprecated for CanBusMotionControl\n&quot;</span>, txt);</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160; </div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;}</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160; </div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160; </div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment">//generic function that check is key1 is present in input bottle and that the result has size elements</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">// return true/false</span></div>
<div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="CanBusMotionControl_8cpp.html#ad43675dac090e874d6abe01dabd4f931">   96</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="CanBusMotionControl_8cpp.html#ad43675dac090e874d6abe01dabd4f931">validate</a>(Bottle &amp;input, Bottle &amp;<a class="code" href="sine_8m.html#a2a89187d8e8e8fba509ef9ab5f815d88">out</a>, <span class="keyword">const</span> std::string &amp;key1, <span class="keyword">const</span> std::string &amp;txt, <span class="keywordtype">int</span> size)</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;{</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    Bottle &amp;<a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a>=input.findGroup(key1.c_str(), txt.c_str());</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a>.isNull())</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    {</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        yError(<span class="stringliteral">&quot;%s not found\n&quot;</span>, key1.c_str());</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    }</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a>.size()!=size)</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    {</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        yError(<span class="stringliteral">&quot;%s incorrect number of entries\n&quot;</span>, key1.c_str());</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    }</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <a class="code" href="sine_8m.html#a2a89187d8e8e8fba509ef9ab5f815d88">out</a>=<a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a>;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;}</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160; </div>
<div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="CanBusMotionControl_8cpp.html#a0ab4e4dd65b3c5c0fa0e1da33335cf31">  113</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="CanBusMotionControl_8cpp.html#a0ab4e4dd65b3c5c0fa0e1da33335cf31">validate_optional</a>(Bottle &amp;input, Bottle &amp;<a class="code" href="sine_8m.html#a2a89187d8e8e8fba509ef9ab5f815d88">out</a>, <span class="keyword">const</span> std::string &amp;key1, <span class="keyword">const</span> std::string &amp;txt, <span class="keywordtype">int</span> size)</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;{</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    Bottle &amp;<a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a>=input.findGroup(key1.c_str(), txt.c_str());</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a>.isNull())</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    {</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    }</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a>.size()!=size)</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    {</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        yError(<span class="stringliteral">&quot;%s incorrect number of entries\n&quot;</span>, key1.c_str());</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    }</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <a class="code" href="sine_8m.html#a2a89187d8e8e8fba509ef9ab5f815d88">out</a>=<a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a>;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;}</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160; </div>
<div class="line"><a name="l00129"></a><span class="lineno"><a class="line" href="CanBusMotionControl_8cpp.html#a087655066ba7d69958b10f50e82201a3">  129</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classcan__string__generic.html">can_string_generic</a> <a class="code" href="CanBusMotionControl_8cpp.html#a087655066ba7d69958b10f50e82201a3">cstring</a>[<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>];</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160; </div>
<div class="line"><a name="l00133"></a><span class="lineno"><a class="line" href="structBCastElement.html">  133</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structBCastElement.html">BCastElement</a></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;{</div>
<div class="line"><a name="l00135"></a><span class="lineno"><a class="line" href="structBCastElement.html#a59eba3c5785458c26d3e7c0eb8259c54">  135</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="structBCastElement.html#a59eba3c5785458c26d3e7c0eb8259c54">resetStats</a>()</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    {</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        _count=0;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        _minDt=10e22;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        _maxDt=0;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        _accDt=0;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        _lastDt=0;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        _stamp=Time::now();</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    }</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160; </div>
<div class="line"><a name="l00145"></a><span class="lineno"><a class="line" href="structBCastElement.html#a24717b8c836714d7a359e1cd75185b8e">  145</a></span>&#160;    <a class="code" href="structBCastElement.html#a24717b8c836714d7a359e1cd75185b8e">BCastElement</a>()</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    {</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        _value=0;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        resetStats();</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    }</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160; </div>
<div class="line"><a name="l00151"></a><span class="lineno"><a class="line" href="structBCastElement.html#a048622f3390102c83b081b8799ac97d1">  151</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structBCastElement.html#a048622f3390102c83b081b8799ac97d1">_value</a>;</div>
<div class="line"><a name="l00152"></a><span class="lineno"><a class="line" href="structBCastElement.html#abe5b0e1af1d11df4b9e32bd1e43555fa">  152</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="structBCastElement.html#abe5b0e1af1d11df4b9e32bd1e43555fa">_stamp</a>;</div>
<div class="line"><a name="l00153"></a><span class="lineno"><a class="line" href="structBCastElement.html#a04a2aecb36f9d1147185e8ab760cbb82">  153</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="structBCastElement.html#a04a2aecb36f9d1147185e8ab760cbb82">_accDt</a>;</div>
<div class="line"><a name="l00154"></a><span class="lineno"><a class="line" href="structBCastElement.html#a542a7240322286cf5437d16525ab05ca">  154</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structBCastElement.html#a542a7240322286cf5437d16525ab05ca">_count</a>;</div>
<div class="line"><a name="l00155"></a><span class="lineno"><a class="line" href="structBCastElement.html#abefe5f97dc29a44d7bf89979da7a4a51">  155</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="structBCastElement.html#abefe5f97dc29a44d7bf89979da7a4a51">_maxDt</a>;</div>
<div class="line"><a name="l00156"></a><span class="lineno"><a class="line" href="structBCastElement.html#af4ed0fbacb2f6ea80994dfcf6d9261b0">  156</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="structBCastElement.html#af4ed0fbacb2f6ea80994dfcf6d9261b0">_minDt</a>;</div>
<div class="line"><a name="l00157"></a><span class="lineno"><a class="line" href="structBCastElement.html#a7f4f4c0bd9562a75b18a5fd1de5fb0af">  157</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="structBCastElement.html#a7f4f4c0bd9562a75b18a5fd1de5fb0af">_lastDt</a>;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160; </div>
<div class="line"><a name="l00159"></a><span class="lineno"><a class="line" href="structBCastElement.html#a42d310eeecd0c43db89e90639c860a32">  159</a></span>&#160;    <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="structBCastElement.html#a42d310eeecd0c43db89e90639c860a32">update</a>(<span class="keywordtype">int</span> value)</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    { _value=value; }</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    </div>
<div class="line"><a name="l00162"></a><span class="lineno"><a class="line" href="structBCastElement.html#ad39b3393741de6762a40785c55b47813">  162</a></span>&#160;    <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="structBCastElement.html#ad39b3393741de6762a40785c55b47813">getValue</a>()</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    { <span class="keywordflow">return</span> _value; }</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160; </div>
<div class="line"><a name="l00165"></a><span class="lineno"><a class="line" href="structBCastElement.html#a85fe828a88a5b82705123c8191bf6ef5">  165</a></span>&#160;    <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="structBCastElement.html#a85fe828a88a5b82705123c8191bf6ef5">getStats</a>(<span class="keywordtype">int</span> &amp;it, <span class="keywordtype">double</span> &amp;dT, <span class="keywordtype">double</span> &amp;<a class="code" href="namespacestrain_1_1dsp_1_1fsc.html#a746ce6f9a14034939607ccead53e3fd6">min</a>, <span class="keywordtype">double</span> &amp;<a class="code" href="namespacestrain_1_1dsp_1_1fsc.html#a65804363dbaa9346e53442cb1bb9d73f">max</a>)</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    {</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        it=_count;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        <span class="keywordflow">if</span> (_count==0)</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;            {</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                dT=0;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                <a class="code" href="namespacestrain_1_1dsp_1_1fsc.html#a746ce6f9a14034939607ccead53e3fd6">min</a>=0;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                <a class="code" href="namespacestrain_1_1dsp_1_1fsc.html#a65804363dbaa9346e53442cb1bb9d73f">max</a>=0;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;            }</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;            {        </div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                dT=_accDt/_count;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                <a class="code" href="namespacestrain_1_1dsp_1_1fsc.html#a746ce6f9a14034939607ccead53e3fd6">min</a>=_minDt;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                <a class="code" href="namespacestrain_1_1dsp_1_1fsc.html#a65804363dbaa9346e53442cb1bb9d73f">max</a>=_maxDt;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;            }</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        <span class="comment">//scale to ms</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        dT*=1000;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        <a class="code" href="namespacestrain_1_1dsp_1_1fsc.html#a746ce6f9a14034939607ccead53e3fd6">min</a>*=1000;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <a class="code" href="namespacestrain_1_1dsp_1_1fsc.html#a65804363dbaa9346e53442cb1bb9d73f">max</a>*=1000;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    }</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160; </div>
<div class="line"><a name="l00186"></a><span class="lineno"><a class="line" href="structBCastElement.html#a81d75ca969cb217dedadfe466f598cf2">  186</a></span>&#160;    <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="structBCastElement.html#a81d75ca969cb217dedadfe466f598cf2">update</a>(<span class="keywordtype">int</span> value, <span class="keywordtype">double</span> st)</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    {</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        <span class="keywordtype">double</span> tmpDt=st-_stamp;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        _value=value;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        _stamp=st;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        _accDt+=tmpDt;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        _lastDt=tmpDt;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        <span class="keywordflow">if</span> (tmpDt&gt;_maxDt)</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;            _maxDt=tmpDt;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        <span class="keywordflow">if</span> (tmpDt&lt;_minDt)</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;            _minDt=tmpDt;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160; </div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        _count++;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    }</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160; </div>
<div class="line"><a name="l00201"></a><span class="lineno"><a class="line" href="structBCastElement.html#a2ec4acf73f98aaf6c709719a1fe43eec">  201</a></span>&#160;    <span class="keyword">inline</span> <span class="keywordtype">double</span> <a class="code" href="structBCastElement.html#a2ec4acf73f98aaf6c709719a1fe43eec">getStamp</a>()</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    {</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        <span class="keywordflow">return</span> _stamp;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    }</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;};</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160; </div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160; </div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160; </div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160; </div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160; </div>
<div class="line"><a name="l00212"></a><span class="lineno"><a class="line" href="classBCastBufferElement.html">  212</a></span>&#160;<span class="keyword">class </span><a class="code" href="classBCastBufferElement.html">BCastBufferElement</a></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;{</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="comment">// msg 1</span></div>
<div class="line"><a name="l00216"></a><span class="lineno"><a class="line" href="classBCastBufferElement.html#af9b2502ea8bef890aec0d7f70205e2c0">  216</a></span>&#160;    <a class="code" href="structBCastElement.html">BCastElement</a> <a class="code" href="classBCastBufferElement.html#af9b2502ea8bef890aec0d7f70205e2c0">_position_joint</a>;</div>
<div class="line"><a name="l00217"></a><span class="lineno"><a class="line" href="classBCastBufferElement.html#af7fcbef201ebbd71f56df7ec94ef15b5">  217</a></span>&#160;    <a class="code" href="structBCastElement.html">BCastElement</a> <a class="code" href="classBCastBufferElement.html#af7fcbef201ebbd71f56df7ec94ef15b5">_position_rotor</a>;</div>
<div class="line"><a name="l00218"></a><span class="lineno"><a class="line" href="classBCastBufferElement.html#a98a2371848368d28cc00f180375a9161">  218</a></span>&#160;    <a class="code" href="structBCastElement.html">BCastElement</a> <a class="code" href="classBCastBufferElement.html#a98a2371848368d28cc00f180375a9161">_speed_rotor</a>;</div>
<div class="line"><a name="l00219"></a><span class="lineno"><a class="line" href="classBCastBufferElement.html#acbfdea5c30c6cff7e50a75b42233b460">  219</a></span>&#160;    <a class="code" href="structBCastElement.html">BCastElement</a> <a class="code" href="classBCastBufferElement.html#acbfdea5c30c6cff7e50a75b42233b460">_accel_rotor</a>;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160; </div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="comment">// msg 2</span></div>
<div class="line"><a name="l00222"></a><span class="lineno"><a class="line" href="classBCastBufferElement.html#a96b136248573dc3f1b4f245f402bd18c">  222</a></span>&#160;    <span class="keywordtype">short</span> <a class="code" href="classBCastBufferElement.html#a96b136248573dc3f1b4f245f402bd18c">_pid_value</a>;</div>
<div class="line"><a name="l00223"></a><span class="lineno"><a class="line" href="classBCastBufferElement.html#a6b3107f9a2233e1e5529ffe072d59edc">  223</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="classBCastBufferElement.html#a6b3107f9a2233e1e5529ffe072d59edc">_update_v</a>;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160; </div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="comment">// msg 3</span></div>
<div class="line"><a name="l00226"></a><span class="lineno"><a class="line" href="classBCastBufferElement.html#af521bd74a402411d52e25d07ce009801">  226</a></span>&#160;    <span class="keywordtype">short</span> <a class="code" href="classBCastBufferElement.html#af521bd74a402411d52e25d07ce009801">_axisStatus</a>;</div>
<div class="line"><a name="l00227"></a><span class="lineno"><a class="line" href="classBCastBufferElement.html#aa4cfa0e52a1c9291419df6ba364d4ea1">  227</a></span>&#160;    <span class="keywordtype">char</span>  <a class="code" href="classBCastBufferElement.html#aa4cfa0e52a1c9291419df6ba364d4ea1">_canStatus</a>;</div>
<div class="line"><a name="l00228"></a><span class="lineno"><a class="line" href="classBCastBufferElement.html#aad2f2a8e02636dcdbd2dee6f4f918d9d">  228</a></span>&#160;    <span class="keywordtype">char</span>  <a class="code" href="classBCastBufferElement.html#aad2f2a8e02636dcdbd2dee6f4f918d9d">_boardStatus</a>;</div>
<div class="line"><a name="l00229"></a><span class="lineno"><a class="line" href="classBCastBufferElement.html#a6d942303fa98a4ee95f885be66fe3440">  229</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="classBCastBufferElement.html#a6d942303fa98a4ee95f885be66fe3440">_controlmodeStatus</a>;</div>
<div class="line"><a name="l00230"></a><span class="lineno"><a class="line" href="classBCastBufferElement.html#add58648b082b014052e572683e0c821b">  230</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="classBCastBufferElement.html#add58648b082b014052e572683e0c821b">_update_e</a>;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160; </div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="comment">// msg 3b</span></div>
<div class="line"><a name="l00233"></a><span class="lineno"><a class="line" href="classBCastBufferElement.html#a71c399116a5883ca93100eaa0ef26d4b">  233</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="classBCastBufferElement.html#a71c399116a5883ca93100eaa0ef26d4b">_interactionmodeStatus</a>;</div>
<div class="line"><a name="l00234"></a><span class="lineno"><a class="line" href="classBCastBufferElement.html#ab8f6b1986e4351ffb64ea4b6d6f069d8">  234</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="classBCastBufferElement.html#ab8f6b1986e4351ffb64ea4b6d6f069d8">_update_e2</a>;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160; </div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="comment">// msg 4</span></div>
<div class="line"><a name="l00237"></a><span class="lineno"><a class="line" href="classBCastBufferElement.html#a9f1be6e90a870951a2f8221aab3dfdd6">  237</a></span>&#160;    <span class="keywordtype">short</span> <a class="code" href="classBCastBufferElement.html#a9f1be6e90a870951a2f8221aab3dfdd6">_current</a>;</div>
<div class="line"><a name="l00238"></a><span class="lineno"><a class="line" href="classBCastBufferElement.html#a6c3023c76f86ef3ecbd1b61098be56b7">  238</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="classBCastBufferElement.html#a6c3023c76f86ef3ecbd1b61098be56b7">_update_c</a>;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160; </div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="comment">// msg 4b</span></div>
<div class="line"><a name="l00241"></a><span class="lineno"><a class="line" href="classBCastBufferElement.html#af8335d1d20eaf06c3ec15c6424894b4c">  241</a></span>&#160;    <span class="keywordtype">short</span> <a class="code" href="classBCastBufferElement.html#af8335d1d20eaf06c3ec15c6424894b4c">_position_error</a>;</div>
<div class="line"><a name="l00242"></a><span class="lineno"><a class="line" href="classBCastBufferElement.html#a88ce6518b4ce93049d015c9994b21bc1">  242</a></span>&#160;    <span class="keywordtype">short</span> <a class="code" href="classBCastBufferElement.html#a88ce6518b4ce93049d015c9994b21bc1">_torque_error</a>;   </div>
<div class="line"><a name="l00243"></a><span class="lineno"><a class="line" href="classBCastBufferElement.html#a6b20c5c27c60bb16c95cd88182b94850">  243</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="classBCastBufferElement.html#a6b20c5c27c60bb16c95cd88182b94850">_update_r</a>;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160; </div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="comment">// msg 4c</span></div>
<div class="line"><a name="l00246"></a><span class="lineno"><a class="line" href="classBCastBufferElement.html#a9b63eaaf5853d209b692e0f928242993">  246</a></span>&#160;    <span class="keywordtype">short</span> <a class="code" href="classBCastBufferElement.html#a9b63eaaf5853d209b692e0f928242993">_speed_joint</a>;</div>
<div class="line"><a name="l00247"></a><span class="lineno"><a class="line" href="classBCastBufferElement.html#af13a3497fba917355754e42c77235163">  247</a></span>&#160;    <span class="keywordtype">short</span> <a class="code" href="classBCastBufferElement.html#af13a3497fba917355754e42c77235163">_accel_joint</a>;</div>
<div class="line"><a name="l00248"></a><span class="lineno"><a class="line" href="classBCastBufferElement.html#aae5bf68c1e48bee944c5586deac0e05d">  248</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="classBCastBufferElement.html#aae5bf68c1e48bee944c5586deac0e05d">_update_s</a>;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160; </div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="comment">// msg 4d (special message)</span></div>
<div class="line"><a name="l00251"></a><span class="lineno"><a class="line" href="classBCastBufferElement.html#af468ae55809a2d6b8ffe2d9e657606cd">  251</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="classBCastBufferElement.html#af468ae55809a2d6b8ffe2d9e657606cd">_torque</a>;</div>
<div class="line"><a name="l00252"></a><span class="lineno"><a class="line" href="classBCastBufferElement.html#a029be0874497b8ea39a5deeb2e8ea647">  252</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="classBCastBufferElement.html#a029be0874497b8ea39a5deeb2e8ea647">_update_t</a>;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    </div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="comment">// msg 6</span></div>
<div class="line"><a name="l00255"></a><span class="lineno"><a class="line" href="classBCastBufferElement.html#af8625ef3029a59bea61aaf7fed60b5a6">  255</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classBCastBufferElement.html#af8625ef3029a59bea61aaf7fed60b5a6">_canTxError</a>;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="comment">// msg 7</span></div>
<div class="line"><a name="l00257"></a><span class="lineno"><a class="line" href="classBCastBufferElement.html#a0965ebdd231975fe93e2953f22372375">  257</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classBCastBufferElement.html#a0965ebdd231975fe93e2953f22372375">_canRxError</a>;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160; </div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="comment">// Main Loop Overflow Counter</span></div>
<div class="line"><a name="l00260"></a><span class="lineno"><a class="line" href="classBCastBufferElement.html#a9ccee7fd979022713c5992f27bf7f6de">  260</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classBCastBufferElement.html#a9ccee7fd979022713c5992f27bf7f6de">_mainLoopOverflowCounter</a>;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160; </div>
<div class="line"><a name="l00262"></a><span class="lineno"><a class="line" href="classBCastBufferElement.html#a4b1f8acb88916c3e6fb526e86b2a9283">  262</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="classBCastBufferElement.html#a4b1f8acb88916c3e6fb526e86b2a9283">_address</a>;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160; </div>
<div class="line"><a name="l00264"></a><span class="lineno"><a class="line" href="classBCastBufferElement.html#a289a7b16904634f10a09deadb2755681">  264</a></span>&#160;    <a class="code" href="classBCastBufferElement.html#a289a7b16904634f10a09deadb2755681">BCastBufferElement</a> () { <a class="code" href="namespacestrain_1_1dsp_1_1q15.html#aa01560d9326d2e80b2f9030422dc4671">zero</a> (); }</div>
<div class="line"><a name="l00265"></a><span class="lineno"><a class="line" href="classBCastBufferElement.html#acbfdbac488f2b8e1dd751fd467fead56">  265</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classBCastBufferElement.html#acbfdbac488f2b8e1dd751fd467fead56">isFaultOk</a>             () { <span class="keywordflow">return</span> (!_axisStatus ) ; }</div>
<div class="line"><a name="l00266"></a><span class="lineno"><a class="line" href="classBCastBufferElement.html#a6d9a031bf195a1452f7986496a71216f">  266</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classBCastBufferElement.html#a6d9a031bf195a1452f7986496a71216f">isFaultUndervoltage</a>   () { <span class="keywordflow">return</span> _axisStatus &amp; 0x01; }</div>
<div class="line"><a name="l00267"></a><span class="lineno"><a class="line" href="classBCastBufferElement.html#af859f2a7245aef9476d74e14c204708f">  267</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classBCastBufferElement.html#af859f2a7245aef9476d74e14c204708f">isFaultOverload</a>       () { <span class="keywordflow">return</span> _axisStatus &amp; 0x02; }</div>
<div class="line"><a name="l00268"></a><span class="lineno"><a class="line" href="classBCastBufferElement.html#a5aec6fa032a5754a96bf613504c69d85">  268</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classBCastBufferElement.html#a5aec6fa032a5754a96bf613504c69d85">isOverCurrent</a>         () { <span class="keywordflow">return</span> _axisStatus &amp; 0x08; }</div>
<div class="line"><a name="l00269"></a><span class="lineno"><a class="line" href="classBCastBufferElement.html#af6132fac4729f6262580d8d941b3f0a6">  269</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classBCastBufferElement.html#af6132fac4729f6262580d8d941b3f0a6">isFaultExternal</a>       () { <span class="keywordflow">return</span> _axisStatus &amp; 0x04; }</div>
<div class="line"><a name="l00270"></a><span class="lineno"><a class="line" href="classBCastBufferElement.html#a49caa935408c48141fc7e02fd1b3ca46">  270</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classBCastBufferElement.html#a49caa935408c48141fc7e02fd1b3ca46">isHallSensorError</a>     () { <span class="keywordflow">return</span> _axisStatus &amp; 0x10; }</div>
<div class="line"><a name="l00271"></a><span class="lineno"><a class="line" href="classBCastBufferElement.html#abfdbb13a97f15c594f606c9cd058e283">  271</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classBCastBufferElement.html#abfdbb13a97f15c594f606c9cd058e283">isAbsEncoderError</a>     () { <span class="keywordflow">return</span> _axisStatus &amp; 0x20; }</div>
<div class="line"><a name="l00272"></a><span class="lineno"><a class="line" href="classBCastBufferElement.html#abf8059d68e80affbbdd1c1f423f4ef13">  272</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classBCastBufferElement.html#abf8059d68e80affbbdd1c1f423f4ef13">isOpticalEncoderError</a> () { <span class="keywordflow">return</span> _axisStatus &amp; 0x40; }</div>
<div class="line"><a name="l00273"></a><span class="lineno"><a class="line" href="classBCastBufferElement.html#a9d6191faa521e997e5e581f8ef8eb116">  273</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classBCastBufferElement.html#a9d6191faa521e997e5e581f8ef8eb116">isCanTxOverflow</a>       () { <span class="keywordflow">return</span> _canStatus &amp; 0x01; }</div>
<div class="line"><a name="l00274"></a><span class="lineno"><a class="line" href="classBCastBufferElement.html#a39ee1efa63d85c40529cf5e07217a612">  274</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classBCastBufferElement.html#a39ee1efa63d85c40529cf5e07217a612">isCanBusOff</a>           () { <span class="keywordflow">return</span> _canStatus &amp; 0x02; }</div>
<div class="line"><a name="l00275"></a><span class="lineno"><a class="line" href="classBCastBufferElement.html#a48ea9a1004af73e6a26856770b97cc54">  275</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classBCastBufferElement.html#a48ea9a1004af73e6a26856770b97cc54">isCanTxError</a>          () { <span class="keywordflow">return</span> _canStatus &amp; 0x04; }</div>
<div class="line"><a name="l00276"></a><span class="lineno"><a class="line" href="classBCastBufferElement.html#a29b51142f3d04e71ecead4169a18b701">  276</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classBCastBufferElement.html#a29b51142f3d04e71ecead4169a18b701">isCanRxError</a>          () { <span class="keywordflow">return</span> _canStatus &amp; 0x08; }</div>
<div class="line"><a name="l00277"></a><span class="lineno"><a class="line" href="classBCastBufferElement.html#a6fc27e477fad391a765419a20ecb92cf">  277</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classBCastBufferElement.html#a6fc27e477fad391a765419a20ecb92cf">isCanTxOverrun</a>        () { <span class="keywordflow">return</span> _canStatus &amp; 0x10; }</div>
<div class="line"><a name="l00278"></a><span class="lineno"><a class="line" href="classBCastBufferElement.html#a1babf79cf17faffbd70514135d9c138d">  278</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classBCastBufferElement.html#a1babf79cf17faffbd70514135d9c138d">isCanRxWarning</a>        () { <span class="keywordflow">return</span> _canStatus &amp; 0x20; }</div>
<div class="line"><a name="l00279"></a><span class="lineno"><a class="line" href="classBCastBufferElement.html#a6533f7a83218f088b0d7e44b30262d95">  279</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classBCastBufferElement.html#a6533f7a83218f088b0d7e44b30262d95">isCanRxOverrun</a>        () { <span class="keywordflow">return</span> _canStatus &amp; 0x40; }</div>
<div class="line"><a name="l00280"></a><span class="lineno"><a class="line" href="classBCastBufferElement.html#a1cec8f1619a8b7c899dcd7a4306de86c">  280</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classBCastBufferElement.html#a1cec8f1619a8b7c899dcd7a4306de86c">isMainLoopOverflow</a>    () { <span class="keywordflow">return</span> _boardStatus &amp; 0x01; }</div>
<div class="line"><a name="l00281"></a><span class="lineno"><a class="line" href="classBCastBufferElement.html#a98693471f12823d0432c353fca09b3df">  281</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classBCastBufferElement.html#a98693471f12823d0432c353fca09b3df">isOverTempCh1</a>         () { <span class="keywordflow">return</span> _boardStatus &amp; 0x02; }</div>
<div class="line"><a name="l00282"></a><span class="lineno"><a class="line" href="classBCastBufferElement.html#a3f37bcb9974cf615241d3ad9ebf6802f">  282</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classBCastBufferElement.html#a3f37bcb9974cf615241d3ad9ebf6802f">isOverTempCh2</a>         () { <span class="keywordflow">return</span> _boardStatus &amp; 0x04; } </div>
<div class="line"><a name="l00283"></a><span class="lineno"><a class="line" href="classBCastBufferElement.html#adbe355548c9b25de0c625a1dabd76ab7">  283</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classBCastBufferElement.html#adbe355548c9b25de0c625a1dabd76ab7">isTempErrorCh1</a>        () { <span class="keywordflow">return</span> _boardStatus &amp; 0x08; }</div>
<div class="line"><a name="l00284"></a><span class="lineno"><a class="line" href="classBCastBufferElement.html#adb3883163551f9385171a86386f56231">  284</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classBCastBufferElement.html#adb3883163551f9385171a86386f56231">isTempErrorCh2</a>        () { <span class="keywordflow">return</span> _boardStatus &amp; 0x10; } </div>
<div class="line"><a name="l00285"></a><span class="lineno"><a class="line" href="classBCastBufferElement.html#ab107e1d8c7a67873bcfa3057dd4f443c">  285</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classBCastBufferElement.html#ab107e1d8c7a67873bcfa3057dd4f443c">ControlStatus</a>         (<span class="keywordtype">int</span> net, <span class="keywordtype">short</span> controlmode,<span class="keywordtype">short</span> addr) </div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    {</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        <span class="keywordflow">switch</span> (controlmode)</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        {</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        <span class="keywordflow">case</span>    icubCanProto_controlmode_idle:</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;            yInfo (<span class="stringliteral">&quot;[%d] board  %d MODE_IDLE \r\n&quot;</span>, net, addr);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        <span class="keywordflow">case</span>    icubCanProto_controlmode_position:</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;            yInfo (<span class="stringliteral">&quot;[%d] board  %d MODE_POSITION \r\n&quot;</span>, net, addr);</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        <span class="keywordflow">case</span>    icubCanProto_controlmode_velocity:</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;            yInfo (<span class="stringliteral">&quot;[%d] board  %d MODE_VELOCITY \r\n&quot;</span>, net, addr);</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        <span class="keywordflow">case</span>    icubCanProto_controlmode_torque:</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;            yInfo (<span class="stringliteral">&quot;[%d] board  %d MODE_TORQUE \r\n&quot;</span>, net, addr);</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        <span class="keywordflow">case</span>    icubCanProto_controlmode_impedance_pos:</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;            yInfo (<span class="stringliteral">&quot;[%d] board  %d MODE_IMPEDANCE_POS \r\n&quot;</span>, net, addr);</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        <span class="keywordflow">case</span>    icubCanProto_controlmode_impedance_vel:</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;            yInfo (<span class="stringliteral">&quot;[%d] board  %d MODE_IMPEDANCE_VEL \r\n&quot;</span>, net, addr);</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            yError (<span class="stringliteral">&quot;[%d] board  %d MODE_UNKNOWN \r\n&quot;</span>, net, addr);</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        }</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    }</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160; </div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160; </div>
<div class="line"><a name="l00314"></a><span class="lineno"><a class="line" href="classBCastBufferElement.html#a6eeb5abeec2dce513e72606bee1398d7">  314</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classBCastBufferElement.html#a6eeb5abeec2dce513e72606bee1398d7">zero</a> (<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    {</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        _position_joint.<a class="code" href="structBCastElement.html#a048622f3390102c83b081b8799ac97d1">_value</a> = 0;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        _position_rotor.<a class="code" href="structBCastElement.html#a048622f3390102c83b081b8799ac97d1">_value</a> = 0;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        _speed_rotor.<a class="code" href="structBCastElement.html#a048622f3390102c83b081b8799ac97d1">_value</a> = 0;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        _accel_rotor.<a class="code" href="structBCastElement.html#a048622f3390102c83b081b8799ac97d1">_value</a> = 0;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        _pid_value = 0;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        _current = 0;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        _axisStatus=0;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        _canStatus=0;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        _boardStatus=0;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        _controlmodeStatus=0;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        _interactionmodeStatus=0;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        _position_error = 0;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        _torque_error = 0;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        _speed_joint = 0;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        _accel_joint = 0;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160; </div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        _torque=0;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        _update_t = .0;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160; </div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        _update_v = .0;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        _update_e = .0;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        _update_e2= .0;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        _update_c = .0;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        _update_r = .0;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        _update_s = .0;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160; </div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        _address=-1;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        _canTxError=0;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        _canRxError=0;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        _mainLoopOverflowCounter=0;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    }</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;};</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160; </div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160; </div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="preprocessor">#include &lt;stdarg.h&gt;</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><a name="l00352"></a><span class="lineno"><a class="line" href="CanBusMotionControl_8cpp.html#a3404ea0f0b680b0d2409a6298c9ecb11">  352</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="CanBusMotionControl_8cpp.html#a3404ea0f0b680b0d2409a6298c9ecb11">PRINT_BUFFER_LENGTH</a>=255;</div>
<div class="line"><a name="l00353"></a><span class="lineno"><a class="line" href="classCanBusResources.html">  353</a></span>&#160;<span class="keyword">class </span><a class="code" href="classCanBusResources.html">CanBusResources</a></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;{</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a> (<span class="keyword">const</span> <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp;);</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="keywordtype">void</span> operator= (<span class="keyword">const</span> <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp;);</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    PolyDriver polyDriver;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160; </div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00361"></a><span class="lineno"><a class="line" href="classCanBusResources.html#a4ed02109256d51db03823b7983470328">  361</a></span>&#160;    ICanBus *<a class="code" href="classCanBusResources.html#a4ed02109256d51db03823b7983470328">iCanBus</a>;</div>
<div class="line"><a name="l00362"></a><span class="lineno"><a class="line" href="classCanBusResources.html#ae56286106947372dfd8763c30f414214">  362</a></span>&#160;    ICanBufferFactory *<a class="code" href="classCanBusResources.html#ae56286106947372dfd8763c30f414214">iBufferFactory</a>;</div>
<div class="line"><a name="l00363"></a><span class="lineno"><a class="line" href="classCanBusResources.html#a01fd28d9638b166afda40872939ac15b">  363</a></span>&#160;    ICanBusErrors *<a class="code" href="classCanBusResources.html#a01fd28d9638b166afda40872939ac15b">iCanErrors</a>;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160; </div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a> ();</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    ~<a class="code" href="classCanBusResources.html">CanBusResources</a> ();</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160; </div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="keywordtype">bool</span> initialize (<span class="keyword">const</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html">CanBusMotionControlParameters</a>&amp; parms);</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="keywordtype">bool</span> initialize (yarp::os::Searchable &amp;config);</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="keywordtype">bool</span> uninitialize ();</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="namespaceeth_1_1parser.html#a8ec58da625146082584ad1a365bdd0e5">read</a> ();</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160; </div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="keywordtype">bool</span> startPacket ();</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="keywordtype">bool</span> addMessage (<span class="keywordtype">int</span> msg_id, <span class="keywordtype">int</span> joint);</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="comment">// add message, append request to request list</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <span class="keywordtype">bool</span> addMessage (<span class="keywordtype">int</span> <span class="keywordtype">id</span>, <span class="keywordtype">int</span> joint, <span class="keywordtype">int</span> msg_id);</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160; </div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="keywordtype">bool</span> writePacket ();</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160; </div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <span class="keywordtype">bool</span> printMessage (<span class="keyword">const</span> CanMessage &amp;m);</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="keywordtype">bool</span> dumpBuffers (<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00382"></a><span class="lineno"><a class="line" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">  382</a></span>&#160;    <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a> (<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> _njoints; }</div>
<div class="line"><a name="l00383"></a><span class="lineno"><a class="line" href="classCanBusResources.html#a1642d0476521a6b0c8f538cef04e2a59">  383</a></span>&#160;    <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classCanBusResources.html#a1642d0476521a6b0c8f538cef04e2a59">getErrorStatus</a> (<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> _error_status;}</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160; </div>
<div class="line"><a name="l00385"></a><span class="lineno"><a class="line" href="classCanBusResources.html#a5e3818363b4599d4fbb882cdb260184a">  385</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classCanBusResources.html#a5e3818363b4599d4fbb882cdb260184a">printMessage</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *fmt, ...)</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    {</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        va_list ap; </div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        va_start(ap, fmt); </div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="preprocessor">#ifdef WIN32</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        _vsnprintf(buffer, <a class="code" href="canControlUtils_8h.html#a808da5f145544e5d3b379857e83d7e07">DEBUG_PRINTF_BUFFER_LENGTH</a>, fmt, ap); </div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        vsnprintf(buffer, <a class="code" href="canControlUtils_8h.html#a808da5f145544e5d3b379857e83d7e07">DEBUG_PRINTF_BUFFER_LENGTH</a>, fmt, ap); </div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        yDebug(<span class="stringliteral">&quot;%s&quot;</span>, buffer);</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        va_end(ap);</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    }</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160; </div>
<div class="line"><a name="l00398"></a><span class="lineno"><a class="line" href="classCanBusResources.html#a15431b1ad38408c350553b652cfa22c0">  398</a></span>&#160;    <span class="keywordtype">char</span> buffer[<a class="code" href="canControlUtils_8h.html#a808da5f145544e5d3b379857e83d7e07">DEBUG_PRINTF_BUFFER_LENGTH</a>];</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00400"></a><span class="lineno"><a class="line" href="classCanBusResources.html#a9dd40cfe02c8535e971bba49539cb327a2d15b18f9effd62505c34b8e64a6e1bc">  400</a></span>&#160;    <span class="keyword">enum</span> { CAN_TIMEOUT = 20, CAN_POLLING_INTERVAL = 10 };</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160; </div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="comment">// HANDLE _handle;/// the actual ddriver handle.</span></div>
<div class="line"><a name="l00403"></a><span class="lineno"><a class="line" href="classCanBusResources.html#aef13292fa1702e5116a1cfe2f222a008">  403</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classCanBusResources.html#aef13292fa1702e5116a1cfe2f222a008">_initialized</a>;</div>
<div class="line"><a name="l00404"></a><span class="lineno"><a class="line" href="classCanBusResources.html#a50b95da6c76d088586d87a0b68f66ec3">  404</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classCanBusResources.html#a50b95da6c76d088586d87a0b68f66ec3">_timeout</a>;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160; </div>
<div class="line"><a name="l00406"></a><span class="lineno"><a class="line" href="classCanBusResources.html#a53e1ca73739299b650e1d04400775fd6">  406</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="classCanBusResources.html#a53e1ca73739299b650e1d04400775fd6">_polling_interval</a>;</div>
<div class="line"><a name="l00407"></a><span class="lineno"><a class="line" href="classCanBusResources.html#aa3590eb4e4505850080f2054f4e5f254">  407</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="classCanBusResources.html#aa3590eb4e4505850080f2054f4e5f254">_speed</a>;</div>
<div class="line"><a name="l00408"></a><span class="lineno"><a class="line" href="classCanBusResources.html#a5434ee36839850ff8330ef5322171ff8">  408</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="classCanBusResources.html#a5434ee36839850ff8330ef5322171ff8">_networkN</a>;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160; </div>
<div class="line"><a name="l00410"></a><span class="lineno"><a class="line" href="classCanBusResources.html#a7a22e68e5f94e2ca74aa2006dbea6c21">  410</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="classCanBusResources.html#a7a22e68e5f94e2ca74aa2006dbea6c21">_txQueueSize</a>;</div>
<div class="line"><a name="l00411"></a><span class="lineno"><a class="line" href="classCanBusResources.html#a027e66115c366272c8ee81b36297178f">  411</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="classCanBusResources.html#a027e66115c366272c8ee81b36297178f">_rxQueueSize</a>;</div>
<div class="line"><a name="l00412"></a><span class="lineno"><a class="line" href="classCanBusResources.html#ae3cca62d3fd0f43e0bc8d64a15911aef">  412</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="classCanBusResources.html#ae3cca62d3fd0f43e0bc8d64a15911aef">_txTimeout</a>;</div>
<div class="line"><a name="l00413"></a><span class="lineno"><a class="line" href="classCanBusResources.html#adbbcd48000bf7bbf38dc41cb422147fb">  413</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="classCanBusResources.html#adbbcd48000bf7bbf38dc41cb422147fb">_rxTimeout</a>;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160; </div>
<div class="line"><a name="l00415"></a><span class="lineno"><a class="line" href="classCanBusResources.html#a6785040f8650d0ecfb945e295808a377">  415</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classCanBusResources.html#a6785040f8650d0ecfb945e295808a377">_readMessages</a>;</div>
<div class="line"><a name="l00416"></a><span class="lineno"><a class="line" href="classCanBusResources.html#a781a7267d7eab2315d49720c1d673f29">  416</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classCanBusResources.html#a781a7267d7eab2315d49720c1d673f29">_writeMessages</a>;</div>
<div class="line"><a name="l00417"></a><span class="lineno"><a class="line" href="classCanBusResources.html#a01693f537c51494be7345cbd89e22d44">  417</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classCanBusResources.html#a01693f537c51494be7345cbd89e22d44">_echoMessages</a>;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160; </div>
<div class="line"><a name="l00419"></a><span class="lineno"><a class="line" href="classCanBusResources.html#a1eed1867edaefc8303954e7b5d41446f">  419</a></span>&#160;    CanBuffer <a class="code" href="classCanBusResources.html#a1eed1867edaefc8303954e7b5d41446f">_readBuffer</a>;</div>
<div class="line"><a name="l00420"></a><span class="lineno"><a class="line" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">  420</a></span>&#160;    CanBuffer <a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>;</div>
<div class="line"><a name="l00421"></a><span class="lineno"><a class="line" href="classCanBusResources.html#af24a0c2f42a9c9b3823eb9efad294ca7">  421</a></span>&#160;    CanBuffer <a class="code" href="classCanBusResources.html#af24a0c2f42a9c9b3823eb9efad294ca7">_replyBuffer</a>;</div>
<div class="line"><a name="l00422"></a><span class="lineno"><a class="line" href="classCanBusResources.html#af39b42503e37f91bc21de3efa9bc0d16">  422</a></span>&#160;    CanBuffer <a class="code" href="classCanBusResources.html#af39b42503e37f91bc21de3efa9bc0d16">_echoBuffer</a>;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160; </div>
<div class="line"><a name="l00424"></a><span class="lineno"><a class="line" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">  424</a></span>&#160;    <a class="code" href="classBCastBufferElement.html">BCastBufferElement</a> *<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160; </div>
<div class="line"><a name="l00426"></a><span class="lineno"><a class="line" href="classCanBusResources.html#ac2a6bcce74c6ce44b65d940e2087ba05">  426</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="classCanBusResources.html#ac2a6bcce74c6ce44b65d940e2087ba05">_my_address</a>;</div>
<div class="line"><a name="l00427"></a><span class="lineno"><a class="line" href="classCanBusResources.html#aebb638eb231f9461b10f514b580dab67">  427</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> _destinations[<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>];</div>
<div class="line"><a name="l00428"></a><span class="lineno"><a class="line" href="classCanBusResources.html#a1db33f4c5115794fad9dbe81c0108f46">  428</a></span>&#160;    <span class="keywordtype">int</span> _velShifts[<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>];</div>
<div class="line"><a name="l00429"></a><span class="lineno"><a class="line" href="classCanBusResources.html#a5eb200eec7f8c10314fc9349f4088ff3">  429</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code" href="classCanBusResources.html#a5eb200eec7f8c10314fc9349f4088ff3">_destInv</a>;</div>
<div class="line"><a name="l00430"></a><span class="lineno"><a class="line" href="classCanBusResources.html#a9ea7178d577ad82942ca0593121da31f">  430</a></span>&#160;    std::string* <a class="code" href="classCanBusResources.html#a9ea7178d577ad82942ca0593121da31f">_jointNames</a>;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160; </div>
<div class="line"><a name="l00432"></a><span class="lineno"><a class="line" href="classCanBusResources.html#a7df58d2dc97da0775a53caaed3545726">  432</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="classCanBusResources.html#a7df58d2dc97da0775a53caaed3545726">_njoints</a>;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160; </div>
<div class="line"><a name="l00434"></a><span class="lineno"><a class="line" href="classCanBusResources.html#a0b4b1900273079b69f1e10abdce9f295">  434</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classCanBusResources.html#a0b4b1900273079b69f1e10abdce9f295">_error_status</a>;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160; </div>
<div class="line"><a name="l00437"></a><span class="lineno"><a class="line" href="classCanBusResources.html#afe943f09593ee918e0a05e010c586e23">  437</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="classCanBusResources.html#afe943f09593ee918e0a05e010c586e23">_filter</a>;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160; </div>
<div class="line"><a name="l00439"></a><span class="lineno"><a class="line" href="classCanBusResources.html#afd55bc1b8185528882c6b1969d7cd8ef">  439</a></span>&#160;    <span class="keywordtype">char</span> _printBuffer[16384];                   </div>
<div class="line"><a name="l00440"></a><span class="lineno"><a class="line" href="classCanBusResources.html#ab5e61b157528b835621b4c073c42bf1d">  440</a></span>&#160;    <a class="code" href="classRequestsQueue.html">RequestsQueue</a> *<a class="code" href="classCanBusResources.html#ab5e61b157528b835621b4c073c42bf1d">requestsQueue</a>;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;};</div>
<div class="line"><a name="l00442"></a><span class="lineno"><a class="line" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">  442</a></span>&#160;<span class="keyword">inline</span> <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<span class="keywordtype">void</span> *res) { <span class="keywordflow">return</span> *(<a class="code" href="classCanBusResources.html">CanBusResources</a> *)res; }</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160; </div>
<div class="line"><a name="l00444"></a><span class="lineno"><a class="line" href="classTBR__CanBackDoor.html">  444</a></span>&#160;<span class="keyword">class </span><a class="code" href="classTBR__CanBackDoor.html">TBR_CanBackDoor</a>: <span class="keyword">public</span> BufferedPort&lt;Bottle&gt;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;{</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a> *bus;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    std::recursive_mutex *backdoor_mutex;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <a class="code" href="classTBR__AnalogSensor.html">TBR_AnalogSensor</a> *ownerSensor;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <span class="keywordtype">bool</span> canEchoEnabled;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160; </div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00452"></a><span class="lineno"><a class="line" href="classTBR__CanBackDoor.html#af220fc2005bc1d4aa324db228f624e54">  452</a></span>&#160;    <a class="code" href="classTBR__CanBackDoor.html#af220fc2005bc1d4aa324db228f624e54">TBR_CanBackDoor</a>()</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    {</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        bus=0;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        ownerSensor=0;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        canEchoEnabled=<span class="keyword">false</span>;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        backdoor_mutex=<span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    }</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160; </div>
<div class="line"><a name="l00460"></a><span class="lineno"><a class="line" href="classTBR__CanBackDoor.html#afd309ca183ade66c467261a0814b84d8">  460</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classTBR__CanBackDoor.html#afd309ca183ade66c467261a0814b84d8">setUp</a>(<a class="code" href="classCanBusResources.html">CanBusResources</a> *<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>, std::recursive_mutex *mut, <span class="keywordtype">bool</span> echo, <a class="code" href="classTBR__AnalogSensor.html">TBR_AnalogSensor</a> *owner)</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    {</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        backdoor_mutex=mut;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        bus=<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        ownerSensor= owner;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        useCallback();</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        canEchoEnabled = echo;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    }</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160; </div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> onRead(Bottle &amp;b);</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;};</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160; </div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160; </div>
<div class="line"><a name="l00473"></a><span class="lineno"><a class="line" href="classTBR__CanBackDoor.html#ade7f162a5b4ce02c6518ab8ebb23e761">  473</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classTBR__CanBackDoor.html#ade7f162a5b4ce02c6518ab8ebb23e761">TBR_CanBackDoor::onRead</a>(Bottle &amp;b)</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;{</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <span class="keywordflow">if</span> (!backdoor_mutex)</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160; </div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <span class="keywordtype">double</span> dval[6] = {0,0,0,0,0,0};</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160; </div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    std::lock_guard&lt;std::recursive_mutex&gt; lck(*backdoor_mutex);</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <span class="comment">//RANDAZ_TODO: parse vector b</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <span class="keywordtype">int</span> len = b.size();</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="keywordtype">int</span> commandId = b.get(0).asInt32();</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <span class="keywordtype">int</span> i=0;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160; </div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">double</span> timePrev=Time::now();</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">int</span>    count_timeout=0;</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">int</span>    count_saturation_i[6]={0,0,0,0,0,0};</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">int</span>    count_saturation=0;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <span class="keywordtype">double</span> timeNow=Time::now();</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="keywordtype">double</span> diff = timeNow - timePrev;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160; </div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <span class="keywordflow">if</span> (diff &gt; 0.012)</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    {</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        count_timeout++;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        yWarning(<span class="stringliteral">&quot;PORT: %s **** TIMEOUT : %f COUNT: %d \n&quot;</span>, this-&gt;getName().c_str(), diff, count_timeout);</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    }</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    timePrev=Time::now();</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160; </div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="keywordflow">switch</span> (commandId)</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    {</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        <span class="keywordflow">case</span> 1: <span class="comment">//shoulder torque message</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;            dval[0] = b.get(1).asFloat64(); <span class="comment">//shoulder 1 pitch</span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;            dval[1] = b.get(2).asFloat64(); <span class="comment">//shoulder 2 roll</span></div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;            dval[2] = b.get(3).asFloat64(); <span class="comment">//shoulder 3 yaw</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;            dval[3] = b.get(4).asFloat64(); <span class="comment">//elbow</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;            dval[4] = b.get(5).asFloat64(); <span class="comment">//wrist pronosupination</span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;            dval[5] = 0; </div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        <span class="keywordflow">case</span> 2: <span class="comment">//legs torque message</span></div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;            dval[0] = b.get(1).asFloat64(); <span class="comment">//hip pitch</span></div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;            dval[1] = b.get(2).asFloat64(); <span class="comment">//hip roll</span></div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;            dval[2] = b.get(3).asFloat64(); <span class="comment">//hip yaw</span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;            dval[3] = b.get(4).asFloat64(); <span class="comment">//knee</span></div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;            dval[4] = b.get(5).asFloat64(); <span class="comment">//ankle pitch</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;            dval[5] = b.get(6).asFloat64(); <span class="comment">//ankle roll</span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        <span class="keywordflow">case</span> 3:</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;            dval[0] = b.get(6).asFloat64(); <span class="comment">//wrist yaw</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;            dval[1] = b.get(7).asFloat64(); <span class="comment">//wrist pitch</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;            dval[2] = 0;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;            dval[3] = 0;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;            dval[4] = 0;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;            dval[5] = 0; </div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        <span class="keywordflow">case</span> 4:</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;            dval[0] = b.get(1).asFloat64(); <span class="comment">//torso yaw (respect gravity)</span></div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;            dval[1] = b.get(2).asFloat64(); <span class="comment">//torso roll (lateral movement)</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;            dval[2] = b.get(3).asFloat64(); <span class="comment">//torso pitch (front-back movement)</span></div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;            dval[3] = 0;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;            dval[4] = 0;</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;            dval[5] = 0; </div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;            yWarning(<span class="stringliteral">&quot;Got unexpected message on backdoor: %s\n&quot;</span>, this-&gt;getName().c_str());</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    }</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160; </div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <span class="keywordflow">if</span> (bus &amp;&amp; ownerSensor)</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    {</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;       <span class="keywordtype">int</span> fakeId = 0;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;       <span class="keywordtype">int</span> boardId = ownerSensor-&gt;getId();</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;       <span class="keywordtype">short</span> <span class="keywordtype">int</span> val[6] = {0,0,0,0,0,0};</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;       <span class="keyword">static</span> <span class="keywordtype">double</span> curr_time = Time::now();</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;       <span class="keywordflow">for</span> (i=0; i&lt;6; i++)</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;       {</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;           <span class="keywordtype">double</span> fullScale = ownerSensor-&gt;getScaleFactor()[i];</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;           <span class="keywordflow">if</span> (dval[i] &gt;  fullScale) </div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;           {</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;               <span class="keywordflow">if</span> (Time::now() - curr_time &gt; 2)</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                    {</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                        yWarning(<span class="stringliteral">&quot;PORT: %s **** SATURATED CH:%d : %+4.4f COUNT: %d \n&quot;</span>, this-&gt;getName().c_str(), i, dval[i], count_saturation);</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;                        curr_time = Time::now();</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;                    }</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;               dval[i] =  fullScale;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;               count_saturation++;</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;           }</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;           <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dval[i] &lt; -fullScale)</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;           {</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;               <span class="keywordflow">if</span> (Time::now() - curr_time &gt; 2)</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                    {</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;                        yWarning(<span class="stringliteral">&quot;PORT: %s **** SATURATED CH:%d : %+4.4f COUNT: %d \n&quot;</span>, this-&gt;getName().c_str(), i, dval[i], count_saturation);</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;                        curr_time = Time::now();</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;                    }</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;               dval[i] = -fullScale;</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;               count_saturation++;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;           }</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;           val[i] = (<span class="keywordtype">short</span> int)(dval[i] / fullScale * 0x7fff)+0x8000; <span class="comment">//check this!</span></div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;       }</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160; </div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;       bus-&gt;startPacket();</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;       fakeId = 0x300 + (boardId&lt;&lt;4)+ 0x0A;</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;       bus-&gt;_writeBuffer[0].setId(fakeId);</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;       bus-&gt;_writeBuffer[0].getData()[1]=(val[0] &gt;&gt; 8) &amp; 0xFF;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;       bus-&gt;_writeBuffer[0].getData()[0]= val[0] &amp; 0xFF;</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;       bus-&gt;_writeBuffer[0].getData()[3]=(val[1] &gt;&gt; 8) &amp; 0xFF;</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;       bus-&gt;_writeBuffer[0].getData()[2]= val[1] &amp; 0xFF;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;       bus-&gt;_writeBuffer[0].getData()[5]=(val[2] &gt;&gt; 8) &amp; 0xFF;</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;       bus-&gt;_writeBuffer[0].getData()[4]= val[2] &amp; 0xFF;</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;       bus-&gt;_writeBuffer[0].setLen(6);</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;       bus-&gt;_writeMessages++;</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;       bus-&gt;writePacket();</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160; </div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;       <span class="keywordflow">if</span> (canEchoEnabled)</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;       {</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;           <span class="keywordflow">if</span> (bus-&gt;_readMessages&lt;<a class="code" href="canControlConstants_8h.html#a36bc189fb5890a73e1e00d53972cb90c">BUF_SIZE</a>-1 &amp;&amp; bus-&gt;_echoMessages&lt;<a class="code" href="canControlConstants_8h.html#a36bc189fb5890a73e1e00d53972cb90c">BUF_SIZE</a>-1)</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;           {</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;               bus-&gt;_echoBuffer[bus-&gt;_echoMessages].setId(fakeId);</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;               bus-&gt;_echoBuffer[bus-&gt;_echoMessages].setLen(6);</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;               <span class="keywordflow">for</span> (i=0; i&lt;6; i++)</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;                    bus-&gt;_echoBuffer[bus-&gt;_echoMessages].getData()[i]=bus-&gt;_writeBuffer[0].getData()[i];</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;               bus-&gt;_echoMessages++;</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;           }</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;           <span class="keywordflow">else</span></div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;           {</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;               yError(<span class="stringliteral">&quot;Echobuffer full \n&quot;</span>);</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;           }</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;       }</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160; </div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;       bus-&gt;startPacket();</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;       fakeId = 0x300 + (boardId&lt;&lt;4)+ 0x0B;</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;       bus-&gt;_writeBuffer[0].setId(fakeId);</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;       bus-&gt;_writeBuffer[0].getData()[1]=(val[3] &gt;&gt; 8) &amp; 0xFF;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;       bus-&gt;_writeBuffer[0].getData()[0]= val[3] &amp; 0xFF;</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;       bus-&gt;_writeBuffer[0].getData()[3]=(val[4] &gt;&gt; 8) &amp; 0xFF;</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;       bus-&gt;_writeBuffer[0].getData()[2]= val[4] &amp; 0xFF;</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;       bus-&gt;_writeBuffer[0].getData()[5]=(val[5] &gt;&gt; 8) &amp; 0xFF;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;       bus-&gt;_writeBuffer[0].getData()[4]= val[5] &amp; 0xFF;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;       bus-&gt;_writeBuffer[0].setLen(6);</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;       bus-&gt;_writeMessages++;</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;       bus-&gt;writePacket();</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;       </div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;       <span class="keywordflow">if</span> (canEchoEnabled)</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;       {</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;           <span class="keywordflow">if</span> (bus-&gt;_readMessages&lt;<a class="code" href="canControlConstants_8h.html#a36bc189fb5890a73e1e00d53972cb90c">BUF_SIZE</a>-1 &amp;&amp; bus-&gt;_echoMessages&lt;<a class="code" href="canControlConstants_8h.html#a36bc189fb5890a73e1e00d53972cb90c">BUF_SIZE</a>-1)</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;           {</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;               bus-&gt;_echoBuffer[bus-&gt;_echoMessages].setId(fakeId);</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;               bus-&gt;_echoBuffer[bus-&gt;_echoMessages].setLen(6);</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;               <span class="keywordflow">for</span> (i=0; i&lt;6; i++)</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;                    bus-&gt;_echoBuffer[bus-&gt;_echoMessages].getData()[i]=bus-&gt;_writeBuffer[0].getData()[i];</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;               bus-&gt;_echoMessages++;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;           }</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;           <span class="keywordflow">else</span></div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;           {</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;               yError(<span class="stringliteral">&quot;Echobuffer full \n&quot;</span>);</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;           }</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;       }</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160; </div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    }</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;}</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160; </div>
<div class="line"><a name="l00633"></a><span class="lineno"><a class="line" href="classspeedEstimationHelper.html#a03fd09509baac1aab8d4864ea0a47371">  633</a></span>&#160;<a class="code" href="classspeedEstimationHelper.html#a03fd09509baac1aab8d4864ea0a47371">speedEstimationHelper::speedEstimationHelper</a>(<span class="keywordtype">int</span> njoints, <a class="code" href="structSpeedEstimationParameters.html">SpeedEstimationParameters</a>* estim_parameters )</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;{</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    jointsNum=njoints;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    estim_params = <span class="keyword">new</span> <a class="code" href="structSpeedEstimationParameters.html">SpeedEstimationParameters</a> [jointsNum];</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="keywordflow">if</span> (estim_parameters!=0)</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        memcpy(estim_params, estim_parameters, <span class="keyword">sizeof</span>(<a class="code" href="structSpeedEstimationParameters.html">SpeedEstimationParameters</a>)*jointsNum);</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;        memset(estim_params, 0, <span class="keyword">sizeof</span>(<a class="code" href="structSpeedEstimationParameters.html">SpeedEstimationParameters</a>)*jointsNum);</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;}</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160; </div>
<div class="line"><a name="l00643"></a><span class="lineno"><a class="line" href="classaxisImpedanceHelper.html#a09e17bc09de2c793bf1b49ab54bd71d6">  643</a></span>&#160;<a class="code" href="classaxisImpedanceHelper.html#a09e17bc09de2c793bf1b49ab54bd71d6">axisImpedanceHelper::axisImpedanceHelper</a>(<span class="keywordtype">int</span> njoints, <a class="code" href="structImpedanceLimits.html">ImpedanceLimits</a>* imped_limits)</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;{</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    jointsNum=njoints;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    impLimits = <span class="keyword">new</span> <a class="code" href="structImpedanceLimits.html">ImpedanceLimits</a> [jointsNum];</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    <span class="keywordflow">if</span> (impLimits != 0)</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;        memcpy(impLimits, imped_limits, <span class="keyword">sizeof</span>(<a class="code" href="structImpedanceLimits.html">ImpedanceLimits</a>)*jointsNum);</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;        memset(impLimits, 0, <span class="keyword">sizeof</span>(<a class="code" href="structImpedanceLimits.html">ImpedanceLimits</a>)*jointsNum);</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;}</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160; </div>
<div class="line"><a name="l00653"></a><span class="lineno"><a class="line" href="classaxisPositionDirectHelper.html#aa083baa12bd850daa9c8e45adf14b667">  653</a></span>&#160;<a class="code" href="classaxisPositionDirectHelper.html#aa083baa12bd850daa9c8e45adf14b667">axisPositionDirectHelper::axisPositionDirectHelper</a>(<span class="keywordtype">int</span> njoints, <span class="keyword">const</span> <span class="keywordtype">int</span> *aMap, <span class="keyword">const</span> <span class="keywordtype">double</span> *angToEncs, <span class="keywordtype">double</span>* _stepLimit)</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;{</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    jointsNum=njoints;</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    helper = <span class="keyword">new</span> ControlBoardHelper(njoints, aMap, angToEncs, 0, 0); <span class="comment">//NB: zeros=0 is mandatory for this algorithm</span></div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    maxHwStep = <span class="keyword">new</span> <span class="keywordtype">double</span> [jointsNum];</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    maxUserStep = <span class="keyword">new</span> <span class="keywordtype">double</span> [jointsNum];</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;jointsNum; i++)</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    {</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;        <span class="keywordtype">int</span>    hw_i=0;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;        <span class="keywordtype">double</span> hw_ang=0;</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;        helper-&gt;posA2E(_stepLimit[i], i, hw_ang, hw_i);</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;        maxHwStep[hw_i] = fabs(hw_ang); <span class="comment">//NB: fabs() is mandatory for this algorithm (because angToEncs is signed)</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;        maxUserStep[i] = _stepLimit[i];</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    }</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;}</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160; </div>
<div class="line"><a name="l00669"></a><span class="lineno"><a class="line" href="classaxisPositionDirectHelper.html#a97b8b33f939060eedeee47cf3dba6d7a">  669</a></span>&#160;<span class="keywordtype">double</span> <a class="code" href="classaxisPositionDirectHelper.html#a97b8b33f939060eedeee47cf3dba6d7a">axisPositionDirectHelper::getSaturatedValue</a> (<span class="keywordtype">int</span> hw_j, <span class="keywordtype">double</span> hw_curr_value, <span class="keywordtype">double</span> hw_ref_value)</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;{</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <span class="comment">//here hw_j isthe joint number after the axis_map; hw_value is in encoder ticks</span></div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    <span class="keywordtype">double</span> hw_maxval = hw_curr_value + getMaxHwStep(hw_j);</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    <span class="keywordtype">double</span> hw_minval = hw_curr_value - getMaxHwStep(hw_j);</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    <span class="keywordtype">double</span> hw_val    = (<a class="code" href="namespacestrain_1_1dsp_1_1fsc.html#a746ce6f9a14034939607ccead53e3fd6">std::min</a>)((<a class="code" href="namespacestrain_1_1dsp_1_1fsc.html#a65804363dbaa9346e53442cb1bb9d73f">std::max</a>)(hw_ref_value, hw_minval), hw_maxval);</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160; </div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    <span class="keywordflow">return</span> hw_val;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;}</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160; </div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;CanBusMotionControl::torqueControlHelper::torqueControlHelper(<span class="keywordtype">int</span> njoints, <span class="keywordtype">double</span>* p_angleToEncoders, <span class="keywordtype">double</span>* p_newtonsTosens )</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;{</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;   jointsNum=njoints;</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;   newtonsToSensor = <span class="keyword">new</span> <span class="keywordtype">double</span>  [jointsNum];</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;   angleToEncoders = <span class="keyword">new</span> <span class="keywordtype">double</span>  [jointsNum];</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160; </div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;   <span class="keywordflow">if</span> (p_angleToEncoders!=0)</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;       memcpy(angleToEncoders, p_angleToEncoders, <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>)*jointsNum);</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;   <span class="keywordflow">else</span></div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;jointsNum; i++) {angleToEncoders[i]=1.0;}</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160; </div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;   <span class="keywordflow">if</span> (p_newtonsTosens!=0)</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;       memcpy(newtonsToSensor, p_newtonsTosens, <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>)*jointsNum);</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;   <span class="keywordflow">else</span></div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;jointsNum; i++) {newtonsToSensor[i]=1.0;}</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;}</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160; </div>
<div class="line"><a name="l00696"></a><span class="lineno"><a class="line" href="classaxisTorqueHelper.html#acad80e6ebe423eb86fb9e4b6082ca107">  696</a></span>&#160;<a class="code" href="classaxisTorqueHelper.html#acad80e6ebe423eb86fb9e4b6082ca107">axisTorqueHelper::axisTorqueHelper</a>(<span class="keywordtype">int</span> njoints, <span class="keywordtype">int</span>* <span class="keywordtype">id</span>, <span class="keywordtype">int</span>* chan, <span class="keywordtype">double</span>* maxTrq, <span class="keywordtype">double</span>* newtons2sens )</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;{</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    jointsNum=njoints;</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    torqueSensorId = <span class="keyword">new</span> <span class="keywordtype">int</span> [jointsNum];</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    torqueSensorChan = <span class="keyword">new</span> <span class="keywordtype">int</span> [jointsNum];</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    maximumTorque = <span class="keyword">new</span> <span class="keywordtype">double</span> [jointsNum];</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    newtonsToSensor = <span class="keyword">new</span> <span class="keywordtype">double</span> [jointsNum];</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <span class="keywordflow">if</span> (<span class="keywordtype">id</span>!=0)</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;        memcpy(torqueSensorId, <span class="keywordtype">id</span>, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>)*jointsNum);</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;        memset(torqueSensorId, 0, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>)*jointsNum);</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    <span class="keywordflow">if</span> (chan!=0)</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;        memcpy(torqueSensorChan, chan, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>)*jointsNum);</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;        memset(torqueSensorChan, 0, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>)*jointsNum);</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    <span class="keywordflow">if</span> (maxTrq!=0)</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;        memcpy(maximumTorque, maxTrq, <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>)*jointsNum);</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;        memset(maximumTorque, 0, <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>)*jointsNum);</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    <span class="keywordflow">if</span> (newtons2sens!=0)</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;        memcpy(newtonsToSensor, newtons2sens, <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>)*jointsNum);</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;        memset(newtonsToSensor, 0, <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>)*jointsNum);</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160; </div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;}</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160; </div>
<div class="line"><a name="l00722"></a><span class="lineno"><a class="line" href="classTBR__AnalogSensor.html#a19c19f95cd78be8433ddb2b486421038">  722</a></span>&#160;<a class="code" href="classTBR__AnalogSensor.html#a19c19f95cd78be8433ddb2b486421038">TBR_AnalogSensor::TBR_AnalogSensor</a>():</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>(0)</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;{</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    isVirtualSensor=<span class="keyword">false</span>;</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    timeStamp=0;</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    status=IAnalogSensor::AS_OK;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    useCalibration=0;</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    scaleFactor=0;</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160; </div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    counterSat=0;</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    counterError=0;</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    counterTimeout=0;</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    <a class="code" href="classTBR__AnalogSensor.html#a83c8ffd97189fd7bb16eb8010a71a3d5">backDoor</a>=0;</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;}</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160; </div>
<div class="line"><a name="l00737"></a><span class="lineno"><a class="line" href="classTBR__AnalogSensor.html#a79e009e21fe109f5fceb852a427d080b">  737</a></span>&#160;<a class="code" href="classTBR__AnalogSensor.html#a79e009e21fe109f5fceb852a427d080b">TBR_AnalogSensor::~TBR_AnalogSensor</a>()</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;{</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    <span class="keywordflow">if</span> (!data)</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;        <span class="keyword">delete</span> data;</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    <span class="keywordflow">if</span> (!scaleFactor)</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;        <span class="keyword">delete</span> scaleFactor;</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;}</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160; </div>
<div class="line"><a name="l00745"></a><span class="lineno"><a class="line" href="classTBR__AnalogSensor.html#a737b0aa3995d55d9726710f400be979a">  745</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classTBR__AnalogSensor.html#a737b0aa3995d55d9726710f400be979a">TBR_AnalogSensor::getState</a>(<span class="keywordtype">int</span> ch)</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;{</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <span class="keywordflow">return</span> status;</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;}</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160; </div>
<div class="line"><a name="l00750"></a><span class="lineno"><a class="line" href="classTBR__AnalogSensor.html#a718c9c67ae22d5b5c4b71a42c3d00a9f">  750</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classTBR__AnalogSensor.html#a718c9c67ae22d5b5c4b71a42c3d00a9f">TBR_AnalogSensor::open</a>(<span class="keywordtype">int</span> channels, <a class="code" href="classTBR__AnalogSensor.html#afa92092d0139836d6f6a830fb33946a2">AnalogDataFormat</a> <a class="code" href="compute__ekf__sym_8m.html#a633de4b0c14ca52ea2432a3c8a5c4c31">f</a>, <span class="keywordtype">short</span> bId, <span class="keywordtype">short</span> useCalib, <span class="keywordtype">bool</span> isVirtualS)</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;{</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    <span class="keywordflow">if</span> (data)</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    <span class="keywordflow">if</span> (scaleFactor)</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160; </div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    data=<span class="keyword">new</span> <a class="code" href="classTBR__AnalogData.html">TBR_AnalogData</a>(channels, channels+1);</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    scaleFactor=<span class="keyword">new</span> <span class="keywordtype">double</span>[channels];</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    <span class="keywordtype">int</span> i=0;</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    <span class="keywordflow">for</span> (i=0; i&lt;channels; i++) scaleFactor[i]=1;</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    dataFormat=<a class="code" href="compute__ekf__sym_8m.html#a633de4b0c14ca52ea2432a3c8a5c4c31">f</a>;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    boardId=bId;</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    useCalibration=useCalib;</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    isVirtualSensor=isVirtualS;</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    <span class="keywordflow">if</span> (useCalibration==1 &amp;&amp; dataFormat==<a class="code" href="classTBR__AnalogSensor.html#afa92092d0139836d6f6a830fb33946a2a195c739874d6d3dffbebf83a42315b04">TBR_AnalogSensor::ANALOG_FORMAT_16</a>)</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    {</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;        scaleFactor[0]=1;</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;        scaleFactor[1]=1;</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;        scaleFactor[2]=1;</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;        scaleFactor[3]=1;</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;        scaleFactor[4]=1;</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;        scaleFactor[5]=1;</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    }</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160; </div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;}</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160; </div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160; </div>
<div class="line"><a name="l00779"></a><span class="lineno"><a class="line" href="classTBR__AnalogSensor.html#aabd6f3ff4d28d15df1ec8107c7e9588a">  779</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classTBR__AnalogSensor.html#aabd6f3ff4d28d15df1ec8107c7e9588a">TBR_AnalogSensor::getChannels</a>()</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;{</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    <span class="keywordflow">return</span> data-&gt;<a class="code" href="classTBR__AnalogData.html#a1a5f9d4645de54371eefc1ba61bfd1a4">size</a>();</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;}</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160; </div>
<div class="line"><a name="l00784"></a><span class="lineno"><a class="line" href="classTBR__AnalogSensor.html#a94c6a336072fff1baf2bb975db606251">  784</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classTBR__AnalogSensor.html#a94c6a336072fff1baf2bb975db606251">TBR_AnalogSensor::read</a>(yarp::sig::Vector &amp;<a class="code" href="sine_8m.html#a2a89187d8e8e8fba509ef9ab5f815d88">out</a>)</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;{</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    <span class="comment">// print errors</span></div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    std::lock_guard&lt;std::mutex&gt; lck(mtx);</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160; </div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    <span class="keywordflow">if</span> (!data)</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    {</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    }</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160; </div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;     <span class="keywordflow">if</span> (status!=IAnalogSensor::AS_OK) </div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    {</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;        <span class="keywordflow">switch</span> (status)</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;        {</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;            <span class="keywordflow">case</span> IAnalogSensor::AS_OVF:</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;                {</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;                    counterSat++;</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;                }</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;            <span class="keywordflow">case</span> IAnalogSensor::AS_ERROR:</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;                {</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;                    counterError++;</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;                }</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;            <span class="keywordflow">case</span> IAnalogSensor::AS_TIMEOUT:</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;                {</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;                   counterTimeout++;</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;                }</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;            <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;            {</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;                counterError++;</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;            }</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;        }</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;        <span class="keywordflow">return</span> status;</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    }</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160; </div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    <a class="code" href="sine_8m.html#a2a89187d8e8e8fba509ef9ab5f815d88">out</a>.resize(data-&gt;<a class="code" href="classTBR__AnalogData.html#a1a5f9d4645de54371eefc1ba61bfd1a4">size</a>());</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> k=0;k&lt;data-&gt;<a class="code" href="classTBR__AnalogData.html#a1a5f9d4645de54371eefc1ba61bfd1a4">size</a>();k++)</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    {</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;        <a class="code" href="sine_8m.html#a2a89187d8e8e8fba509ef9ab5f815d88">out</a>[k]=(*data)[k];</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    }</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    </div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    <span class="keywordflow">return</span> status;</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;}</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160; </div>
<div class="line"><a name="l00830"></a><span class="lineno"><a class="line" href="classTBR__AnalogSensor.html#a0c0f8840159840bed3a350df8edb08f5">  830</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classTBR__AnalogSensor.html#a0c0f8840159840bed3a350df8edb08f5">TBR_AnalogSensor::calibrateChannel</a>(<span class="keywordtype">int</span> ch, <span class="keywordtype">double</span> v)</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;{</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    <span class="keywordflow">return</span> AS_OK;</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;}</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160; </div>
<div class="line"><a name="l00835"></a><span class="lineno"><a class="line" href="classTBR__AnalogSensor.html#aec3878d376487355972a09ffdb8307ff">  835</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classTBR__AnalogSensor.html#aec3878d376487355972a09ffdb8307ff">TBR_AnalogSensor::calibrateSensor</a>()</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;{</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    <span class="keywordflow">return</span> AS_OK;</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;}</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160; </div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;<span class="keywordtype">bool</span> TBR_AnalogSensor::decode16(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *msg, <span class="keywordtype">int</span> <span class="keywordtype">id</span>, <span class="keywordtype">double</span> *<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>)</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;{</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    </div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> groupId=(<span class="keywordtype">id</span>&amp;0x00f);</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    <span class="keywordtype">int</span> baseIndex=0;</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    {</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;        <span class="keywordflow">switch</span> (groupId)</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;        {</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;        <span class="keywordflow">case</span> 0xA:</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;            {</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;                <span class="keywordflow">for</span>(<span class="keywordtype">int</span> k=0;k&lt;3;k++)</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;                    {</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;                        <a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>[k]=(((<span class="keywordtype">unsigned</span> short)(msg[2*k+1]))&lt;&lt;8)+msg[2*k]-0x8000;</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;                        <span class="keywordflow">if</span> (useCalibration==1)</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;                        {</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;                            <a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>[k]=<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>[k]*scaleFactor[k]/float(0x8000);</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;                        }</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;                    }</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;            }</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;        <span class="keywordflow">case</span> 0xB:</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;            {</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;                <span class="keywordflow">for</span>(<span class="keywordtype">int</span> k=0;k&lt;3;k++)</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;                    {</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;                        <a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>[k+3]=(((<span class="keywordtype">unsigned</span> short)(msg[2*k+1]))&lt;&lt;8)+msg[2*k]-0x8000;</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;                        <span class="keywordflow">if</span> (useCalibration==1)</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;                        {</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;                            <a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>[k+3]=<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>[k+3]*scaleFactor[k+3]/float(0x8000);</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;                        }</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;                    }</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;            }</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;        <span class="keywordflow">case</span> 0xC:</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;            {} <span class="comment">//skip these, they are not for us</span></div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;        <span class="keywordflow">case</span> 0xD:</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;            {} <span class="comment">//skip these, they are not for us</span></div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;            yError(<span class="stringliteral">&quot;Got unexpected class 0x3 msg(s)\n&quot;</span>);</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;        }</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;        <span class="comment">//@@@DEBUG ONLY</span></div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;        <span class="comment">//yDebug(&quot;   %+8.1f %+8.1f %+8.1f %+8.1f %+8.1f %+8.1f\n&quot;,data[0],data[1],data[2],data[3],data[4],data[5],data[6]);</span></div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    }</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160; </div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;}</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160; </div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;<span class="keywordtype">bool</span> TBR_AnalogSensor::decode8(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *msg, <span class="keywordtype">int</span> <span class="keywordtype">id</span>, <span class="keywordtype">double</span> *<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>)</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;{</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> groupId=(<span class="keywordtype">id</span>&amp;0x00f);</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    <span class="keywordtype">int</span> baseIndex=0;</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    {</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;        <span class="keywordflow">switch</span> (groupId)</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;        {</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;        <span class="keywordflow">case</span> 0xC:</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;            {</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;                <span class="keywordflow">for</span>(<span class="keywordtype">int</span> k=0;k&lt;=6;k++)</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;                    data[k]=msg[k];</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;            }</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;        <span class="keywordflow">case</span> 0xD:</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;            {</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;                <span class="keywordflow">for</span>(<span class="keywordtype">int</span> k=0;k&lt;=7;k++)</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;                    data[7+k]=msg[k];</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;            }</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;        <span class="keywordflow">case</span> 0xA:</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;            {} <span class="comment">//skip these, they are not for us</span></div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;        <span class="keywordflow">case</span> 0xB:</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;            {} <span class="comment">//skip these, they are not for us</span></div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;            yWarning(<span class="stringliteral">&quot;Got unexpected class 0x3 msg(s): groupId 0x%x\n&quot;</span>, groupId);</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;        }</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;    }</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;}</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160; </div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160; </div>
<div class="line"><a name="l00925"></a><span class="lineno"><a class="line" href="classTBR__AnalogSensor.html#a192722cecb0aa650cfc802c0fb6ac6d0">  925</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classTBR__AnalogSensor.html#a192722cecb0aa650cfc802c0fb6ac6d0">TBR_AnalogSensor::handleAnalog</a>(<span class="keywordtype">void</span> *canbus)</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;{</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a> (canbus);</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160; </div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0;</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> _networkN=r.<a class="code" href="classCanBusResources.html#a5434ee36839850ff8330ef5322171ff8">_networkN</a>;</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160; </div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    <span class="keywordtype">bool</span> ret=<span class="keyword">true</span>; <span class="comment">//return true by default</span></div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160; </div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    std::lock_guard&lt;std::mutex&gt; lck(mtx);</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160; </div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;    <span class="keywordtype">double</span> timeNow=Time::now();</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> buff_num=0; buff_num&lt;2; buff_num++)</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    {</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> size = 0;</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;        CanBuffer* buffer_pointer=0;</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;        <span class="keywordflow">if</span> (buff_num==0)</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;        {</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;            size = r.<a class="code" href="classCanBusResources.html#a6785040f8650d0ecfb945e295808a377">_readMessages</a>;</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;            buffer_pointer = &amp;r.<a class="code" href="classCanBusResources.html#a1eed1867edaefc8303954e7b5d41446f">_readBuffer</a>;</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;        }</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;        {</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;            size = r.<a class="code" href="classCanBusResources.html#a01693f537c51494be7345cbd89e22d44">_echoMessages</a>;</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;            buffer_pointer = &amp;r.<a class="code" href="classCanBusResources.html#af39b42503e37f91bc21de3efa9bc0d16">_echoBuffer</a>;</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;        }</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160; </div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt; size; i++)</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;        {</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> len=0;</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> msgid=0;</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *buff=0;</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;            CanMessage&amp; m = (*buffer_pointer)[i];</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;            buff=m.getData();</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;            msgid=m.getId();</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;            len=m.getLen();</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;        </div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;            status=IAnalogSensor::AS_OK;</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">char</span> type=((msgid&amp;0x700)&gt;&gt;8);</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">char</span> <span class="keywordtype">id</span>=((msgid&amp;0x0f0)&gt;&gt;4);</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160; </div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;            <span class="keywordflow">if</span> (type==0x03) <span class="comment">//analog data</span></div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;                {</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;                    <span class="keywordflow">if</span> (<span class="keywordtype">id</span>==boardId)</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;                    {</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;                        timeStamp=Time::now();</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;                        <span class="keywordflow">switch</span> (dataFormat)</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;                        {</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;                            <span class="keywordflow">case</span> <a class="code" href="classTBR__AnalogSensor.html#afa92092d0139836d6f6a830fb33946a2ae6493121d2b88f8bc93fedac07afd60e">ANALOG_FORMAT_8</a>:</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;                                ret=decode8(buff, msgid, <a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>-&gt;getBuffer());</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;                                status=IAnalogSensor::AS_OK;</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;                            <span class="keywordflow">case</span> <a class="code" href="classTBR__AnalogSensor.html#afa92092d0139836d6f6a830fb33946a2a195c739874d6d3dffbebf83a42315b04">ANALOG_FORMAT_16</a>:</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;                                <span class="keywordflow">if</span> (len==6) </div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;                                {</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;                                    ret=decode16(buff, msgid, <a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>-&gt;getBuffer());</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;                                    status=IAnalogSensor::AS_OK;</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;                                }</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;                                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;                                {</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;                                    <span class="keywordflow">if</span> (len==7 &amp;&amp; buff[6] == 1)</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;                                    {</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;                                        status=IAnalogSensor::AS_OVF;</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;                                    }</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;                                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;                                    {</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;                                        status=IAnalogSensor::AS_ERROR;</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;                                    }</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;                                    ret=decode16(buff, msgid, <a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>-&gt;getBuffer());</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;                                }</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;                            <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;                                ret=<span class="keyword">false</span>;</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;                        }</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;                    }</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;                }</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;        }</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;    }</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160; </div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;    <span class="comment">//if 100ms have passed since the last received message</span></div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;    <span class="keywordflow">if</span> (timeStamp+0.1&lt;timeNow)</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;        {</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;            status=IAnalogSensor::AS_TIMEOUT;</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;        }</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160; </div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;}</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160; </div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160; </div>
<div class="line"><a name="l01014"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a6e876530e1093ae831fc2c47ba228fbe"> 1014</a></span>&#160;<span class="keywordtype">bool</span> CanBusMotionControlParameters:: setBroadCastMask(Bottle &amp;list, <span class="keywordtype">int</span> MASK)</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;{</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;    <span class="keywordflow">if</span> (list.size()==2)</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    {</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;        <span class="keywordflow">if</span> (list.get(1).asInt32()==1)</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;        {</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;            <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0;j&lt;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aebac840500409b6ab4dc4d7e44e4e216">_njoints</a>;j++)</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;                <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ae942e7739d24298f278452f206a434c7">_broadcast_mask</a>[j]|=(1&lt;&lt;(MASK-1));</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;        }</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;    }</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160; </div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    <span class="keywordflow">if</span> (list.size()==(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aebac840500409b6ab4dc4d7e44e4e216">_njoints</a>+1))</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;    {</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> k=0;k&lt;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aebac840500409b6ab4dc4d7e44e4e216">_njoints</a>;k++)</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;        {</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;            <span class="keywordflow">if</span> ((list.get(k+1).asInt32())==1)</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;                {</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;                    <span class="keywordtype">int</span> <a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a>=<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aa843f78c2438fe1eece0c5aa7b1d5990">_axisMap</a>[k];<span class="comment">//remap</span></div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;                    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ae942e7739d24298f278452f206a434c7">_broadcast_mask</a>[<a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a>]|=(1&lt;&lt;(MASK-1));</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;                }</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;        }</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    }</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160; </div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;}</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160; </div>
<div class="line"><a name="l01042"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a781b20f8e50e734d75d1a05ca766cca5"> 1042</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a781b20f8e50e734d75d1a05ca766cca5">CanBusMotionControlParameters::parsePosPidsGroup_OldFormat</a>(Bottle&amp; pidsGroup, <span class="keywordtype">int</span> nj, Pid myPid[])</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;{</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    <span class="keywordtype">int</span> j=0;</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;    <span class="keywordflow">for</span>(j=0;j&lt;nj;j++)</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    {</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;        <span class="keywordtype">char</span> <a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a>[80];</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;        sprintf(<a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a>, <span class="stringliteral">&quot;Pid%d&quot;</span>, j); </div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160; </div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;        Bottle &amp;xtmp = pidsGroup.findGroup(<a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a>);</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;        myPid[j].kp = xtmp.get(1).asFloat64();</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;        myPid[j].kd = xtmp.get(2).asFloat64();</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;        myPid[j].ki = xtmp.get(3).asFloat64();</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160; </div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;        myPid[j].max_int = xtmp.get(4).asFloat64();</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;        myPid[j].max_output = xtmp.get(5).asFloat64();</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160; </div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;        myPid[j].scale = xtmp.get(6).asFloat64();</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;        myPid[j].offset = xtmp.get(7).asFloat64();</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160; </div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;        <span class="keywordflow">if</span> (xtmp.size()==10)</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;        {</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;            myPid[j].stiction_up_val = xtmp.get(8).asFloat64();</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;            myPid[j].stiction_down_val = xtmp.get(9).asFloat64();</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;        }</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;    }</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;}</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160; </div>
<div class="line"><a name="l01070"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a6aec78de2cb23c7b8cb964c2244aeba1"> 1070</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a6aec78de2cb23c7b8cb964c2244aeba1">CanBusMotionControlParameters::parseTrqPidsGroup_OldFormat</a>(Bottle&amp; pidsGroup, <span class="keywordtype">int</span> nj, Pid myPid[])</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;{</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    <span class="keywordtype">int</span> j=0;</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;    <span class="keywordflow">for</span>(j=0;j&lt;nj;j++)</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    {</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;        <span class="keywordtype">char</span> <a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a>[80];</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;        sprintf(<a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a>, <span class="stringliteral">&quot;TPid%d&quot;</span>, j); </div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160; </div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;        Bottle &amp;xtmp = pidsGroup.findGroup(<a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a>);</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;        myPid[j].kp = xtmp.get(1).asFloat64();</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;        myPid[j].kd = xtmp.get(2).asFloat64();</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;        myPid[j].ki = xtmp.get(3).asFloat64();</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160; </div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;        myPid[j].max_int = xtmp.get(4).asFloat64();</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;        myPid[j].max_output = xtmp.get(5).asFloat64();</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160; </div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;        myPid[j].scale = xtmp.get(6).asFloat64();</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;        myPid[j].offset = xtmp.get(7).asFloat64();</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160; </div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;        <span class="keywordflow">if</span> (xtmp.size()==10)</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;        {</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;            myPid[j].stiction_up_val = xtmp.get(8).asFloat64();</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;            myPid[j].stiction_down_val = xtmp.get(9).asFloat64();</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;        }</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;    }</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;}</div>
<div class="line"><a name="l01097"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ae15538b8cb1694bc6178f780da8db370"> 1097</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ae15538b8cb1694bc6178f780da8db370">CanBusMotionControlParameters::parsePidsGroup_NewFormat</a>(Bottle&amp; pidsGroup, Pid myPid[])</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;{</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    <span class="keywordtype">int</span> j=0;</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;    Bottle xtmp;</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160; </div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="CanBusMotionControl_8cpp.html#ad43675dac090e874d6abe01dabd4f931">validate</a>(pidsGroup, xtmp, <span class="stringliteral">&quot;kp&quot;</span>, <span class="stringliteral">&quot;Pid kp parameter&quot;</span>, <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aebac840500409b6ab4dc4d7e44e4e216">_njoints</a>+1))           <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="keywordflow">for</span> (j=0; j&lt;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aebac840500409b6ab4dc4d7e44e4e216">_njoints</a>; j++) myPid[j].kp = xtmp.get(j+1).asFloat64();</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="CanBusMotionControl_8cpp.html#ad43675dac090e874d6abe01dabd4f931">validate</a>(pidsGroup, xtmp, <span class="stringliteral">&quot;kd&quot;</span>, <span class="stringliteral">&quot;Pid kd parameter&quot;</span>, <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aebac840500409b6ab4dc4d7e44e4e216">_njoints</a>+1))           <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="keywordflow">for</span> (j=0; j&lt;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aebac840500409b6ab4dc4d7e44e4e216">_njoints</a>; j++) myPid[j].kd = xtmp.get(j+1).asFloat64();</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="CanBusMotionControl_8cpp.html#ad43675dac090e874d6abe01dabd4f931">validate</a>(pidsGroup, xtmp, <span class="stringliteral">&quot;ki&quot;</span>, <span class="stringliteral">&quot;Pid kp parameter&quot;</span>, <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aebac840500409b6ab4dc4d7e44e4e216">_njoints</a>+1))           <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="keywordflow">for</span> (j=0; j&lt;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aebac840500409b6ab4dc4d7e44e4e216">_njoints</a>; j++) myPid[j].ki = xtmp.get(j+1).asFloat64();</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="CanBusMotionControl_8cpp.html#ad43675dac090e874d6abe01dabd4f931">validate</a>(pidsGroup, xtmp, <span class="stringliteral">&quot;maxInt&quot;</span>, <span class="stringliteral">&quot;Pid maxInt parameter&quot;</span>, <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aebac840500409b6ab4dc4d7e44e4e216">_njoints</a>+1))   <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="keywordflow">for</span> (j=0; j&lt;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aebac840500409b6ab4dc4d7e44e4e216">_njoints</a>; j++) myPid[j].max_int = xtmp.get(j+1).asFloat64();</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="CanBusMotionControl_8cpp.html#ad43675dac090e874d6abe01dabd4f931">validate</a>(pidsGroup, xtmp, <span class="stringliteral">&quot;maxOutput&quot;</span>, <span class="stringliteral">&quot;Pid maxOutput parameter&quot;</span>, <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aebac840500409b6ab4dc4d7e44e4e216">_njoints</a>+1))   <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="keywordflow">for</span> (j=0; j&lt;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aebac840500409b6ab4dc4d7e44e4e216">_njoints</a>; j++) myPid[j].max_output = xtmp.get(j+1).asFloat64();</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="CanBusMotionControl_8cpp.html#ad43675dac090e874d6abe01dabd4f931">validate</a>(pidsGroup, xtmp, <span class="stringliteral">&quot;shift&quot;</span>, <span class="stringliteral">&quot;Pid shift parameter&quot;</span>, <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aebac840500409b6ab4dc4d7e44e4e216">_njoints</a>+1))     <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="keywordflow">for</span> (j=0; j&lt;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aebac840500409b6ab4dc4d7e44e4e216">_njoints</a>; j++) myPid[j].scale = xtmp.get(j+1).asFloat64();</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="CanBusMotionControl_8cpp.html#ad43675dac090e874d6abe01dabd4f931">validate</a>(pidsGroup, xtmp, <span class="stringliteral">&quot;ko&quot;</span>, <span class="stringliteral">&quot;Pid ko parameter&quot;</span>, <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aebac840500409b6ab4dc4d7e44e4e216">_njoints</a>+1))           <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="keywordflow">for</span> (j=0; j&lt;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aebac840500409b6ab4dc4d7e44e4e216">_njoints</a>; j++) myPid[j].<a class="code" href="sine_8m.html#aaaa5252a687ef2d373ec966bbbf630ff">offset</a> = xtmp.get(j+1).asFloat64();</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="CanBusMotionControl_8cpp.html#ad43675dac090e874d6abe01dabd4f931">validate</a>(pidsGroup, xtmp, <span class="stringliteral">&quot;stictionUp&quot;</span>, <span class="stringliteral">&quot;Pid stictionUp&quot;</span>, <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aebac840500409b6ab4dc4d7e44e4e216">_njoints</a>+1))     <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="keywordflow">for</span> (j=0; j&lt;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aebac840500409b6ab4dc4d7e44e4e216">_njoints</a>; j++) myPid[j].stiction_up_val = xtmp.get(j+1).asFloat64();</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="CanBusMotionControl_8cpp.html#ad43675dac090e874d6abe01dabd4f931">validate</a>(pidsGroup, xtmp, <span class="stringliteral">&quot;stictionDwn&quot;</span>, <span class="stringliteral">&quot;Pid stictionDwn&quot;</span>, <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aebac840500409b6ab4dc4d7e44e4e216">_njoints</a>+1))   <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="keywordflow">for</span> (j=0; j&lt;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aebac840500409b6ab4dc4d7e44e4e216">_njoints</a>; j++) myPid[j].stiction_down_val = xtmp.get(j+1).asFloat64();</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160; </div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;    <span class="comment">//optional kff</span></div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    xtmp = pidsGroup.findGroup(<span class="stringliteral">&quot;kff&quot;</span>);         </div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    <span class="keywordflow">if</span> (!xtmp.isNull())</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;    {</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;        <span class="keywordflow">for</span> (j=0; j&lt;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aebac840500409b6ab4dc4d7e44e4e216">_njoints</a>; j++) myPid[j].kff = xtmp.get(j+1).asFloat64();</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;    }</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;    {</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;         <span class="keywordflow">for</span> (j=0; j&lt;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aebac840500409b6ab4dc4d7e44e4e216">_njoints</a>; j++) myPid[j].kff = 0;</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;    }</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160; </div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;}</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160; </div>
<div class="line"><a name="l01126"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a43d552134ec5567386d7c8b9f4798417"> 1126</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a43d552134ec5567386d7c8b9f4798417">CanBusMotionControlParameters::parseImpedanceGroup_NewFormat</a>(Bottle&amp; pidsGroup, <a class="code" href="structyarp_1_1dev_1_1CanBusMotionControlParameters_1_1ImpedanceParameters.html">ImpedanceParameters</a> vals[])</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;{</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;    <span class="keywordtype">int</span> j=0;</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;    Bottle xtmp;</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="CanBusMotionControl_8cpp.html#ad43675dac090e874d6abe01dabd4f931">validate</a>(pidsGroup, xtmp, <span class="stringliteral">&quot;stiffness&quot;</span>, <span class="stringliteral">&quot;Pid stiffness parameter&quot;</span>, <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aebac840500409b6ab4dc4d7e44e4e216">_njoints</a>+1))       <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="keywordflow">for</span> (j=0; j&lt;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aebac840500409b6ab4dc4d7e44e4e216">_njoints</a>; j++) vals[j].stiffness = xtmp.get(j+1).asFloat64();</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="CanBusMotionControl_8cpp.html#ad43675dac090e874d6abe01dabd4f931">validate</a>(pidsGroup, xtmp, <span class="stringliteral">&quot;damping&quot;</span>, <span class="stringliteral">&quot;Pid damping parameter&quot;</span>, <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aebac840500409b6ab4dc4d7e44e4e216">_njoints</a>+1))           <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="keywordflow">for</span> (j=0; j&lt;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aebac840500409b6ab4dc4d7e44e4e216">_njoints</a>; j++) vals[j].damping   = xtmp.get(j+1).asFloat64();</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;}</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160; </div>
<div class="line"><a name="l01135"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#af30091c7c9e4fef4454c0a072353071c"> 1135</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#af30091c7c9e4fef4454c0a072353071c">CanBusMotionControlParameters::parseDebugGroup_NewFormat</a>(Bottle&amp; pidsGroup, <a class="code" href="structyarp_1_1dev_1_1CanBusMotionControlParameters_1_1DebugParameters.html">DebugParameters</a> vals[])</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;{</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    <span class="keywordtype">int</span> j=0;</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;    Bottle xtmp;</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160; </div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="CanBusMotionControl_8cpp.html#ad43675dac090e874d6abe01dabd4f931">validate</a>(pidsGroup, xtmp, <span class="stringliteral">&quot;debug0&quot;</span>, <span class="stringliteral">&quot;debug0&quot;</span>, <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aebac840500409b6ab4dc4d7e44e4e216">_njoints</a>+1))       <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="keywordflow">for</span> (j=0; j&lt;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aebac840500409b6ab4dc4d7e44e4e216">_njoints</a>; j++) vals[j].<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>[0] = xtmp.get(j+1).asFloat64();</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="CanBusMotionControl_8cpp.html#ad43675dac090e874d6abe01dabd4f931">validate</a>(pidsGroup, xtmp, <span class="stringliteral">&quot;debug1&quot;</span>, <span class="stringliteral">&quot;debug1&quot;</span>, <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aebac840500409b6ab4dc4d7e44e4e216">_njoints</a>+1))       <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="keywordflow">for</span> (j=0; j&lt;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aebac840500409b6ab4dc4d7e44e4e216">_njoints</a>; j++) vals[j].<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>[1] = xtmp.get(j+1).asFloat64();</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="CanBusMotionControl_8cpp.html#ad43675dac090e874d6abe01dabd4f931">validate</a>(pidsGroup, xtmp, <span class="stringliteral">&quot;debug2&quot;</span>, <span class="stringliteral">&quot;debug2&quot;</span>, <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aebac840500409b6ab4dc4d7e44e4e216">_njoints</a>+1))       <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="keywordflow">for</span> (j=0; j&lt;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aebac840500409b6ab4dc4d7e44e4e216">_njoints</a>; j++) vals[j].<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>[2] = xtmp.get(j+1).asFloat64();</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="CanBusMotionControl_8cpp.html#ad43675dac090e874d6abe01dabd4f931">validate</a>(pidsGroup, xtmp, <span class="stringliteral">&quot;debug3&quot;</span>, <span class="stringliteral">&quot;debug3&quot;</span>, <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aebac840500409b6ab4dc4d7e44e4e216">_njoints</a>+1))       <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="keywordflow">for</span> (j=0; j&lt;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aebac840500409b6ab4dc4d7e44e4e216">_njoints</a>; j++) vals[j].<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>[3] = xtmp.get(j+1).asFloat64();</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="CanBusMotionControl_8cpp.html#ad43675dac090e874d6abe01dabd4f931">validate</a>(pidsGroup, xtmp, <span class="stringliteral">&quot;debug4&quot;</span>, <span class="stringliteral">&quot;debug4&quot;</span>, <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aebac840500409b6ab4dc4d7e44e4e216">_njoints</a>+1))       <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="keywordflow">for</span> (j=0; j&lt;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aebac840500409b6ab4dc4d7e44e4e216">_njoints</a>; j++) vals[j].<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>[4] = xtmp.get(j+1).asFloat64();</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="CanBusMotionControl_8cpp.html#ad43675dac090e874d6abe01dabd4f931">validate</a>(pidsGroup, xtmp, <span class="stringliteral">&quot;debug5&quot;</span>, <span class="stringliteral">&quot;debug5&quot;</span>, <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aebac840500409b6ab4dc4d7e44e4e216">_njoints</a>+1))       <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="keywordflow">for</span> (j=0; j&lt;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aebac840500409b6ab4dc4d7e44e4e216">_njoints</a>; j++) vals[j].<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>[5] = xtmp.get(j+1).asFloat64();</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="CanBusMotionControl_8cpp.html#ad43675dac090e874d6abe01dabd4f931">validate</a>(pidsGroup, xtmp, <span class="stringliteral">&quot;debug6&quot;</span>, <span class="stringliteral">&quot;debug6&quot;</span>, <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aebac840500409b6ab4dc4d7e44e4e216">_njoints</a>+1))       <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="keywordflow">for</span> (j=0; j&lt;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aebac840500409b6ab4dc4d7e44e4e216">_njoints</a>; j++) vals[j].<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>[6] = xtmp.get(j+1).asFloat64();</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="CanBusMotionControl_8cpp.html#ad43675dac090e874d6abe01dabd4f931">validate</a>(pidsGroup, xtmp, <span class="stringliteral">&quot;debug7&quot;</span>, <span class="stringliteral">&quot;debug7&quot;</span>, <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aebac840500409b6ab4dc4d7e44e4e216">_njoints</a>+1))       <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="keywordflow">for</span> (j=0; j&lt;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aebac840500409b6ab4dc4d7e44e4e216">_njoints</a>; j++) vals[j].<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>[7] = xtmp.get(j+1).asFloat64();</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160; </div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;}</div>
<div class="line"><a name="l01151"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a8de67083105cb8150ab9cb447d55221c"> 1151</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a8de67083105cb8150ab9cb447d55221c">CanBusMotionControlParameters::fromConfig</a>(yarp::os::Searchable &amp;<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>)</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;{</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>.check(<span class="stringliteral">&quot;GENERAL&quot;</span>,<span class="stringliteral">&quot;section for general motor control parameters&quot;</span>)) {</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;        yError(<span class="stringliteral">&quot;Cannot understand configuration parameters\n&quot;</span>);</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;    }</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160; </div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;    std::string dbg_string = <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>.toString().c_str();</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;    <span class="keywordtype">int</span> nj = <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>.findGroup(<span class="stringliteral">&quot;GENERAL&quot;</span>).check(<span class="stringliteral">&quot;Joints&quot;</span>,Value(1),</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;        <span class="stringliteral">&quot;Number of degrees of freedom&quot;</span>).asInt32();</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a045a065763e995ff69770b99462fe1f9">alloc</a>(nj);</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160; </div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;    <span class="comment">// Check useRawEncoderData = do not use calibration data!</span></div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;    <span class="keywordtype">bool</span> useRawJointEncoderData = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;    <span class="keywordtype">bool</span> useRawMotorEncoderData = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;    Value use_jnt_raw = <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>.findGroup(<span class="stringliteral">&quot;GENERAL&quot;</span>).find(<span class="stringliteral">&quot;useRawEncoderData&quot;</span>);</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;    Value use_mot_raw = <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>.findGroup(<span class="stringliteral">&quot;GENERAL&quot;</span>).find(<span class="stringliteral">&quot;useRawMotorEncoderData&quot;</span>);</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160; </div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;    <span class="keywordflow">if</span>(use_jnt_raw.isNull())</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    {</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;        useRawJointEncoderData = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;    }</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;    {</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;        <span class="keywordflow">if</span>(!use_jnt_raw.isBool())</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;        {</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;            yError(<span class="stringliteral">&quot;useRawEncoderData bool param is different from accepted values (true / false). Assuming false\n&quot;</span>);</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;            useRawJointEncoderData = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;        }</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;        {</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;            useRawJointEncoderData = use_jnt_raw.asBool();</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;            <span class="keywordflow">if</span>(useRawJointEncoderData)</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;            {</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;                yWarning(<span class="stringliteral">&quot;canBusMotionControl using raw data from encoders! Be careful  See &#39;useRawEncoderData&#39; param in config file \n&quot;</span>);</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;                yWarning(<span class="stringliteral">&quot;DO NOT USE OR CALIBRATE THE ROBOT IN THIS CONFIGURATION! \n&quot;</span>);</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;                yWarning(<span class="stringliteral">&quot;CHECK IF THE FAULT BUTTON IS PRESSED and press ENTER to continue \n&quot;</span>);</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;                getchar(); </div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;            }</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;        }</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;    }</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160; </div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;    <span class="keywordflow">if</span>(use_mot_raw.isNull())</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;    {</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;        useRawMotorEncoderData = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;    }</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;    {</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;        <span class="keywordflow">if</span>(!use_mot_raw.isBool())</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;        {</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;            yError(<span class="stringliteral">&quot;useRawEncoderData bool param is different from accepted values (true / false). Assuming false\n&quot;</span>);</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;            useRawMotorEncoderData = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;        }</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;        {</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;            useRawMotorEncoderData = use_mot_raw.asBool();</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;            <span class="keywordflow">if</span>(useRawMotorEncoderData)</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;            {</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;                yWarning(<span class="stringliteral">&quot;canBusMotionControl using raw data from  motor encoders&quot;</span>);</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;            }</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;        }</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;    }</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;    <span class="comment">// Check useRawEncoderData = do not use calibration data!</span></div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;    Value use_limitedPWM = <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>.findGroup(<span class="stringliteral">&quot;GENERAL&quot;</span>).find(<span class="stringliteral">&quot;useLimitedPWM&quot;</span>);</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;    <span class="keywordflow">if</span>(use_limitedPWM.isNull())</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;    {</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ac575b87f412507a61e1c657cebcdb8c1">_pwmIsLimited</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    }</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;    {</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;        <span class="keywordflow">if</span>(!use_limitedPWM.isBool())</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;        {</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;            <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ac575b87f412507a61e1c657cebcdb8c1">_pwmIsLimited</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;        }</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;        {</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;            <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ac575b87f412507a61e1c657cebcdb8c1">_pwmIsLimited</a> = use_limitedPWM.asBool();</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;        }</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;    }</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160; </div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;    Bottle&amp; canGroup = <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>.findGroup(<span class="stringliteral">&quot;CAN&quot;</span>);</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160; </div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#adc791be96bed6b9ae3feaf08b8d5e7d6">_networkName</a>=canGroup.find(<span class="stringliteral">&quot;NetworkId&quot;</span>).asString();</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160; </div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;    <span class="keywordflow">if</span> (canGroup.check(<span class="stringliteral">&quot;CanForcedDeviceNum&quot;</span>))</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;    {</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ad8e4f717273d101d2b028d29d13b40e1">_networkN</a>=canGroup.find(<span class="stringliteral">&quot;CanForcedDeviceNum&quot;</span>).asInt32();</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;    }</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ad8e4f717273d101d2b028d29d13b40e1">_networkN</a>=canGroup.check(<span class="stringliteral">&quot;CanDeviceNum&quot;</span>,Value(-1), <span class="stringliteral">&quot;numeric identifier of device&quot;</span>).asInt32();</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160; </div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;    <span class="comment">//    yDebug&lt;&lt;can.toString();</span></div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ad8e4f717273d101d2b028d29d13b40e1">_networkN</a>&lt;0)</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;    {</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;        yError(<span class="stringliteral">&quot;can network id not valid, skipping device\n&quot;</span>);</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;    }</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160; </div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a7680212b727dbc1cfa1da8c924106253">_my_address</a>=canGroup.check(<span class="stringliteral">&quot;CanMyAddress&quot;</span>,Value(0),</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;                                 <span class="stringliteral">&quot;numeric identifier of my address&quot;</span>).asInt32();</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160; </div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a2cd04f97df73fa11ebfb39e896e3b946">_polling_interval</a>=canGroup.check(<span class="stringliteral">&quot;CanPollingInterval&quot;</span>,Value(20),</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;                                        <span class="stringliteral">&quot;polling period&quot;</span>).asInt32();</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;    </div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a1984e4bdfecb8ca9fa80cd8332c1a511">_timeout</a>=canGroup.check(<span class="stringliteral">&quot;CanTimeout&quot;</span>,Value(20),<span class="stringliteral">&quot;timeout period&quot;</span>).asInt32();</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160; </div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aab161d0e2e9f1890c69b13338d62289a">_txTimeout</a>=canGroup.check(<span class="stringliteral">&quot;CanTxTimeout&quot;</span>, Value(20), <span class="stringliteral">&quot;tx timeout&quot;</span>).asInt32();</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a7d1d3ff6226b4e8aaea60e1f9c38b38f">_rxTimeout</a>=canGroup.check(<span class="stringliteral">&quot;CanRxTimeout&quot;</span>, Value(20), <span class="stringliteral">&quot;rx timeout&quot;</span>).asInt32();</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160; </div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;    <span class="comment">// default values for CanTxQueueSize/CanRxQueueSize should be the </span></div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;    <span class="comment">// maximum, difficult to pick a correct value, let the driver </span></div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;    <span class="comment">// decide on this</span></div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;    <span class="keywordflow">if</span> (canGroup.check(<span class="stringliteral">&quot;CanTxQueueSize&quot;</span>))</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#afb65c740ca4adb2c69fb44cc72252343">_txQueueSize</a>=canGroup.find(<span class="stringliteral">&quot;CanTxQueueSize&quot;</span>).asInt32();</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#afb65c740ca4adb2c69fb44cc72252343">_txQueueSize</a>=-1;</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160; </div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;    <span class="keywordflow">if</span> (canGroup.check(<span class="stringliteral">&quot;CanRxQueueSize&quot;</span>))</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a95c6b5f6ccb42aee8e1bdcb834de357b">_rxQueueSize</a>=canGroup.find(<span class="stringliteral">&quot;CanRxQueueSize&quot;</span>).asInt32();</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a95c6b5f6ccb42aee8e1bdcb834de357b">_rxQueueSize</a>=-1;</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160; </div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;    Bottle &amp;canAddresses = canGroup.findGroup(<span class="stringliteral">&quot;CanAddresses&quot;</span>,</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;                                         <span class="stringliteral">&quot;a list of numeric identifiers&quot;</span>);</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;    <span class="keywordflow">if</span> (canAddresses.isNull())</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;    {</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;        yError(<span class="stringliteral">&quot;CanAddresses group not found in config file\n&quot;</span>);</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;    }</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;    <span class="keywordflow">for</span> (i = 1; i &lt; canAddresses.size(); i++) {</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a7861dd017f448ebf6659e80fa6c7e911">_destinations</a>[i-1] = (<span class="keywordtype">unsigned</span> char)(canAddresses.get(i).asInt32());</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;    }</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160; </div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;    Bottle&amp; general = <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>.findGroup(<span class="stringliteral">&quot;GENERAL&quot;</span>);</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160; </div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;    Bottle xtmp;</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="CanBusMotionControl_8cpp.html#ad43675dac090e874d6abe01dabd4f931">validate</a>(general, xtmp, <span class="stringliteral">&quot;AxisMap&quot;</span>, <span class="stringliteral">&quot;a list of reordered indices for the axes&quot;</span>, nj+1))</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;       </div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;    <span class="keywordflow">for</span> (i = 1; i &lt; xtmp.size(); i++)</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aa843f78c2438fe1eece0c5aa7b1d5990">_axisMap</a>[i-1] = xtmp.get(i).asInt32();</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;    </div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="CanBusMotionControl_8cpp.html#ad43675dac090e874d6abe01dabd4f931">validate</a>(general, xtmp, <span class="stringliteral">&quot;AxisName&quot;</span>, <span class="stringliteral">&quot;a list of strings representing the axes names&quot;</span>, nj + 1))</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;    { </div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;        <span class="comment">//return false; //this parameter is not yet mandatory</span></div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;    }</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;    <span class="comment">//beware: axis name has to be remapped here because they are not set using the toHw() helper function  </span></div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;    <span class="keywordflow">for</span> (i = 1; i &lt; xtmp.size(); i++)</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a1a5b8bdbae78cb12c80f48f18d0f435a">_axisName</a>[<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aa843f78c2438fe1eece0c5aa7b1d5990">_axisMap</a>[i-1]] = xtmp.get(i).asString();</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160; </div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="CanBusMotionControl_8cpp.html#ad43675dac090e874d6abe01dabd4f931">validate</a>(general, xtmp, <span class="stringliteral">&quot;AxisType&quot;</span>, <span class="stringliteral">&quot;a list of strings representing the axes types (revolute/prismatic)&quot;</span>, nj + 1))</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;    {</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;        <span class="comment">//return false; //this parameter is not yet mandatory</span></div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;    }</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;    <span class="comment">//beware: axis name has to be remapped here because they are not set using the toHw() helper function  </span></div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;    <span class="keywordflow">for</span> (i = 1; i &lt; xtmp.size(); i++)</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a815a8514bf823de1e6ca9e99075280b8">_axisType</a>[<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aa843f78c2438fe1eece0c5aa7b1d5990">_axisMap</a>[i - 1]] = xtmp.get(i).asString();</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160; </div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="CanBusMotionControl_8cpp.html#ad43675dac090e874d6abe01dabd4f931">validate</a>(general, xtmp, <span class="stringliteral">&quot;Encoder&quot;</span>, <span class="stringliteral">&quot;a list of scales for the joint encoders&quot;</span>, nj+1))</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160; </div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;    <span class="keywordtype">int</span> test = xtmp.size();</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;    <span class="keywordflow">for</span> (i = 1; i &lt; xtmp.size(); i++) </div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aa0ec68ecd5419da2cd5dd96bf4c637cb">_angleToEncoder</a>[i-1] = xtmp.get(i).asFloat64();</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160; </div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="CanBusMotionControl_8cpp.html#a0ab4e4dd65b3c5c0fa0e1da33335cf31">validate_optional</a>(general, xtmp, <span class="stringliteral">&quot;Rotor&quot;</span>, <span class="stringliteral">&quot;a list of scales for the rotor encoders&quot;</span>, nj+1))</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;        {</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;            yWarning(<span class="stringliteral">&quot;Rotor: Using default value = 1\n&quot;</span>);</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;            <span class="keywordflow">for</span>(i=1;i&lt;nj+1; i++) </div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;                <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a559591b54d78639691579558ae701700">_rotToEncoder</a>[i-1] = 1.0;</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;        }</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;        {</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;            <span class="keywordtype">int</span> test = xtmp.size();</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;            <span class="keywordflow">for</span> (i = 1; i &lt; xtmp.size(); i++) </div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;                <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a559591b54d78639691579558ae701700">_rotToEncoder</a>[i-1] = xtmp.get(i).asFloat64();</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;        }</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160; </div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="CanBusMotionControl_8cpp.html#ad43675dac090e874d6abe01dabd4f931">validate</a>(general, xtmp, <span class="stringliteral">&quot;fullscalePWM&quot;</span>, <span class="stringliteral">&quot; list of scales for the fullscalePWM conversion factor&quot;</span>, nj + 1))</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;    {</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;        yError(<span class="stringliteral">&quot;fullscalePWM param not found in config file. Please update robot configuration files or contact https://github.com/robotology/icub-support&quot;</span>);</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;    }</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;    <span class="keywordflow">for</span> (i = 1; i &lt; xtmp.size(); i++)</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a612a2893fcecf9f9ba6cb3dc6d369c9d">_dutycycleToPwm</a>[i - 1] = xtmp.get(i).asFloat64()/100.0;</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160; </div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="CanBusMotionControl_8cpp.html#ad43675dac090e874d6abe01dabd4f931">validate</a>(general, xtmp, <span class="stringliteral">&quot;ampsToSensor&quot;</span>, <span class="stringliteral">&quot;a list of scales for the ampsToSensor conversion factor&quot;</span>, nj + 1))</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;    {</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;        yError(<span class="stringliteral">&quot;ampsToSensor param not found in config file. Please update robot configuration files or contact https://github.com/robotology/icub-support&quot;</span>);</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;    }</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;    <span class="keywordflow">for</span> (i = 1; i &lt; xtmp.size(); i++)</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a55272902bf1e3398f7b476ce3ca6c574">_ampsToSensor</a>[i - 1] = xtmp.get(i).asFloat64();</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160; </div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="CanBusMotionControl_8cpp.html#ad43675dac090e874d6abe01dabd4f931">validate</a>(general, xtmp, <span class="stringliteral">&quot;Zeros&quot;</span>,<span class="stringliteral">&quot;a list of offsets for the zero point&quot;</span>, nj+1))</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160; </div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;    <span class="keywordflow">for</span> (i = 1; i &lt; xtmp.size(); i++) </div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a56dceb3467a6f1061f272d1b6dbd9b66">_zeros</a>[i-1] = xtmp.get(i).asFloat64();</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160; </div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;    <span class="keywordflow">if</span> (useRawJointEncoderData)</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;    {</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;        <span class="keywordflow">for</span>(i=1;i&lt;nj+1; i++)</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;        {</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aa0ec68ecd5419da2cd5dd96bf4c637cb">_angleToEncoder</a>[i-1] &gt; 0)</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;                <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aa0ec68ecd5419da2cd5dd96bf4c637cb">_angleToEncoder</a>[i-1] = 1;</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;                <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aa0ec68ecd5419da2cd5dd96bf4c637cb">_angleToEncoder</a>[i-1] = -1;</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160; </div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;            <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a56dceb3467a6f1061f272d1b6dbd9b66">_zeros</a>[i-1] = 0;</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;        }</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;    }</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160; </div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;    <span class="keywordflow">if</span> (useRawMotorEncoderData)</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;    {</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;        <span class="keywordflow">for</span>(i=1;i&lt;nj+1; i++)</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;        {</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a559591b54d78639691579558ae701700">_rotToEncoder</a>[i-1] &gt; 0)</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;                <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a559591b54d78639691579558ae701700">_rotToEncoder</a>[i-1] = 1;</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;                <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a559591b54d78639691579558ae701700">_rotToEncoder</a>[i-1] = -1;</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;        }</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;    }</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160; </div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="CanBusMotionControl_8cpp.html#a0ab4e4dd65b3c5c0fa0e1da33335cf31">validate_optional</a>(general, xtmp, <span class="stringliteral">&quot;TorqueId&quot;</span>,<span class="stringliteral">&quot;a list of associated joint torque sensor ids&quot;</span>, nj+1))</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;    {</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;        yWarning(<span class="stringliteral">&quot;TorqueId: Using default value = 0 (disabled)\n&quot;</span>);</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;        <span class="keywordflow">for</span>(i=1;i&lt;nj+1; i++) </div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;            <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a4fe8bb48d8ea41df0e4df2904c7c62d0">_torqueSensorId</a>[i-1] = 0;   </div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;    }</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;    {</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;        <span class="keywordflow">for</span> (i = 1; i &lt; xtmp.size(); i++) <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a4fe8bb48d8ea41df0e4df2904c7c62d0">_torqueSensorId</a>[i-1] = xtmp.get(i).asInt32();</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;    }</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;    </div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="CanBusMotionControl_8cpp.html#a0ab4e4dd65b3c5c0fa0e1da33335cf31">validate_optional</a>(general, xtmp, <span class="stringliteral">&quot;TorqueChan&quot;</span>,<span class="stringliteral">&quot;a list of associated joint torque sensor channels&quot;</span>, nj+1))</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;    {</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;        yWarning(<span class="stringliteral">&quot;TorqueChan: Using default value = 0 (disabled)\n&quot;</span>);</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;        <span class="keywordflow">for</span>(i=1;i&lt;nj+1; i++) </div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;            <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ac838d9a2d9dab425a1dcc24816c57109">_torqueSensorChan</a>[i-1] = 0;   </div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;    }</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;    {</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;        <span class="keywordflow">for</span> (i = 1; i &lt; xtmp.size(); i++) <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ac838d9a2d9dab425a1dcc24816c57109">_torqueSensorChan</a>[i-1] = xtmp.get(i).asInt32();</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;    }</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160; </div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="CanBusMotionControl_8cpp.html#ad43675dac090e874d6abe01dabd4f931">validate</a>(general, xtmp, <span class="stringliteral">&quot;TorqueMax&quot;</span>,<span class="stringliteral">&quot;full scale value for a joint torque sensor&quot;</span>, nj+1))</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;    {</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;    }</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;    {</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;        <span class="keywordflow">for</span> (i = 1; i &lt; xtmp.size(); i++) </div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;        {</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;                <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a0508d5fd826d46d3ddc3d6864aea49e7">_maxTorque</a>[i-1] = xtmp.get(i).asInt32();</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;                <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#acd767cc2d7760615d4dffca1bce4a07c">_newtonsToSensor</a>[i-1] = double(0x8000)/double(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a0508d5fd826d46d3ddc3d6864aea49e7">_maxTorque</a>[i-1]);</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;        }</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;    }</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160; </div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;    <span class="keywordtype">int</span> j=0;</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;    {</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;        Bottle posPidsGroup;</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;        posPidsGroup=<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>.findGroup(<span class="stringliteral">&quot;POS_PIDS&quot;</span>, <span class="stringliteral">&quot;Position Pid parameters new format&quot;</span>);</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;        <span class="keywordflow">if</span> (posPidsGroup.isNull() == <span class="keyword">false</span>)</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;        {</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;           yInfo(<span class="stringliteral">&quot;Position Pids section found, new format\n&quot;</span>);</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;           <span class="keywordflow">if</span> (!<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ae15538b8cb1694bc6178f780da8db370">parsePidsGroup_NewFormat</a>(posPidsGroup, <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a087665b704539d68433df0672dc665b5">_pids</a>))</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;           {</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;               yError() &lt;&lt; <span class="stringliteral">&quot;Position Pids section: error detected in parameters syntax&quot;</span>;</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;               <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;           }</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;           <span class="keywordflow">else</span></div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;           {</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;               yInfo(<span class="stringliteral">&quot;Position Pids successfully loaded\n&quot;</span>);</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;           }</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;        }</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;        {</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;            Bottle posPidsGroup2=<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>.findGroup(<span class="stringliteral">&quot;PIDS&quot;</span>, <span class="stringliteral">&quot;Position Pid parameters old format&quot;</span>);</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;            <span class="keywordflow">if</span> (posPidsGroup2.isNull()==<span class="keyword">false</span>)</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;            {</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;                yWarning(<span class="stringliteral">&quot;Position Pids section found, old format\n&quot;</span>);</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;                <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a781b20f8e50e734d75d1a05ca766cca5">parsePosPidsGroup_OldFormat</a> (posPidsGroup2, nj, <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a087665b704539d68433df0672dc665b5">_pids</a>);</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;            }</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;            {   </div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;                yError () &lt;&lt; <span class="stringliteral">&quot;no PIDS group found in config file, returning&quot;</span>;</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;            }</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;        }</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;    }</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;    </div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;    {</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;        Bottle trqPidsGroup;</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;        Bottle trqPidsOldGroup;</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;        Bottle trqControlGroup;</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;        trqPidsGroup    = <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>.findGroup(<span class="stringliteral">&quot;TRQ_PIDS&quot;</span>,       <span class="stringliteral">&quot;Torque Pid parameters new format&quot;</span>);</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;        trqPidsOldGroup = <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>.findGroup(<span class="stringliteral">&quot;TORQUE_PIDS&quot;</span>,    <span class="stringliteral">&quot;Torque Pid parameters old format&quot;</span>);</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;        trqControlGroup = <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>.findGroup(<span class="stringliteral">&quot;TORQUE_CONTROL&quot;</span>, <span class="stringliteral">&quot;Torque Control parameters&quot;</span>);</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160; </div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;        <span class="keywordflow">if</span> (trqPidsGroup.isNull()==<span class="keyword">false</span>)</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;        {</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;           yInfo(<span class="stringliteral">&quot;TRQ_PIDS: Torque Pids section found, new format\n&quot;</span>);</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;           <span class="keywordflow">if</span> (!<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ae15538b8cb1694bc6178f780da8db370">parsePidsGroup_NewFormat</a> (trqPidsGroup, <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a7bce21eb343ce9f04ee52f2da6b6ad8a">_tpids</a>))</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;           {</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;               yError () &lt;&lt; <span class="stringliteral">&quot;TRQ_PIDS: error detected in parameters syntax&quot;</span>;</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;               <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;           }</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;           <span class="keywordflow">else</span></div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;           {</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;                xtmp = trqPidsGroup.findGroup(<span class="stringliteral">&quot;kbemf&quot;</span>); </div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;                {<span class="keywordflow">for</span> (j=0;j&lt;nj;j++) this-&gt;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ac8301c209035458e40349621f325ac96">_bemfGain</a>[j] = 0; }</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160; </div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;                xtmp = trqPidsGroup.findGroup(<span class="stringliteral">&quot;ktau&quot;</span>); </div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;                {<span class="keywordflow">for</span> (j=0;j&lt;nj;j++) this-&gt;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a539d4d49d1bdfd092d66d5647a4e05de">_ktau</a>[j] = 1; }</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;                </div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;                xtmp = trqPidsGroup.findGroup(<span class="stringliteral">&quot;filterType&quot;</span>); </div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;                {<span class="keywordflow">for</span> (j=0;j&lt;nj;j++) this-&gt;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#acde818af785eb36718b8e2e5ba5c59fa">_filterType</a>[j] = 3; }</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;                </div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;                xtmp = trqPidsGroup.findGroup(<span class="stringliteral">&quot;controlUnits&quot;</span>); </div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;                this-&gt;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#adbdebc6cbe3bf31f7efeb4e0de0755c2">_torqueControlUnits</a> = <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a437871bdfe1d8fefa2a57c4ef0744260a1a41a461e18396fe65451fb53b83ccb2">MACHINE_UNITS</a>;</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;                </div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;                <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aef9551940add65103085bd92a10a5ab7">_torqueControlEnabled</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;           }</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;        }</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (trqPidsOldGroup.isNull()==<span class="keyword">false</span>)</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;        {</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;            yWarning (<span class="stringliteral">&quot;TORQUE_PIDS: Torque Pids section found, old format\n&quot;</span>);</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a6aec78de2cb23c7b8cb964c2244aeba1">parseTrqPidsGroup_OldFormat</a> (trqPidsOldGroup, nj, <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a7bce21eb343ce9f04ee52f2da6b6ad8a">_tpids</a>))</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;            {</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;                yError () &lt;&lt; <span class="stringliteral">&quot;TORQUE_PIDS: error detected in parameters syntax&quot;</span>;</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;            }</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;            {</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;                xtmp = trqPidsGroup.findGroup(<span class="stringliteral">&quot;kbemf&quot;</span>); </div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;                {<span class="keywordflow">for</span> (j=0;j&lt;nj;j++) this-&gt;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ac8301c209035458e40349621f325ac96">_bemfGain</a>[j] = 0; }</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160; </div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;                xtmp = trqPidsGroup.findGroup(<span class="stringliteral">&quot;ktau&quot;</span>); </div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;                {<span class="keywordflow">for</span> (j=0;j&lt;nj;j++) this-&gt;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a539d4d49d1bdfd092d66d5647a4e05de">_ktau</a>[j] = 1; }</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;            </div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;                xtmp = trqPidsGroup.findGroup(<span class="stringliteral">&quot;filterType&quot;</span>); </div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;                {<span class="keywordflow">for</span> (j=0;j&lt;nj;j++) this-&gt;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#acde818af785eb36718b8e2e5ba5c59fa">_filterType</a>[j] = 3; }</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;            </div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;                xtmp = trqPidsGroup.findGroup(<span class="stringliteral">&quot;controlUnits&quot;</span>); </div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;                this-&gt;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#adbdebc6cbe3bf31f7efeb4e0de0755c2">_torqueControlUnits</a> = <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a437871bdfe1d8fefa2a57c4ef0744260a1a41a461e18396fe65451fb53b83ccb2">MACHINE_UNITS</a>;</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;            </div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;                <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aef9551940add65103085bd92a10a5ab7">_torqueControlEnabled</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;            }</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;        }</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (trqControlGroup.isNull()==<span class="keyword">false</span>)</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;        {</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;           yInfo(<span class="stringliteral">&quot;TORQUE_CONTROL section found\n&quot;</span>);</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;           <span class="keywordflow">if</span> (!<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ae15538b8cb1694bc6178f780da8db370">parsePidsGroup_NewFormat</a> (trqControlGroup, <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a7bce21eb343ce9f04ee52f2da6b6ad8a">_tpids</a>))</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;           {</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;               yError () &lt;&lt; <span class="stringliteral">&quot;TORQUE_CONTROL: error detected in parameters syntax&quot;</span>;</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;               <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;           }</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;           <span class="keywordflow">else</span></div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;           {</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;                xtmp = trqControlGroup.findGroup(<span class="stringliteral">&quot;kbemf&quot;</span>); </div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;                <span class="keywordflow">if</span> (!xtmp.isNull())</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;                {<span class="keywordflow">for</span> (j=0;j&lt;nj;j++) this-&gt;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ac8301c209035458e40349621f325ac96">_bemfGain</a>[j] = xtmp.get(j+1).asFloat64();}</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;                {<span class="keywordflow">for</span> (j=0;j&lt;nj;j++) this-&gt;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ac8301c209035458e40349621f325ac96">_bemfGain</a>[j] = 0; yWarning (<span class="stringliteral">&quot;TORQUE_PIDS: &#39;kbemf&#39; param missing&quot;</span>);}</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160; </div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;                xtmp = trqControlGroup.findGroup(<span class="stringliteral">&quot;ktau&quot;</span>); </div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;                <span class="keywordflow">if</span> (!xtmp.isNull())</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;                {<span class="keywordflow">for</span> (j=0;j&lt;nj;j++) this-&gt;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a539d4d49d1bdfd092d66d5647a4e05de">_ktau</a>[j] = xtmp.get(j+1).asFloat64();}</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;                {<span class="keywordflow">for</span> (j=0;j&lt;nj;j++) this-&gt;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a539d4d49d1bdfd092d66d5647a4e05de">_ktau</a>[j] = 1.0; yWarning (<span class="stringliteral">&quot;TORQUE_PIDS: &#39;ktau&#39; param missing&quot;</span>);}</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;                </div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;                xtmp = trqControlGroup.findGroup(<span class="stringliteral">&quot;filterType&quot;</span>); </div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;                <span class="keywordflow">if</span> (!xtmp.isNull())</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;                {<span class="keywordflow">for</span> (j=0;j&lt;nj;j++) this-&gt;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#acde818af785eb36718b8e2e5ba5c59fa">_filterType</a>[j] = xtmp.get(j+1).asInt32();}</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;                {<span class="keywordflow">for</span> (j=0;j&lt;nj;j++) this-&gt;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#acde818af785eb36718b8e2e5ba5c59fa">_filterType</a>[j] = 3; yWarning (<span class="stringliteral">&quot;TORQUE_PIDS: &#39;filterType&#39; param missing&quot;</span>);}</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;                </div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;                xtmp = trqControlGroup.findGroup(<span class="stringliteral">&quot;controlUnits&quot;</span>); </div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;                <span class="keywordflow">if</span> (!xtmp.isNull())</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;                {    </div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;                     <span class="keywordflow">if</span>      (xtmp.toString()==std::string(<span class="stringliteral">&quot;metric_units&quot;</span>))  {this-&gt;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#adbdebc6cbe3bf31f7efeb4e0de0755c2">_torqueControlUnits</a>=<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a437871bdfe1d8fefa2a57c4ef0744260a62ff5f18df2ada5f080f9d73150c541f">METRIC_UNITS</a>;}</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;                     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (xtmp.toString()==std::string(<span class="stringliteral">&quot;machine_units&quot;</span>)) {this-&gt;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#adbdebc6cbe3bf31f7efeb4e0de0755c2">_torqueControlUnits</a>=<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a437871bdfe1d8fefa2a57c4ef0744260a1a41a461e18396fe65451fb53b83ccb2">MACHINE_UNITS</a>;}</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;                     <span class="keywordflow">else</span>    {yError() &lt;&lt; <span class="stringliteral">&quot;invalid controlUnits value&quot;</span>; <span class="keywordflow">return</span> <span class="keyword">false</span>;}</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;                }</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;                {</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;                     yError (<span class="stringliteral">&quot;TORQUE_PIDS: &#39;controlUnits&#39; param missing. Cannot continue&quot;</span>);</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;                     <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;                }</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;                </div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;                <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aef9551940add65103085bd92a10a5ab7">_torqueControlEnabled</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;           }</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;        }</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;        {   </div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;            <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aef9551940add65103085bd92a10a5ab7">_torqueControlEnabled</a>=<span class="keyword">false</span>;</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;            yWarning(<span class="stringliteral">&quot;Torque control parameters not found for part %s, skipping...\n&quot;</span>, <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#adc791be96bed6b9ae3feaf08b8d5e7d6">_networkName</a>.c_str());</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;        }</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;    }</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;    </div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;    {</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;        Bottle &amp;debugGroup=<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>.findGroup(<span class="stringliteral">&quot;DEBUG_PARAMETERS&quot;</span>,<span class="stringliteral">&quot;DEBUG parameters&quot;</span>);</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;        <span class="keywordflow">if</span> (debugGroup.isNull()==<span class="keyword">false</span>)</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;        {</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;           yDebug(<span class="stringliteral">&quot;DEBUG_PARAMETERS section found\n&quot;</span>);</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;           <span class="keywordflow">if</span> (!<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#af30091c7c9e4fef4454c0a072353071c">parseDebugGroup_NewFormat</a> (debugGroup, <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a241d53b770b1253d3d7ea3ca8e6aacd7">_debug_params</a>))</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;           {</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;               yError(<span class="stringliteral">&quot;DEBUG_PARAMETERS section: error detected in parameters syntax\n&quot;</span>);</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;               <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;           }</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;           <span class="keywordflow">else</span></div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;           {</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;               yInfo(<span class="stringliteral">&quot;DEBUG_PARAMETERS section: parameters successfully loaded\n&quot;</span>);</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;           }</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;        }</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;        {</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;           yDebug(<span class="stringliteral">&quot;DEBUG parameters section NOT found, skipping...\n&quot;</span>);</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;        }</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;    }</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160; </div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;    {</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;        Bottle &amp;impedanceGroup=<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>.findGroup(<span class="stringliteral">&quot;IMPEDANCE&quot;</span>,<span class="stringliteral">&quot;IMPEDANCE parameters&quot;</span>);</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;        <span class="keywordflow">if</span> (impedanceGroup.isNull()==<span class="keyword">false</span>)</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;        {</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;           yDebug(<span class="stringliteral">&quot;IMPEDANCE parameters section found\n&quot;</span>);</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;           <span class="keywordflow">if</span> (!<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a43d552134ec5567386d7c8b9f4798417">parseImpedanceGroup_NewFormat</a> (impedanceGroup, <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#adc5c896973556f50f5043ff66df781f7">_impedance_params</a>))</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;           {</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;               yError(<span class="stringliteral">&quot;IMPEDANCE section: error detected in parameters syntax\n&quot;</span>);</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;               <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;           }</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;           <span class="keywordflow">else</span></div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;           {</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;               yInfo(<span class="stringliteral">&quot;IMPEDANCE section: parameters successfully loaded\n&quot;</span>);</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;           }</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;        }</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;        {</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;           yDebug(<span class="stringliteral">&quot;IMPEDANCE parameters section NOT found, skipping...\n&quot;</span>);</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;        }</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;    }</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160; </div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;    <span class="keywordflow">for</span>(j=0;j&lt;nj;j++)</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;    {</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ae4e1b8660e7f371105011b07abb0d608">_impedance_limits</a>[j].<a class="code" href="structImpedanceLimits.html#a066ba871ffc15e8873754b147321e784">min_damp</a>=  0.001;</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ae4e1b8660e7f371105011b07abb0d608">_impedance_limits</a>[j].<a class="code" href="structImpedanceLimits.html#a560c5bfd8bfecfc0afd6e7ab0277b568">max_damp</a>=  9.888;</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ae4e1b8660e7f371105011b07abb0d608">_impedance_limits</a>[j].<a class="code" href="structImpedanceLimits.html#a7916265f2ed76e768ef5adc5985d9010">min_stiff</a>= 0.002;</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ae4e1b8660e7f371105011b07abb0d608">_impedance_limits</a>[j].<a class="code" href="structImpedanceLimits.html#a35624ecb07e5793336d4156a23e1083e">max_stiff</a>= 9.889;</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ae4e1b8660e7f371105011b07abb0d608">_impedance_limits</a>[j].<a class="code" href="structImpedanceLimits.html#a1fee7cb60090ea19af25da21defb155e">param_a</a>=   0.011;</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ae4e1b8660e7f371105011b07abb0d608">_impedance_limits</a>[j].<a class="code" href="structImpedanceLimits.html#a2e2485a171d0dc27f1789ecc4f462bb8">param_b</a>=   0.012;</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ae4e1b8660e7f371105011b07abb0d608">_impedance_limits</a>[j].<a class="code" href="structImpedanceLimits.html#a2af3b799c70d3752ef797ca1f9f5b894">param_c</a>=   0.013;</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;    }</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160; </div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;    Bottle &amp;limits=<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>.findGroup(<span class="stringliteral">&quot;LIMITS&quot;</span>);</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;    <span class="keywordflow">if</span> (limits.isNull())</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;    {</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;        yError(<span class="stringliteral">&quot;Group LIMITS not found in configuration file\n&quot;</span>);</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;    }</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160; </div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;    <span class="comment">// motor oveload current</span></div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="CanBusMotionControl_8cpp.html#ad43675dac090e874d6abe01dabd4f931">validate</a>(limits, xtmp, <span class="stringliteral">&quot;motorOverloadCurrents&quot;</span>,<span class="stringliteral">&quot;a list of current limits&quot;</span>, nj+1))</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;    <span class="keywordflow">for</span>(i=1;i&lt;xtmp.size(); i++) <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a99a8fae012b649c35c2ec35fa65a4f73">_currentLimits</a>[i-1]=xtmp.get(i).asFloat64();</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160; </div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;    <span class="comment">// Motor pwm limit</span></div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="CanBusMotionControl_8cpp.html#a0ab4e4dd65b3c5c0fa0e1da33335cf31">validate_optional</a>(limits, xtmp, <span class="stringliteral">&quot;motorPwmLimit&quot;</span>, <span class="stringliteral">&quot;a list of motor PWM limits&quot;</span>, nj + 1))</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;    {</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;        yWarning(<span class="stringliteral">&quot;motorPwmLimit: Using default motorPwmLimit=1333\n&quot;</span>);</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;        <span class="keywordflow">for</span> (i = 1; i&lt;nj + 1; i++)</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;            <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a04f4f153cd60977178c14c6a491efde2">_motorPwmLimits</a>[i - 1] = 1333;   <span class="comment">//Default value</span></div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;    }</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;    {</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;        <span class="keywordflow">for</span> (i = 1; i &lt; xtmp.size(); i++)</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;        {</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;            <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a04f4f153cd60977178c14c6a491efde2">_motorPwmLimits</a>[i - 1] = xtmp.get(i).asFloat64();</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a04f4f153cd60977178c14c6a491efde2">_motorPwmLimits</a>[i - 1] &lt; 0)</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;            {</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;                yError() &lt;&lt; <span class="stringliteral">&quot;motorPwmLimit should be a positive value&quot;</span>;</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;            }</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;        }</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;    }</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160; </div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;    <span class="comment">// Max Joint velocity</span></div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="CanBusMotionControl_8cpp.html#a0ab4e4dd65b3c5c0fa0e1da33335cf31">validate_optional</a>(limits, xtmp, <span class="stringliteral">&quot;jntVelMax&quot;</span>, <span class="stringliteral">&quot;the maximum velocity command of a joint&quot;</span>, nj + 1))</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;    {</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;        yWarning(<span class="stringliteral">&quot;jntVelMax: Using default jntVelMax=100 deg/s\n&quot;</span>);</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;        <span class="keywordflow">for</span> (i = 1; i&lt;nj + 1; i++)</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;            <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ac33cda915f9bcfac46bca3baae9ff78d">_maxJntCmdVelocity</a>[i - 1] = 100;   <span class="comment">//Default value</span></div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;    }</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;    {</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;        <span class="keywordflow">for</span> (i = 1; i&lt;xtmp.size(); i++)</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;        {</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;            <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ac33cda915f9bcfac46bca3baae9ff78d">_maxJntCmdVelocity</a>[i - 1] = xtmp.get(i).asFloat64();</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ac33cda915f9bcfac46bca3baae9ff78d">_maxJntCmdVelocity</a>[i - 1]&lt;0)</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;            {</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;                yError() &lt;&lt; <span class="stringliteral">&quot;Invalid jntVelMax parameter &lt;0\n&quot;</span>;</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;            }</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;        }</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;    }</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160; </div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="CanBusMotionControl_8cpp.html#a0ab4e4dd65b3c5c0fa0e1da33335cf31">validate_optional</a>(limits, xtmp, <span class="stringliteral">&quot;maxPosStep&quot;</span>, <span class="stringliteral">&quot;the maximum amplitude of a position direct step&quot;</span>, nj+1))</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;    {</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;        yWarning(<span class="stringliteral">&quot;maxPosStep: Using default MaxPosStep=10 degs\n&quot;</span>);</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;        <span class="keywordflow">for</span>(i=1;i&lt;nj+1; i++)</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;            <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aefe5b16491298ed2272aba2b5bc79e10">_maxStep</a>[i-1] = 10;   <span class="comment">//Default value</span></div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;    }</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;    {</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;        <span class="keywordflow">for</span>(i=1;i&lt;xtmp.size(); i++) </div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;        {</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;            <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aefe5b16491298ed2272aba2b5bc79e10">_maxStep</a>[i-1]=xtmp.get(i).asFloat64();</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aefe5b16491298ed2272aba2b5bc79e10">_maxStep</a>[i-1]&lt;0)</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;            {</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;                yError () &lt;&lt; <span class="stringliteral">&quot;Invalid MaxPosStep parameter &lt;0\n&quot;</span>;</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;            }</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;        }</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;    }</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160; </div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;    <span class="comment">// max joint position</span></div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="CanBusMotionControl_8cpp.html#ad43675dac090e874d6abe01dabd4f931">validate</a>(limits, xtmp, <span class="stringliteral">&quot;jntPosMax&quot;</span>,<span class="stringliteral">&quot;a list of maximum angles (in degrees)&quot;</span>, nj+1))</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;    <span class="keywordflow">for</span>(i=1;i&lt;xtmp.size(); i++) <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ae9802594f2028c3fdeddc1d380fa1645">_limitsMax</a>[i-1]=xtmp.get(i).asFloat64();</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160; </div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;    <span class="comment">// min joint position</span></div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="CanBusMotionControl_8cpp.html#ad43675dac090e874d6abe01dabd4f931">validate</a>(limits, xtmp, <span class="stringliteral">&quot;jntPosMin&quot;</span>,<span class="stringliteral">&quot;a list of minimum angles (in degrees)&quot;</span>, nj+1))</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;    <span class="keywordflow">for</span>(i=1;i&lt;xtmp.size(); i++) <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#af079a5912157e00e7baba4caeb1cd8d3">_limitsMin</a>[i-1]=xtmp.get(i).asFloat64();</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;    <span class="keywordflow">for</span> (i = 0; i&lt;nj; i++)</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;    {</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ae9802594f2028c3fdeddc1d380fa1645">_limitsMax</a>[i] &lt; <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#af079a5912157e00e7baba4caeb1cd8d3">_limitsMin</a>[i])</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;        {</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;            yError(<span class="stringliteral">&quot;invalid limit on joint %d : Max value (%f) &lt; Min value(%f)\n&quot;</span>, i, <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ae9802594f2028c3fdeddc1d380fa1645">_limitsMax</a>[i], <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#af079a5912157e00e7baba4caeb1cd8d3">_limitsMin</a>[i]);</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;        }</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;    }</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160; </div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;    Bottle &amp;velocityGroup=<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>.findGroup(<span class="stringliteral">&quot;VELOCITY&quot;</span>);</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;    <span class="keywordflow">if</span> (!velocityGroup.isNull())</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;        {</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="CanBusMotionControl_8cpp.html#ad43675dac090e874d6abe01dabd4f931">validate</a>(velocityGroup, xtmp, <span class="stringliteral">&quot;Shifts&quot;</span>, <span class="stringliteral">&quot;a list of shifts to be used in the vmo control&quot;</span>, nj+1))</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;            {</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;                yWarning(<span class="stringliteral">&quot;Shifts: Using default Shifts=4\n&quot;</span>);</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;                <span class="keywordflow">for</span>(i=1;i&lt;nj+1; i++)</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;                    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ac9034bd11839f3821b3062d6680f662c">_velocityShifts</a>[i-1] = 4;   <span class="comment">//Default value</span></div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;            }</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;            {</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;                <span class="keywordflow">for</span>(i=1;i&lt;xtmp.size(); i++) </div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;                    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ac9034bd11839f3821b3062d6680f662c">_velocityShifts</a>[i-1]=xtmp.get(i).asInt32();</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;            }</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160; </div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;            xtmp.clear();</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="CanBusMotionControl_8cpp.html#ad43675dac090e874d6abe01dabd4f931">validate</a>(velocityGroup, xtmp, <span class="stringliteral">&quot;Timeout&quot;</span>, <span class="stringliteral">&quot;a list of timeout to be used in the vmo control&quot;</span>, nj+1))</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;            {</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;                    yWarning(<span class="stringliteral">&quot;Timeout: Using default Timeout=1000, i.e 1s\n&quot;</span>);</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;                    <span class="keywordflow">for</span>(i=1;i&lt;nj+1; i++)</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;                        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aea74aef9268f3752df27264a0fb6fb90">_velocityTimeout</a>[i-1] = 1000;   <span class="comment">//Default value</span></div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;            }</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;                {</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;                    <span class="keywordflow">for</span>(i=1;i&lt;xtmp.size(); i++) </div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;                        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aea74aef9268f3752df27264a0fb6fb90">_velocityTimeout</a>[i-1]=xtmp.get(i).asInt32();</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;                }</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160; </div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;            xtmp.clear();</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="CanBusMotionControl_8cpp.html#a0ab4e4dd65b3c5c0fa0e1da33335cf31">validate_optional</a>(velocityGroup, xtmp, <span class="stringliteral">&quot;JNT_speed_estimation&quot;</span>, <span class="stringliteral">&quot;a list of shift factors used by the firmware joint speed estimator&quot;</span>, nj+1))</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;            {</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;                    yWarning(<span class="stringliteral">&quot;JNT_speed_estimation: Using default value=5\n&quot;</span>);</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;                    <span class="keywordflow">for</span>(i=1;i&lt;nj+1; i++)</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;                        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a767dda240906970d0969ce5b7ebdd7a9">_estim_params</a>[i-1].jnt_Vel_estimator_shift = 5;   <span class="comment">//Default value</span></div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;                }</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;                {</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;                    <span class="keywordflow">for</span>(i=1;i&lt;xtmp.size(); i++) </div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;                        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a767dda240906970d0969ce5b7ebdd7a9">_estim_params</a>[i-1].jnt_Vel_estimator_shift = xtmp.get(i).asInt32();</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;                }</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160; </div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;            xtmp.clear();</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="CanBusMotionControl_8cpp.html#a0ab4e4dd65b3c5c0fa0e1da33335cf31">validate_optional</a>(velocityGroup, xtmp, <span class="stringliteral">&quot;MOT_speed_estimation&quot;</span>, <span class="stringliteral">&quot;a list of shift factors used by the firmware motor speed estimator&quot;</span>, nj+1))</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;                {</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;                    yWarning(<span class="stringliteral">&quot;MOT_speed_estimation: Using default value=5\n&quot;</span>);</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;                    <span class="keywordflow">for</span>(i=1;i&lt;nj+1; i++)</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;                        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a767dda240906970d0969ce5b7ebdd7a9">_estim_params</a>[i-1].mot_Vel_estimator_shift = 5;   <span class="comment">//Default value</span></div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;                }</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;                {</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;                    <span class="keywordflow">for</span>(i=1;i&lt;xtmp.size(); i++) </div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;                        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a767dda240906970d0969ce5b7ebdd7a9">_estim_params</a>[i-1].mot_Vel_estimator_shift = xtmp.get(i).asInt32();</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;                }</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160; </div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;            xtmp.clear();</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="CanBusMotionControl_8cpp.html#a0ab4e4dd65b3c5c0fa0e1da33335cf31">validate_optional</a>(velocityGroup, xtmp, <span class="stringliteral">&quot;JNT_accel_estimation&quot;</span>, <span class="stringliteral">&quot;a list of shift factors used by the firmware joint speed estimator&quot;</span>, nj+1))</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;            {</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;                    yWarning(<span class="stringliteral">&quot;JNT_accel_estimation: Using default value=5\n&quot;</span>);</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;                    <span class="keywordflow">for</span>(i=1;i&lt;nj+1; i++)</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;                        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a767dda240906970d0969ce5b7ebdd7a9">_estim_params</a>[i-1].jnt_Acc_estimator_shift = 5;   <span class="comment">//Default value</span></div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;            }</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;                {</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;                    <span class="keywordflow">for</span>(i=1;i&lt;xtmp.size(); i++) </div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;                        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a767dda240906970d0969ce5b7ebdd7a9">_estim_params</a>[i-1].jnt_Acc_estimator_shift = xtmp.get(i).asInt32();</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;                }</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160; </div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;            xtmp.clear();</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="CanBusMotionControl_8cpp.html#a0ab4e4dd65b3c5c0fa0e1da33335cf31">validate_optional</a>(velocityGroup, xtmp, <span class="stringliteral">&quot;MOT_accel_estimation&quot;</span>, <span class="stringliteral">&quot;a list of shift factors used by the firmware motor speed estimator&quot;</span>, nj+1))</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;                {</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;                    yWarning(<span class="stringliteral">&quot;MOT_accel_estimation: Using default value=5\n&quot;</span>);</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;                    <span class="keywordflow">for</span>(i=1;i&lt;nj+1; i++)</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;                        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a767dda240906970d0969ce5b7ebdd7a9">_estim_params</a>[i-1].mot_Acc_estimator_shift = 5;   <span class="comment">//Default value</span></div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;                }</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;                {</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;                    <span class="keywordflow">for</span>(i=1;i&lt;xtmp.size(); i++) </div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;                        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a767dda240906970d0969ce5b7ebdd7a9">_estim_params</a>[i-1].mot_Acc_estimator_shift = xtmp.get(i).asInt32();</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;                }</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160; </div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;        }</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;    {</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;        yWarning(<span class="stringliteral">&quot;A suitable value for [VELOCITY] Shifts was not found. Using default Shifts=4\n&quot;</span>);</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;        <span class="keywordflow">for</span>(i=1;i&lt;nj+1; i++)</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;            <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ac9034bd11839f3821b3062d6680f662c">_velocityShifts</a>[i-1] = 4;   <span class="comment">//Default value</span></div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160; </div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;        yWarning(<span class="stringliteral">&quot;A suitable value for [VELOCITY] Timeout was not found. Using default Timeout=1000, i.e 1s.\n&quot;</span>);</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;        <span class="keywordflow">for</span>(i=1;i&lt;nj+1; i++)</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;            <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aea74aef9268f3752df27264a0fb6fb90">_velocityTimeout</a>[i-1] = 1000;   <span class="comment">//Default value</span></div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160; </div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;        yWarning(<span class="stringliteral">&quot;A suitable value for [VELOCITY] speed estimation was not found. Using default shift factor=5.\n&quot;</span>);</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;        <span class="keywordflow">for</span>(i=1;i&lt;nj+1; i++)</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;        {</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;            <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a767dda240906970d0969ce5b7ebdd7a9">_estim_params</a>[i-1].<a class="code" href="structSpeedEstimationParameters.html#a41921b59d93b2adb33b9e4746a02d273">jnt_Vel_estimator_shift</a> = 5;   <span class="comment">//Default value</span></div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;            <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a767dda240906970d0969ce5b7ebdd7a9">_estim_params</a>[i-1].<a class="code" href="structSpeedEstimationParameters.html#afdbee7f31bfb779d001f2da46f53963c">jnt_Acc_estimator_shift</a> = 5;   </div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;            <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a767dda240906970d0969ce5b7ebdd7a9">_estim_params</a>[i-1].<a class="code" href="structSpeedEstimationParameters.html#a8ca61687daf50b0654e6609825e43820">mot_Vel_estimator_shift</a> = 5;   </div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;            <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a767dda240906970d0969ce5b7ebdd7a9">_estim_params</a>[i-1].<a class="code" href="structSpeedEstimationParameters.html#a89b69c29d7642ee7d5aa4c9080d9a8fe">mot_Acc_estimator_shift</a> = 5;  </div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;        }</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;    }</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160; </div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;    <span class="keywordtype">bool</span> ret=<span class="keyword">true</span>;</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;    <span class="keywordflow">if</span> (!canGroup.findGroup(<span class="stringliteral">&quot;broadcast_pos&quot;</span>).isNull())</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;    {</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;        xtmp=canGroup.findGroup(<span class="stringliteral">&quot;broadcast_pos&quot;</span>);</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;        ret=ret&amp;&amp;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a6e876530e1093ae831fc2c47ba228fbe">setBroadCastMask</a>(xtmp, ICUBCANPROTO_PER_MC_MSG__POSITION);</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;    }</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160; </div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;    <span class="keywordflow">if</span> (!canGroup.findGroup(<span class="stringliteral">&quot;broadcast_pid&quot;</span>).isNull())</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;    {</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;        xtmp=canGroup.findGroup(<span class="stringliteral">&quot;broadcast_pid&quot;</span>);</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;        ret=ret&amp;&amp;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a6e876530e1093ae831fc2c47ba228fbe">setBroadCastMask</a>(xtmp, ICUBCANPROTO_PER_MC_MSG__PID_VAL);</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;    }</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;    <span class="keywordflow">if</span> (!canGroup.findGroup(<span class="stringliteral">&quot;broadcast_fault&quot;</span>).isNull())</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;    {</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;         xtmp=canGroup.findGroup(<span class="stringliteral">&quot;broadcast_fault&quot;</span>);</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;         ret=ret&amp;&amp;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a6e876530e1093ae831fc2c47ba228fbe">setBroadCastMask</a>(xtmp, ICUBCANPROTO_PER_MC_MSG__STATUS);</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;     }</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;    <span class="keywordflow">if</span> (!canGroup.findGroup(<span class="stringliteral">&quot;broadcast_current&quot;</span>).isNull())</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;    {</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;        xtmp=canGroup.findGroup(<span class="stringliteral">&quot;broadcast_current&quot;</span>);</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;        ret=ret&amp;&amp;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a6e876530e1093ae831fc2c47ba228fbe">setBroadCastMask</a>(xtmp, ICUBCANPROTO_PER_MC_MSG__CURRENT);</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;    }</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;    <span class="keywordflow">if</span> (!canGroup.findGroup(<span class="stringliteral">&quot;broadcast_overflow&quot;</span>).isNull())</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;    {</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;        xtmp=canGroup.findGroup(<span class="stringliteral">&quot;broadcast_overflow&quot;</span>);</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;        ret=ret&amp;&amp;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a6e876530e1093ae831fc2c47ba228fbe">setBroadCastMask</a>(xtmp, ICUBCANPROTO_PER_MC_MSG__OVERFLOW);</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;    }</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;    <span class="keywordflow">if</span> (!canGroup.findGroup(<span class="stringliteral">&quot;broadcast_canprint&quot;</span>).isNull())</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;    {</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;        xtmp=canGroup.findGroup(<span class="stringliteral">&quot;broadcast_canprint&quot;</span>);</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;        ret=ret&amp;&amp;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a6e876530e1093ae831fc2c47ba228fbe">setBroadCastMask</a>(xtmp, ICUBCANPROTO_PER_MC_MSG__PRINT);</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;    }</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;    <span class="keywordflow">if</span> (!canGroup.findGroup(<span class="stringliteral">&quot;broadcast_vel_acc&quot;</span>).isNull())</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;    {</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;        xtmp=canGroup.findGroup(<span class="stringliteral">&quot;broadcast_vel_acc&quot;</span>);</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;        ret=ret&amp;&amp;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a6e876530e1093ae831fc2c47ba228fbe">setBroadCastMask</a>(xtmp, ICUBCANPROTO_PER_MC_MSG__VELOCITY);</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;    }</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160; </div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;    <span class="keywordflow">if</span> (!canGroup.findGroup(<span class="stringliteral">&quot;broadcast_pid_err&quot;</span>).isNull())</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;    {</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;        xtmp=canGroup.findGroup(<span class="stringliteral">&quot;broadcast_pid_err&quot;</span>);</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a6e876530e1093ae831fc2c47ba228fbe">setBroadCastMask</a>(xtmp, ICUBCANPROTO_PER_MC_MSG__PID_ERROR); <span class="comment">//@@@ not checking return value in order to keep this option not mandatory</span></div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;    }</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160; </div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;    <span class="keywordflow">if</span> (!canGroup.findGroup(<span class="stringliteral">&quot;broadcast_rotor_pos&quot;</span>).isNull())</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;    {</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;        xtmp=canGroup.findGroup(<span class="stringliteral">&quot;broadcast_rotor_pos&quot;</span>);</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a6e876530e1093ae831fc2c47ba228fbe">setBroadCastMask</a>(xtmp, ICUBCANPROTO_PER_MC_MSG__MOTOR_POSITION);</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;    }</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160; </div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;    <span class="keywordflow">if</span> (!canGroup.findGroup(<span class="stringliteral">&quot;broadcast_rotor_vel_acc&quot;</span>).isNull())</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;    {</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;        xtmp=canGroup.findGroup(<span class="stringliteral">&quot;broadcast_rotor_vel_acc&quot;</span>);</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a6e876530e1093ae831fc2c47ba228fbe">setBroadCastMask</a>(xtmp, ICUBCANPROTO_PER_MC_MSG__MOTOR_SPEED);</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;    }</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160; </div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;    <span class="keywordflow">if</span> (!ret)</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;        yError(<span class="stringliteral">&quot;Invalid configuration file, check broadcast_* parameters\n&quot;</span>);</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160; </div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;}</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160; </div>
<div class="line"><a name="l01873"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#addbb71cc77868bf0fe41a52d597c9e19"> 1873</a></span>&#160;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#addbb71cc77868bf0fe41a52d597c9e19">CanBusMotionControlParameters::CanBusMotionControlParameters</a>()</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;{</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ad8e4f717273d101d2b028d29d13b40e1">_networkN</a>=0;</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a7861dd017f448ebf6659e80fa6c7e911">_destinations</a>=0;</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aa843f78c2438fe1eece0c5aa7b1d5990">_axisMap</a>=0;</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aa0ec68ecd5419da2cd5dd96bf4c637cb">_angleToEncoder</a>=0;</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a559591b54d78639691579558ae701700">_rotToEncoder</a>=0;</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a56dceb3467a6f1061f272d1b6dbd9b66">_zeros</a>=0;</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a087665b704539d68433df0672dc665b5">_pids</a>=0;</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a7bce21eb343ce9f04ee52f2da6b6ad8a">_tpids</a>=0;</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aef9551940add65103085bd92a10a5ab7">_torqueControlEnabled</a>=<span class="keyword">false</span>;</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ac575b87f412507a61e1c657cebcdb8c1">_pwmIsLimited</a>=<span class="keyword">false</span>;</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ae9802594f2028c3fdeddc1d380fa1645">_limitsMax</a>=0;</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#af079a5912157e00e7baba4caeb1cd8d3">_limitsMin</a>=0;</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a99a8fae012b649c35c2ec35fa65a4f73">_currentLimits</a>=0;</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ac9034bd11839f3821b3062d6680f662c">_velocityShifts</a>=0;</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a4367039ae1dc97703025003aa0f2f75d">_optical_factor</a>=0;</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aea74aef9268f3752df27264a0fb6fb90">_velocityTimeout</a>=0;</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a4fe8bb48d8ea41df0e4df2904c7c62d0">_torqueSensorId</a>=0;</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ac838d9a2d9dab425a1dcc24816c57109">_torqueSensorChan</a>=0;</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a0508d5fd826d46d3ddc3d6864aea49e7">_maxTorque</a>=0;</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#acd767cc2d7760615d4dffca1bce4a07c">_newtonsToSensor</a>=0;</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a55272902bf1e3398f7b476ce3ca6c574">_ampsToSensor</a> = 0;</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a612a2893fcecf9f9ba6cb3dc6d369c9d">_dutycycleToPwm</a> = 0;</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a241d53b770b1253d3d7ea3ca8e6aacd7">_debug_params</a>=0;</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#adc5c896973556f50f5043ff66df781f7">_impedance_params</a>=0;</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ae4e1b8660e7f371105011b07abb0d608">_impedance_limits</a>=0;</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a767dda240906970d0969ce5b7ebdd7a9">_estim_params</a>=0;</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ac8301c209035458e40349621f325ac96">_bemfGain</a>=0;</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a539d4d49d1bdfd092d66d5647a4e05de">_ktau</a>=0;</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a1a5b8bdbae78cb12c80f48f18d0f435a">_axisName</a> = 0;</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a815a8514bf823de1e6ca9e99075280b8">_axisType</a> = 0;</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a04f4f153cd60977178c14c6a491efde2">_motorPwmLimits</a> = 0;</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ac33cda915f9bcfac46bca3baae9ff78d">_maxJntCmdVelocity</a> = 0;</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160; </div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a7680212b727dbc1cfa1da8c924106253">_my_address</a> = 0;</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a2cd04f97df73fa11ebfb39e896e3b946">_polling_interval</a> = 10;</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a1984e4bdfecb8ca9fa80cd8332c1a511">_timeout</a> = 20;</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aebac840500409b6ab4dc4d7e44e4e216">_njoints</a> = 0;</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160; </div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#afb65c740ca4adb2c69fb44cc72252343">_txQueueSize</a> = 2047;</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a95c6b5f6ccb42aee8e1bdcb834de357b">_rxQueueSize</a> = 2047;</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aab161d0e2e9f1890c69b13338d62289a">_txTimeout</a> = 20;</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a7d1d3ff6226b4e8aaea60e1f9c38b38f">_rxTimeout</a> = 20;</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ae942e7739d24298f278452f206a434c7">_broadcast_mask</a>=0;</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#adbdebc6cbe3bf31f7efeb4e0de0755c2">_torqueControlUnits</a>=<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a437871bdfe1d8fefa2a57c4ef0744260a1a41a461e18396fe65451fb53b83ccb2">MACHINE_UNITS</a>;</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;}</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160; </div>
<div class="line"><a name="l01921"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a045a065763e995ff69770b99462fe1f9"> 1921</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a045a065763e995ff69770b99462fe1f9">CanBusMotionControlParameters::alloc</a>(<span class="keywordtype">int</span> nj)</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;{</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ad8e4f717273d101d2b028d29d13b40e1">_networkN</a> = 0;</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a7861dd017f448ebf6659e80fa6c7e911">_destinations</a> = allocAndCheck&lt;unsigned char&gt; (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>);</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aa843f78c2438fe1eece0c5aa7b1d5990">_axisMap</a> = allocAndCheck&lt;int&gt;(nj);</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aa0ec68ecd5419da2cd5dd96bf4c637cb">_angleToEncoder</a> = allocAndCheck&lt;double&gt;(nj);</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a559591b54d78639691579558ae701700">_rotToEncoder</a> = allocAndCheck&lt;double&gt;(nj);</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a56dceb3467a6f1061f272d1b6dbd9b66">_zeros</a> = allocAndCheck&lt;double&gt;(nj);</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a4fe8bb48d8ea41df0e4df2904c7c62d0">_torqueSensorId</a>= allocAndCheck&lt;int&gt;(nj);</div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ac838d9a2d9dab425a1dcc24816c57109">_torqueSensorChan</a>= allocAndCheck&lt;int&gt;(nj);</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a0508d5fd826d46d3ddc3d6864aea49e7">_maxTorque</a>=allocAndCheck&lt;double&gt;(nj);</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#acd767cc2d7760615d4dffca1bce4a07c">_newtonsToSensor</a>=allocAndCheck&lt;double&gt;(nj);</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a55272902bf1e3398f7b476ce3ca6c574">_ampsToSensor</a> = allocAndCheck&lt;double&gt;(nj);</div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a612a2893fcecf9f9ba6cb3dc6d369c9d">_dutycycleToPwm</a> = allocAndCheck&lt;double&gt;(nj);</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ac8301c209035458e40349621f325ac96">_bemfGain</a>=allocAndCheck&lt;double&gt;(nj);</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a539d4d49d1bdfd092d66d5647a4e05de">_ktau</a>=allocAndCheck&lt;double&gt;(nj);</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aefe5b16491298ed2272aba2b5bc79e10">_maxStep</a>=allocAndCheck&lt;double&gt;(nj);</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ac33cda915f9bcfac46bca3baae9ff78d">_maxJntCmdVelocity</a> = allocAndCheck&lt;double&gt;(nj);</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a04f4f153cd60977178c14c6a491efde2">_motorPwmLimits</a> = allocAndCheck&lt;double&gt;(nj);</div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#acde818af785eb36718b8e2e5ba5c59fa">_filterType</a>=allocAndCheck&lt;int&gt;(nj);</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a1a5b8bdbae78cb12c80f48f18d0f435a">_axisName</a> = <span class="keyword">new</span> std::string[nj];</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a815a8514bf823de1e6ca9e99075280b8">_axisType</a> = <span class="keyword">new</span> std::string[nj];</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160; </div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a087665b704539d68433df0672dc665b5">_pids</a>=allocAndCheck&lt;Pid&gt;(nj);</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a7bce21eb343ce9f04ee52f2da6b6ad8a">_tpids</a>=allocAndCheck&lt;Pid&gt;(nj);</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a241d53b770b1253d3d7ea3ca8e6aacd7">_debug_params</a>=allocAndCheck&lt;DebugParameters&gt;(nj);</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#adc5c896973556f50f5043ff66df781f7">_impedance_params</a>=allocAndCheck&lt;ImpedanceParameters&gt;(nj);</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ae4e1b8660e7f371105011b07abb0d608">_impedance_limits</a>=allocAndCheck&lt;ImpedanceLimits&gt;(nj);</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a767dda240906970d0969ce5b7ebdd7a9">_estim_params</a>=allocAndCheck&lt;SpeedEstimationParameters&gt;(nj);</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160; </div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ae9802594f2028c3fdeddc1d380fa1645">_limitsMax</a>=allocAndCheck&lt;double&gt;(nj);</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#af079a5912157e00e7baba4caeb1cd8d3">_limitsMin</a>=allocAndCheck&lt;double&gt;(nj);</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a99a8fae012b649c35c2ec35fa65a4f73">_currentLimits</a>=allocAndCheck&lt;double&gt;(nj);</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a4367039ae1dc97703025003aa0f2f75d">_optical_factor</a>=allocAndCheck&lt;double&gt;(nj);</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ac9034bd11839f3821b3062d6680f662c">_velocityShifts</a>=allocAndCheck&lt;int&gt;(<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>);</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aea74aef9268f3752df27264a0fb6fb90">_velocityTimeout</a>=allocAndCheck&lt;int&gt;(<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>);</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;    memset(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#af079a5912157e00e7baba4caeb1cd8d3">_limitsMin</a>, 0, <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>)*nj);</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;    memset(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ae9802594f2028c3fdeddc1d380fa1645">_limitsMax</a>, 0, <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>)*nj);</div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;    memset(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a99a8fae012b649c35c2ec35fa65a4f73">_currentLimits</a>, 0, <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>)*nj);</div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;    memset(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ac9034bd11839f3821b3062d6680f662c">_velocityShifts</a>, 0, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>)*nj);</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;    memset(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a4367039ae1dc97703025003aa0f2f75d">_optical_factor</a>, 0, <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>)*nj);</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;    memset(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aea74aef9268f3752df27264a0fb6fb90">_velocityTimeout</a>, 0, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>)*nj);</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;    memset(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aefe5b16491298ed2272aba2b5bc79e10">_maxStep</a>, 0, <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>)*nj);</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;    memset(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ac33cda915f9bcfac46bca3baae9ff78d">_maxJntCmdVelocity</a>, 0, <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>)*nj);</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;    memset(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a04f4f153cd60977178c14c6a491efde2">_motorPwmLimits</a>, 0, <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>)*nj);</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160; </div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a7680212b727dbc1cfa1da8c924106253">_my_address</a> = 0;</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a2cd04f97df73fa11ebfb39e896e3b946">_polling_interval</a> = 10;</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a1984e4bdfecb8ca9fa80cd8332c1a511">_timeout</a> = 20;</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aebac840500409b6ab4dc4d7e44e4e216">_njoints</a> = nj;</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160; </div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#afb65c740ca4adb2c69fb44cc72252343">_txQueueSize</a> = 2047;</div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a95c6b5f6ccb42aee8e1bdcb834de357b">_rxQueueSize</a> = 2047;</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aab161d0e2e9f1890c69b13338d62289a">_txTimeout</a> = 20;</div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a7d1d3ff6226b4e8aaea60e1f9c38b38f">_rxTimeout</a> = 20;</div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160; </div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ae942e7739d24298f278452f206a434c7">_broadcast_mask</a>=allocAndCheck&lt;int&gt;(nj);</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0;j&lt;nj;j++)</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;    {</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ae942e7739d24298f278452f206a434c7">_broadcast_mask</a>[j]=<a class="code" href="messages_8h.html#aa9a5f8926fc20e7cb83a1851031303af">CAN_BCAST_NONE</a>;</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;    }</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160; </div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;}</div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160; </div>
<div class="line"><a name="l01986"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ab0f5f6a8430ea836caec60d00cd41719"> 1986</a></span>&#160;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ab0f5f6a8430ea836caec60d00cd41719">CanBusMotionControlParameters::~CanBusMotionControlParameters</a>()</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;{</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;    checkAndDestroy&lt;double&gt;(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a56dceb3467a6f1061f272d1b6dbd9b66">_zeros</a>);</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;    checkAndDestroy&lt;double&gt;(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aa0ec68ecd5419da2cd5dd96bf4c637cb">_angleToEncoder</a>);</div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;    checkAndDestroy&lt;double&gt;(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a559591b54d78639691579558ae701700">_rotToEncoder</a>);</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;    checkAndDestroy&lt;int&gt;(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aa843f78c2438fe1eece0c5aa7b1d5990">_axisMap</a>);</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;    checkAndDestroy&lt;unsigned char&gt;(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a7861dd017f448ebf6659e80fa6c7e911">_destinations</a>);</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;    checkAndDestroy&lt;int&gt;(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ac9034bd11839f3821b3062d6680f662c">_velocityShifts</a>);</div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;    checkAndDestroy&lt;double&gt;(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a4367039ae1dc97703025003aa0f2f75d">_optical_factor</a>);</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;    checkAndDestroy&lt;int&gt;(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aea74aef9268f3752df27264a0fb6fb90">_velocityTimeout</a>);</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;    checkAndDestroy&lt;int&gt;(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a4fe8bb48d8ea41df0e4df2904c7c62d0">_torqueSensorId</a>);</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;    checkAndDestroy&lt;int&gt;(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ac838d9a2d9dab425a1dcc24816c57109">_torqueSensorChan</a>);</div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;    checkAndDestroy&lt;double&gt;(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a0508d5fd826d46d3ddc3d6864aea49e7">_maxTorque</a>);</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;    checkAndDestroy&lt;double&gt;(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#acd767cc2d7760615d4dffca1bce4a07c">_newtonsToSensor</a>);</div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;    checkAndDestroy&lt;double&gt;(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a55272902bf1e3398f7b476ce3ca6c574">_ampsToSensor</a>);</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;    checkAndDestroy&lt;double&gt;(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a612a2893fcecf9f9ba6cb3dc6d369c9d">_dutycycleToPwm</a>);</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;    checkAndDestroy&lt;double&gt;(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ac8301c209035458e40349621f325ac96">_bemfGain</a>);</div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;    checkAndDestroy&lt;double&gt;(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a539d4d49d1bdfd092d66d5647a4e05de">_ktau</a>);</div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;    checkAndDestroy&lt;double&gt;(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aefe5b16491298ed2272aba2b5bc79e10">_maxStep</a>);</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;    checkAndDestroy&lt;double&gt;(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ac33cda915f9bcfac46bca3baae9ff78d">_maxJntCmdVelocity</a>);</div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;    checkAndDestroy&lt;double&gt;(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a04f4f153cd60977178c14c6a491efde2">_motorPwmLimits</a>);</div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;    checkAndDestroy&lt;int&gt;(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#acde818af785eb36718b8e2e5ba5c59fa">_filterType</a>);</div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;    checkAndDestroy&lt;std::string&gt;(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a1a5b8bdbae78cb12c80f48f18d0f435a">_axisName</a>);</div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;    checkAndDestroy&lt;std::string&gt;(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a815a8514bf823de1e6ca9e99075280b8">_axisType</a>);</div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160; </div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;    checkAndDestroy&lt;Pid&gt;(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a087665b704539d68433df0672dc665b5">_pids</a>);</div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;    checkAndDestroy&lt;Pid&gt;(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a7bce21eb343ce9f04ee52f2da6b6ad8a">_tpids</a>);</div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;    checkAndDestroy&lt;SpeedEstimationParameters&gt;(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a767dda240906970d0969ce5b7ebdd7a9">_estim_params</a>);</div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;    checkAndDestroy&lt;DebugParameters&gt;(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a241d53b770b1253d3d7ea3ca8e6aacd7">_debug_params</a>);</div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;    checkAndDestroy&lt;ImpedanceParameters&gt;(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#adc5c896973556f50f5043ff66df781f7">_impedance_params</a>);</div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;    checkAndDestroy&lt;ImpedanceLimits&gt;(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ae4e1b8660e7f371105011b07abb0d608">_impedance_limits</a>);</div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;    checkAndDestroy&lt;double&gt;(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ae9802594f2028c3fdeddc1d380fa1645">_limitsMax</a>);</div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;    checkAndDestroy&lt;double&gt;(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#af079a5912157e00e7baba4caeb1cd8d3">_limitsMin</a>);</div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;    checkAndDestroy&lt;double&gt;(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a99a8fae012b649c35c2ec35fa65a4f73">_currentLimits</a>);</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;    checkAndDestroy&lt;int&gt;(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ae942e7739d24298f278452f206a434c7">_broadcast_mask</a>);</div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;}</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160; </div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160; </div>
<div class="line"><a name="l02030"></a><span class="lineno"><a class="line" href="classCanBusResources.html#a2008aec86a510d0ace83fc1ed3713a86"> 2030</a></span>&#160;<a class="code" href="classCanBusResources.html#a2008aec86a510d0ace83fc1ed3713a86">CanBusResources::CanBusResources</a> ()</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;{</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;    iCanBus=0;</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;    iBufferFactory=0;</div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;    iCanErrors=0;</div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160; </div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;    _timeout = CAN_TIMEOUT;</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;    _polling_interval = CAN_POLLING_INTERVAL;</div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;    _speed = 0;</div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;    _networkN = 0;</div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;    _destInv=0;</div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;    _jointNames = 0;</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;    _initialized=<span class="keyword">false</span>;</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160; </div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;    memset (_destinations, 0, <span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>) * <a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>);</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;    memset (_velShifts, 0, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>) * <a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>);</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160; </div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;    _my_address = 0;</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;    _njoints = 0;</div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160; </div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;    _readMessages = 0;</div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;    _writeMessages = 0;</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;    _echoMessages = 0;</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;    _bcastRecvBuffer = NULL;</div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160; </div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;    _error_status = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;    requestsQueue=0;</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;}</div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160; </div>
<div class="line"><a name="l02059"></a><span class="lineno"><a class="line" href="classCanBusResources.html#a7c1c1eabc99ef8c947e0ebb9ea263a55"> 2059</a></span>&#160;<a class="code" href="classCanBusResources.html#a7c1c1eabc99ef8c947e0ebb9ea263a55">CanBusResources::~CanBusResources</a> () </div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;{ </div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;    uninitialize(); </div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;}</div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160; </div>
<div class="line"><a name="l02064"></a><span class="lineno"><a class="line" href="classCanBusResources.html#a82ddcb7f357bf08e66b0c76e4abde63a"> 2064</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classCanBusResources.html#a4b48266bb10663a63311c6872d708e8e">CanBusResources::initialize</a> (yarp::os::Searchable &amp;config)</div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;{</div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html">CanBusMotionControlParameters</a> params;</div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;    <span class="keywordtype">bool</span> ret;</div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160; </div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;    <span class="keywordflow">if</span> (!params.<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a8de67083105cb8150ab9cb447d55221c">fromConfig</a>(config))</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160; </div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;    polyDriver.open(config);</div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;    <span class="keywordflow">if</span> (!polyDriver.isValid())</div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;    {</div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;        yError(<span class="stringliteral">&quot;Could not instantiate CAN device\n&quot;</span>);</div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;    }</div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160; </div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;    polyDriver.view(iCanBus);</div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;    polyDriver.view(iBufferFactory);</div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;    polyDriver.view(iCanErrors);</div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160; </div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;    <span class="keywordflow">if</span> ((iCanBus==0) || (iBufferFactory==0))</div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;    {</div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;        yError(<span class="stringliteral">&quot;CanBusResources::initialize() could not get ICanBus or ICanBufferFactory interface&quot;</span>);</div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;    }</div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160; </div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;    ret=initialize(params);</div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;}</div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160; </div>
<div class="line"><a name="l02093"></a><span class="lineno"><a class="line" href="classCanBusResources.html#a4b48266bb10663a63311c6872d708e8e"> 2093</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classCanBusResources.html#a4b48266bb10663a63311c6872d708e8e">CanBusResources::initialize</a> (<span class="keyword">const</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html">CanBusMotionControlParameters</a>&amp; parms)</div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;{</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;    yTrace(<span class="stringliteral">&quot;Calling CanBusResources::initialize\n&quot;</span>);</div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;    <span class="keywordflow">if</span> (_initialized)</div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160; </div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;    <span class="comment">// general variable init.</span></div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;    _speed = 0;</div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;    _networkN = parms.<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ad8e4f717273d101d2b028d29d13b40e1">_networkN</a>;</div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160; </div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;    _readMessages = 0;</div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;    _writeMessages = 0;</div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;    _error_status = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160; </div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;    memcpy (_destinations, parms.<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a7861dd017f448ebf6659e80fa6c7e911">_destinations</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)*<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>);</div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;    memcpy (_velShifts, parms.<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ac9034bd11839f3821b3062d6680f662c">_velocityShifts</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>)*<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>);</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160; </div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k = 0; k &lt; <a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>; k++)</div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;        _velShifts[k] = (1 &lt;&lt; ((<span class="keywordtype">int</span>) _velShifts[k]));</div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160; </div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;    _destInv=allocAndCheck&lt;unsigned char&gt;(<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>);</div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160; </div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;    _my_address = parms.<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a7680212b727dbc1cfa1da8c924106253">_my_address</a>;</div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;    _polling_interval = parms.<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a2cd04f97df73fa11ebfb39e896e3b946">_polling_interval</a>;</div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;    _timeout = parms.<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a1984e4bdfecb8ca9fa80cd8332c1a511">_timeout</a>;</div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;    _njoints = parms.<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aebac840500409b6ab4dc4d7e44e4e216">_njoints</a>;</div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160; </div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;    _jointNames = <span class="keyword">new</span> std::string[_njoints];</div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; _njoints; i++) _jointNames[i] = parms.<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a1a5b8bdbae78cb12c80f48f18d0f435a">_axisName</a>[i];</div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160; </div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;    _txQueueSize=parms.<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#afb65c740ca4adb2c69fb44cc72252343">_txQueueSize</a>;</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;    _rxQueueSize=parms.<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a95c6b5f6ccb42aee8e1bdcb834de357b">_rxQueueSize</a>;</div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;    _filter = -1;</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160; </div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> <span class="keywordtype">id</span>=0;<span class="keywordtype">id</span>&lt;<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>;<span class="keywordtype">id</span>++)</div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;        _destInv[id]=-1;</div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160; </div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;    <span class="comment">//now fill inverted map</span></div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;    printf(<span class="stringliteral">&quot;printing destinations and inverted map\n&quot;</span>);</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> jj=0;jj&lt;_njoints;jj+=2)</div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;    {</div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;        _destInv[_destinations[jj/2]]=jj;</div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;        printf(<span class="stringliteral">&quot;%d %d\n&quot;</span>,jj,_destinations[jj/2]);</div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;     }</div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160; </div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;    _bcastRecvBuffer = allocAndCheck&lt;BCastBufferElement&gt; (_njoints);</div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j&lt;_njoints ;j++)</div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;        {</div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;            _bcastRecvBuffer[j]._update_e=Time::now();</div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;            _bcastRecvBuffer[j]._position_joint.resetStats();</div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;            _bcastRecvBuffer[j]._position_rotor.resetStats();</div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;            _bcastRecvBuffer[j]._speed_rotor.resetStats();</div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;            _bcastRecvBuffer[j]._accel_rotor.resetStats();</div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;        }</div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160; </div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;    <span class="comment">//previously initialized</span></div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;    iCanBus-&gt;canSetBaudRate(_speed);</div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0;</div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160; </div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;<span class="preprocessor">#if ICUB_CANMASKS_STRICT_FILTER</span></div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;    yInfo(<span class="stringliteral">&quot;using ICUB_CANMASKS_STRICT_FILTER option\n&quot;</span>);</div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;    <span class="comment">// sets all message ID&#39;s for class 0</span></div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j&lt;<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>; j++)</div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;    {</div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> sent_addr = 0x000 + (           0x000&lt;&lt;4) + _destinations[j];</div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> recv_addr = 0x000 + (_destinations[j]&lt;&lt;4) + 0x000;</div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;        iCanBus-&gt;canIdAdd(sent_addr);</div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;        iCanBus-&gt;canIdAdd(recv_addr);</div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;    }</div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;    yDebug(<span class="stringliteral">&quot;class 0 set\n&quot;</span>);</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160; </div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;    <span class="comment">// set all message ID&#39;s for class 1</span></div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j&lt;<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>; j++)</div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;    {</div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> start_addr = 0x100 + (_destinations[j]&lt;&lt;4) + 0x000;</div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> end_addr   = 0x100 + (_destinations[j]&lt;&lt;4) + 0x00F;</div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;        <span class="keywordflow">for</span> (i = start_addr; i &lt; end_addr; i++)</div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;            iCanBus-&gt;canIdAdd(i);</div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;    }</div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;    yDebug(<span class="stringliteral">&quot;class 1 set\n&quot;</span>);</div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160; </div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;    yInfo(<span class="stringliteral">&quot;opening all CAN masks\n&quot;</span>);</div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;    <span class="comment">// sets all message ID&#39;s for class 0</span></div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;    <span class="keywordflow">for</span> (i = 0x000; i &lt; 0x0ff; i++)</div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;        iCanBus-&gt;canIdAdd(i);</div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;    yDebug(<span class="stringliteral">&quot;class 0 set\n&quot;</span>);</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160; </div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;    <span class="comment">// set all message ID&#39;s for class 1</span></div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;    <span class="keywordflow">for</span> (i = 0x100; i &lt; 0x1ff; i++)</div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;        iCanBus-&gt;canIdAdd(i);</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;    yDebug(<span class="stringliteral">&quot;class 1 set\n&quot;</span>);</div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160; </div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;    <span class="comment">// set all message ID&#39;s for class 2</span></div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;    <span class="keywordflow">for</span> (i = 0x200; i &lt; 0x2ff; i++)</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;        iCanBus-&gt;canIdAdd(i);</div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;    yDebug(<span class="stringliteral">&quot;class 2 set\n&quot;</span>);</div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160; </div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;    <span class="comment">// set all message ID&#39;s for class 3</span></div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;    <span class="keywordflow">for</span> (i = 0x300; i &lt; 0x3ff; i++)</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;        iCanBus-&gt;canIdAdd(i);</div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;    yDebug(<span class="stringliteral">&quot;class 3 set\n&quot;</span>);</div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160; </div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;    _readBuffer=iBufferFactory-&gt;createBuffer(<a class="code" href="canControlConstants_8h.html#a36bc189fb5890a73e1e00d53972cb90c">BUF_SIZE</a>);</div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;    _writeBuffer=iBufferFactory-&gt;createBuffer(<a class="code" href="canControlConstants_8h.html#a36bc189fb5890a73e1e00d53972cb90c">BUF_SIZE</a>);</div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;    _replyBuffer=iBufferFactory-&gt;createBuffer(<a class="code" href="canControlConstants_8h.html#a36bc189fb5890a73e1e00d53972cb90c">BUF_SIZE</a>);</div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;    _echoBuffer=iBufferFactory-&gt;createBuffer(<a class="code" href="canControlConstants_8h.html#a36bc189fb5890a73e1e00d53972cb90c">BUF_SIZE</a>);</div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;    yDebug(<span class="stringliteral">&quot;Can read/write buffers created, buffer size: %d\n&quot;</span>, <a class="code" href="canControlConstants_8h.html#a36bc189fb5890a73e1e00d53972cb90c">BUF_SIZE</a>);</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160; </div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;    requestsQueue = <span class="keyword">new</span> <a class="code" href="classRequestsQueue.html">RequestsQueue</a>(_njoints, ICUBCANPROTO_POL_MC_CMD_MAXNUM);</div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160; </div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;    _initialized=<span class="keyword">true</span>;</div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160; </div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;    yInfo(<span class="stringliteral">&quot;CanBusResources::initialized correctly\n&quot;</span>);</div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;}</div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160; </div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160; </div>
<div class="line"><a name="l02212"></a><span class="lineno"><a class="line" href="classCanBusResources.html#a43f2a5de6393714ab78221e31c3f0080"> 2212</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classCanBusResources.html#a43f2a5de6393714ab78221e31c3f0080">CanBusResources::uninitialize</a> ()</div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;{</div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;    <span class="comment">// remember uninitialize might be called more than once</span></div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;    <span class="comment">// need to check for already destroyed pointers.</span></div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;    <span class="keywordflow">if</span> (!_initialized)</div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160; </div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;    <span class="comment">//yTrace(&quot;CanBusResources::uninitialize\n&quot;);</span></div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;    checkAndDestroy&lt;BCastBufferElement&gt; (_bcastRecvBuffer);</div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160; </div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;    <span class="keywordflow">if</span> (_initialized)</div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;    {</div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;        iBufferFactory-&gt;destroyBuffer(_readBuffer);</div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;        iBufferFactory-&gt;destroyBuffer(_writeBuffer);</div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;        iBufferFactory-&gt;destroyBuffer(_replyBuffer);</div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;        iBufferFactory-&gt;destroyBuffer(_echoBuffer);</div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;        _initialized=<span class="keyword">false</span>;</div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;    }</div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160; </div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;    <span class="keywordflow">if</span> (requestsQueue!=0)</div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;    {</div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;        <span class="keyword">delete</span> requestsQueue;</div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;        requestsQueue=0;</div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;    }</div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160; </div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;    <span class="keywordflow">if</span> (_destInv!=0)</div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;    {</div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;        <span class="keyword">delete</span> [] _destInv;</div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;        _destInv=0;</div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;    }</div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160; </div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;    <span class="keywordflow">if</span> (_jointNames != 0)</div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;    {</div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;        <span class="keyword">delete</span>[] _jointNames;</div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;        _jointNames = 0;</div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;    }</div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160; </div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;    _initialized=<span class="keyword">false</span>;</div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;}</div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160; </div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160; </div>
<div class="line"><a name="l02254"></a><span class="lineno"><a class="line" href="classCanBusResources.html#ae31dbfd6d9458c803d5976bf80d2df29"> 2254</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classCanBusResources.html#ae31dbfd6d9458c803d5976bf80d2df29">CanBusResources::read</a> ()</div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;{</div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> messages=<a class="code" href="canControlConstants_8h.html#a36bc189fb5890a73e1e00d53972cb90c">BUF_SIZE</a>;</div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;    <span class="keywordtype">bool</span> res=<span class="keyword">false</span>;</div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160; </div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;    _readMessages=0;</div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;    res=iCanBus-&gt;canRead(_readBuffer, messages, &amp;_readMessages);</div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;    <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;}</div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160; </div>
<div class="line"><a name="l02264"></a><span class="lineno"><a class="line" href="classCanBusResources.html#a426cb1e9b09f03d70b8dbccb2346edb8"> 2264</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classCanBusResources.html#a426cb1e9b09f03d70b8dbccb2346edb8">CanBusResources::startPacket</a> ()</div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;{</div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;    _writeMessages = 0;</div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;}</div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160; </div>
<div class="line"><a name="l02270"></a><span class="lineno"><a class="line" href="classCanBusResources.html#a1049ab4df32ee910f61efbe130ba9b41"> 2270</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classCanBusResources.html#a1049ab4df32ee910f61efbe130ba9b41">CanBusResources::addMessage</a> (<span class="keywordtype">int</span> msg_id, <span class="keywordtype">int</span> joint)</div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;{</div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keywordtype">id</span> = _destinations[joint/2] &amp; 0x0f;</div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>;</div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;    <a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>=msg_id;</div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;    <span class="keywordflow">if</span> ((joint % 2) == 1)</div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;        <a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a> |= 0x80;</div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160; </div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;    _writeBuffer[_writeMessages].setId(<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;    _writeBuffer[_writeMessages].setLen(1);</div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;    _writeBuffer[_writeMessages].getData()[0]=<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>;</div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;    _writeMessages ++;</div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160; </div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;}</div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160; </div>
<div class="line"><a name="l02286"></a><span class="lineno"><a class="line" href="classCanBusResources.html#af61dfa2cf9531a778f927a51b0254d6f"> 2286</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classCanBusResources.html#a1049ab4df32ee910f61efbe130ba9b41">CanBusResources::addMessage</a> (<span class="keywordtype">int</span> <span class="keywordtype">id</span>, <span class="keywordtype">int</span> joint, <span class="keywordtype">int</span> msg_id)</div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;{</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>=_writeBuffer[_writeMessages].getData();</div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> destId= _destinations[joint/2] &amp; 0x0f;</div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160; </div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;    <a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>[0] = msg_id;</div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;    <span class="keywordflow">if</span> ((joint % 2) == 1)</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;        <a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>[0] |= 0x80;</div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160; </div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;    _writeBuffer[_writeMessages].setId(destId);</div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;    _writeBuffer[_writeMessages].setLen(1);</div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;    _writeMessages ++;</div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160; </div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;    <a class="code" href="structCanRequest.html">CanRequest</a> rq;</div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;    rq.<a class="code" href="structCanRequest.html#a1c10ddcc136851e57382d0377074ef56">threadId</a>=id;</div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;    rq.<a class="code" href="structCanRequest.html#aa1f81c8b647dd2e97978188cb3adda8e">joint</a>=joint;</div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;    rq.<a class="code" href="structCanRequest.html#a72199d25f1e5e66a6992f09fe9e00107">msg</a>=msg_id;</div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;    requestsQueue-&gt;append(rq);</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160; </div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;}</div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160; </div>
<div class="line"><a name="l02308"></a><span class="lineno"><a class="line" href="classCanBusResources.html#a36f76a689330cd6163c3f13bb8ac28d9"> 2308</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classCanBusResources.html#a36f76a689330cd6163c3f13bb8ac28d9">CanBusResources::writePacket</a> ()</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;{</div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;    <span class="keywordflow">if</span> (_writeMessages &lt; 1)</div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160; </div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> sent=0;</div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160; </div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;    <a class="code" href="canControlUtils_8h.html#aed353ce9c28af351b98138a0a3cee032">DEBUG_FUNC</a>(<span class="stringliteral">&quot;Sending buffer:\n&quot;</span>);</div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> k=0; k&lt;_writeMessages;k++)</div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;    {</div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;        <a class="code" href="CanBusMotionControl_8cpp.html#acbf0048ef8c7caa8bdd9defc76fb0def">PRINT_CAN_MESSAGE</a>(<span class="stringliteral">&quot;El:&quot;</span>, _writeBuffer[k]);</div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;    }</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160; </div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;    <span class="keywordtype">bool</span> res;</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;    res=iCanBus-&gt;canWrite(_writeBuffer, _writeMessages, &amp;sent);</div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;    <span class="keywordflow">if</span> (!res)</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;    {</div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;    }</div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160; </div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;}</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160; </div>
<div class="line"><a name="l02331"></a><span class="lineno"><a class="line" href="classCanBusResources.html#a5578569ff3a6f15dbb1ed47428bd2c24"> 2331</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classCanBusResources.html#a5578569ff3a6f15dbb1ed47428bd2c24">CanBusResources::printMessage</a> (<span class="keyword">const</span> CanMessage&amp; m)</div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;{</div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> id;</div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> len;</div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>=m.getData();</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160; </div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;    <span class="keywordtype">id</span>=m.getId();</div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;    len=m.getLen();</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160; </div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160; </div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;    <span class="keywordtype">int</span> ret = sprintf (_printBuffer, <span class="stringliteral">&quot;class: %2d s: %2x d: %2x c: %1d msg: %3d (%x) &quot;</span>,</div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;        (<span class="keywordtype">id</span> &amp; 0x700) &gt;&gt; 8,</div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;        (<span class="keywordtype">id</span> &amp; 0xf0) &gt;&gt; 4, </div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;        (<span class="keywordtype">id</span> &amp; 0x0f), </div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;        ((<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>[0] &amp; 0x80)==0)?0:1,</div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;        (<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>[0] &amp; 0x7f),</div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;        (<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>[0] &amp; 0x7f));</div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160; </div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;    <span class="keywordflow">if</span> (len &gt; 1)</div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;    {</div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;        ret += sprintf (_printBuffer+ret, <span class="stringliteral">&quot;x: &quot;</span>); </div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;    }</div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160; </div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j;</div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;    <span class="keywordflow">for</span> (j = 1; j &lt; len; j++)</div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;    {</div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;        ret += sprintf (_printBuffer+ret, <span class="stringliteral">&quot;%x &quot;</span>, <a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>[j]);</div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;    }</div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160; </div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;    printf(<span class="stringliteral">&quot;%s&quot;</span>, _printBuffer);</div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160; </div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;}</div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160; </div>
<div class="line"><a name="l02365"></a><span class="lineno"><a class="line" href="classCanBusResources.html#a6607e1a396c1573011dcad00055ba899"> 2365</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classCanBusResources.html#a6607e1a396c1573011dcad00055ba899">CanBusResources::dumpBuffers</a> (<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;{</div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j;</div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160; </div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;    yDebug(<span class="stringliteral">&quot;CAN: write buffer\n&quot;</span>);</div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;    <span class="keywordflow">for</span> (j = 0; j &lt; _writeMessages; j++)</div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;        printMessage (_writeBuffer[j]);</div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160; </div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;    yDebug(<span class="stringliteral">&quot;CAN: reply buffer\n&quot;</span>);</div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;    <span class="keywordflow">for</span> (j = 0; j &lt; _writeMessages; j++)</div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;        printMessage (_replyBuffer[j]);</div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160; </div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;    yDebug(<span class="stringliteral">&quot;CAN: echo buffer\n&quot;</span>);</div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;    <span class="keywordflow">for</span> (j = 0; j &lt; _echoMessages; j++)</div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;        printMessage (_echoBuffer[j]);</div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160; </div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;    yDebug(<span class="stringliteral">&quot;CAN: read buffer\n&quot;</span>);</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;    <span class="keywordflow">for</span> (j = 0; j &lt; _readMessages; j++)</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;        printMessage (_readBuffer[j]);</div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;    yDebug(<span class="stringliteral">&quot;CAN: -------------\n&quot;</span>);</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160; </div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;}</div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160; </div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160; </div>
<div class="line"><a name="l02391"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a3e7d3d9d8d1a2e55d8cd336d2a746ead"> 2391</a></span>&#160;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a3e7d3d9d8d1a2e55d8cd336d2a746ead">CanBusMotionControl::CanBusMotionControl</a>() :</div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;PeriodicThread(0.01),</div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;ImplementPositionControl(this),</div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;ImplementVelocityControl(this),</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;ImplementPidControl(this),</div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;ImplementEncodersTimed(this),</div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;ImplementControlCalibration(this),</div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;ImplementAmplifierControl(this),</div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;ImplementControlLimits(this),</div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;ImplementTorqueControl(this),</div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;ImplementImpedanceControl(this),</div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;ImplementControlMode(this),</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;ImplementPositionDirect(this),</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;ImplementInteractionMode(this),</div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;ImplementMotorEncoders(this),</div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;ImplementMotor(this),</div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;ImplementRemoteVariables(this),</div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;ImplementAxisInfo(this),</div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;ImplementPWMControl(this),</div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;ImplementCurrentControl(this)</div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;{</div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a> = (<span class="keywordtype">void</span> *) <span class="keyword">new</span> <a class="code" href="classCanBusResources.html">CanBusResources</a>;</div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;    ACE_ASSERT (<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a> != NULL);</div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#adfc3233779afe865fd7c3eb8b527273b">_opened</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a45a4d8f2668d10afc8b28314f9c8551a">_axisTorqueHelper</a> = 0;</div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a29de21188120dab9597097265fa5d031">_firmwareVersionHelper</a> = 0;</div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a39d04a47c66340a06d79edfc52f4d93d">_speedEstimationHelper</a> = 0;</div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aec47204c6542b23914f2e0ac120fc0ca">_MCtorqueControlEnabled</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a703140d587d4c5eb582e35005df73057">_ref_command_positions</a> = 0;</div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#abc6148aa0f69586ad3ddbfea4fcd9771">_ref_positions</a> = 0;</div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a4c86489f94cca2de72da41bc2664b551">_max_vel_jnt_cmd</a> = 0;</div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#acb562cd6f8c00ca3e0bbb1f716093131">_ref_command_speeds</a> = 0;</div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa892a2a25975c1b8d9fc3ec03522cfa1">_ref_speeds</a> = 0;</div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ae7e725d08c542ce4a21f23d834984379">_ref_accs</a>=0;</div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#abe9ae05191a1daf39f64829e7704bece">_ref_torques</a>=0;</div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a9fdde85f4719086043eb7132a26a6eb6">_last_position_move_time</a> = 0;</div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;    mServerLogger = NULL;</div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;}</div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160; </div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160; </div>
<div class="line"><a name="l02431"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a2cd0b63638e5344e6c39772a0f61a7e4"> 2431</a></span>&#160;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a2cd0b63638e5344e6c39772a0f61a7e4">CanBusMotionControl::~CanBusMotionControl</a> ()</div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;{</div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;    checkAndDestroy&lt;double&gt;(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a703140d587d4c5eb582e35005df73057">_ref_command_positions</a>);</div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;    checkAndDestroy&lt;double&gt;(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#acb562cd6f8c00ca3e0bbb1f716093131">_ref_command_speeds</a>);</div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;    checkAndDestroy&lt;double&gt;(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#abc6148aa0f69586ad3ddbfea4fcd9771">_ref_positions</a>);</div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;    checkAndDestroy&lt;double&gt;(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a4c86489f94cca2de72da41bc2664b551">_max_vel_jnt_cmd</a>);</div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;    checkAndDestroy&lt;double&gt;(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa892a2a25975c1b8d9fc3ec03522cfa1">_ref_speeds</a>);</div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;    checkAndDestroy&lt;double&gt;(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ae7e725d08c542ce4a21f23d834984379">_ref_accs</a>);</div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;    checkAndDestroy&lt;double&gt;(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#abe9ae05191a1daf39f64829e7704bece">_ref_torques</a>);</div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;    checkAndDestroy&lt;double&gt;(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a9fdde85f4719086043eb7132a26a6eb6">_last_position_move_time</a>);</div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160; </div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a> != NULL)</div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;        <span class="keyword">delete</span> (<a class="code" href="classCanBusResources.html">CanBusResources</a> *)<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>;</div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a> = NULL;</div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;}</div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160; </div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a9366f5c9884b85cc8e333fc329d71383">CanBusMotionControl::open</a> (Searchable &amp;config)</div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;{</div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;    yTrace(<span class="stringliteral">&quot;Opening CanBusMotionControl Control\n&quot;</span>);</div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;    std::string dbg_string = config.toString().c_str();</div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;    </div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; res = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a> (<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html">CanBusMotionControlParameters</a> <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>;</div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;    <span class="keywordtype">bool</span> ret=<span class="keyword">false</span>;</div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.lock();</div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160; </div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>.fromConfig(config))</div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;    {</div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.unlock();</div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;        yError() &lt;&lt; <span class="stringliteral">&quot;One or more errors found while parsing device configuration&quot;</span>;</div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;    }</div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160; </div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;    std::string str=config.toString().c_str();</div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;    Property prop;</div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;    prop.fromString(str.c_str());</div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;    networkName=config.find(<span class="stringliteral">&quot;NetworkId&quot;</span>).asString();</div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;    canDevName=config.find(<span class="stringliteral">&quot;canbusdevice&quot;</span>).asString(); <span class="comment">//for backward compatibility</span></div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;    <span class="keywordflow">if</span> (canDevName==<span class="stringliteral">&quot;&quot;</span>) canDevName=config.findGroup(<span class="stringliteral">&quot;CAN&quot;</span>).find(<span class="stringliteral">&quot;canbusdevice&quot;</span>).asString();</div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;    <span class="keywordflow">if</span>(canDevName==<span class="stringliteral">&quot;&quot;</span>) { yError() &lt;&lt; <span class="stringliteral">&quot;cannot find parameter &#39;canbusdevice&#39;\n&quot;</span>; <span class="keywordflow">return</span> <span class="keyword">false</span>;}</div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;    prop.unput(<span class="stringliteral">&quot;device&quot;</span>);</div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;    prop.unput(<span class="stringliteral">&quot;subdevice&quot;</span>);</div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;    prop.put(<span class="stringliteral">&quot;device&quot;</span>, canDevName.c_str());</div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;    std::string canPhysDevName = config.find(<span class="stringliteral">&quot;physDevice&quot;</span>).asString(); <span class="comment">//for backward compatibility</span></div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;    <span class="keywordflow">if</span> (canPhysDevName==<span class="stringliteral">&quot;&quot;</span>) canPhysDevName = config.findGroup(<span class="stringliteral">&quot;CAN&quot;</span>).find(<span class="stringliteral">&quot;physDevice&quot;</span>).asString();</div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;    prop.put(<span class="stringliteral">&quot;physDevice&quot;</span>,canPhysDevName.c_str());</div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;    prop.put(<span class="stringliteral">&quot;canDeviceNum&quot;</span>, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._networkN);</div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;    prop.put(<span class="stringliteral">&quot;canTxTimeout&quot;</span>, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._txTimeout);</div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;    prop.put(<span class="stringliteral">&quot;canRxTimeout&quot;</span>, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._rxTimeout);</div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._txQueueSize!=-1)</div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;        prop.put(<span class="stringliteral">&quot;canTxQueueSize&quot;</span>, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._txQueueSize);</div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._rxQueueSize!=-1)</div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;        prop.put(<span class="stringliteral">&quot;canRxQueueSize&quot;</span>, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._rxQueueSize);</div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160; </div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;    ret=res.<a class="code" href="classCanBusResources.html#a4b48266bb10663a63311c6872d708e8e">initialize</a>(prop);</div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160; </div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;    <span class="keywordflow">if</span> (!ret)</div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;    {</div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.unlock();</div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;        yError() &lt;&lt; <span class="stringliteral">&quot;Unable to uninitialize CAN driver&quot;</span>;</div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;    }</div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160; </div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;    <span class="comment">// used for printing debug messages.</span></div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aadc14355889d5bee0c5c70de24f2caf1">_filter</a> = -1;</div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa0a2b4f0b4ccbaeb30f396c1df211e9e">_writerequested</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a553bb4c4e517a5ad8776bad694fa5d88">_noreply</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160; </div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;    <span class="keywordtype">double</span> *tmpZeros = <span class="keyword">new</span> <span class="keywordtype">double</span> [<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._njoints];</div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;    <span class="keywordtype">double</span> *tmpOnes  = <span class="keyword">new</span> <span class="keywordtype">double</span> [<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._njoints];</div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt; <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._njoints; i++)</div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;    {</div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;        tmpZeros[i]=0.0;</div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;        tmpOnes[i]=1.0;</div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;    }</div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160; </div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;    ImplementPositionControl::initialize(<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._njoints, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._axisMap, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._angleToEncoder, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._zeros);</div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;    ImplementVelocityControl::initialize(<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._njoints, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._axisMap, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._angleToEncoder, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._zeros);</div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160; </div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;<span class="comment">//    ImplementPositionControl&lt;CanBusMotionControl, IPositionControl&gt;::</span></div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;<span class="comment">//        initialize(p._njoints, p._axisMap, p._angleToEncoder, p._zeros);</span></div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;<span class="comment">//    ImplementVelocityControl&lt;CanBusMotionControl, IVelocityControl&gt;::</span></div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;<span class="comment">//        initialize(p._njoints, p._axisMap, p._angleToEncoder, p._zeros);</span></div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160; </div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;    ImplementPidControl::initialize(<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._njoints, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._axisMap, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._angleToEncoder, NULL, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._newtonsToSensor, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._ampsToSensor, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._dutycycleToPwm);</div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160; </div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;    ImplementEncodersTimed::initialize(<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._njoints, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._axisMap, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._angleToEncoder, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._zeros);</div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160; </div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;    ImplementMotorEncoders::initialize(<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._njoints, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._axisMap, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._rotToEncoder, tmpZeros);</div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160; </div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;    ImplementMotor::initialize(<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._njoints, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._axisMap);</div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160; </div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;    ImplementControlCalibration::initialize(<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._njoints, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._axisMap, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._angleToEncoder, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._zeros);</div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160; </div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;    ImplementAmplifierControl::initialize(<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._njoints, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._axisMap, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._angleToEncoder, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._zeros);</div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160; </div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;    ImplementControlLimits::initialize(<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._njoints, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._axisMap, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._angleToEncoder, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._zeros);</div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160; </div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;    ImplementControlMode::initialize(<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._njoints, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._axisMap);</div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;    ImplementTorqueControl::initialize(<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._njoints, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._axisMap, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._angleToEncoder, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._zeros, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._newtonsToSensor, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._ampsToSensor, <span class="keyword">nullptr</span>,<span class="keyword">nullptr</span>,<span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a45a4d8f2668d10afc8b28314f9c8551a">_axisTorqueHelper</a> = <span class="keyword">new</span> <a class="code" href="classaxisTorqueHelper.html">axisTorqueHelper</a>(<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._njoints,<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._torqueSensorId,<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._torqueSensorChan, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._maxTorque, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._newtonsToSensor);</div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;    </div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;    <span class="keywordflow">if</span>      (<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._torqueControlUnits==<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a437871bdfe1d8fefa2a57c4ef0744260a1a41a461e18396fe65451fb53b83ccb2">CanBusMotionControlParameters::MACHINE_UNITS</a>) {}</div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._torqueControlUnits==<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a437871bdfe1d8fefa2a57c4ef0744260a62ff5f18df2ada5f080f9d73150c541f">CanBusMotionControlParameters::METRIC_UNITS</a>)  {}</div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;    <span class="keywordflow">else</span>    {yError() &lt;&lt; <span class="stringliteral">&quot;Invalid _torqueControlUnits value: %d&quot;</span> &lt;&lt; <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._torqueControlUnits; <span class="keywordflow">return</span> <span class="keyword">false</span>;}</div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;    </div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a686ec747cea2d0b6d8733d01763cff54">_axisImpedanceHelper</a> = <span class="keyword">new</span> <a class="code" href="classaxisImpedanceHelper.html">axisImpedanceHelper</a>(<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._njoints, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._impedance_limits);</div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;    ImplementImpedanceControl::initialize(<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._njoints, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._axisMap, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._angleToEncoder, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._zeros, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._newtonsToSensor);</div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;    ImplementPositionDirect::initialize(<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._njoints, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._axisMap, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._angleToEncoder, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._zeros);</div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;    ImplementInteractionMode::initialize(<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._njoints, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._axisMap);</div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a28a5ef0d465c731987826722346ff1a6">_axisPositionDirectHelper</a> = <span class="keyword">new</span> <a class="code" href="classaxisPositionDirectHelper.html">axisPositionDirectHelper</a>(<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._njoints, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._axisMap, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._angleToEncoder, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._maxStep);</div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;    ImplementAxisInfo::initialize(<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._njoints, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._axisMap);</div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;    ImplementRemoteVariables::initialize(<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._njoints, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._axisMap);</div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;    ImplementCurrentControl::initialize(<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._njoints, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._axisMap, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._ampsToSensor);</div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;    ImplementPWMControl::initialize(<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._njoints, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._axisMap, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._dutycycleToPwm);</div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160; </div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;    <span class="keyword">delete</span> [] tmpZeros; tmpZeros=0;</div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;    <span class="keyword">delete</span> [] tmpOnes;  tmpOnes=0;</div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160; </div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;    <span class="comment">// temporary variables used by the ddriver.</span></div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a703140d587d4c5eb582e35005df73057">_ref_command_positions</a> = allocAndCheck&lt;double&gt;(<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._njoints);</div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#abc6148aa0f69586ad3ddbfea4fcd9771">_ref_positions</a> = allocAndCheck&lt;double&gt;(<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._njoints);</div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a4c86489f94cca2de72da41bc2664b551">_max_vel_jnt_cmd</a> = allocAndCheck&lt;double&gt;(<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._njoints);</div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#acb562cd6f8c00ca3e0bbb1f716093131">_ref_command_speeds</a> = allocAndCheck&lt;double&gt;(<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._njoints);</div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa892a2a25975c1b8d9fc3ec03522cfa1">_ref_speeds</a> = allocAndCheck&lt;double&gt;(<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._njoints);</div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ae7e725d08c542ce4a21f23d834984379">_ref_accs</a> = allocAndCheck&lt;double&gt;(<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._njoints);</div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#abe9ae05191a1daf39f64829e7704bece">_ref_torques</a> = allocAndCheck&lt;double&gt;(<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._njoints);</div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a9fdde85f4719086043eb7132a26a6eb6">_last_position_move_time</a>=allocAndCheck&lt;double&gt;(<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._njoints);</div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;    memset(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a9fdde85f4719086043eb7132a26a6eb6">_last_position_move_time</a>, 0, <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>)*<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._njoints);</div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160; </div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i&lt;<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._njoints; i++)</div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;    {</div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a703140d587d4c5eb582e35005df73057">_ref_command_positions</a>[i] = NAN;</div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa892a2a25975c1b8d9fc3ec03522cfa1">_ref_speeds</a>[i] = 0.0;</div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#acb562cd6f8c00ca3e0bbb1f716093131">_ref_command_speeds</a>[i] = 0.0;</div>
<div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;    }</div>
<div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160; </div>
<div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.unlock();</div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160; </div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;    <span class="comment">// default initialization for this device driver.</span></div>
<div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;    yarp::os::Time::delay(0.005);</div>
<div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;    setPids(VOCAB_PIDTYPE_POSITION, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._pids);</div>
<div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;    </div>
<div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._torqueControlEnabled==<span class="keyword">true</span>)</div>
<div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;    {</div>
<div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aec47204c6542b23914f2e0ac120fc0ca">_MCtorqueControlEnabled</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;        yarp::os::Time::delay(0.005);</div>
<div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;        setPids(VOCAB_PIDTYPE_TORQUE, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._tpids);</div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;        </div>
<div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._njoints; i++)</div>
<div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;        {</div>
<div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;            MotorTorqueParameters ps;</div>
<div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;            ps.bemf = <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._bemfGain[i];</div>
<div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;            this-&gt;setMotorTorqueParams(i,ps);</div>
<div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160; </div>
<div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;            yarp::os::Time::delay(0.002);</div>
<div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;            this-&gt;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#abc0ee2abe55ebb081094106e63db584c">setFilterTypeRaw</a>(i,<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._filterType[i]);</div>
<div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;            yarp::os::Time::delay(0.002);</div>
<div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;        }</div>
<div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;    }</div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;    </div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;    <span class="comment">//set the source of the torque measurments to the boards</span></div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;<span class="preprocessor">    #if 0</span></div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j&lt;<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._njoints; j++)</div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;    {</div>
<div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;        yarp::os::Time::delay(0.001);</div>
<div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;        this-&gt;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a2cf4b19d42711422f3682923d31ee57f">setTorqueSource</a>(j,<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._torqueSensorId[j],<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._torqueSensorChan[j]);</div>
<div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;    }</div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160; </div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;    <span class="comment">// intial value !=0 for velocity reference during trajectory generation</span></div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j&lt;<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._njoints; j++)</div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;    {</div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;        yarp::os::Time::delay(0.002);</div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;        setRefSpeed(j, 10.0);</div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;    }</div>
<div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160; </div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;    <span class="comment">// impedance parameters</span></div>
<div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j&lt;<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._njoints; j++)</div>
<div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;    {</div>
<div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;        yarp::os::Time::delay(0.001);</div>
<div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;        setImpedance(j,<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._impedance_params[j].stiffness,<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._impedance_params[j].damping);</div>
<div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;    }</div>
<div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160; </div>
<div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;    <span class="keywordflow">for</span>(i = 0; i &lt; <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._njoints; i++)</div>
<div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;    {</div>
<div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;        yarp::os::Time::delay(0.001);</div>
<div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a8ba29de2fc1d9e4bd2057f806da54001">setBCastMessages</a>(i, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._broadcast_mask[i]);</div>
<div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;    }</div>
<div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160; </div>
<div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;    <span class="comment">// set limits, on encoders and max current</span></div>
<div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;    <span class="keywordflow">for</span>(i = 0; i &lt; <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._njoints; i++)</div>
<div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;    {</div>
<div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;        yarp::os::Time::delay(0.001);</div>
<div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;        setLimits(i, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._limitsMin[i], <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._limitsMax[i]);</div>
<div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;        yarp::os::Time::delay(0.001);</div>
<div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;        setVelLimits(i, 0, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._maxJntCmdVelocity[i]);</div>
<div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;        yarp::os::Time::delay(0.001);</div>
<div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;        setMaxCurrent(i, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._currentLimits[i]);</div>
<div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;    }</div>
<div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160; </div>
<div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;    <span class="comment">// set limits, on encoders and max current</span></div>
<div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;    <span class="keywordflow">for</span>(i = 0; i &lt; <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._njoints; i++)</div>
<div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;    {   </div>
<div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;        yarp::os::Time::delay(0.001);</div>
<div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#abbc6d69a556c4c7dce9cb49249f122ed">setVelocityShiftRaw</a>(i, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._velocityShifts[i]);</div>
<div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;        yarp::os::Time::delay(0.001);</div>
<div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ac18e9c911763b7adb7c64639bb4c8b39">setVelocityTimeoutRaw</a>(i, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._velocityTimeout[i]);</div>
<div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;        yarp::os::Time::delay(0.001);</div>
<div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;        setPWMLimit(i, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._motorPwmLimits[i]);</div>
<div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;    }</div>
<div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160; </div>
<div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;    <span class="comment">// set parameters for speed/acceleration estimation</span></div>
<div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;    <span class="keywordflow">for</span>(i = 0; i &lt; <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._njoints; i++)</div>
<div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;    {</div>
<div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;        yarp::os::Time::delay(0.001);</div>
<div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ac71b1f64e2f1192cf1e60f01117806b0">setSpeedEstimatorShiftRaw</a>(i,<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._estim_params[i].jnt_Vel_estimator_shift,</div>
<div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;                                    <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._estim_params[i].jnt_Acc_estimator_shift,</div>
<div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;                                    <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._estim_params[i].mot_Vel_estimator_shift,</div>
<div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;                                    <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._estim_params[i].mot_Acc_estimator_shift);</div>
<div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;    }</div>
<div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a39d04a47c66340a06d79edfc52f4d93d">_speedEstimationHelper</a> = <span class="keyword">new</span> <a class="code" href="classspeedEstimationHelper.html">speedEstimationHelper</a>(<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._njoints, <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._estim_params);</div>
<div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;    </div>
<div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;    <span class="comment">// disable the controller, cards will start with the pid controller &amp; pwm off</span></div>
<div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._njoints; i++)</div>
<div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;    {</div>
<div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;        yarp::os::Time::delay(0.001);</div>
<div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;        setControlMode(i, VOCAB_CM_IDLE);</div>
<div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;    }</div>
<div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;    <span class="keyword">const</span> Bottle &amp;analogList=config.findGroup(<span class="stringliteral">&quot;analog&quot;</span>).tail();</div>
<div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;    <span class="comment">//    if (analogList!=0)</span></div>
<div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;        <span class="keywordflow">if</span> (analogList.size()&gt;0)</div>
<div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;        {</div>
<div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;            <span class="keywordflow">for</span>(<span class="keywordtype">int</span> k=0;k&lt;analogList.size();k++)</div>
<div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;            {</div>
<div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;                std::string analogId=analogList.get(k).asString().c_str();</div>
<div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160; </div>
<div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;                <a class="code" href="classTBR__AnalogSensor.html">TBR_AnalogSensor</a> *as=instantiateAnalog(config, analogId);</div>
<div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;                <span class="keywordflow">if</span> (as!=0)</div>
<div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;                    {</div>
<div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;                        analogSensors.push_back(as);</div>
<div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;                    }</div>
<div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;            }</div>
<div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160; </div>
<div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;        }</div>
<div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160; </div>
<div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a0de6c591abb8d8340378037eccf81951">threadPool</a> = <span class="keyword">new</span> <a class="code" href="classThreadPool2.html">ThreadPool2</a>(res.<a class="code" href="classCanBusResources.html#ae56286106947372dfd8763c30f414214">iBufferFactory</a>);</div>
<div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160; </div>
<div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;    PeriodicThread::setPeriod((<span class="keywordtype">double</span>)<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._polling_interval/1000.0);</div>
<div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;    PeriodicThread::start();</div>
<div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160; </div>
<div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;    <span class="comment">//get firmware versions</span></div>
<div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;    <a class="code" href="structfirmware__info.html">firmware_info</a>* <a class="code" href="namespaceiCub_1_1action_1_1log.html#a4ba5ea132464d0ea49d618130163c769a432470a52cfded222c35744229d1069e">info</a> = <span class="keyword">new</span> <a class="code" href="structfirmware__info.html">firmware_info</a>[<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._njoints];</div>
<div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;    <a class="code" href="structcan__protocol__info.html">can_protocol_info</a> icub_interface_protocol;</div>
<div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;    icub_interface_protocol.<a class="code" href="structcan__protocol__info.html#a128ed1b70a1b00817997462b084084e4">major</a>=<a class="code" href="messages_8h.html#a7dfd6f43d4b01f7caf21fb9e7e1d9d92">CAN_PROTOCOL_MAJOR</a>;</div>
<div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;    icub_interface_protocol.<a class="code" href="structcan__protocol__info.html#acb049abee5fd6b84ad261b85fb675ced">minor</a>=<a class="code" href="messages_8h.html#aa4e0fb76e6db031b8d60d1fa69ce935b">CAN_PROTOCOL_MINOR</a>;</div>
<div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j&lt;<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._njoints; j++) </div>
<div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;    {</div>
<div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;        yarp::os::Time::delay(0.001);</div>
<div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;        <span class="keywordtype">bool</span> b=<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa21418ca3d7f90d67e06b17fbf3b77f3">getFirmwareVersionRaw</a>(j,icub_interface_protocol,&amp;(info[j]));</div>
<div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;        <span class="keywordflow">if</span> (b==<span class="keyword">false</span>) yError() &lt;&lt; <span class="stringliteral">&quot;Unable to read firmware version&quot;</span>;</div>
<div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;    }</div>
<div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a29de21188120dab9597097265fa5d031">_firmwareVersionHelper</a> = <span class="keyword">new</span> <a class="code" href="classfirmwareVersionHelper.html">firmwareVersionHelper</a>(<a class="code" href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>._njoints, info, icub_interface_protocol);</div>
<div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a29de21188120dab9597097265fa5d031">_firmwareVersionHelper</a>-&gt;<a class="code" href="classfirmwareVersionHelper.html#a297b80b8170a09fa0e7246b1cddfcd03">printFirmwareVersions</a>();</div>
<div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160; </div>
<div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;<span class="preprocessor">#ifdef ICUB_CANPROTOCOL_STRICT</span></div>
<div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a29de21188120dab9597097265fa5d031">_firmwareVersionHelper</a>-&gt;<a class="code" href="classfirmwareVersionHelper.html#a99c662dcdfb92b125b54d5bcf039182d">checkFirmwareVersions</a>())</div>
<div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;    {</div>
<div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;        PeriodicThread::stop();</div>
<div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#adfc3233779afe865fd7c3eb8b527273b">_opened</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;        yError() &lt;&lt; <span class="stringliteral">&quot;checkFirmwareVersions() failed. CanBusMotionControl::open returning false,&quot;</span>;</div>
<div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;    }</div>
<div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;    yWarning(<span class="stringliteral">&quot;*********************************************************************************\n&quot;</span>);</div>
<div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;    yWarning(<span class="stringliteral">&quot;**** WARNING: ICUB_CANPROTOCOL_STRICT not defined, skipping firmware check! *****\n&quot;</span>);</div>
<div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;    yWarning(<span class="stringliteral">&quot;*********************************************************************************\n&quot;</span>);</div>
<div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160; </div>
<div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#adfc3233779afe865fd7c3eb8b527273b">_opened</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;    yDebug() &lt;&lt; <span class="stringliteral">&quot;CanBusMotionControl::open returned true\n&quot;</span>;</div>
<div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;}</div>
<div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160; </div>
<div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;<span class="keywordtype">bool</span> CanBusMotionControl::readFullScaleAnalog(<span class="keywordtype">int</span> analog_address, <span class="keywordtype">int</span> ch, <span class="keywordtype">double</span>* fullScale)</div>
<div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;{</div>
<div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; res = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a> (<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;    <span class="keywordtype">int</span> destId=0x0200|analog_address;</div>
<div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;    *fullScale=1<a class="code" href="compute__ekf__fast_8m.html#a08a4415e9d594ff960030b921d42b91e">e</a>-20;</div>
<div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0;</div>
<div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;    res.<a class="code" href="classCanBusResources.html#a426cb1e9b09f03d70b8dbccb2346edb8">startPacket</a>();</div>
<div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;    res.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].setId(destId);</div>
<div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;    res.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()[0]=0x18;</div>
<div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;    res.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()[1]=ch;</div>
<div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;    res.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].setLen(2);</div>
<div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;    res.<a class="code" href="classCanBusResources.html#a781a7267d7eab2315d49720c1d673f29">_writeMessages</a>++;</div>
<div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;    res.<a class="code" href="classCanBusResources.html#a36f76a689330cd6163c3f13bb8ac28d9">writePacket</a>();</div>
<div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;                </div>
<div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;    <span class="keywordtype">long</span> <span class="keywordtype">int</span> timeout=0;</div>
<div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;    <span class="keywordtype">bool</span> full_scale_read=<span class="keyword">false</span>;</div>
<div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;    <span class="keywordflow">do</span> </div>
<div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;    {</div>
<div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;        res.<a class="code" href="classCanBusResources.html#ae31dbfd6d9458c803d5976bf80d2df29">read</a>();</div>
<div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;        <span class="keywordflow">for</span> (i=0; i&lt;res.<a class="code" href="classCanBusResources.html#a6785040f8650d0ecfb945e295808a377">_readMessages</a>; i++)</div>
<div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;        {</div>
<div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;            CanMessage&amp; m = res.<a class="code" href="classCanBusResources.html#a1eed1867edaefc8303954e7b5d41446f">_readBuffer</a>[i];</div>
<div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> currId=m.getId();</div>
<div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;            <span class="keywordflow">if</span> (currId==(0x0200|(analog_address&lt;&lt;4)))</div>
<div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;                <span class="keywordflow">if</span> (m.getLen()==4 &amp;&amp;</div>
<div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;                    m.getData()[0]==0x18 &amp;&amp;</div>
<div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;                    m.getData()[1]==ch)</div>
<div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;                    {</div>
<div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;                        *fullScale=m.getData()[2]&lt;&lt;8 | m.getData()[3];</div>
<div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;                        full_scale_read=<span class="keyword">true</span>;</div>
<div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;                    }</div>
<div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;        }</div>
<div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;        yarp::os::Time::delay(0.002);</div>
<div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;        timeout++;</div>
<div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;    }</div>
<div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;    <span class="keywordflow">while</span>(timeout&lt;32 &amp;&amp; full_scale_read==<span class="keyword">false</span>);</div>
<div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160; </div>
<div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;    <span class="keywordflow">if</span> (full_scale_read==<span class="keyword">false</span>) </div>
<div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;        {                            </div>
<div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;            yError() &lt;&lt; <span class="stringliteral">&quot;Trying to get fullscale data from sensor: no answer received or message lost (ch:&quot;</span> &lt;&lt; ch &lt;&lt;<span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;        }</div>
<div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160; </div>
<div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;}</div>
<div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160; </div>
<div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;<a class="code" href="classTBR__AnalogSensor.html">TBR_AnalogSensor</a> *CanBusMotionControl::instantiateAnalog(yarp::os::Searchable&amp; config, std::string deviceid)</div>
<div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;{</div>
<div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; res = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a> (<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;    <a class="code" href="classTBR__AnalogSensor.html">TBR_AnalogSensor</a> *analogSensor=0;</div>
<div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160; </div>
<div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;    <span class="comment">//std::string groupName=std::string(&quot;ANALOG-&quot;);</span></div>
<div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;    <span class="comment">//groupName+=deviceid;</span></div>
<div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;    <span class="comment">//Bottle analogConfig=config.findGroup(groupName.c_str());</span></div>
<div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;    Bottle &amp;analogConfig=config.findGroup(deviceid.c_str());</div>
<div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;    <span class="keywordflow">if</span> (analogConfig.size()&gt;0)</div>
<div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;    {</div>
<div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;        yDebug(<span class="stringliteral">&quot;Initializing analog device %s\n&quot;</span>, deviceid.c_str());</div>
<div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;        </div>
<div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;        analogSensor=<span class="keyword">new</span> <a class="code" href="classTBR__AnalogSensor.html">TBR_AnalogSensor</a>;</div>
<div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;        analogSensor-&gt;<a class="code" href="classTBR__AnalogSensor.html#aafc42f1ec580545db8e02bdd91a2e985">setDeviceId</a>(deviceid);</div>
<div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160; </div>
<div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;        <span class="keywordtype">bool</span> isVirtualSensor=<span class="keyword">false</span>;</div>
<div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;        <span class="keywordtype">char</span> analogId=analogConfig.find(<span class="stringliteral">&quot;CanAddress&quot;</span>).asInt32();</div>
<div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;        <span class="keywordtype">char</span> analogFormat=analogConfig.find(<span class="stringliteral">&quot;Format&quot;</span>).asInt32();</div>
<div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;        <span class="keywordtype">int</span> analogChannels=analogConfig.find(<span class="stringliteral">&quot;Channels&quot;</span>).asInt32();</div>
<div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;        <span class="keywordtype">int</span> analogCalibration=analogConfig.find(<span class="stringliteral">&quot;UseCalibration&quot;</span>).asInt32();</div>
<div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;        <span class="comment">//int SensorFullScale=analogConfig.find(&quot;FullScale&quot;).asInt32();</span></div>
<div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160; </div>
<div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;        <span class="keywordflow">if</span> (analogConfig.check(<span class="stringliteral">&quot;PortName&quot;</span>))</div>
<div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;        {</div>
<div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;            isVirtualSensor = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;            std::string virtualPortName = analogConfig.find(<span class="stringliteral">&quot;PortName&quot;</span>).asString();</div>
<div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;            <span class="keywordtype">bool</span>   canEchoEnabled = analogConfig.find(<span class="stringliteral">&quot;CanEcho&quot;</span>).asInt32();</div>
<div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;            analogSensor-&gt;<a class="code" href="classTBR__AnalogSensor.html#a83c8ffd97189fd7bb16eb8010a71a3d5">backDoor</a> = <span class="keyword">new</span> <a class="code" href="classTBR__CanBackDoor.html">TBR_CanBackDoor</a>();</div>
<div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;            analogSensor-&gt;<a class="code" href="classTBR__AnalogSensor.html#a83c8ffd97189fd7bb16eb8010a71a3d5">backDoor</a>-&gt;<a class="code" href="classTBR__CanBackDoor.html#afd309ca183ade66c467261a0814b84d8">setUp</a>(&amp;res, &amp;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>, canEchoEnabled, analogSensor);</div>
<div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;            std::string rn(<span class="stringliteral">&quot;/&quot;</span>);</div>
<div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;            rn += config.find(<span class="stringliteral">&quot;robotName&quot;</span>).asString().c_str();</div>
<div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;            <span class="comment">//rn+=String(&quot;/&quot;);</span></div>
<div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;            rn+=virtualPortName;</div>
<div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;            analogSensor-&gt;<a class="code" href="classTBR__AnalogSensor.html#a83c8ffd97189fd7bb16eb8010a71a3d5">backDoor</a>-&gt;open(rn.c_str()); </div>
<div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;            <span class="comment">//RANDAZ_TODO if needed set other parameters to backDoor</span></div>
<div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;        }</div>
<div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160; </div>
<div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;        <span class="keywordflow">switch</span> (analogFormat)</div>
<div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;        {</div>
<div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;            <span class="keywordflow">case</span> 8:</div>
<div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;                analogSensor-&gt;<a class="code" href="classTBR__AnalogSensor.html#a718c9c67ae22d5b5c4b71a42c3d00a9f">open</a>(analogChannels, <a class="code" href="classTBR__AnalogSensor.html#afa92092d0139836d6f6a830fb33946a2ae6493121d2b88f8bc93fedac07afd60e">TBR_AnalogSensor::ANALOG_FORMAT_8</a>, analogId, analogCalibration, isVirtualSensor);</div>
<div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;            <span class="keywordflow">case</span> 16:</div>
<div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;                analogSensor-&gt;<a class="code" href="classTBR__AnalogSensor.html#a718c9c67ae22d5b5c4b71a42c3d00a9f">open</a>(analogChannels, <a class="code" href="classTBR__AnalogSensor.html#afa92092d0139836d6f6a830fb33946a2a195c739874d6d3dffbebf83a42315b04">TBR_AnalogSensor::ANALOG_FORMAT_16</a>, analogId, analogCalibration, isVirtualSensor);</div>
<div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;        }</div>
<div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160; </div>
<div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;        <span class="keywordtype">int</span> destId=0x0200|analogSensor-&gt;<a class="code" href="classTBR__AnalogSensor.html#aabf2c460035a3398a4d4bed8cf37949d">getId</a>();</div>
<div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160; </div>
<div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;        <span class="keywordflow">if</span> (analogConfig.check(<span class="stringliteral">&quot;Period&quot;</span>))</div>
<div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;        {</div>
<div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;            <span class="keywordtype">int</span> period=analogConfig.find(<span class="stringliteral">&quot;Period&quot;</span>).asInt32();</div>
<div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;            res.<a class="code" href="classCanBusResources.html#a426cb1e9b09f03d70b8dbccb2346edb8">startPacket</a>();</div>
<div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160; </div>
<div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;            res.<a class="code" href="classCanBusResources.html#a426cb1e9b09f03d70b8dbccb2346edb8">startPacket</a>();</div>
<div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;            res.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].setId(destId);</div>
<div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;            res.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()[0]=0x08;</div>
<div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;            res.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()[1]=period;</div>
<div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;            res.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].setLen(2);</div>
<div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;            res.<a class="code" href="classCanBusResources.html#a781a7267d7eab2315d49720c1d673f29">_writeMessages</a>++;</div>
<div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;            res.<a class="code" href="classCanBusResources.html#a36f76a689330cd6163c3f13bb8ac28d9">writePacket</a>();</div>
<div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160; </div>
<div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;        }</div>
<div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160; </div>
<div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;        <span class="comment">//init message for mais board</span></div>
<div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;        <span class="keywordflow">if</span> (analogChannels==16 &amp;&amp; analogFormat==8)</div>
<div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;        {</div>
<div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;                res.<a class="code" href="classCanBusResources.html#a426cb1e9b09f03d70b8dbccb2346edb8">startPacket</a>();</div>
<div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;                res.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].setId(destId);</div>
<div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;                res.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()[0]=0x07;</div>
<div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;                res.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()[1]=0x00;</div>
<div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;                res.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].setLen(2);</div>
<div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;                res.<a class="code" href="classCanBusResources.html#a781a7267d7eab2315d49720c1d673f29">_writeMessages</a>++;</div>
<div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;                res.<a class="code" href="classCanBusResources.html#a36f76a689330cd6163c3f13bb8ac28d9">writePacket</a>();</div>
<div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;        }</div>
<div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;        <span class="comment">//init message for strain board</span></div>
<div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (analogChannels==6 &amp;&amp; analogFormat==16 &amp;&amp; isVirtualSensor==<span class="keyword">false</span>)</div>
<div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;        {</div>
<div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;                <span class="comment">//calibrated astrain board</span></div>
<div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;                <span class="keywordflow">if</span> (analogCalibration==1)</div>
<div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;                {</div>
<div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;                    <span class="comment">//get the full scale values from the strain board</span></div>
<div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;                    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ch=0; ch&lt;6; ch++)</div>
<div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;                    {</div>
<div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;                        <span class="keywordtype">bool</span> b=<span class="keyword">false</span>;</div>
<div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;                        <span class="keywordtype">int</span> attempts = 0;</div>
<div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;                        <span class="keywordflow">while</span>(attempts&lt;15) </div>
<div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;                        {</div>
<div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;                            b = readFullScaleAnalog(analogSensor-&gt;<a class="code" href="classTBR__AnalogSensor.html#aabf2c460035a3398a4d4bed8cf37949d">getId</a>(), ch, &amp;analogSensor-&gt;<a class="code" href="classTBR__AnalogSensor.html#ab6ceff743749dbf91134476d9cb536d8">getScaleFactor</a>()[ch]);</div>
<div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;                            <span class="keywordflow">if</span> (b==<span class="keyword">true</span>) </div>
<div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;                                {</div>
<div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;                                    <span class="keywordflow">if</span> (attempts&gt;0)    yWarning(<span class="stringliteral">&quot;Trying to get fullscale data from sensor: channel recovered (ch:%d)\n&quot;</span>, ch);</div>
<div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;                                }</div>
<div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;                            attempts++;</div>
<div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;                            yarp::os::Time::delay(0.020);</div>
<div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;                        }</div>
<div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;                        <span class="keywordflow">if</span> (attempts&gt;=15)</div>
<div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;                        {</div>
<div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;                            yError(<span class="stringliteral">&quot;Trying to get fullscale data from sensor %s: all attempts failed (ch:%d)\n&quot;</span>, deviceid.c_str(), ch);</div>
<div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;                            yError(<span class="stringliteral">&quot;Device %s cannot be opened.\n&quot;</span>, deviceid.c_str());</div>
<div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;                            <span class="keywordflow">return</span> 0; <span class="comment">//@@@delete missing, but TBR_AnalogSensor will be deprecated soon</span></div>
<div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;                        }</div>
<div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;                    }</div>
<div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160; </div>
<div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;                    <span class="comment">// debug messages</span></div>
<div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;<span class="preprocessor">                    #if 1</span></div>
<div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;                         yDebug(<span class="stringliteral">&quot;Sensor Fullscale Id %#4X: %f %f %f %f %f %f &quot;</span>,analogId,</div>
<div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;                                 analogSensor-&gt;<a class="code" href="classTBR__AnalogSensor.html#ab6ceff743749dbf91134476d9cb536d8">getScaleFactor</a>()[0],</div>
<div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;                                 analogSensor-&gt;<a class="code" href="classTBR__AnalogSensor.html#ab6ceff743749dbf91134476d9cb536d8">getScaleFactor</a>()[1],</div>
<div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;                                 analogSensor-&gt;<a class="code" href="classTBR__AnalogSensor.html#ab6ceff743749dbf91134476d9cb536d8">getScaleFactor</a>()[2],</div>
<div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;                                 analogSensor-&gt;<a class="code" href="classTBR__AnalogSensor.html#ab6ceff743749dbf91134476d9cb536d8">getScaleFactor</a>()[3],</div>
<div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;                                 analogSensor-&gt;<a class="code" href="classTBR__AnalogSensor.html#ab6ceff743749dbf91134476d9cb536d8">getScaleFactor</a>()[4],</div>
<div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;                                 analogSensor-&gt;<a class="code" href="classTBR__AnalogSensor.html#ab6ceff743749dbf91134476d9cb536d8">getScaleFactor</a>()[5]);</div>
<div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;<span class="preprocessor">                    #endif</span></div>
<div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160; </div>
<div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;                    <span class="comment">// start the board</span></div>
<div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;                    res.<a class="code" href="classCanBusResources.html#a426cb1e9b09f03d70b8dbccb2346edb8">startPacket</a>();</div>
<div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;                    res.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].setId(destId);</div>
<div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;                    res.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()[0]=0x07;</div>
<div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;                    res.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()[1]=0x00;</div>
<div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;                    res.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].setLen(2);</div>
<div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;                    res.<a class="code" href="classCanBusResources.html#a781a7267d7eab2315d49720c1d673f29">_writeMessages</a>++;</div>
<div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;                    res.<a class="code" href="classCanBusResources.html#a36f76a689330cd6163c3f13bb8ac28d9">writePacket</a>();</div>
<div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;                }</div>
<div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;                <span class="comment">//not calibrated strain board</span></div>
<div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;                {</div>
<div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;                    res.<a class="code" href="classCanBusResources.html#a426cb1e9b09f03d70b8dbccb2346edb8">startPacket</a>();</div>
<div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;                    res.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].setId(destId);</div>
<div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;                    res.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()[0]=0x07;</div>
<div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;                    res.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()[1]=0x03;</div>
<div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;                    res.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].setLen(2);</div>
<div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;                    res.<a class="code" href="classCanBusResources.html#a781a7267d7eab2315d49720c1d673f29">_writeMessages</a>++;</div>
<div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;                    res.<a class="code" href="classCanBusResources.html#a36f76a689330cd6163c3f13bb8ac28d9">writePacket</a>();</div>
<div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;                }</div>
<div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;        }</div>
<div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (analogChannels==6 &amp;&amp; analogFormat==16 &amp;&amp; isVirtualSensor==<span class="keyword">true</span>)</div>
<div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;        {    </div>
<div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;            <span class="comment">//set the full scale values for a VIRTUAL sensor</span></div>
<div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> jnt=0; jnt&lt;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a45a4d8f2668d10afc8b28314f9c8551a">_axisTorqueHelper</a>-&gt;<a class="code" href="classaxisTorqueHelper.html#af2ade90a05259e9fd2ee8b4fb09f1372">getNumberOfJoints</a>(); jnt++)</div>
<div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;            {</div>
<div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;                <span class="keywordtype">int</span> cfgId     = <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a45a4d8f2668d10afc8b28314f9c8551a">_axisTorqueHelper</a>-&gt;<a class="code" href="classaxisTorqueHelper.html#ae678c98b7446156b16016bbef1a9eccb">getTorqueSensorId</a>(jnt);</div>
<div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;                <span class="keywordtype">int</span> cfgChan   = <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a45a4d8f2668d10afc8b28314f9c8551a">_axisTorqueHelper</a>-&gt;<a class="code" href="classaxisTorqueHelper.html#ae170949c7144ea04b81a3b2958971e13">getTorqueSensorChan</a>(jnt);</div>
<div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;                <span class="keywordflow">if</span> (cfgId == analogId)</div>
<div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;                {</div>
<div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;                    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ch=0; ch&lt;6; ch++)</div>
<div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;                    {</div>
<div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;                        <span class="keywordflow">if</span> (cfgChan == ch)</div>
<div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;                        {</div>
<div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;                            <span class="keywordtype">double</span> maxTrq = <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a45a4d8f2668d10afc8b28314f9c8551a">_axisTorqueHelper</a>-&gt;<a class="code" href="classaxisTorqueHelper.html#a7d1d66be5efc1ae5c7d3953311afd626">getMaximumTorque</a>(jnt);</div>
<div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;                            analogSensor-&gt;<a class="code" href="classTBR__AnalogSensor.html#ab6ceff743749dbf91134476d9cb536d8">getScaleFactor</a>()[ch]=maxTrq;</div>
<div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;                        }</div>
<div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;                    }</div>
<div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;                }</div>
<div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;            }</div>
<div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160; </div>
<div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;            <span class="comment">// debug messages</span></div>
<div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;<span class="preprocessor">            #if 1</span></div>
<div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;                 yDebug(<span class="stringliteral">&quot;Sensor Fullscale Id %#4X: %f  %f  %f  %f  %f  %f&quot;</span>,analogId,</div>
<div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;                        analogSensor-&gt;<a class="code" href="classTBR__AnalogSensor.html#ab6ceff743749dbf91134476d9cb536d8">getScaleFactor</a>()[0],</div>
<div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;                        analogSensor-&gt;<a class="code" href="classTBR__AnalogSensor.html#ab6ceff743749dbf91134476d9cb536d8">getScaleFactor</a>()[1],</div>
<div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;                        analogSensor-&gt;<a class="code" href="classTBR__AnalogSensor.html#ab6ceff743749dbf91134476d9cb536d8">getScaleFactor</a>()[2],</div>
<div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;                        analogSensor-&gt;<a class="code" href="classTBR__AnalogSensor.html#ab6ceff743749dbf91134476d9cb536d8">getScaleFactor</a>()[3],</div>
<div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;                        analogSensor-&gt;<a class="code" href="classTBR__AnalogSensor.html#ab6ceff743749dbf91134476d9cb536d8">getScaleFactor</a>()[4],</div>
<div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;                        analogSensor-&gt;<a class="code" href="classTBR__AnalogSensor.html#ab6ceff743749dbf91134476d9cb536d8">getScaleFactor</a>()[5]);</div>
<div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;<span class="preprocessor">            #endif</span></div>
<div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;        }</div>
<div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;    }</div>
<div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;    <span class="keywordflow">return</span> analogSensor;</div>
<div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;}</div>
<div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160; </div>
<div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;<span class="keywordtype">void</span> CanBusMotionControl::finiAnalog(<a class="code" href="classTBR__AnalogSensor.html">TBR_AnalogSensor</a> *analogSensor)</div>
<div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;{</div>
<div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; res = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a> (<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160; </div>
<div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;    <span class="keywordflow">if</span> (analogSensor-&gt;<a class="code" href="classTBR__AnalogSensor.html#a1806e6078dfdcea26718abb96650ace2">isOpen</a>())</div>
<div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;            {</div>
<div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;                res.<a class="code" href="classCanBusResources.html#a426cb1e9b09f03d70b8dbccb2346edb8">startPacket</a>();</div>
<div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;                <span class="keywordtype">int</span> destId=0x0200|analogSensor-&gt;<a class="code" href="classTBR__AnalogSensor.html#aabf2c460035a3398a4d4bed8cf37949d">getId</a>();</div>
<div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160; </div>
<div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;                res.<a class="code" href="classCanBusResources.html#a426cb1e9b09f03d70b8dbccb2346edb8">startPacket</a>();</div>
<div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;                res.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].setId(destId);</div>
<div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;                res.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()[0]=0x07;</div>
<div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;                res.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()[1]=0x01;</div>
<div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;                res.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].setLen(2);</div>
<div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;                res.<a class="code" href="classCanBusResources.html#a781a7267d7eab2315d49720c1d673f29">_writeMessages</a>++;</div>
<div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160; </div>
<div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;                <span class="comment">//debug</span></div>
<div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;<span class="preprocessor">#if 0</span></div>
<div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;                yDebug(<span class="stringliteral">&quot;---&gt; Len:%d %x %x %x\n&quot;</span>, </div>
<div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;                    res.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getLen(),</div>
<div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;                    res.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getId(),</div>
<div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;                    res.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()[0],</div>
<div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;                    res.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()[1]);</div>
<div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;                res.<a class="code" href="classCanBusResources.html#a36f76a689330cd6163c3f13bb8ac28d9">writePacket</a>();</div>
<div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160; </div>
<div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;                <span class="comment">//shut down backdoor</span></div>
<div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;                <span class="keywordflow">if</span> (analogSensor-&gt;<a class="code" href="classTBR__AnalogSensor.html#a83c8ffd97189fd7bb16eb8010a71a3d5">backDoor</a>)</div>
<div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;                    analogSensor-&gt;<a class="code" href="classTBR__AnalogSensor.html#a83c8ffd97189fd7bb16eb8010a71a3d5">backDoor</a>-&gt;close();</div>
<div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;            }</div>
<div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;}</div>
<div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160; </div>
<div class="line"><a name="l02972"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a90861ff1fa245a6c09b2df2d462d4805"> 2972</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a90861ff1fa245a6c09b2df2d462d4805">CanBusMotionControl::close</a> (<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;{</div>
<div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; res = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160; </div>
<div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;    <span class="comment">//yDebug(&quot;CanBusMotionControl::close\n&quot;);</span></div>
<div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160; </div>
<div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#adfc3233779afe865fd7c3eb8b527273b">_opened</a>) {</div>
<div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;        <span class="comment">// disable the controller, pid controller &amp; pwm off</span></div>
<div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;        <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt; res.<a class="code" href="classCanBusResources.html#a7df58d2dc97da0775a53caaed3545726">_njoints</a>; i++)</div>
<div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;        {</div>
<div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;            setControlMode(i, VOCAB_CM_IDLE);</div>
<div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;        }</div>
<div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160; </div>
<div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;        <span class="keywordflow">if</span> (isRunning())</div>
<div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;        {</div>
<div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;            <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;            <span class="keywordflow">for</span>(i = 0; i &lt; res.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>(); i++)</div>
<div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;                <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a8ba29de2fc1d9e4bd2057f806da54001">setBCastMessages</a>(i, 0x00);</div>
<div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;        }</div>
<div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160; </div>
<div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;        PeriodicThread::stop ();</div>
<div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160; </div>
<div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;        ImplementPositionControl::uninitialize();</div>
<div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;        ImplementVelocityControl::uninitialize();</div>
<div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160; </div>
<div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;<span class="comment">//        ImplementPositionControl&lt;CanBusMotionControl, IPositionControl&gt;::uninitialize ();</span></div>
<div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;<span class="comment">//        ImplementVelocityControl&lt;CanBusMotionControl, IVelocityControl&gt;::uninitialize();</span></div>
<div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160; </div>
<div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;        ImplementPidControl::uninitialize();</div>
<div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;        ImplementEncodersTimed::uninitialize();</div>
<div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;        ImplementMotorEncoders::uninitialize();</div>
<div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;        ImplementControlCalibration::uninitialize();</div>
<div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;        ImplementAmplifierControl::uninitialize();</div>
<div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;        ImplementControlLimits::uninitialize();</div>
<div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160; </div>
<div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;        ImplementControlMode::uninitialize();</div>
<div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;        ImplementTorqueControl::uninitialize();</div>
<div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;        ImplementImpedanceControl::uninitialize();</div>
<div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;        ImplementPositionDirect::uninitialize();</div>
<div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;        ImplementInteractionMode::uninitialize();</div>
<div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;        ImplementRemoteVariables::uninitialize();</div>
<div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;        ImplementAxisInfo::uninitialize();</div>
<div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;        ImplementCurrentControl::uninitialize();</div>
<div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;        ImplementPWMControl::uninitialize();</div>
<div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160; </div>
<div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;        <span class="comment">//stop analog sensors</span></div>
<div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;        std::list&lt;TBR_AnalogSensor *&gt;::iterator it=analogSensors.begin();</div>
<div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;        <span class="keywordflow">while</span>(it!=analogSensors.end())</div>
<div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;        {</div>
<div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;            <span class="keywordflow">if</span> ((*it))</div>
<div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;            {</div>
<div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;                finiAnalog(*it);</div>
<div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;                <span class="keyword">delete</span> (*it);</div>
<div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;                (*it)=0;</div>
<div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;            }</div>
<div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;            it++;</div>
<div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;        }</div>
<div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;        </div>
<div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;    }</div>
<div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160; </div>
<div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a0de6c591abb8d8340378037eccf81951">threadPool</a> != 0)</div>
<div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;       {<span class="keyword">delete</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a0de6c591abb8d8340378037eccf81951">threadPool</a>; <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a0de6c591abb8d8340378037eccf81951">threadPool</a> = 0;}</div>
<div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a45a4d8f2668d10afc8b28314f9c8551a">_axisTorqueHelper</a> != 0)</div>
<div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;       {<span class="keyword">delete</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a45a4d8f2668d10afc8b28314f9c8551a">_axisTorqueHelper</a>; <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a45a4d8f2668d10afc8b28314f9c8551a">_axisTorqueHelper</a> = 0;}</div>
<div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a29de21188120dab9597097265fa5d031">_firmwareVersionHelper</a> != 0)</div>
<div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;       {<span class="keyword">delete</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a29de21188120dab9597097265fa5d031">_firmwareVersionHelper</a>; <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a29de21188120dab9597097265fa5d031">_firmwareVersionHelper</a> =0;}</div>
<div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160; </div>
<div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;    checkAndDestroy&lt;double&gt; (<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a703140d587d4c5eb582e35005df73057">_ref_command_positions</a>);</div>
<div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;    checkAndDestroy&lt;double&gt; (<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#acb562cd6f8c00ca3e0bbb1f716093131">_ref_command_speeds</a>);</div>
<div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;    checkAndDestroy&lt;double&gt; (<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#abc6148aa0f69586ad3ddbfea4fcd9771">_ref_positions</a>);</div>
<div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;    checkAndDestroy&lt;double&gt; (<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa892a2a25975c1b8d9fc3ec03522cfa1">_ref_speeds</a>);</div>
<div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;    checkAndDestroy&lt;double&gt; (<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ae7e725d08c542ce4a21f23d834984379">_ref_accs</a>);</div>
<div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;    checkAndDestroy&lt;double&gt; (<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#abe9ae05191a1daf39f64829e7704bece">_ref_torques</a>);</div>
<div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;    checkAndDestroy&lt;double&gt; (<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a4c86489f94cca2de72da41bc2664b551">_max_vel_jnt_cmd</a>);</div>
<div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160; </div>
<div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;    <span class="keywordtype">int</span> ret = res.<a class="code" href="classCanBusResources.html#a43f2a5de6393714ab78221e31c3f0080">uninitialize</a> ();</div>
<div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#adfc3233779afe865fd7c3eb8b527273b">_opened</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160; </div>
<div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;}</div>
<div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160; </div>
<div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;<span class="keywordtype">void</span> CanBusMotionControl::handleBroadcasts()</div>
<div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;{        </div>
<div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a> (<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160; </div>
<div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;    <span class="keywordtype">double</span> before=Time::now();</div>
<div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0;</div>
<div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> _networkN=r.<a class="code" href="classCanBusResources.html#a5434ee36839850ff8330ef5322171ff8">_networkN</a>;</div>
<div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160; </div>
<div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> buff_num=0; buff_num&lt;2; buff_num++)</div>
<div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;    {</div>
<div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> size = 0;</div>
<div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;        CanBuffer* buffer_pointer=0;</div>
<div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;        <span class="keywordflow">if</span> (buff_num==0)</div>
<div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;        {</div>
<div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;            size = r.<a class="code" href="classCanBusResources.html#a6785040f8650d0ecfb945e295808a377">_readMessages</a>;</div>
<div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;            buffer_pointer = &amp;r.<a class="code" href="classCanBusResources.html#a1eed1867edaefc8303954e7b5d41446f">_readBuffer</a>;</div>
<div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;        }</div>
<div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;        {</div>
<div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;            size = r.<a class="code" href="classCanBusResources.html#a01693f537c51494be7345cbd89e22d44">_echoMessages</a>;</div>
<div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;            buffer_pointer = &amp;r.<a class="code" href="classCanBusResources.html#af39b42503e37f91bc21de3efa9bc0d16">_echoBuffer</a>;</div>
<div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;        }</div>
<div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160; </div>
<div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt; size; i++)</div>
<div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;        {</div>
<div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> len=0;</div>
<div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keywordtype">id</span>=0;</div>
<div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>=0;</div>
<div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;            CanMessage&amp; m = (*buffer_pointer)[i];</div>
<div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;            <a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>=m.getData();</div>
<div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;            <span class="keywordtype">id</span>=m.getId();</div>
<div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;            len=m.getLen();</div>
<div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160; </div>
<div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;            <span class="keywordflow">if</span> ((<span class="keywordtype">id</span> &amp; 0x700) == 0x300) <span class="comment">// class = 3 These messages come from analog sensors</span></div>
<div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;            {</div>
<div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;                <span class="comment">// 4 next bits = source address, next 4 bits = msg type</span></div>
<div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> addr = ((<span class="keywordtype">id</span> &amp; 0x0f0) &gt;&gt; 4);</div>
<div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> type =   <span class="keywordtype">id</span> &amp; 0x00f;</div>
<div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;                <span class="keywordflow">if</span>  (type == 0x0A || type == 0x0B) <span class="comment">//strain messages</span></div>
<div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;                {</div>
<div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;                    <span class="keywordtype">int</span> off = (type-0x0A)*3;</div>
<div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;                    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> axis=0; axis&lt;r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>(); axis++)</div>
<div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;                    {</div>
<div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;                        <span class="keywordtype">int</span> attached_board = <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a45a4d8f2668d10afc8b28314f9c8551a">_axisTorqueHelper</a>-&gt;<a class="code" href="classaxisTorqueHelper.html#ae678c98b7446156b16016bbef1a9eccb">getTorqueSensorId</a>(axis);</div>
<div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;                        <span class="keywordflow">if</span> ( attached_board == addr)</div>
<div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;                        {</div>
<div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;                            <span class="keywordflow">for</span>(<span class="keywordtype">int</span> chan=0;chan&lt;3;chan++)</div>
<div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;                            {</div>
<div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;                                <span class="keywordtype">int</span> attached_channel = <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a45a4d8f2668d10afc8b28314f9c8551a">_axisTorqueHelper</a>-&gt;<a class="code" href="classaxisTorqueHelper.html#ae170949c7144ea04b81a3b2958971e13">getTorqueSensorChan</a>(axis);</div>
<div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;                                <span class="keywordflow">if</span> ( attached_channel == chan+off)</div>
<div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;                                {</div>
<div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;                                    <span class="keywordtype">double</span> scaleFactor = 1/<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a45a4d8f2668d10afc8b28314f9c8551a">_axisTorqueHelper</a>-&gt;<a class="code" href="classaxisTorqueHelper.html#a9067fd62d4f5d118aeceaab375aad2cc">getNewtonsToSensor</a>(axis);</div>
<div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;                                    r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[axis].<a class="code" href="classBCastBufferElement.html#af468ae55809a2d6b8ffe2d9e657606cd">_torque</a>=(((<span class="keywordtype">unsigned</span> short)(<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>[2*chan+1]))&lt;&lt;8)+<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>[2*chan]-0x8000;</div>
<div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;                                    r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[axis].<a class="code" href="classBCastBufferElement.html#af468ae55809a2d6b8ffe2d9e657606cd">_torque</a>=r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[axis].<a class="code" href="classBCastBufferElement.html#af468ae55809a2d6b8ffe2d9e657606cd">_torque</a>*scaleFactor;</div>
<div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;                                    <span class="comment">//r._bcastRecvBuffer[axis]._torque=0;</span></div>
<div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;                                    r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[axis].<a class="code" href="classBCastBufferElement.html#a029be0874497b8ea39a5deeb2e8ea647">_update_t</a> = before;</div>
<div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;                                }</div>
<div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;                            }</div>
<div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;                        }</div>
<div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;                    }</div>
<div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;                }</div>
<div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;            }</div>
<div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<span class="keywordtype">id</span> &amp; 0x700) == 0x100) <span class="comment">// class = 1 These messages come from the control boards.</span></div>
<div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;            {</div>
<div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;                <span class="comment">// 4 next bits = source address, next 4 bits = msg type</span></div>
<div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;                <span class="comment">// this allows sending two 32-bit numbers is a single CAN message.</span></div>
<div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;                <span class="comment">//</span></div>
<div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;                <span class="comment">// need an array here for storing the messages on a per-joint basis.</span></div>
<div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">int</span> addr = ((<span class="keywordtype">id</span> &amp; 0x0f0) &gt;&gt; 4);</div>
<div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;                <span class="keywordtype">int</span> j;</div>
<div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;                <span class="keywordtype">bool</span> found=<span class="keyword">false</span>;</div>
<div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;                <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>; j++)</div>
<div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;                {</div>
<div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;                    <span class="keywordflow">if</span> (r.<a class="code" href="classCanBusResources.html#aebb638eb231f9461b10f514b580dab67">_destinations</a>[j] == addr)</div>
<div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;                    {</div>
<div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;                        found = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;                    }</div>
<div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;                }</div>
<div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160; </div>
<div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;                <span class="keywordflow">if</span> (!found)</div>
<div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;                {</div>
<div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;                    <span class="keyword">static</span> <span class="keywordtype">int</span> count=0;</div>
<div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;                    <span class="keywordflow">if</span> (count%5000==0)</div>
<div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;                    {</div>
<div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;                        yError(<span class="stringliteral">&quot;%s [%d] Warning, got unexpected broadcast msg(s), last one from address %d, (original) id  0x%x, len %d\n&quot;</span>, canDevName.c_str(), _networkN, addr, <span class="keywordtype">id</span>, len);</div>
<div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;                        <span class="keywordtype">char</span> tmp1 [255]; tmp1[0]=0;</div>
<div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;                        <span class="keywordtype">char</span> tmp2 [255]; tmp2[0]=0;</div>
<div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;                        <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>; j++)</div>
<div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;                        {</div>
<div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;                            sprintf (tmp1, <span class="stringliteral">&quot;%d &quot;</span>, r.<a class="code" href="classCanBusResources.html#aebb638eb231f9461b10f514b580dab67">_destinations</a>[j]);</div>
<div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;                            strcat  (tmp2,tmp1);</div>
<div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;                        }</div>
<div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;                        yError(<span class="stringliteral">&quot;%s [%d] valid addresses are (%s)\n&quot;</span>,canDevName.c_str(), _networkN,tmp2);</div>
<div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;                        count++;</div>
<div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;                        j=-1; <span class="comment">//error</span></div>
<div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;                    }</div>
<div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;                }</div>
<div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;                {</div>
<div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;                    j *= 2;</div>
<div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160; </div>
<div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;                    <span class="comment">/* less sign nibble specifies msg type */</span></div>
<div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;                    <span class="keywordflow">switch</span> (<span class="keywordtype">id</span> &amp; 0x00f)</div>
<div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;                    {</div>
<div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;                    <span class="keywordflow">case</span> ICUBCANPROTO_PER_MC_MSG__OVERFLOW:</div>
<div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160; </div>
<div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;                        yError (<span class="stringliteral">&quot;CAN PACKET LOSS, board %d buffer full\r\n&quot;</span>, (((<span class="keywordtype">id</span> &amp; 0x0f0) &gt;&gt; 4)-1));</div>
<div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160; </div>
<div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160; </div>
<div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;                    <span class="keywordflow">case</span> ICUBCANPROTO_PER_MC_MSG__PRINT:</div>
<div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160; </div>
<div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>[0] == ICUBCANPROTO_PER_MC_MSG__PRINT    ||</div>
<div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;                            <a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>[0] == ICUBCANPROTO_PER_MC_MSG__PRINT + 128)</div>
<div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;                        {    </div>
<div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;                            <span class="keywordtype">int</span> addr = (((<span class="keywordtype">id</span> &amp; 0x0f0) &gt;&gt; 4)-1);</div>
<div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160; </div>
<div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;                            <span class="keywordtype">int</span> string_id = <a class="code" href="CanBusMotionControl_8cpp.html#a087655066ba7d69958b10f50e82201a3">cstring</a>[addr].<a class="code" href="classcan__string__generic.html#ab66d08ed0f136ed0630e0713e85b01df">add_string</a>(&amp;r.<a class="code" href="classCanBusResources.html#a1eed1867edaefc8303954e7b5d41446f">_readBuffer</a>[i]);</div>
<div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;                            <span class="keywordflow">if</span> (string_id != -1) </div>
<div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;                            {</div>
<div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;                                <a class="code" href="CanBusMotionControl_8cpp.html#a087655066ba7d69958b10f50e82201a3">cstring</a>[addr].<a class="code" href="classcan__string__generic.html#a99096fda39fe6b3df580dd9660228245">print</a>(string_id, canDevName.c_str(), r.<a class="code" href="classCanBusResources.html#a5434ee36839850ff8330ef5322171ff8">_networkN</a>);</div>
<div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;                                <a class="code" href="CanBusMotionControl_8cpp.html#a087655066ba7d69958b10f50e82201a3">cstring</a>[addr].<a class="code" href="classcan__string__generic.html#a12187a154fbebdb08c4bfd2c85a92543">clear_string</a>(string_id);</div>
<div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;                            }</div>
<div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;                        }</div>
<div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160; </div>
<div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;                    <span class="keywordflow">case</span> ICUBCANPROTO_PER_MC_MSG__POSITION:</div>
<div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;                        {</div>
<div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;                            <span class="comment">// r._bcastRecvBuffer[j]._position = *((int *)(data));</span></div>
<div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;                            <span class="comment">// r._bcastRecvBuffer[j]._update_p = before;</span></div>
<div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;                            <span class="keywordtype">int</span> <a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a>=*((<span class="keywordtype">int</span> *)(<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>));</div>
<div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;                            r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#af9b2502ea8bef890aec0d7f70205e2c0">_position_joint</a>.<a class="code" href="structBCastElement.html#a42d310eeecd0c43db89e90639c860a32">update</a>(<a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a>, before);</div>
<div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160; </div>
<div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;                            j++;</div>
<div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;                            <span class="keywordflow">if</span> (j &lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>())</div>
<div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;                                {</div>
<div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;                                    <a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a> =*((<span class="keywordtype">int</span> *)(<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>+4));</div>
<div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;                                    <span class="comment">//r._bcastRecvBuffer[j]._position = *((int *)(data+4));</span></div>
<div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;                                    <span class="comment">//r._bcastRecvBuffer[j]._update_p = before;</span></div>
<div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;                                    r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#af9b2502ea8bef890aec0d7f70205e2c0">_position_joint</a>.<a class="code" href="structBCastElement.html#a42d310eeecd0c43db89e90639c860a32">update</a>(<a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a>, before);</div>
<div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;                                }</div>
<div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;                        }</div>
<div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160; </div>
<div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;                    <span class="keywordflow">case</span> ICUBCANPROTO_PER_MC_MSG__MOTOR_POSITION:</div>
<div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;                        {</div>
<div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;                            <span class="comment">// r._bcastRecvBuffer[j]._position = *((int *)(data));</span></div>
<div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;                            <span class="comment">// r._bcastRecvBuffer[j]._update_p = before;</span></div>
<div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;                            <span class="keywordtype">int</span> <a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a>=*((<span class="keywordtype">int</span> *)(<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>));</div>
<div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;                            r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#af7fcbef201ebbd71f56df7ec94ef15b5">_position_rotor</a>.<a class="code" href="structBCastElement.html#a42d310eeecd0c43db89e90639c860a32">update</a>(<a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a>, before);</div>
<div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160; </div>
<div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;                            j++;</div>
<div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;                            <span class="keywordflow">if</span> (j &lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>())</div>
<div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;                                {</div>
<div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;                                    <a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a> =*((<span class="keywordtype">int</span> *)(<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>+4));</div>
<div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;                                    <span class="comment">//r._bcastRecvBuffer[j]._position = *((int *)(data+4));</span></div>
<div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;                                    <span class="comment">//r._bcastRecvBuffer[j]._update_p = before;</span></div>
<div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;                                    r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#af7fcbef201ebbd71f56df7ec94ef15b5">_position_rotor</a>.<a class="code" href="structBCastElement.html#a42d310eeecd0c43db89e90639c860a32">update</a>(<a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a>, before);</div>
<div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;                                }</div>
<div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;                        }</div>
<div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160; </div>
<div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;                    <span class="keywordflow">case</span> ICUBCANPROTO_PER_MC_MSG__MOTOR_SPEED:</div>
<div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;                    {</div>
<div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;                        <span class="keywordtype">int</span> <a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a>;</div>
<div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;                        <a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a> =*((<span class="keywordtype">short</span> *)(<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>));</div>
<div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;                        r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#a98a2371848368d28cc00f180375a9161">_speed_rotor</a>.<a class="code" href="structBCastElement.html#a42d310eeecd0c43db89e90639c860a32">update</a>(<a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a>, before);</div>
<div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;                        <a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a> =*((<span class="keywordtype">short</span> *)(<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>+4));</div>
<div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;                        r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#acbfdea5c30c6cff7e50a75b42233b460">_accel_rotor</a>.<a class="code" href="structBCastElement.html#a42d310eeecd0c43db89e90639c860a32">update</a>(<a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a>, before);</div>
<div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;                        r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#aae5bf68c1e48bee944c5586deac0e05d">_update_s</a> = before;</div>
<div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;                        j++;</div>
<div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;                        <span class="keywordflow">if</span> (j &lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>())</div>
<div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;                        {</div>
<div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;                            <a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a> =*((<span class="keywordtype">short</span> *)(<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>+2));</div>
<div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;                            r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#a98a2371848368d28cc00f180375a9161">_speed_rotor</a>.<a class="code" href="structBCastElement.html#a42d310eeecd0c43db89e90639c860a32">update</a>(<a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a>, before);</div>
<div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;                            <a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a> =*((<span class="keywordtype">short</span> *)(<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>+6));</div>
<div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;                            r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#acbfdea5c30c6cff7e50a75b42233b460">_accel_rotor</a>.<a class="code" href="structBCastElement.html#a42d310eeecd0c43db89e90639c860a32">update</a>(<a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a>, before);</div>
<div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;                            r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#aae5bf68c1e48bee944c5586deac0e05d">_update_s</a> = before;</div>
<div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;                        }</div>
<div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;                    }</div>
<div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;<span class="preprocessor">    #if 0</span></div>
<div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;                    <span class="keywordflow">case</span> ICUBCANPROTO_PER_MC_MSG__TORQUE:</div>
<div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;                        {</div>
<div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;                            <span class="keywordtype">int</span> <a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a>=0; <span class="comment">//*((int *)(data));</span></div>
<div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;                            r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#af468ae55809a2d6b8ffe2d9e657606cd">_torque</a>=<a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a>;</div>
<div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;                            r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#a029be0874497b8ea39a5deeb2e8ea647">_update_t</a>=before;</div>
<div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160; </div>
<div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;                            j++;</div>
<div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;                            <span class="keywordflow">if</span> (j &lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>())</div>
<div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;                                {</div>
<div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;                                    <a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a> = 0;<span class="comment">//*((int *)(data+4));</span></div>
<div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;                                    r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#af468ae55809a2d6b8ffe2d9e657606cd">_torque</a>=<a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a>;</div>
<div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;                                    r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#a029be0874497b8ea39a5deeb2e8ea647">_update_t</a>=before;</div>
<div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;                                }</div>
<div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;                        }</div>
<div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160; </div>
<div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;                    <span class="keywordflow">case</span> ICUBCANPROTO_PER_MC_MSG__PID_VAL:</div>
<div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;                        r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#a96b136248573dc3f1b4f245f402bd18c">_pid_value</a> = *((<span class="keywordtype">short</span> *)(<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>));</div>
<div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;                        r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#a6b3107f9a2233e1e5529ffe072d59edc">_update_v</a> = before;</div>
<div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160; </div>
<div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;                        j++;</div>
<div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;                        <span class="keywordflow">if</span> (j &lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>())</div>
<div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;                        {</div>
<div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;                            r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#a96b136248573dc3f1b4f245f402bd18c">_pid_value</a> = *((<span class="keywordtype">short</span> *)(<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>+2));</div>
<div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160;                            r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#a6b3107f9a2233e1e5529ffe072d59edc">_update_v</a> = before;</div>
<div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160;                        }</div>
<div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160; </div>
<div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;                    <span class="keywordflow">case</span> ICUBCANPROTO_PER_MC_MSG__STATUS:</div>
<div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;                        <span class="comment">// fault signals.</span></div>
<div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;                        r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#af521bd74a402411d52e25d07ce009801">_axisStatus</a>= *((<span class="keywordtype">short</span> *)(<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>));</div>
<div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;                        r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#aa4cfa0e52a1c9291419df6ba364d4ea1">_canStatus</a>= *((<span class="keywordtype">char</span> *)(<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>+4));</div>
<div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;                        r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#aad2f2a8e02636dcdbd2dee6f4f918d9d">_boardStatus</a>= *((<span class="keywordtype">char</span> *)(<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>+5));</div>
<div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;                        r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#add58648b082b014052e572683e0c821b">_update_e</a> = before;</div>
<div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;                        r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#a6d942303fa98a4ee95f885be66fe3440">_controlmodeStatus</a>=*((<span class="keywordtype">char</span> *)(<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>+1));</div>
<div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;                        r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#a4b1f8acb88916c3e6fb526e86b2a9283">_address</a>=addr;</div>
<div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;                        r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#af8625ef3029a59bea61aaf7fed60b5a6">_canTxError</a>+=*((<span class="keywordtype">char</span> *) (<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>+6));</div>
<div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;                        r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#a0965ebdd231975fe93e2953f22372375">_canRxError</a>+=*((<span class="keywordtype">char</span> *) (<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>+7));                                    </div>
<div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;<span class="preprocessor">    #if 0                    </span></div>
<div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;                        <span class="keywordflow">if</span> (_networkN==1)</div>
<div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;                            {</div>
<div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;                                <span class="keywordflow">for</span>(<span class="keywordtype">int</span> m=0;m&lt;8;m++)</div>
<div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;                                    yDebug(<span class="stringliteral">&quot;%.2x &quot;</span>, <a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>[m]);</div>
<div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;                                yDebug(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;                            }</div>
<div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160; </div>
<div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;                        <span class="keywordtype">bool</span> bFlag;</div>
<div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160; </div>
<div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;                        <span class="keywordflow">if</span> ((bFlag=r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#a5aec6fa032a5754a96bf613504c69d85">isOverCurrent</a>())) yError (<span class="stringliteral">&quot;%s [%d] board %d OVERCURRENT AXIS 0\n&quot;</span>, canDevName.c_str(), _networkN, addr);</div>
<div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;                        <a class="code" href="CanBusMotionControl_8h.html#ae6ea930d226c19296f184951d8a8daf9">logJointData</a>(canDevName.c_str(),_networkN,j,9,yarp::os::Value((<span class="keywordtype">int</span>)bFlag));</div>
<div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160; </div>
<div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;                        <span class="comment">//r._bcastRecvBuffer[j].ControlStatus(r._networkN, r._bcastRecvBuffer[j]._controlmodeStatus,addr); </span></div>
<div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;                        <span class="comment">//if (r._bcastRecvBuffer[j].isFaultOk()) yInfo(&quot;Board %d OK\n&quot;, addr);</span></div>
<div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;                    </div>
<div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;                        <a class="code" href="CanBusMotionControl_8h.html#ae6ea930d226c19296f184951d8a8daf9">logJointData</a>(canDevName.c_str(),_networkN,j,21,yarp::os::Value((<span class="keywordtype">int</span>)r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#a6d942303fa98a4ee95f885be66fe3440">_controlmodeStatus</a>));</div>
<div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160; </div>
<div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;                        <span class="keywordflow">if</span> ((bFlag=r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#a6d9a031bf195a1452f7986496a71216f">isFaultUndervoltage</a>())) yError (<span class="stringliteral">&quot;%s [%d] board %d FAULT UNDERVOLTAGE AXIS 0\n&quot;</span>, canDevName.c_str(), _networkN, addr);</div>
<div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;                        <a class="code" href="CanBusMotionControl_8h.html#ae6ea930d226c19296f184951d8a8daf9">logJointData</a>(canDevName.c_str(),_networkN,j,7,yarp::os::Value((<span class="keywordtype">int</span>)bFlag));</div>
<div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;                    </div>
<div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;                        <span class="keywordflow">if</span> ((bFlag=r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#af6132fac4729f6262580d8d941b3f0a6">isFaultExternal</a>())) yWarning (<span class="stringliteral">&quot;%s [%d] board %d FAULT EXT AXIS 0\n&quot;</span>, canDevName.c_str(), _networkN, addr);</div>
<div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;                        <a class="code" href="CanBusMotionControl_8h.html#ae6ea930d226c19296f184951d8a8daf9">logJointData</a>(canDevName.c_str(),_networkN,j,10,yarp::os::Value((<span class="keywordtype">int</span>)bFlag));</div>
<div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160; </div>
<div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;                        <span class="keywordflow">if</span> ((bFlag=r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#af859f2a7245aef9476d74e14c204708f">isFaultOverload</a>())) yError (<span class="stringliteral">&quot;%s [%d] board %d FAULT OVERLOAD AXIS 0\n&quot;</span>, canDevName.c_str(), _networkN, addr);</div>
<div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;                        <a class="code" href="CanBusMotionControl_8h.html#ae6ea930d226c19296f184951d8a8daf9">logJointData</a>(canDevName.c_str(),_networkN,j,8,yarp::os::Value((<span class="keywordtype">int</span>)bFlag));</div>
<div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160; </div>
<div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;                        <span class="keywordflow">if</span> ((bFlag=r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#a49caa935408c48141fc7e02fd1b3ca46">isHallSensorError</a>())) yError (<span class="stringliteral">&quot;%s [%d] board %d HALL SENSOR ERROR AXIS 0\n&quot;</span>, canDevName.c_str(), _networkN, addr);</div>
<div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;                        <a class="code" href="CanBusMotionControl_8h.html#ae6ea930d226c19296f184951d8a8daf9">logJointData</a>(canDevName.c_str(),_networkN,j,11,yarp::os::Value((<span class="keywordtype">int</span>)bFlag));</div>
<div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160; </div>
<div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;                        <span class="keywordflow">if</span> ((bFlag=r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#abfdbb13a97f15c594f606c9cd058e283">isAbsEncoderError</a>())) yError (<span class="stringliteral">&quot;%s [%d] board %d ABS ENCODER ERROR AXIS 0\n&quot;</span>, canDevName.c_str(), _networkN, addr);        </div>
<div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;                        <a class="code" href="CanBusMotionControl_8h.html#ae6ea930d226c19296f184951d8a8daf9">logJointData</a>(canDevName.c_str(),_networkN,j,12,yarp::os::Value((<span class="keywordtype">int</span>)bFlag));</div>
<div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160; </div>
<div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;                        <span class="keywordflow">if</span> ((bFlag=r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#abf8059d68e80affbbdd1c1f423f4ef13">isOpticalEncoderError</a>())) yError (<span class="stringliteral">&quot;%s [%d] board %d OPTICAL ENCODER ERROR AXIS 0\n&quot;</span>, canDevName.c_str(), _networkN, addr);        </div>
<div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;                        <a class="code" href="CanBusMotionControl_8h.html#ae6ea930d226c19296f184951d8a8daf9">logJointData</a>(canDevName.c_str(),_networkN,j,12,yarp::os::Value((<span class="keywordtype">int</span>)bFlag));</div>
<div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160; </div>
<div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;                        <span class="keywordflow">if</span> ((bFlag=r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#a9d6191faa521e997e5e581f8ef8eb116">isCanTxOverflow</a>())) yError (<span class="stringliteral">&quot;%s [%d] board %d CAN TX OVERFLOW \n&quot;</span>, canDevName.c_str(), _networkN, addr);</div>
<div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;                        <a class="code" href="CanBusMotionControl_8h.html#ae6ea930d226c19296f184951d8a8daf9">logJointData</a>(canDevName.c_str(),_networkN,j,16,yarp::os::Value((<span class="keywordtype">int</span>)bFlag));</div>
<div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160; </div>
<div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;                        <span class="keywordflow">if</span> ((bFlag=r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#a39ee1efa63d85c40529cf5e07217a612">isCanBusOff</a>())) yError (<span class="stringliteral">&quot;%s [%d] board %d CAN BUS_OFF \n&quot;</span>, canDevName.c_str(), _networkN, addr);</div>
<div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;                        <a class="code" href="CanBusMotionControl_8h.html#ae6ea930d226c19296f184951d8a8daf9">logJointData</a>(canDevName.c_str(),_networkN,j,13,yarp::os::Value((<span class="keywordtype">int</span>)bFlag));</div>
<div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160; </div>
<div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;                        <span class="keywordflow">if</span> (r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#a48ea9a1004af73e6a26856770b97cc54">isCanTxError</a>()) yError (<span class="stringliteral">&quot;%s [%d] board %d CAN TX ERROR \n&quot;</span>, canDevName.c_str(), _networkN, addr);</div>
<div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;                        <a class="code" href="CanBusMotionControl_8h.html#ae6ea930d226c19296f184951d8a8daf9">logJointData</a>(canDevName.c_str(),_networkN,j,14,yarp::os::Value((<span class="keywordtype">int</span>)r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#af8625ef3029a59bea61aaf7fed60b5a6">_canTxError</a>));</div>
<div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160; </div>
<div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;                        <span class="keywordflow">if</span> (r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#a29b51142f3d04e71ecead4169a18b701">isCanRxError</a>()) yError (<span class="stringliteral">&quot;%s [%d] board %d CAN RX ERROR \n&quot;</span>, canDevName.c_str(), _networkN, addr);</div>
<div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;                        <a class="code" href="CanBusMotionControl_8h.html#ae6ea930d226c19296f184951d8a8daf9">logJointData</a>(canDevName.c_str(),_networkN,j,15,yarp::os::Value((<span class="keywordtype">int</span>)r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#a0965ebdd231975fe93e2953f22372375">_canRxError</a>));</div>
<div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160; </div>
<div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;                        <span class="keywordflow">if</span> ((bFlag=r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#a6fc27e477fad391a765419a20ecb92cf">isCanTxOverrun</a>())) yError (<span class="stringliteral">&quot;%s [%d] board %d CAN TX OVERRUN \n&quot;</span>, canDevName.c_str(), _networkN, addr);</div>
<div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160;                        <a class="code" href="CanBusMotionControl_8h.html#ae6ea930d226c19296f184951d8a8daf9">logJointData</a>(canDevName.c_str(),_networkN,j,17,yarp::os::Value((<span class="keywordtype">int</span>)bFlag));</div>
<div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160; </div>
<div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;                        <span class="keywordflow">if</span> (r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#a1babf79cf17faffbd70514135d9c138d">isCanRxWarning</a>()) yError (<span class="stringliteral">&quot;%s [%d] board %d CAN RX WARNING \n&quot;</span>, canDevName.c_str(), _networkN, addr);</div>
<div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160; </div>
<div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;                        <span class="keywordflow">if</span> ((bFlag=r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#a6533f7a83218f088b0d7e44b30262d95">isCanRxOverrun</a>())) yError (<span class="stringliteral">&quot;%s [%d] board %d CAN RX OVERRUN \n&quot;</span>, canDevName.c_str(), _networkN, addr);</div>
<div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;                        <a class="code" href="CanBusMotionControl_8h.html#ae6ea930d226c19296f184951d8a8daf9">logJointData</a>(canDevName.c_str(),_networkN,j,17,yarp::os::Value((<span class="keywordtype">int</span>)bFlag));</div>
<div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160; </div>
<div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;                        <span class="keywordflow">if</span> ((bFlag=r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#a1cec8f1619a8b7c899dcd7a4306de86c">isMainLoopOverflow</a>())) </div>
<div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;                        {</div>
<div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;                            r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#a9ccee7fd979022713c5992f27bf7f6de">_mainLoopOverflowCounter</a>++;</div>
<div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;                            <span class="comment">//yWarning (&quot;%s [%d] board %d MAIN LOOP TIME EXCEDEED \n&quot;, canDevName.c_str(), _networkN, addr);</span></div>
<div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;                        }</div>
<div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;                        <a class="code" href="CanBusMotionControl_8h.html#ae6ea930d226c19296f184951d8a8daf9">logJointData</a>(canDevName.c_str(),_networkN,j,18,yarp::os::Value((<span class="keywordtype">int</span>)bFlag));</div>
<div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160; </div>
<div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;                        <span class="keywordflow">if</span> ((bFlag=r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#a98693471f12823d0432c353fca09b3df">isOverTempCh1</a>())) yError (<span class="stringliteral">&quot;%s [%d] board %d OVER TEMPERATURE CH 1 \n&quot;</span>, canDevName.c_str(), _networkN, addr);</div>
<div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;                        <a class="code" href="CanBusMotionControl_8h.html#ae6ea930d226c19296f184951d8a8daf9">logJointData</a>(canDevName.c_str(),_networkN,j,19,yarp::os::Value((<span class="keywordtype">int</span>)bFlag));</div>
<div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;                    </div>
<div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;                        <span class="keywordflow">if</span> ((bFlag=r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#a3f37bcb9974cf615241d3ad9ebf6802f">isOverTempCh2</a>())) yError (<span class="stringliteral">&quot;%s [%d] board %d OVER TEMPERATURE CH 2 \n&quot;</span>, canDevName.c_str(), _networkN, addr);</div>
<div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;                        <a class="code" href="CanBusMotionControl_8h.html#ae6ea930d226c19296f184951d8a8daf9">logJointData</a>(canDevName.c_str(),_networkN,j+1,19,yarp::os::Value((<span class="keywordtype">int</span>)bFlag));</div>
<div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;                    </div>
<div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;                        <span class="keywordflow">if</span> ((bFlag=r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#adbe355548c9b25de0c625a1dabd76ab7">isTempErrorCh1</a>())) yError (<span class="stringliteral">&quot;%s [%d] board %d ERROR TEMPERATURE CH 1\n&quot;</span>, canDevName.c_str(), _networkN, addr);</div>
<div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;                        <a class="code" href="CanBusMotionControl_8h.html#ae6ea930d226c19296f184951d8a8daf9">logJointData</a>(canDevName.c_str(),_networkN,j,20,yarp::os::Value((<span class="keywordtype">int</span>)bFlag));</div>
<div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;                    </div>
<div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;                        <span class="keywordflow">if</span> ((bFlag=r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#adb3883163551f9385171a86386f56231">isTempErrorCh2</a>())) yError (<span class="stringliteral">&quot;%s [%d] board %d ERROR TEMPERATURE CH 2\n&quot;</span>, canDevName.c_str(), _networkN, addr);</div>
<div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;                        <a class="code" href="CanBusMotionControl_8h.html#ae6ea930d226c19296f184951d8a8daf9">logJointData</a>(canDevName.c_str(),_networkN,j+1,20,yarp::os::Value((<span class="keywordtype">int</span>)bFlag));</div>
<div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160; </div>
<div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;                        j++;</div>
<div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160; </div>
<div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;                        <span class="keywordflow">if</span> (j &lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>())</div>
<div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;                        {</div>
<div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;                            r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#a4b1f8acb88916c3e6fb526e86b2a9283">_address</a>=addr;</div>
<div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;                            r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#af521bd74a402411d52e25d07ce009801">_axisStatus</a>= *((<span class="keywordtype">short</span> *)(<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>+2));</div>
<div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;                            r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#add58648b082b014052e572683e0c821b">_update_e</a> = before;    </div>
<div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;                            r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#a6d942303fa98a4ee95f885be66fe3440">_controlmodeStatus</a>=*((<span class="keywordtype">char</span> *)(<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>+3));</div>
<div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;                            <span class="comment">// r._bcastRecvBuffer[j].ControlStatus(r._networkN, r._bcastRecvBuffer[j]._controlmodeStatus,addr); </span></div>
<div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;                        </div>
<div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;                            <a class="code" href="CanBusMotionControl_8h.html#ae6ea930d226c19296f184951d8a8daf9">logJointData</a>(canDevName.c_str(),_networkN,j,21,yarp::os::Value((<span class="keywordtype">int</span>)r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#a6d942303fa98a4ee95f885be66fe3440">_controlmodeStatus</a>));</div>
<div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160; </div>
<div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;                            <span class="keywordflow">if</span> ((bFlag=r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#a5aec6fa032a5754a96bf613504c69d85">isOverCurrent</a>())) yError (<span class="stringliteral">&quot;%s [%d] board %d OVERCURRENT AXIS 1\n&quot;</span>, canDevName.c_str(), _networkN, addr);</div>
<div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;                            <a class="code" href="CanBusMotionControl_8h.html#ae6ea930d226c19296f184951d8a8daf9">logJointData</a>(canDevName.c_str(),_networkN,j,9,yarp::os::Value((<span class="keywordtype">int</span>)bFlag));</div>
<div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;                        </div>
<div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;                            <span class="keywordflow">if</span> ((bFlag=r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#a6d9a031bf195a1452f7986496a71216f">isFaultUndervoltage</a>())) yError (<span class="stringliteral">&quot;%s [%d] board %d FAULT UNDERVOLTAGE AXIS 1\n&quot;</span>, canDevName.c_str(), _networkN, addr);</div>
<div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;                            <a class="code" href="CanBusMotionControl_8h.html#ae6ea930d226c19296f184951d8a8daf9">logJointData</a>(canDevName.c_str(),_networkN,j,7,yarp::os::Value((<span class="keywordtype">int</span>)bFlag));</div>
<div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;                        </div>
<div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;                            <span class="keywordflow">if</span> ((bFlag=r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#af6132fac4729f6262580d8d941b3f0a6">isFaultExternal</a>())) yWarning (<span class="stringliteral">&quot;%s [%d] board %d FAULT EXT AXIS 1\n&quot;</span>, canDevName.c_str(), _networkN, addr);</div>
<div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;                            <a class="code" href="CanBusMotionControl_8h.html#ae6ea930d226c19296f184951d8a8daf9">logJointData</a>(canDevName.c_str(),_networkN,j,10,yarp::os::Value((<span class="keywordtype">int</span>)bFlag));</div>
<div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;                        </div>
<div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;                            <span class="keywordflow">if</span> ((bFlag=r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#af859f2a7245aef9476d74e14c204708f">isFaultOverload</a>())) yError (<span class="stringliteral">&quot;%s [%d] board %d FAULT OVERLOAD AXIS 1\n&quot;</span>, canDevName.c_str(), _networkN, addr);</div>
<div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;                            <a class="code" href="CanBusMotionControl_8h.html#ae6ea930d226c19296f184951d8a8daf9">logJointData</a>(canDevName.c_str(),_networkN,j,8,yarp::os::Value((<span class="keywordtype">int</span>)bFlag));</div>
<div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;                        </div>
<div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;                            <span class="keywordflow">if</span> ((bFlag=r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#a49caa935408c48141fc7e02fd1b3ca46">isHallSensorError</a>())) yError (<span class="stringliteral">&quot;%s [%d] board %d HALL SENSOR ERROR AXIS 1\n&quot;</span>, canDevName.c_str(), _networkN, addr);</div>
<div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;                            <a class="code" href="CanBusMotionControl_8h.html#ae6ea930d226c19296f184951d8a8daf9">logJointData</a>(canDevName.c_str(),_networkN,j,11,yarp::os::Value((<span class="keywordtype">int</span>)bFlag));</div>
<div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;                        </div>
<div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;                            <span class="keywordflow">if</span> ((bFlag=r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#abfdbb13a97f15c594f606c9cd058e283">isAbsEncoderError</a>())) yError (<span class="stringliteral">&quot;%s [%d] board %d ABS ENCODER ERROR AXIS 1\n&quot;</span>, canDevName.c_str(), _networkN, addr);</div>
<div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;                            <a class="code" href="CanBusMotionControl_8h.html#ae6ea930d226c19296f184951d8a8daf9">logJointData</a>(canDevName.c_str(),_networkN,j,12,yarp::os::Value((<span class="keywordtype">int</span>)bFlag));</div>
<div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160; </div>
<div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;                            <span class="keywordflow">if</span> ((bFlag=r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#abf8059d68e80affbbdd1c1f423f4ef13">isOpticalEncoderError</a>())) yError (<span class="stringliteral">&quot;%s [%d] board %d OPTICAL ENCODER ERROR AXIS 0\n&quot;</span>, canDevName.c_str(), _networkN, addr);        </div>
<div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;                            <a class="code" href="CanBusMotionControl_8h.html#ae6ea930d226c19296f184951d8a8daf9">logJointData</a>(canDevName.c_str(),_networkN,j,12,yarp::os::Value((<span class="keywordtype">int</span>)bFlag));</div>
<div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;                        }    </div>
<div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160; </div>
<div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160; </div>
<div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;                    <span class="keywordflow">case</span> ICUBCANPROTO_PER_MC_MSG__ADDITIONAL_STATUS:</div>
<div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;                        r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#a71c399116a5883ca93100eaa0ef26d4b">_interactionmodeStatus</a>=*((<span class="keywordtype">char</span> *)(<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>)) &amp; 0x0F;</div>
<div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;                        r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#ab8f6b1986e4351ffb64ea4b6d6f069d8">_update_e2</a> = before;</div>
<div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;                        j++;</div>
<div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;                        <span class="keywordflow">if</span> (j &lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>())</div>
<div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;                        {</div>
<div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;                            r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#a71c399116a5883ca93100eaa0ef26d4b">_interactionmodeStatus</a>=(*((<span class="keywordtype">char</span> *)(<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>)) &gt;&gt; 4) &amp; 0x0F;</div>
<div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;                            r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#ab8f6b1986e4351ffb64ea4b6d6f069d8">_update_e2</a> = before;</div>
<div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;                        }</div>
<div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160; </div>
<div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160;                    <span class="keywordflow">case</span> ICUBCANPROTO_PER_MC_MSG__CURRENT:</div>
<div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160;                        r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#a9f1be6e90a870951a2f8221aab3dfdd6">_current</a> = *((<span class="keywordtype">short</span> *)(<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>));</div>
<div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;                        r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#a6c3023c76f86ef3ecbd1b61098be56b7">_update_c</a> = before;</div>
<div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;                        j++;</div>
<div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;                        <span class="keywordflow">if</span> (j &lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>())</div>
<div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;                        {</div>
<div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;                            r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#a9f1be6e90a870951a2f8221aab3dfdd6">_current</a> = *((<span class="keywordtype">short</span> *)(<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>+2));</div>
<div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;                            r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#a6c3023c76f86ef3ecbd1b61098be56b7">_update_c</a> = before;</div>
<div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;                        }</div>
<div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160; </div>
<div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;                    <span class="keywordflow">case</span> ICUBCANPROTO_PER_MC_MSG__PID_ERROR:</div>
<div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;                        r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#af8335d1d20eaf06c3ec15c6424894b4c">_position_error</a> = *((<span class="keywordtype">short</span> *)(<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>));</div>
<div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;                        r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#a88ce6518b4ce93049d015c9994b21bc1">_torque_error</a> =   *((<span class="keywordtype">short</span> *)(<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>+4));</div>
<div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;                        r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#a6b20c5c27c60bb16c95cd88182b94850">_update_r</a> = before;</div>
<div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160;                        j++;</div>
<div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;                        <span class="keywordflow">if</span> (j &lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>())</div>
<div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160;                        {</div>
<div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160;                            r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#af8335d1d20eaf06c3ec15c6424894b4c">_position_error</a> = *((<span class="keywordtype">short</span> *)(<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>+2));</div>
<div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160;                            r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#a88ce6518b4ce93049d015c9994b21bc1">_torque_error</a> = *((<span class="keywordtype">short</span> *)(<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>+6));</div>
<div class="line"><a name="l03420"></a><span class="lineno"> 3420</span>&#160;                            r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#a6b20c5c27c60bb16c95cd88182b94850">_update_r</a> = before;</div>
<div class="line"><a name="l03421"></a><span class="lineno"> 3421</span>&#160;                        }</div>
<div class="line"><a name="l03422"></a><span class="lineno"> 3422</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160; </div>
<div class="line"><a name="l03424"></a><span class="lineno"> 3424</span>&#160;                    <span class="keywordflow">case</span> ICUBCANPROTO_PER_MC_MSG__VELOCITY:</div>
<div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160;                        <span class="comment">// also receives the acceleration values.</span></div>
<div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160;                        r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#a9b63eaaf5853d209b692e0f928242993">_speed_joint</a> = *((<span class="keywordtype">short</span> *)(<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>));</div>
<div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160;                        r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#af13a3497fba917355754e42c77235163">_accel_joint</a> = *((<span class="keywordtype">short</span> *)(<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>+4));</div>
<div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;                        r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#aae5bf68c1e48bee944c5586deac0e05d">_update_s</a> = before;</div>
<div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160;                        j++;</div>
<div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160;                        <span class="keywordflow">if</span> (j &lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>())</div>
<div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160;                        {</div>
<div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160;                            r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#a9b63eaaf5853d209b692e0f928242993">_speed_joint</a> = *((<span class="keywordtype">short</span> *)(<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>+2));</div>
<div class="line"><a name="l03433"></a><span class="lineno"> 3433</span>&#160;                            r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#af13a3497fba917355754e42c77235163">_accel_joint</a> = *((<span class="keywordtype">short</span> *)(<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>+6));</div>
<div class="line"><a name="l03434"></a><span class="lineno"> 3434</span>&#160;                            r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#aae5bf68c1e48bee944c5586deac0e05d">_update_s</a> = before;</div>
<div class="line"><a name="l03435"></a><span class="lineno"> 3435</span>&#160;                        }</div>
<div class="line"><a name="l03436"></a><span class="lineno"> 3436</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160; </div>
<div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160;                    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l03439"></a><span class="lineno"> 3439</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160;                    }</div>
<div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;                }</div>
<div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160;            }</div>
<div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;        }</div>
<div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;    }</div>
<div class="line"><a name="l03445"></a><span class="lineno"> 3445</span>&#160;}</div>
<div class="line"><a name="l03446"></a><span class="lineno"> 3446</span>&#160; </div>
<div class="line"><a name="l03450"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a9d7832df957f9d959d952e5055369fd0"> 3450</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a9d7832df957f9d959d952e5055369fd0">CanBusMotionControl::threadInit</a>()</div>
<div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160;{</div>
<div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a> (<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160; </div>
<div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa0a2b4f0b4ccbaeb30f396c1df211e9e">_writerequested</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a553bb4c4e517a5ad8776bad694fa5d88">_noreply</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160; </div>
<div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160;    r.<a class="code" href="classCanBusResources.html#a0b4b1900273079b69f1e10abdce9f295">_error_status</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160; </div>
<div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160;    errorstring.reserve(errorstringsize);</div>
<div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160;    previousRun=0;</div>
<div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;    averagePeriod=0;</div>
<div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160;    averageThreadTime=0;</div>
<div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160;    currentRun=0;</div>
<div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160;    myCount=-1;</div>
<div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;    lastReportTime=Time::now();</div>
<div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160; </div>
<div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160;}</div>
<div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160; </div>
<div class="line"><a name="l03470"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#afcffd07a1f94b6f8203ed4e332bc5a1c"> 3470</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#afcffd07a1f94b6f8203ed4e332bc5a1c">CanBusMotionControl::threadRelease</a>()</div>
<div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160;{</div>
<div class="line"><a name="l03472"></a><span class="lineno"> 3472</span>&#160;    <span class="comment">//doing nothing</span></div>
<div class="line"><a name="l03473"></a><span class="lineno"> 3473</span>&#160;}</div>
<div class="line"><a name="l03474"></a><span class="lineno"> 3474</span>&#160; </div>
<div class="line"><a name="l03475"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a99eecc5d575ce4300bb673edba383d03"> 3475</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a99eecc5d575ce4300bb673edba383d03">CanBusMotionControl:: run</a>()</div>
<div class="line"><a name="l03476"></a><span class="lineno"> 3476</span>&#160;{</div>
<div class="line"><a name="l03477"></a><span class="lineno"> 3477</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a> (<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0;</div>
<div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160; </div>
<div class="line"><a name="l03480"></a><span class="lineno"> 3480</span>&#160;    myCount++;</div>
<div class="line"><a name="l03481"></a><span class="lineno"> 3481</span>&#160;    <span class="keywordtype">double</span> before = Time::now();</div>
<div class="line"><a name="l03482"></a><span class="lineno"> 3482</span>&#160;    currentRun=before;</div>
<div class="line"><a name="l03483"></a><span class="lineno"> 3483</span>&#160;    <span class="keywordflow">if</span> (myCount&gt;0)</div>
<div class="line"><a name="l03484"></a><span class="lineno"> 3484</span>&#160;        averagePeriod+=(currentRun-previousRun)*1000;</div>
<div class="line"><a name="l03485"></a><span class="lineno"> 3485</span>&#160; </div>
<div class="line"><a name="l03487"></a><span class="lineno"> 3487</span>&#160;    <span class="comment">// check timeout on messages</span></div>
<div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;    std::list&lt;CanRequest&gt; timedout;</div>
<div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0;j&lt;r.<a class="code" href="classCanBusResources.html#ab5e61b157528b835621b4c073c42bf1d">requestsQueue</a>-&gt;<a class="code" href="classRequestsQueue.html#a069bf378e30859b33427d370d65d8ba3">getNJoints</a>();j++)</div>
<div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160;        {</div>
<div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160;            <span class="keywordflow">for</span>(<span class="keywordtype">int</span> m=0;m&lt;r.<a class="code" href="classCanBusResources.html#ab5e61b157528b835621b4c073c42bf1d">requestsQueue</a>-&gt;<a class="code" href="classRequestsQueue.html#ab08fc14815bc2ea1e3a7d06fe1a73450">getNMessages</a>();m++)</div>
<div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160;            {</div>
<div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160;                <a class="code" href="classThreadFifo.html">ThreadFifo</a> *fifo=r.<a class="code" href="classCanBusResources.html#ab5e61b157528b835621b4c073c42bf1d">requestsQueue</a>-&gt;<a class="code" href="classRequestsQueue.html#a35294789a7ce3686849ca5756f5d2e14">getFifo</a>(j,m);</div>
<div class="line"><a name="l03494"></a><span class="lineno"> 3494</span>&#160;                ACE_ASSERT (fifo!=0);</div>
<div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160;                std::list&lt;ThreadId&gt;::iterator it=fifo-&gt;begin();</div>
<div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160;                std::list&lt;ThreadId&gt;::iterator end=fifo-&gt;end();</div>
<div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160;                <span class="keywordflow">while</span>(it!=end)</div>
<div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160;                    {</div>
<div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160;                        <span class="comment">//increase wait time</span></div>
<div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160;                        (*it).waitTime+=r.<a class="code" href="classCanBusResources.html#a53e1ca73739299b650e1d04400775fd6">_polling_interval</a>;</div>
<div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160;                        <span class="keywordflow">if</span> ((*it).waitTime&gt;=r.<a class="code" href="classCanBusResources.html#a50b95da6c76d088586d87a0b68f66ec3">_timeout</a>)</div>
<div class="line"><a name="l03502"></a><span class="lineno"> 3502</span>&#160;                            {</div>
<div class="line"><a name="l03503"></a><span class="lineno"> 3503</span>&#160;                                <span class="comment">// ok we have it... this is a timed out message</span></div>
<div class="line"><a name="l03504"></a><span class="lineno"> 3504</span>&#160;                                <a class="code" href="structCanRequest.html">CanRequest</a> rq;</div>
<div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160;                                rq.<a class="code" href="structCanRequest.html#aa1f81c8b647dd2e97978188cb3adda8e">joint</a>=j;</div>
<div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160;                                rq.<a class="code" href="structCanRequest.html#a72199d25f1e5e66a6992f09fe9e00107">msg</a>=m;</div>
<div class="line"><a name="l03507"></a><span class="lineno"> 3507</span>&#160;                                rq.<a class="code" href="structCanRequest.html#a1c10ddcc136851e57382d0377074ef56">threadId</a>=(*it).id;</div>
<div class="line"><a name="l03508"></a><span class="lineno"> 3508</span>&#160;                                timedout.push_back(rq); <span class="comment">//store this request, so we can wake up the waiting thread</span></div>
<div class="line"><a name="l03509"></a><span class="lineno"> 3509</span>&#160;                                it=fifo-&gt;erase(it); <span class="comment">//it now points to the next element</span></div>
<div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160;                                yError(<span class="stringliteral">&quot;%s [%d] thread:%d msg:%d joint:%d timed out\n&quot;</span>, </div>
<div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160;                                        canDevName.c_str(),</div>
<div class="line"><a name="l03512"></a><span class="lineno"> 3512</span>&#160;                                        r.<a class="code" href="classCanBusResources.html#a5434ee36839850ff8330ef5322171ff8">_networkN</a>,</div>
<div class="line"><a name="l03513"></a><span class="lineno"> 3513</span>&#160;                                        rq.<a class="code" href="structCanRequest.html#a1c10ddcc136851e57382d0377074ef56">threadId</a>, rq.<a class="code" href="structCanRequest.html#a72199d25f1e5e66a6992f09fe9e00107">msg</a>, rq.<a class="code" href="structCanRequest.html#aa1f81c8b647dd2e97978188cb3adda8e">joint</a>);</div>
<div class="line"><a name="l03514"></a><span class="lineno"> 3514</span>&#160; </div>
<div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;                                <span class="comment">// ???</span></div>
<div class="line"><a name="l03516"></a><span class="lineno"> 3516</span>&#160;                                <span class="comment">//logJointData(canDevName.c_str(),r._networkN,j,3,yarp::os::Value(1));</span></div>
<div class="line"><a name="l03517"></a><span class="lineno"> 3517</span>&#160;                            }</div>
<div class="line"><a name="l03518"></a><span class="lineno"> 3518</span>&#160;                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l03519"></a><span class="lineno"> 3519</span>&#160;                            ++it;</div>
<div class="line"><a name="l03520"></a><span class="lineno"> 3520</span>&#160;                    }</div>
<div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160;            }</div>
<div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160;        }</div>
<div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160; </div>
<div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160;    <span class="comment">//now go through the list of timedout requests and wake up waiting threads</span></div>
<div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160;    std::list&lt;CanRequest&gt;::iterator it=timedout.begin();</div>
<div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;    std::list&lt;CanRequest&gt;::iterator end=timedout.end();</div>
<div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160;    <span class="keywordflow">while</span>(it!=end)</div>
<div class="line"><a name="l03528"></a><span class="lineno"> 3528</span>&#160;        {</div>
<div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;            <span class="keywordtype">int</span> tid=(*it).threadId;</div>
<div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;            <a class="code" href="classThreadTable2.html">ThreadTable2</a> *t=<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a0de6c591abb8d8340378037eccf81951">threadPool</a>-&gt;<a class="code" href="classThreadPool2.html#abed580daad75544f3455f08beaa06cf4">getThreadTable</a>(tid);</div>
<div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160;            t-&gt;<a class="code" href="classThreadTable2.html#a42190aa0dd2d82764f64c35f5f99f78c">timeout</a>(); <span class="comment">//notify one message timedout</span></div>
<div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;            ++it;</div>
<div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;        }</div>
<div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160;    <span class="comment">// report error LOOP</span></div>
<div class="line"><a name="l03536"></a><span class="lineno"> 3536</span>&#160;    <span class="keywordflow">if</span> ((currentRun-lastReportTime)&gt;<a class="code" href="CanBusMotionControl_8cpp.html#a69602775927cc5539c5d78d79cd0a973">REPORT_PERIOD</a>)</div>
<div class="line"><a name="l03537"></a><span class="lineno"> 3537</span>&#160;        {</div>
<div class="line"><a name="l03538"></a><span class="lineno"> 3538</span>&#160;            <span class="keywordtype">double</span> avPeriod=1000.0*getEstimatedPeriod();</div>
<div class="line"><a name="l03539"></a><span class="lineno"> 3539</span>&#160;            <span class="keywordtype">double</span> avThTime=1000.0*getEstimatedUsed();<span class="comment">//averageThreadTime/myCount;</span></div>
<div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> it=getIterations();</div>
<div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160;            resetStat();</div>
<div class="line"><a name="l03542"></a><span class="lineno"> 3542</span>&#160;            yDebug(<span class="stringliteral">&quot;%s [%d] thread ran %d times, req.dT:%d[ms], av.dT:%.2lf[ms] av.loopT :%.2lf[ms]\n&quot;</span>, </div>
<div class="line"><a name="l03543"></a><span class="lineno"> 3543</span>&#160;                    canDevName.c_str(),</div>
<div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;                    r.<a class="code" href="classCanBusResources.html#a5434ee36839850ff8330ef5322171ff8">_networkN</a>, </div>
<div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160;                    it, </div>
<div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160;                    r.<a class="code" href="classCanBusResources.html#a53e1ca73739299b650e1d04400775fd6">_polling_interval</a>,</div>
<div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160;                    avPeriod,</div>
<div class="line"><a name="l03548"></a><span class="lineno"> 3548</span>&#160;                    avThTime);</div>
<div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160; </div>
<div class="line"><a name="l03550"></a><span class="lineno"> 3550</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">char</span> *can=canDevName.c_str();</div>
<div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160;            <a class="code" href="CanBusMotionControl_8h.html#a03faabee96d29afede2fd4537351c6fe">logNetworkData</a>(can,r.<a class="code" href="classCanBusResources.html#a5434ee36839850ff8330ef5322171ff8">_networkN</a>,10,yarp::os::Value(r.<a class="code" href="classCanBusResources.html#a53e1ca73739299b650e1d04400775fd6">_polling_interval</a>));</div>
<div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160;            <a class="code" href="CanBusMotionControl_8h.html#a03faabee96d29afede2fd4537351c6fe">logNetworkData</a>(can,r.<a class="code" href="classCanBusResources.html#a5434ee36839850ff8330ef5322171ff8">_networkN</a>,11,yarp::os::Value((<span class="keywordtype">double</span>)avPeriod));</div>
<div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160;            <a class="code" href="CanBusMotionControl_8h.html#a03faabee96d29afede2fd4537351c6fe">logNetworkData</a>(can,r.<a class="code" href="classCanBusResources.html#a5434ee36839850ff8330ef5322171ff8">_networkN</a>,12,yarp::os::Value((<span class="keywordtype">double</span>)avThTime));</div>
<div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160; </div>
<div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160;            <span class="keywordflow">if</span> (r.<a class="code" href="classCanBusResources.html#a01fd28d9638b166afda40872939ac15b">iCanErrors</a>)</div>
<div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160;                {</div>
<div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;                    CanErrors errors;</div>
<div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160;                    r.<a class="code" href="classCanBusResources.html#a01fd28d9638b166afda40872939ac15b">iCanErrors</a>-&gt;canGetErrors(errors);</div>
<div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160;                    yDebug(<span class="stringliteral">&quot; Can Errors --  Device Rx:%u, Device Tx:%u, RxOvf: %u, TxOvf: %u, BusOff: %d -- Driver Fifo Rx:%u, Driver Fifo Tx:%u\n&quot;</span>, </div>
<div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160;                            errors.rxCanErrors,</div>
<div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;                            errors.txCanErrors,</div>
<div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;                            errors.rxCanFifoOvr,</div>
<div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;                            errors.txCanFifoOvr,</div>
<div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160;                            errors.busoff,</div>
<div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;                            errors.rxBufferOvr,</div>
<div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;                            errors.txBufferOvr);</div>
<div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160; </div>
<div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;                    <a class="code" href="CanBusMotionControl_8h.html#a03faabee96d29afede2fd4537351c6fe">logNetworkData</a>(can,r.<a class="code" href="classCanBusResources.html#a5434ee36839850ff8330ef5322171ff8">_networkN</a>,5,yarp::os::Value(errors.rxCanErrors));</div>
<div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160;                    <a class="code" href="CanBusMotionControl_8h.html#a03faabee96d29afede2fd4537351c6fe">logNetworkData</a>(can,r.<a class="code" href="classCanBusResources.html#a5434ee36839850ff8330ef5322171ff8">_networkN</a>,6,yarp::os::Value(errors.txCanErrors));</div>
<div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160;                    </div>
<div class="line"><a name="l03571"></a><span class="lineno"> 3571</span>&#160;                    <a class="code" href="CanBusMotionControl_8h.html#a03faabee96d29afede2fd4537351c6fe">logNetworkData</a>(can,r.<a class="code" href="classCanBusResources.html#a5434ee36839850ff8330ef5322171ff8">_networkN</a>,7,yarp::os::Value((<span class="keywordtype">int</span>)errors.rxCanFifoOvr));</div>
<div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;                    <a class="code" href="CanBusMotionControl_8h.html#a03faabee96d29afede2fd4537351c6fe">logNetworkData</a>(can,r.<a class="code" href="classCanBusResources.html#a5434ee36839850ff8330ef5322171ff8">_networkN</a>,8,yarp::os::Value((<span class="keywordtype">int</span>)errors.txCanFifoOvr));</div>
<div class="line"><a name="l03573"></a><span class="lineno"> 3573</span>&#160; </div>
<div class="line"><a name="l03574"></a><span class="lineno"> 3574</span>&#160;                    <a class="code" href="CanBusMotionControl_8h.html#a03faabee96d29afede2fd4537351c6fe">logNetworkData</a>(can,r.<a class="code" href="classCanBusResources.html#a5434ee36839850ff8330ef5322171ff8">_networkN</a>,9,yarp::os::Value((<span class="keywordtype">int</span>)errors.busoff));</div>
<div class="line"><a name="l03575"></a><span class="lineno"> 3575</span>&#160; </div>
<div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160;                    <a class="code" href="CanBusMotionControl_8h.html#a03faabee96d29afede2fd4537351c6fe">logNetworkData</a>(can,r.<a class="code" href="classCanBusResources.html#a5434ee36839850ff8330ef5322171ff8">_networkN</a>,3,yarp::os::Value((<span class="keywordtype">int</span>)errors.rxBufferOvr));</div>
<div class="line"><a name="l03577"></a><span class="lineno"> 3577</span>&#160;                    <a class="code" href="CanBusMotionControl_8h.html#a03faabee96d29afede2fd4537351c6fe">logNetworkData</a>(can,r.<a class="code" href="classCanBusResources.html#a5434ee36839850ff8330ef5322171ff8">_networkN</a>,4,yarp::os::Value((<span class="keywordtype">int</span>)errors.txBufferOvr));</div>
<div class="line"><a name="l03578"></a><span class="lineno"> 3578</span>&#160;                }</div>
<div class="line"><a name="l03579"></a><span class="lineno"> 3579</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l03580"></a><span class="lineno"> 3580</span>&#160;                {</div>
<div class="line"><a name="l03581"></a><span class="lineno"> 3581</span>&#160;                    yDebug(<span class="stringliteral">&quot;     Device has no ICanBusErr interface\n&quot;</span>);</div>
<div class="line"><a name="l03582"></a><span class="lineno"> 3582</span>&#160;                }</div>
<div class="line"><a name="l03583"></a><span class="lineno"> 3583</span>&#160;                </div>
<div class="line"><a name="l03584"></a><span class="lineno"> 3584</span>&#160; </div>
<div class="line"><a name="l03585"></a><span class="lineno"> 3585</span>&#160;            <span class="keywordtype">int</span> j=0;</div>
<div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160;            <span class="keywordtype">char</span> <a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a>[255] = {0};</div>
<div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160;            errorstring.clear();</div>
<div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160; </div>
<div class="line"><a name="l03590"></a><span class="lineno"> 3590</span>&#160;            snprintf(<a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a>, <span class="keyword">sizeof</span>(<a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a>), <span class="stringliteral">&quot;%s [%d] printing boards infos:\n&quot;</span>, canDevName.c_str(), r.<a class="code" href="classCanBusResources.html#a5434ee36839850ff8330ef5322171ff8">_networkN</a>);</div>
<div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160;            errorstring.append(<a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a>);</div>
<div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160; </div>
<div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160;            <span class="keywordtype">bool</span> errorF=<span class="keyword">false</span>;</div>
<div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;            <span class="keywordflow">for</span> (j=0; j&lt;r.<a class="code" href="classCanBusResources.html#a7df58d2dc97da0775a53caaed3545726">_njoints</a> ;j++)</div>
<div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160;            {</div>
<div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160;                <span class="keywordflow">if</span> ( r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#a9ccee7fd979022713c5992f27bf7f6de">_mainLoopOverflowCounter</a>&gt;0)</div>
<div class="line"><a name="l03597"></a><span class="lineno"> 3597</span>&#160;                {</div>
<div class="line"><a name="l03598"></a><span class="lineno"> 3598</span>&#160;                    errorF=<span class="keyword">true</span>;</div>
<div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160;                    <span class="keywordtype">int</span> addr=r.<a class="code" href="classCanBusResources.html#aebb638eb231f9461b10f514b580dab67">_destinations</a>[j/2];</div>
<div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160;                    yWarning(<span class="stringliteral">&quot;%s [%d] board %d MAIN LOOP TIME EXCEDEED %d TIMES!\n&quot;</span>, canDevName.c_str(), r.<a class="code" href="classCanBusResources.html#a5434ee36839850ff8330ef5322171ff8">_networkN</a>, addr,r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#a9ccee7fd979022713c5992f27bf7f6de">_mainLoopOverflowCounter</a>);</div>
<div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160;                    <a class="code" href="CanBusMotionControl_8h.html#ae6ea930d226c19296f184951d8a8daf9">logJointData</a>(canDevName.c_str(),r.<a class="code" href="classCanBusResources.html#a5434ee36839850ff8330ef5322171ff8">_networkN</a>,j,18,yarp::os::Value((<span class="keywordtype">int</span>)r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#a9ccee7fd979022713c5992f27bf7f6de">_mainLoopOverflowCounter</a>));                </div>
<div class="line"><a name="l03602"></a><span class="lineno"> 3602</span>&#160;                    r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#a9ccee7fd979022713c5992f27bf7f6de">_mainLoopOverflowCounter</a>=0;</div>
<div class="line"><a name="l03603"></a><span class="lineno"> 3603</span>&#160;                }</div>
<div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;                {</div>
<div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160;                    <a class="code" href="CanBusMotionControl_8h.html#ae6ea930d226c19296f184951d8a8daf9">logJointData</a>(canDevName.c_str(),r.<a class="code" href="classCanBusResources.html#a5434ee36839850ff8330ef5322171ff8">_networkN</a>,j,18,yarp::os::Value(0));</div>
<div class="line"><a name="l03607"></a><span class="lineno"> 3607</span>&#160;                }</div>
<div class="line"><a name="l03608"></a><span class="lineno"> 3608</span>&#160;            }</div>
<div class="line"><a name="l03609"></a><span class="lineno"> 3609</span>&#160; </div>
<div class="line"><a name="l03610"></a><span class="lineno"> 3610</span>&#160;            <span class="keywordflow">for</span> (j=0; j&lt;r.<a class="code" href="classCanBusResources.html#a7df58d2dc97da0775a53caaed3545726">_njoints</a> ;j+=2)</div>
<div class="line"><a name="l03611"></a><span class="lineno"> 3611</span>&#160;                {</div>
<div class="line"><a name="l03612"></a><span class="lineno"> 3612</span>&#160;                    <span class="keywordtype">int</span> addr=r.<a class="code" href="classCanBusResources.html#aebb638eb231f9461b10f514b580dab67">_destinations</a>[j/2];</div>
<div class="line"><a name="l03613"></a><span class="lineno"> 3613</span>&#160;                    <span class="keywordflow">if</span> ( (r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#af8625ef3029a59bea61aaf7fed60b5a6">_canTxError</a>&gt;0)||(r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#a0965ebdd231975fe93e2953f22372375">_canRxError</a>&gt;0))</div>
<div class="line"><a name="l03614"></a><span class="lineno"> 3614</span>&#160;                        {</div>
<div class="line"><a name="l03615"></a><span class="lineno"> 3615</span>&#160;                            errorF=<span class="keyword">true</span>;</div>
<div class="line"><a name="l03616"></a><span class="lineno"> 3616</span>&#160;                            snprintf(<a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a>, <span class="keyword">sizeof</span>(<a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a>), <span class="stringliteral">&quot;Id:%d T:%u R:%u &quot;</span>, addr, r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#af8625ef3029a59bea61aaf7fed60b5a6">_canTxError</a>, r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#a0965ebdd231975fe93e2953f22372375">_canRxError</a>);</div>
<div class="line"><a name="l03617"></a><span class="lineno"> 3617</span>&#160;                            errorstring.append(<a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a>);</div>
<div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160; </div>
<div class="line"><a name="l03619"></a><span class="lineno"> 3619</span>&#160; </div>
<div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160;                            <a class="code" href="CanBusMotionControl_8h.html#ae6ea930d226c19296f184951d8a8daf9">logJointData</a>(canDevName.c_str(),r.<a class="code" href="classCanBusResources.html#a5434ee36839850ff8330ef5322171ff8">_networkN</a>,j,14,yarp::os::Value((<span class="keywordtype">int</span>)r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#af8625ef3029a59bea61aaf7fed60b5a6">_canTxError</a>));</div>
<div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160;                            <a class="code" href="CanBusMotionControl_8h.html#ae6ea930d226c19296f184951d8a8daf9">logJointData</a>(canDevName.c_str(),r.<a class="code" href="classCanBusResources.html#a5434ee36839850ff8330ef5322171ff8">_networkN</a>,j,15,yarp::os::Value((<span class="keywordtype">int</span>)r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#a0965ebdd231975fe93e2953f22372375">_canRxError</a>));</div>
<div class="line"><a name="l03622"></a><span class="lineno"> 3622</span>&#160;                        }</div>
<div class="line"><a name="l03623"></a><span class="lineno"> 3623</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03624"></a><span class="lineno"> 3624</span>&#160;                    {</div>
<div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160;                        <a class="code" href="CanBusMotionControl_8h.html#ae6ea930d226c19296f184951d8a8daf9">logJointData</a>(canDevName.c_str(),r.<a class="code" href="classCanBusResources.html#a5434ee36839850ff8330ef5322171ff8">_networkN</a>,j,14,yarp::os::Value(0));</div>
<div class="line"><a name="l03626"></a><span class="lineno"> 3626</span>&#160;                        <a class="code" href="CanBusMotionControl_8h.html#ae6ea930d226c19296f184951d8a8daf9">logJointData</a>(canDevName.c_str(),r.<a class="code" href="classCanBusResources.html#a5434ee36839850ff8330ef5322171ff8">_networkN</a>,j,15,yarp::os::Value(0));</div>
<div class="line"><a name="l03627"></a><span class="lineno"> 3627</span>&#160;                    }</div>
<div class="line"><a name="l03628"></a><span class="lineno"> 3628</span>&#160;                }</div>
<div class="line"><a name="l03629"></a><span class="lineno"> 3629</span>&#160;            <span class="keywordflow">if</span> (!errorF)</div>
<div class="line"><a name="l03630"></a><span class="lineno"> 3630</span>&#160;                {</div>
<div class="line"><a name="l03631"></a><span class="lineno"> 3631</span>&#160;                    snprintf(<a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a>, <span class="keyword">sizeof</span>(<a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a>), <span class="stringliteral">&quot;None&quot;</span>);</div>
<div class="line"><a name="l03632"></a><span class="lineno"> 3632</span>&#160;                    errorstring.append(<a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a>);</div>
<div class="line"><a name="l03633"></a><span class="lineno"> 3633</span>&#160;                }</div>
<div class="line"><a name="l03634"></a><span class="lineno"> 3634</span>&#160; </div>
<div class="line"><a name="l03635"></a><span class="lineno"> 3635</span>&#160;            yDebug(<span class="stringliteral">&quot;%s\n&quot;</span>, errorstring.c_str());</div>
<div class="line"><a name="l03636"></a><span class="lineno"> 3636</span>&#160; </div>
<div class="line"><a name="l03637"></a><span class="lineno"> 3637</span>&#160;            <span class="comment">//Check statistics on boards</span></div>
<div class="line"><a name="l03638"></a><span class="lineno"> 3638</span>&#160;            <span class="keywordflow">for</span> (j=0; j&lt;r.<a class="code" href="classCanBusResources.html#a7df58d2dc97da0775a53caaed3545726">_njoints</a> ;j++)</div>
<div class="line"><a name="l03639"></a><span class="lineno"> 3639</span>&#160;                {</div>
<div class="line"><a name="l03640"></a><span class="lineno"> 3640</span>&#160;                    <span class="keywordtype">double</span> lastRecv = r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#add58648b082b014052e572683e0c821b">_update_e</a>;</div>
<div class="line"><a name="l03641"></a><span class="lineno"> 3641</span>&#160; </div>
<div class="line"><a name="l03642"></a><span class="lineno"> 3642</span>&#160;                    <a class="code" href="CanBusMotionControl_8h.html#ae6ea930d226c19296f184951d8a8daf9">logJointData</a>(canDevName.c_str(),r.<a class="code" href="classCanBusResources.html#a5434ee36839850ff8330ef5322171ff8">_networkN</a>,j,2,yarp::os::Value((<span class="keywordtype">int</span>)(currentRun-lastRecv)));</div>
<div class="line"><a name="l03643"></a><span class="lineno"> 3643</span>&#160; </div>
<div class="line"><a name="l03644"></a><span class="lineno"> 3644</span>&#160;                    <span class="keywordflow">if</span> ( (currentRun-lastRecv)&gt;<a class="code" href="CanBusMotionControl_8cpp.html#a29c8e26191fdd1aa2db47d6906ae1a14">BCAST_STATUS_TIMEOUT</a>)</div>
<div class="line"><a name="l03645"></a><span class="lineno"> 3645</span>&#160;                    {</div>
<div class="line"><a name="l03646"></a><span class="lineno"> 3646</span>&#160;                            <span class="keywordtype">int</span> ch=j%2;</div>
<div class="line"><a name="l03647"></a><span class="lineno"> 3647</span>&#160;                            <span class="keywordtype">int</span> addr=r.<a class="code" href="classCanBusResources.html#aebb638eb231f9461b10f514b580dab67">_destinations</a>[j/2];</div>
<div class="line"><a name="l03648"></a><span class="lineno"> 3648</span>&#160;                            yWarning(<span class="stringliteral">&quot;%s [%d] have not heard from board %d (channel %d) since %.2lf seconds\n&quot;</span>, </div>
<div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160;                                    canDevName.c_str(),</div>
<div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160;                                    r.<a class="code" href="classCanBusResources.html#a5434ee36839850ff8330ef5322171ff8">_networkN</a>, </div>
<div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160;                                    addr, ch, currentRun-lastRecv);</div>
<div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160; </div>
<div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160;                            <a class="code" href="CanBusMotionControl_8h.html#ae6ea930d226c19296f184951d8a8daf9">logJointData</a>(canDevName.c_str(),r.<a class="code" href="classCanBusResources.html#a5434ee36839850ff8330ef5322171ff8">_networkN</a>,j,3,yarp::os::Value(1));</div>
<div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;                    }</div>
<div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;                    {</div>
<div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;                        <a class="code" href="CanBusMotionControl_8h.html#ae6ea930d226c19296f184951d8a8daf9">logJointData</a>(canDevName.c_str(),r.<a class="code" href="classCanBusResources.html#a5434ee36839850ff8330ef5322171ff8">_networkN</a>,j,3,yarp::os::Value(0));</div>
<div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160;                    }</div>
<div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;                }</div>
<div class="line"><a name="l03660"></a><span class="lineno"> 3660</span>&#160; </div>
<div class="line"><a name="l03661"></a><span class="lineno"> 3661</span>&#160;            <span class="comment">//Check position update frequency</span></div>
<div class="line"><a name="l03662"></a><span class="lineno"> 3662</span>&#160;            <span class="keywordflow">for</span>(j=0; j&lt;r.<a class="code" href="classCanBusResources.html#a7df58d2dc97da0775a53caaed3545726">_njoints</a>; j++)</div>
<div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160;                {</div>
<div class="line"><a name="l03664"></a><span class="lineno"> 3664</span>&#160;                    <span class="keywordtype">double</span> dT;</div>
<div class="line"><a name="l03665"></a><span class="lineno"> 3665</span>&#160;                    <span class="keywordtype">double</span> <a class="code" href="namespacestrain_1_1dsp_1_1fsc.html#a65804363dbaa9346e53442cb1bb9d73f">max</a>;</div>
<div class="line"><a name="l03666"></a><span class="lineno"> 3666</span>&#160;                    <span class="keywordtype">double</span> <a class="code" href="namespacestrain_1_1dsp_1_1fsc.html#a746ce6f9a14034939607ccead53e3fd6">min</a>;</div>
<div class="line"><a name="l03667"></a><span class="lineno"> 3667</span>&#160;                    <span class="keywordtype">int</span> it;</div>
<div class="line"><a name="l03668"></a><span class="lineno"> 3668</span>&#160;                    r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#af9b2502ea8bef890aec0d7f70205e2c0">_position_joint</a>.<a class="code" href="structBCastElement.html#a85fe828a88a5b82705123c8191bf6ef5">getStats</a>(it, dT, <a class="code" href="namespacestrain_1_1dsp_1_1fsc.html#a746ce6f9a14034939607ccead53e3fd6">min</a>, <a class="code" href="namespacestrain_1_1dsp_1_1fsc.html#a65804363dbaa9346e53442cb1bb9d73f">max</a>);</div>
<div class="line"><a name="l03669"></a><span class="lineno"> 3669</span>&#160;                    r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#af9b2502ea8bef890aec0d7f70205e2c0">_position_joint</a>.<a class="code" href="structBCastElement.html#a59eba3c5785458c26d3e7c0eb8259c54">resetStats</a>();</div>
<div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160; </div>
<div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160;                    <a class="code" href="CanBusMotionControl_8h.html#ae6ea930d226c19296f184951d8a8daf9">logJointData</a>(canDevName.c_str(),r.<a class="code" href="classCanBusResources.html#a5434ee36839850ff8330ef5322171ff8">_networkN</a>,j,5,yarp::os::Value(<a class="code" href="namespacestrain_1_1dsp_1_1fsc.html#a65804363dbaa9346e53442cb1bb9d73f">max</a>));</div>
<div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160; </div>
<div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160;                    <span class="keywordtype">double</span> POS_LATENCY_WARN_THR=averagePeriod*1.5;</div>
<div class="line"><a name="l03674"></a><span class="lineno"> 3674</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="namespacestrain_1_1dsp_1_1fsc.html#a65804363dbaa9346e53442cb1bb9d73f">max</a>&gt;POS_LATENCY_WARN_THR)</div>
<div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160;                    {</div>
<div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160;                        yWarning(<span class="stringliteral">&quot;%s [%d] jnt %d, warning encoder latency above threshold (lat: %.2lf [ms], received %d msgs)\n&quot;</span>,</div>
<div class="line"><a name="l03677"></a><span class="lineno"> 3677</span>&#160;                                canDevName.c_str(),</div>
<div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160;                                r.<a class="code" href="classCanBusResources.html#a5434ee36839850ff8330ef5322171ff8">_networkN</a>,</div>
<div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;                                j, </div>
<div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160;                                <a class="code" href="namespacestrain_1_1dsp_1_1fsc.html#a65804363dbaa9346e53442cb1bb9d73f">max</a>,</div>
<div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160;                                it);</div>
<div class="line"><a name="l03682"></a><span class="lineno"> 3682</span>&#160;                    }</div>
<div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160; </div>
<div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160;                    <span class="keywordflow">if</span> (it&lt;1)</div>
<div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160;                    {</div>
<div class="line"><a name="l03686"></a><span class="lineno"> 3686</span>&#160;                        yWarning(<span class="stringliteral">&quot;%s [%d] joint %d, warning not enough encoder messages (received %d msgs)\n&quot;</span>,</div>
<div class="line"><a name="l03687"></a><span class="lineno"> 3687</span>&#160;                                canDevName.c_str(),</div>
<div class="line"><a name="l03688"></a><span class="lineno"> 3688</span>&#160;                                r.<a class="code" href="classCanBusResources.html#a5434ee36839850ff8330ef5322171ff8">_networkN</a>,</div>
<div class="line"><a name="l03689"></a><span class="lineno"> 3689</span>&#160;                                j, </div>
<div class="line"><a name="l03690"></a><span class="lineno"> 3690</span>&#160;                                it);</div>
<div class="line"><a name="l03691"></a><span class="lineno"> 3691</span>&#160; </div>
<div class="line"><a name="l03692"></a><span class="lineno"> 3692</span>&#160;                        <a class="code" href="CanBusMotionControl_8h.html#ae6ea930d226c19296f184951d8a8daf9">logJointData</a>(canDevName.c_str(),r.<a class="code" href="classCanBusResources.html#a5434ee36839850ff8330ef5322171ff8">_networkN</a>,j,4,yarp::os::Value(1));</div>
<div class="line"><a name="l03693"></a><span class="lineno"> 3693</span>&#160;                    }</div>
<div class="line"><a name="l03694"></a><span class="lineno"> 3694</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03695"></a><span class="lineno"> 3695</span>&#160;                    {</div>
<div class="line"><a name="l03696"></a><span class="lineno"> 3696</span>&#160;                        <a class="code" href="CanBusMotionControl_8h.html#ae6ea930d226c19296f184951d8a8daf9">logJointData</a>(canDevName.c_str(),r.<a class="code" href="classCanBusResources.html#a5434ee36839850ff8330ef5322171ff8">_networkN</a>,j,4,yarp::os::Value(0));</div>
<div class="line"><a name="l03697"></a><span class="lineno"> 3697</span>&#160;                    }</div>
<div class="line"><a name="l03698"></a><span class="lineno"> 3698</span>&#160;                }</div>
<div class="line"><a name="l03699"></a><span class="lineno"> 3699</span>&#160; </div>
<div class="line"><a name="l03701"></a><span class="lineno"> 3701</span>&#160;            std::list&lt;TBR_AnalogSensor *&gt;::iterator analogIt=analogSensors.begin();</div>
<div class="line"><a name="l03702"></a><span class="lineno"> 3702</span>&#160;            <span class="keywordflow">while</span>(analogIt!=analogSensors.end())</div>
<div class="line"><a name="l03703"></a><span class="lineno"> 3703</span>&#160;            {</div>
<div class="line"><a name="l03704"></a><span class="lineno"> 3704</span>&#160;                <a class="code" href="classTBR__AnalogSensor.html">TBR_AnalogSensor</a> *pAnalog=(*analogIt);</div>
<div class="line"><a name="l03705"></a><span class="lineno"> 3705</span>&#160;                <span class="keywordflow">if</span> (pAnalog)</div>
<div class="line"><a name="l03706"></a><span class="lineno"> 3706</span>&#160;                {</div>
<div class="line"><a name="l03707"></a><span class="lineno"> 3707</span>&#160;                    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="modules_2iKinGazeCtrl_2include_2iCub_2utils_8h.html#ac5ed384388ea1d12d65a38b44870351c">sat</a>;</div>
<div class="line"><a name="l03708"></a><span class="lineno"> 3708</span>&#160;                    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> err;</div>
<div class="line"><a name="l03709"></a><span class="lineno"> 3709</span>&#160;                    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> tout; </div>
<div class="line"><a name="l03710"></a><span class="lineno"> 3710</span>&#160;                    pAnalog-&gt;<a class="code" href="classTBR__AnalogSensor.html#a97a605bedbb705bcbdb0861e02c53ddf">getCounters</a>(<a class="code" href="modules_2iKinGazeCtrl_2include_2iCub_2utils_8h.html#ac5ed384388ea1d12d65a38b44870351c">sat</a>, err, tout);</div>
<div class="line"><a name="l03711"></a><span class="lineno"> 3711</span>&#160; </div>
<div class="line"><a name="l03712"></a><span class="lineno"> 3712</span>&#160;                    <span class="keyword">const</span> <span class="keywordtype">char</span>* devName=canDevName.c_str();</div>
<div class="line"><a name="l03713"></a><span class="lineno"> 3713</span>&#160;                    <span class="keywordtype">int</span> <span class="keywordtype">id</span>=pAnalog-&gt;<a class="code" href="classTBR__AnalogSensor.html#aabf2c460035a3398a4d4bed8cf37949d">getId</a>();</div>
<div class="line"><a name="l03714"></a><span class="lineno"> 3714</span>&#160; </div>
<div class="line"><a name="l03715"></a><span class="lineno"> 3715</span>&#160;<span class="preprocessor">                    #ifdef _USE_INTERFACEGUI</span></div>
<div class="line"><a name="l03716"></a><span class="lineno"> 3716</span>&#160;                    logAnalogData(devName,r.<a class="code" href="classCanBusResources.html#a5434ee36839850ff8330ef5322171ff8">_networkN</a>,<span class="keywordtype">id</span>,3,yarp::os::Value((<span class="keywordtype">int</span>)<a class="code" href="modules_2iKinGazeCtrl_2include_2iCub_2utils_8h.html#ac5ed384388ea1d12d65a38b44870351c">sat</a>));</div>
<div class="line"><a name="l03717"></a><span class="lineno"> 3717</span>&#160;                    logAnalogData(devName,r.<a class="code" href="classCanBusResources.html#a5434ee36839850ff8330ef5322171ff8">_networkN</a>,<span class="keywordtype">id</span>,4,yarp::os::Value((<span class="keywordtype">int</span>)err));</div>
<div class="line"><a name="l03718"></a><span class="lineno"> 3718</span>&#160;                    logAnalogData(devName,r.<a class="code" href="classCanBusResources.html#a5434ee36839850ff8330ef5322171ff8">_networkN</a>,<span class="keywordtype">id</span>,5,yarp::os::Value((<span class="keywordtype">int</span>)tout));</div>
<div class="line"><a name="l03719"></a><span class="lineno"> 3719</span>&#160;<span class="preprocessor">                    #endif</span></div>
<div class="line"><a name="l03720"></a><span class="lineno"> 3720</span>&#160; </div>
<div class="line"><a name="l03721"></a><span class="lineno"> 3721</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="modules_2iKinGazeCtrl_2include_2iCub_2utils_8h.html#ac5ed384388ea1d12d65a38b44870351c">sat</a>+err+tout!=0)</div>
<div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160;                    {</div>
<div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160;                        yWarning(<span class="stringliteral">&quot;%s [%d] analog %s saturated:%u errors: %u timeout:%u\n&quot;</span>,</div>
<div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160;                                devName,</div>
<div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160;                                r.<a class="code" href="classCanBusResources.html#a5434ee36839850ff8330ef5322171ff8">_networkN</a>,</div>
<div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160;                                pAnalog-&gt;<a class="code" href="classTBR__AnalogSensor.html#a243cc72aa6e1e45d27061a22902f9c69">getDeviceId</a>().c_str(),</div>
<div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160;                                <a class="code" href="modules_2iKinGazeCtrl_2include_2iCub_2utils_8h.html#ac5ed384388ea1d12d65a38b44870351c">sat</a>, err, tout);</div>
<div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160;                    }</div>
<div class="line"><a name="l03729"></a><span class="lineno"> 3729</span>&#160;                    pAnalog-&gt;<a class="code" href="classTBR__AnalogSensor.html#a2bf1640f8a4b0a4410e4ab70371abdea">resetCounters</a>();</div>
<div class="line"><a name="l03730"></a><span class="lineno"> 3730</span>&#160;                }</div>
<div class="line"><a name="l03731"></a><span class="lineno"> 3731</span>&#160;                analogIt++;</div>
<div class="line"><a name="l03732"></a><span class="lineno"> 3732</span>&#160;            }</div>
<div class="line"><a name="l03733"></a><span class="lineno"> 3733</span>&#160; </div>
<div class="line"><a name="l03734"></a><span class="lineno"> 3734</span>&#160;            myCount=0;</div>
<div class="line"><a name="l03735"></a><span class="lineno"> 3735</span>&#160;            lastReportTime=currentRun;</div>
<div class="line"><a name="l03736"></a><span class="lineno"> 3736</span>&#160;            averagePeriod=0;</div>
<div class="line"><a name="l03737"></a><span class="lineno"> 3737</span>&#160;            averageThreadTime=0;</div>
<div class="line"><a name="l03738"></a><span class="lineno"> 3738</span>&#160;        }</div>
<div class="line"><a name="l03739"></a><span class="lineno"> 3739</span>&#160; </div>
<div class="line"><a name="l03740"></a><span class="lineno"> 3740</span>&#160;    <span class="comment">//DEBUG_FUNC(&quot;CanBusMotionControl::thread running [%d]: wait\n&quot;, mycount);</span></div>
<div class="line"><a name="l03741"></a><span class="lineno"> 3741</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.lock();</div>
<div class="line"><a name="l03742"></a><span class="lineno"> 3742</span>&#160;    <span class="comment">//DEBUG_FUNC(&quot;posted\n&quot;);</span></div>
<div class="line"><a name="l03743"></a><span class="lineno"> 3743</span>&#160; </div>
<div class="line"><a name="l03744"></a><span class="lineno"> 3744</span>&#160;    <span class="keywordflow">if</span> (r.<a class="code" href="classCanBusResources.html#ae31dbfd6d9458c803d5976bf80d2df29">read</a> () != <span class="keyword">true</span>)</div>
<div class="line"><a name="l03745"></a><span class="lineno"> 3745</span>&#160;        r.<a class="code" href="classCanBusResources.html#a5578569ff3a6f15dbb1ed47428bd2c24">printMessage</a>(<span class="stringliteral">&quot;%s [%d] CAN: read failed\n&quot;</span>, canDevName.c_str(), r.<a class="code" href="classCanBusResources.html#a5434ee36839850ff8330ef5322171ff8">_networkN</a>);</div>
<div class="line"><a name="l03746"></a><span class="lineno"> 3746</span>&#160; </div>
<div class="line"><a name="l03747"></a><span class="lineno"> 3747</span>&#160;    <span class="comment">// handle all broadcast messages.</span></div>
<div class="line"><a name="l03748"></a><span class="lineno"> 3748</span>&#160;    <span class="comment">// (class 1, 8 bits of the ID used to define the message type and source address).</span></div>
<div class="line"><a name="l03749"></a><span class="lineno"> 3749</span>&#160; </div>
<div class="line"><a name="l03750"></a><span class="lineno"> 3750</span>&#160;    handleBroadcasts();</div>
<div class="line"><a name="l03751"></a><span class="lineno"> 3751</span>&#160; </div>
<div class="line"><a name="l03752"></a><span class="lineno"> 3752</span>&#160;    std::list&lt;TBR_AnalogSensor *&gt;::iterator analogIt=analogSensors.begin();</div>
<div class="line"><a name="l03753"></a><span class="lineno"> 3753</span>&#160;    <span class="keywordflow">while</span>(analogIt!=analogSensors.end())</div>
<div class="line"><a name="l03754"></a><span class="lineno"> 3754</span>&#160;    {</div>
<div class="line"><a name="l03755"></a><span class="lineno"> 3755</span>&#160;        <a class="code" href="classTBR__AnalogSensor.html">TBR_AnalogSensor</a> *pAnalog=(*analogIt);</div>
<div class="line"><a name="l03756"></a><span class="lineno"> 3756</span>&#160;        <span class="keywordflow">if</span> (pAnalog)</div>
<div class="line"><a name="l03757"></a><span class="lineno"> 3757</span>&#160;        {</div>
<div class="line"><a name="l03758"></a><span class="lineno"> 3758</span>&#160;            <span class="keywordflow">if</span> (!pAnalog-&gt;<a class="code" href="classTBR__AnalogSensor.html#a192722cecb0aa650cfc802c0fb6ac6d0">handleAnalog</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>))</div>
<div class="line"><a name="l03759"></a><span class="lineno"> 3759</span>&#160;            {</div>
<div class="line"><a name="l03760"></a><span class="lineno"> 3760</span>&#160;                yWarning(<span class="stringliteral">&quot;%s [%d] analog sensor received unexpected class 0x03 messages\n&quot;</span>, canDevName.c_str(), r.<a class="code" href="classCanBusResources.html#a5434ee36839850ff8330ef5322171ff8">_networkN</a>);</div>
<div class="line"><a name="l03761"></a><span class="lineno"> 3761</span>&#160;            }</div>
<div class="line"><a name="l03762"></a><span class="lineno"> 3762</span>&#160;        }</div>
<div class="line"><a name="l03763"></a><span class="lineno"> 3763</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l03764"></a><span class="lineno"> 3764</span>&#160;            yWarning(<span class="stringliteral">&quot;Got null pointer this is unusual\n&quot;</span>);</div>
<div class="line"><a name="l03765"></a><span class="lineno"> 3765</span>&#160;            </div>
<div class="line"><a name="l03766"></a><span class="lineno"> 3766</span>&#160;        analogIt++;</div>
<div class="line"><a name="l03767"></a><span class="lineno"> 3767</span>&#160;    }</div>
<div class="line"><a name="l03768"></a><span class="lineno"> 3768</span>&#160; </div>
<div class="line"><a name="l03769"></a><span class="lineno"> 3769</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l03770"></a><span class="lineno"> 3770</span>&#160;    <span class="comment">// handle class 0 messages - polling messages.</span></div>
<div class="line"><a name="l03771"></a><span class="lineno"> 3771</span>&#160;    <span class="comment">// (class 0, 8 bits of the ID used to represent the source and destination).</span></div>
<div class="line"><a name="l03772"></a><span class="lineno"> 3772</span>&#160;    <span class="comment">// the first byte of the message is the message type and motor number (0 or 1).</span></div>
<div class="line"><a name="l03773"></a><span class="lineno"> 3773</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l03774"></a><span class="lineno"> 3774</span>&#160;    <span class="keywordflow">if</span> (r.<a class="code" href="classCanBusResources.html#ab5e61b157528b835621b4c073c42bf1d">requestsQueue</a>-&gt;<a class="code" href="classRequestsQueue.html#ab1973fa297615c4bcaa1fa7c63c925bd">getPending</a>()&gt;0)</div>
<div class="line"><a name="l03775"></a><span class="lineno"> 3775</span>&#160;        {</div>
<div class="line"><a name="l03776"></a><span class="lineno"> 3776</span>&#160;            <a class="code" href="canControlUtils_8h.html#aed353ce9c28af351b98138a0a3cee032">DEBUG_FUNC</a>(<span class="stringliteral">&quot;There are %d pending messages, read msgs: %d\n&quot;</span>, </div>
<div class="line"><a name="l03777"></a><span class="lineno"> 3777</span>&#160;                  r.<a class="code" href="classCanBusResources.html#ab5e61b157528b835621b4c073c42bf1d">requestsQueue</a>-&gt;<a class="code" href="classRequestsQueue.html#ab1973fa297615c4bcaa1fa7c63c925bd">getPending</a>(), r.<a class="code" href="classCanBusResources.html#a6785040f8650d0ecfb945e295808a377">_readMessages</a>);</div>
<div class="line"><a name="l03778"></a><span class="lineno"> 3778</span>&#160;            <span class="keywordflow">for</span> (i = 0; i &lt; r.<a class="code" href="classCanBusResources.html#a6785040f8650d0ecfb945e295808a377">_readMessages</a>; i++)</div>
<div class="line"><a name="l03779"></a><span class="lineno"> 3779</span>&#160;                {</div>
<div class="line"><a name="l03780"></a><span class="lineno"> 3780</span>&#160;                    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *msgData;</div>
<div class="line"><a name="l03781"></a><span class="lineno"> 3781</span>&#160; </div>
<div class="line"><a name="l03782"></a><span class="lineno"> 3782</span>&#160;                    CanMessage&amp; m = r.<a class="code" href="classCanBusResources.html#a1eed1867edaefc8303954e7b5d41446f">_readBuffer</a>[i];</div>
<div class="line"><a name="l03783"></a><span class="lineno"> 3783</span>&#160;                    msgData=m.getData();      </div>
<div class="line"><a name="l03784"></a><span class="lineno"> 3784</span>&#160; </div>
<div class="line"><a name="l03785"></a><span class="lineno"> 3785</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="canControlUtils_8h.html#ac9a0489744aa46905cbec820c68521f3">getClass</a>(m) == 0) </div>
<div class="line"><a name="l03786"></a><span class="lineno"> 3786</span>&#160;                        {</div>
<div class="line"><a name="l03787"></a><span class="lineno"> 3787</span>&#160;                            <a class="code" href="CanBusMotionControl_8cpp.html#acbf0048ef8c7caa8bdd9defc76fb0def">PRINT_CAN_MESSAGE</a>(<span class="stringliteral">&quot;Received \n&quot;</span>, m);</div>
<div class="line"><a name="l03789"></a><span class="lineno"> 3789</span>&#160;                            <span class="keywordtype">int</span> j=<a class="code" href="canControlUtils_8h.html#a22d86c76c1c95a75d3dc8f370f3fa5e5">getJoint</a>(m,r.<a class="code" href="classCanBusResources.html#a5eb200eec7f8c10314fc9349f4088ff3">_destInv</a>); <span class="comment">//get joint from message</span></div>
<div class="line"><a name="l03790"></a><span class="lineno"> 3790</span>&#160;                            <span class="keywordtype">int</span> <span class="keywordtype">id</span>=r.<a class="code" href="classCanBusResources.html#ab5e61b157528b835621b4c073c42bf1d">requestsQueue</a>-&gt;<a class="code" href="classRequestsQueue.html#ad4f421c5043a2dfaf20dd6938a58128a">pop</a>(j, msgData[0]);</div>
<div class="line"><a name="l03791"></a><span class="lineno"> 3791</span>&#160;                            <span class="keywordflow">if</span>(<span class="keywordtype">id</span>==-1)</div>
<div class="line"><a name="l03792"></a><span class="lineno"> 3792</span>&#160;                                {</div>
<div class="line"><a name="l03793"></a><span class="lineno"> 3793</span>&#160;                                    yWarning(<span class="stringliteral">&quot;%s [%d] Received message but no threads waiting for it. (id: 0x%x, Class:%d MsgData[0]:%d)\n &quot;</span>, canDevName.c_str(), r.<a class="code" href="classCanBusResources.html#a5434ee36839850ff8330ef5322171ff8">_networkN</a>, m.getId(), <a class="code" href="canControlUtils_8h.html#ac9a0489744aa46905cbec820c68521f3">getClass</a>(m), msgData[0]);</div>
<div class="line"><a name="l03794"></a><span class="lineno"> 3794</span>&#160;                                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03795"></a><span class="lineno"> 3795</span>&#160;                                }</div>
<div class="line"><a name="l03796"></a><span class="lineno"> 3796</span>&#160;                            <a class="code" href="classThreadTable2.html">ThreadTable2</a> *t=<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a0de6c591abb8d8340378037eccf81951">threadPool</a>-&gt;<a class="code" href="classThreadPool2.html#abed580daad75544f3455f08beaa06cf4">getThreadTable</a>(<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l03797"></a><span class="lineno"> 3797</span>&#160;                            <span class="keywordflow">if</span> (t==0)</div>
<div class="line"><a name="l03798"></a><span class="lineno"> 3798</span>&#160;                                {</div>
<div class="line"><a name="l03799"></a><span class="lineno"> 3799</span>&#160;                                    yWarning(<span class="stringliteral">&quot;Asked a bad thread id, this is probably a bug, check threadPool\n&quot;</span>);</div>
<div class="line"><a name="l03800"></a><span class="lineno"> 3800</span>&#160;                                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03801"></a><span class="lineno"> 3801</span>&#160;                                }</div>
<div class="line"><a name="l03802"></a><span class="lineno"> 3802</span>&#160;                            <a class="code" href="canControlUtils_8h.html#aed353ce9c28af351b98138a0a3cee032">DEBUG_FUNC</a>(<span class="stringliteral">&quot;Pushing reply\n&quot;</span>);</div>
<div class="line"><a name="l03803"></a><span class="lineno"> 3803</span>&#160;                            <span class="comment">//push reply to thread&#39;s list of replies</span></div>
<div class="line"><a name="l03804"></a><span class="lineno"> 3804</span>&#160;                            <span class="keywordflow">if</span> (!t-&gt;<a class="code" href="classThreadTable2.html#aba06db494b5ba3dbb3223f235fb28743">push</a>(m))</div>
<div class="line"><a name="l03805"></a><span class="lineno"> 3805</span>&#160;                                yError(<span class="stringliteral">&quot;error while pushing a reply, this is probably an error\n&quot;</span>);</div>
<div class="line"><a name="l03806"></a><span class="lineno"> 3806</span>&#160;                        }</div>
<div class="line"><a name="l03807"></a><span class="lineno"> 3807</span>&#160;                }</div>
<div class="line"><a name="l03808"></a><span class="lineno"> 3808</span>&#160;        }</div>
<div class="line"><a name="l03809"></a><span class="lineno"> 3809</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03810"></a><span class="lineno"> 3810</span>&#160;        {</div>
<div class="line"><a name="l03811"></a><span class="lineno"> 3811</span>&#160;            <span class="comment">//DEBUG_FUNC(&quot;Thread loop: no pending messages\n&quot;);</span></div>
<div class="line"><a name="l03812"></a><span class="lineno"> 3812</span>&#160;        }</div>
<div class="line"><a name="l03813"></a><span class="lineno"> 3813</span>&#160; </div>
<div class="line"><a name="l03814"></a><span class="lineno"> 3814</span>&#160;    <span class="comment">//    counter ++;</span></div>
<div class="line"><a name="l03815"></a><span class="lineno"> 3815</span>&#160;    <span class="comment">/*if (counter &gt; r._timeout)</span></div>
<div class="line"><a name="l03816"></a><span class="lineno"> 3816</span>&#160;<span class="comment">      {</span></div>
<div class="line"><a name="l03818"></a><span class="lineno"> 3818</span>&#160;<span class="comment">      r.printMessage(&quot;CAN: timeout - still %d messages unacknowledged\n&quot;, remainingMsgs);</span></div>
<div class="line"><a name="l03819"></a><span class="lineno"> 3819</span>&#160;<span class="comment">      r._error_status = false;</span></div>
<div class="line"><a name="l03820"></a><span class="lineno"> 3820</span>&#160;<span class="comment">      }*/</span></div>
<div class="line"><a name="l03821"></a><span class="lineno"> 3821</span>&#160; </div>
<div class="line"><a name="l03822"></a><span class="lineno"> 3822</span>&#160;    r.<a class="code" href="classCanBusResources.html#a01693f537c51494be7345cbd89e22d44">_echoMessages</a> = 0; <span class="comment">//echo buffer cleanup</span></div>
<div class="line"><a name="l03823"></a><span class="lineno"> 3823</span>&#160; </div>
<div class="line"><a name="l03824"></a><span class="lineno"> 3824</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.unlock();</div>
<div class="line"><a name="l03825"></a><span class="lineno"> 3825</span>&#160; </div>
<div class="line"><a name="l03826"></a><span class="lineno"> 3826</span>&#160;    <span class="keywordtype">double</span> now = Time::now();</div>
<div class="line"><a name="l03827"></a><span class="lineno"> 3827</span>&#160;    averageThreadTime+=(now-before)*1000;</div>
<div class="line"><a name="l03828"></a><span class="lineno"> 3828</span>&#160;    previousRun=before; <span class="comment">//save last run time</span></div>
<div class="line"><a name="l03829"></a><span class="lineno"> 3829</span>&#160;}</div>
<div class="line"><a name="l03830"></a><span class="lineno"> 3830</span>&#160; </div>
<div class="line"><a name="l03831"></a><span class="lineno"> 3831</span>&#160; </div>
<div class="line"><a name="l03832"></a><span class="lineno"> 3832</span>&#160;    <span class="comment">// ControlMode</span></div>
<div class="line"><a name="l03833"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a4bdebbadade4e8f2d28dd784d16a5f6d"> 3833</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a4bdebbadade4e8f2d28dd784d16a5f6d">CanBusMotionControl::getControlModesRaw</a>(<span class="keywordtype">int</span> *v)</div>
<div class="line"><a name="l03834"></a><span class="lineno"> 3834</span>&#160;{</div>
<div class="line"><a name="l03835"></a><span class="lineno"> 3835</span>&#160;    <a class="code" href="canControlUtils_8h.html#aed353ce9c28af351b98138a0a3cee032">DEBUG_FUNC</a>(<span class="stringliteral">&quot;Calling GET_CONTROL_MODES\n&quot;</span>);</div>
<div class="line"><a name="l03836"></a><span class="lineno"> 3836</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l03837"></a><span class="lineno"> 3837</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l03838"></a><span class="lineno"> 3838</span>&#160;    <span class="keywordtype">int</span> temp;</div>
<div class="line"><a name="l03839"></a><span class="lineno"> 3839</span>&#160;    std::lock_guard&lt;std::recursive_mutex&gt; lck(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>);</div>
<div class="line"><a name="l03840"></a><span class="lineno"> 3840</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>(); i++)</div>
<div class="line"><a name="l03841"></a><span class="lineno"> 3841</span>&#160;    {</div>
<div class="line"><a name="l03842"></a><span class="lineno"> 3842</span>&#160;        temp = int(r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[i].<a class="code" href="classBCastBufferElement.html#a6d942303fa98a4ee95f885be66fe3440">_controlmodeStatus</a>);</div>
<div class="line"><a name="l03843"></a><span class="lineno"> 3843</span>&#160;        v[i]=<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a7a8c5cb09b35c7e8d4e8a25295b4662f">from_modeint_to_modevocab</a>(temp);</div>
<div class="line"><a name="l03844"></a><span class="lineno"> 3844</span>&#160;    }</div>
<div class="line"><a name="l03845"></a><span class="lineno"> 3845</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03846"></a><span class="lineno"> 3846</span>&#160;}</div>
<div class="line"><a name="l03847"></a><span class="lineno"> 3847</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l03848"></a><span class="lineno"> 3848</span>&#160;<span class="comment">//@@@ TO BE REMOVED LATER (AFTER INCLUDING FIRMWARE_SHARED)</span></div>
<div class="line"><a name="l03849"></a><span class="lineno"> 3849</span>&#160;<span class="comment">#ifndef icubCanProto_controlmode_calibration</span></div>
<div class="line"><a name="l03850"></a><span class="lineno"> 3850</span>&#160;<span class="comment">#define icubCanProto_controlmode_calibration 0x060</span></div>
<div class="line"><a name="l03851"></a><span class="lineno"> 3851</span>&#160;<span class="comment">#endif</span></div>
<div class="line"><a name="l03852"></a><span class="lineno"> 3852</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160;<span class="comment">#ifndef icubCanProto_controlmode_forceIdle</span></div>
<div class="line"><a name="l03854"></a><span class="lineno"> 3854</span>&#160;<span class="comment">#define icubCanProto_controlmode_forceIdle 0x09</span></div>
<div class="line"><a name="l03855"></a><span class="lineno"> 3855</span>&#160;<span class="comment">#endif</span></div>
<div class="line"><a name="l03856"></a><span class="lineno"> 3856</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03857"></a><span class="lineno"> 3857</span>&#160;<span class="comment">#ifndef icubCanProto_interactionmode_stiff</span></div>
<div class="line"><a name="l03858"></a><span class="lineno"> 3858</span>&#160;<span class="comment">#define icubCanProto_interactionmode_stiff 0x00</span></div>
<div class="line"><a name="l03859"></a><span class="lineno"> 3859</span>&#160;<span class="comment">#endif </span></div>
<div class="line"><a name="l03860"></a><span class="lineno"> 3860</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03861"></a><span class="lineno"> 3861</span>&#160;<span class="comment">#ifndef icubCanProto_interactionmode_compliant</span></div>
<div class="line"><a name="l03862"></a><span class="lineno"> 3862</span>&#160;<span class="comment">#define icubCanProto_interactionmode_compliant 0x01</span></div>
<div class="line"><a name="l03863"></a><span class="lineno"> 3863</span>&#160;<span class="comment">#endif</span></div>
<div class="line"><a name="l03864"></a><span class="lineno"> 3864</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03865"></a><span class="lineno"> 3865</span>&#160;<span class="comment">#ifndef icubCanProto_interactionmode_unknownError</span></div>
<div class="line"><a name="l03866"></a><span class="lineno"> 3866</span>&#160;<span class="comment">#define icubCanProto_interactionmode_unknownError 0xFF</span></div>
<div class="line"><a name="l03867"></a><span class="lineno"> 3867</span>&#160;<span class="comment">#endif</span></div>
<div class="line"><a name="l03868"></a><span class="lineno"> 3868</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l03869"></a><span class="lineno"> 3869</span>&#160;<span class="comment">//---------------------------------------------------------</span></div>
<div class="line"><a name="l03870"></a><span class="lineno"> 3870</span>&#160; </div>
<div class="line"><a name="l03871"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a95ddbda0e604bb891811a1c25851d2c0"> 3871</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>  <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a95ddbda0e604bb891811a1c25851d2c0">CanBusMotionControl::from_interactionvocab_to_interactionint</a> (<span class="keywordtype">int</span> interactionvocab)</div>
<div class="line"><a name="l03872"></a><span class="lineno"> 3872</span>&#160;{</div>
<div class="line"><a name="l03873"></a><span class="lineno"> 3873</span>&#160;    <span class="keywordflow">switch</span> (interactionvocab)</div>
<div class="line"><a name="l03874"></a><span class="lineno"> 3874</span>&#160;    {</div>
<div class="line"><a name="l03875"></a><span class="lineno"> 3875</span>&#160;    <span class="keywordflow">case</span> VOCAB_IM_STIFF:</div>
<div class="line"><a name="l03876"></a><span class="lineno"> 3876</span>&#160;        <span class="keywordflow">return</span> icubCanProto_interactionmode_stiff;</div>
<div class="line"><a name="l03877"></a><span class="lineno"> 3877</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03878"></a><span class="lineno"> 3878</span>&#160;    <span class="keywordflow">case</span> VOCAB_IM_COMPLIANT:</div>
<div class="line"><a name="l03879"></a><span class="lineno"> 3879</span>&#160;        <span class="keywordflow">return</span> icubCanProto_interactionmode_compliant;</div>
<div class="line"><a name="l03880"></a><span class="lineno"> 3880</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03881"></a><span class="lineno"> 3881</span>&#160;    <span class="keywordflow">case</span> VOCAB_IM_UNKNOWN:</div>
<div class="line"><a name="l03882"></a><span class="lineno"> 3882</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l03883"></a><span class="lineno"> 3883</span>&#160;        <span class="keywordflow">return</span> icubCanProto_interactionmode_unknownError;</div>
<div class="line"><a name="l03884"></a><span class="lineno"> 3884</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03885"></a><span class="lineno"> 3885</span>&#160;    }</div>
<div class="line"><a name="l03886"></a><span class="lineno"> 3886</span>&#160;}</div>
<div class="line"><a name="l03887"></a><span class="lineno"> 3887</span>&#160; </div>
<div class="line"><a name="l03888"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a1e1e02485fb399d2538e8c88ff39a450"> 3888</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a1e1e02485fb399d2538e8c88ff39a450">CanBusMotionControl::from_interactionint_to_interactionvocab</a> (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> interactionint)</div>
<div class="line"><a name="l03889"></a><span class="lineno"> 3889</span>&#160;{</div>
<div class="line"><a name="l03890"></a><span class="lineno"> 3890</span>&#160;    <span class="keywordflow">switch</span> (interactionint)</div>
<div class="line"><a name="l03891"></a><span class="lineno"> 3891</span>&#160;    {</div>
<div class="line"><a name="l03892"></a><span class="lineno"> 3892</span>&#160;    <span class="keywordflow">case</span> icubCanProto_interactionmode_stiff:</div>
<div class="line"><a name="l03893"></a><span class="lineno"> 3893</span>&#160;        <span class="keywordflow">return</span> VOCAB_IM_STIFF;</div>
<div class="line"><a name="l03894"></a><span class="lineno"> 3894</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03895"></a><span class="lineno"> 3895</span>&#160;    <span class="keywordflow">case</span> icubCanProto_interactionmode_compliant:</div>
<div class="line"><a name="l03896"></a><span class="lineno"> 3896</span>&#160;        <span class="keywordflow">return</span> VOCAB_IM_COMPLIANT;</div>
<div class="line"><a name="l03897"></a><span class="lineno"> 3897</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03898"></a><span class="lineno"> 3898</span>&#160;    <span class="keywordflow">case</span> icubCanProto_interactionmode_unknownError:</div>
<div class="line"><a name="l03899"></a><span class="lineno"> 3899</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l03900"></a><span class="lineno"> 3900</span>&#160;        <span class="keywordflow">return</span> icubCanProto_interactionmode_unknownError;</div>
<div class="line"><a name="l03901"></a><span class="lineno"> 3901</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03902"></a><span class="lineno"> 3902</span>&#160;    }</div>
<div class="line"><a name="l03903"></a><span class="lineno"> 3903</span>&#160;}</div>
<div class="line"><a name="l03904"></a><span class="lineno"> 3904</span>&#160; </div>
<div class="line"><a name="l03905"></a><span class="lineno"> 3905</span>&#160; </div>
<div class="line"><a name="l03906"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a1ab119705abe4eab89d1f9b52f4518b5"> 3906</a></span>&#160;icubCanProto_controlmode_t <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a1ab119705abe4eab89d1f9b52f4518b5">CanBusMotionControl::from_modevocab_to_modeint</a> (<span class="keywordtype">int</span> modevocab)</div>
<div class="line"><a name="l03907"></a><span class="lineno"> 3907</span>&#160;{</div>
<div class="line"><a name="l03908"></a><span class="lineno"> 3908</span>&#160;    <span class="keywordflow">switch</span> (modevocab)</div>
<div class="line"><a name="l03909"></a><span class="lineno"> 3909</span>&#160;    {</div>
<div class="line"><a name="l03910"></a><span class="lineno"> 3910</span>&#160;    <span class="keywordflow">case</span> VOCAB_CM_IDLE:</div>
<div class="line"><a name="l03911"></a><span class="lineno"> 3911</span>&#160;        <span class="keywordflow">return</span> icubCanProto_controlmode_idle;</div>
<div class="line"><a name="l03912"></a><span class="lineno"> 3912</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03913"></a><span class="lineno"> 3913</span>&#160;    <span class="keywordflow">case</span> VOCAB_CM_POSITION:</div>
<div class="line"><a name="l03914"></a><span class="lineno"> 3914</span>&#160;        <span class="keywordflow">return</span> icubCanProto_controlmode_position;</div>
<div class="line"><a name="l03915"></a><span class="lineno"> 3915</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03916"></a><span class="lineno"> 3916</span>&#160;    <span class="keywordflow">case</span> VOCAB_CM_MIXED:</div>
<div class="line"><a name="l03917"></a><span class="lineno"> 3917</span>&#160;        <span class="keywordflow">return</span> icubCanProto_controlmode_mixed;</div>
<div class="line"><a name="l03918"></a><span class="lineno"> 3918</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03919"></a><span class="lineno"> 3919</span>&#160;    <span class="keywordflow">case</span> VOCAB_CM_POSITION_DIRECT:</div>
<div class="line"><a name="l03920"></a><span class="lineno"> 3920</span>&#160;        <span class="keywordflow">return</span> icubCanProto_controlmode_direct;</div>
<div class="line"><a name="l03921"></a><span class="lineno"> 3921</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03922"></a><span class="lineno"> 3922</span>&#160;    <span class="keywordflow">case</span> VOCAB_CM_VELOCITY:</div>
<div class="line"><a name="l03923"></a><span class="lineno"> 3923</span>&#160;        <span class="keywordflow">return</span> icubCanProto_controlmode_velocity;</div>
<div class="line"><a name="l03924"></a><span class="lineno"> 3924</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03925"></a><span class="lineno"> 3925</span>&#160;    <span class="keywordflow">case</span> VOCAB_CM_TORQUE:</div>
<div class="line"><a name="l03926"></a><span class="lineno"> 3926</span>&#160;        <span class="keywordflow">return</span> icubCanProto_controlmode_torque;</div>
<div class="line"><a name="l03927"></a><span class="lineno"> 3927</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03928"></a><span class="lineno"> 3928</span>&#160;    <span class="keywordflow">case</span> VOCAB_CM_IMPEDANCE_POS:</div>
<div class="line"><a name="l03929"></a><span class="lineno"> 3929</span>&#160;        <span class="keywordflow">return</span> icubCanProto_controlmode_impedance_pos;</div>
<div class="line"><a name="l03930"></a><span class="lineno"> 3930</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03931"></a><span class="lineno"> 3931</span>&#160;    <span class="keywordflow">case</span> VOCAB_CM_IMPEDANCE_VEL:</div>
<div class="line"><a name="l03932"></a><span class="lineno"> 3932</span>&#160;        <span class="keywordflow">return</span> icubCanProto_controlmode_impedance_vel;</div>
<div class="line"><a name="l03933"></a><span class="lineno"> 3933</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03934"></a><span class="lineno"> 3934</span>&#160;    <span class="keywordflow">case</span> VOCAB_CM_PWM:</div>
<div class="line"><a name="l03935"></a><span class="lineno"> 3935</span>&#160;        <span class="keywordflow">return</span>  icubCanProto_controlmode_openloop;</div>
<div class="line"><a name="l03936"></a><span class="lineno"> 3936</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03937"></a><span class="lineno"> 3937</span>&#160;    <span class="keywordflow">case</span> VOCAB_CM_CURRENT:</div>
<div class="line"><a name="l03938"></a><span class="lineno"> 3938</span>&#160;        <span class="keywordflow">return</span>  icubCanProto_controlmode_unknownError;</div>
<div class="line"><a name="l03939"></a><span class="lineno"> 3939</span>&#160;        yError(<span class="stringliteral">&quot;&#39;VOCAB_CM_CURRENT&#39; error condition detected&quot;</span>);</div>
<div class="line"><a name="l03940"></a><span class="lineno"> 3940</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03941"></a><span class="lineno"> 3941</span>&#160; </div>
<div class="line"><a name="l03942"></a><span class="lineno"> 3942</span>&#160;    <span class="keywordflow">case</span> VOCAB_CM_FORCE_IDLE:</div>
<div class="line"><a name="l03943"></a><span class="lineno"> 3943</span>&#160;        <span class="keywordflow">return</span> icubCanProto_controlmode_forceIdle;</div>
<div class="line"><a name="l03944"></a><span class="lineno"> 3944</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03945"></a><span class="lineno"> 3945</span>&#160; </div>
<div class="line"><a name="l03946"></a><span class="lineno"> 3946</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l03947"></a><span class="lineno"> 3947</span>&#160;        <span class="keywordflow">return</span> icubCanProto_controlmode_unknownError;</div>
<div class="line"><a name="l03948"></a><span class="lineno"> 3948</span>&#160;        yError (<span class="stringliteral">&quot;&#39;VOCAB_CM_UNKNOWN&#39; error condition detected&quot;</span>);</div>
<div class="line"><a name="l03949"></a><span class="lineno"> 3949</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03950"></a><span class="lineno"> 3950</span>&#160;    }</div>
<div class="line"><a name="l03951"></a><span class="lineno"> 3951</span>&#160;}</div>
<div class="line"><a name="l03952"></a><span class="lineno"> 3952</span>&#160; </div>
<div class="line"><a name="l03953"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a7a8c5cb09b35c7e8d4e8a25295b4662f"> 3953</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a7a8c5cb09b35c7e8d4e8a25295b4662f">CanBusMotionControl::from_modeint_to_modevocab</a> (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> modeint)</div>
<div class="line"><a name="l03954"></a><span class="lineno"> 3954</span>&#160;{</div>
<div class="line"><a name="l03955"></a><span class="lineno"> 3955</span>&#160;    <span class="keywordflow">switch</span> (modeint)</div>
<div class="line"><a name="l03956"></a><span class="lineno"> 3956</span>&#160;    {</div>
<div class="line"><a name="l03957"></a><span class="lineno"> 3957</span>&#160;    <span class="keywordflow">case</span> icubCanProto_controlmode_idle:</div>
<div class="line"><a name="l03958"></a><span class="lineno"> 3958</span>&#160;        <span class="keywordflow">return</span> VOCAB_CM_IDLE;</div>
<div class="line"><a name="l03959"></a><span class="lineno"> 3959</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03960"></a><span class="lineno"> 3960</span>&#160;    <span class="keywordflow">case</span> icubCanProto_controlmode_position:</div>
<div class="line"><a name="l03961"></a><span class="lineno"> 3961</span>&#160;        <span class="keywordflow">return</span> VOCAB_CM_POSITION;</div>
<div class="line"><a name="l03962"></a><span class="lineno"> 3962</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03963"></a><span class="lineno"> 3963</span>&#160;    <span class="keywordflow">case</span> icubCanProto_controlmode_mixed:</div>
<div class="line"><a name="l03964"></a><span class="lineno"> 3964</span>&#160;        <span class="keywordflow">return</span> VOCAB_CM_MIXED;</div>
<div class="line"><a name="l03965"></a><span class="lineno"> 3965</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03966"></a><span class="lineno"> 3966</span>&#160;    <span class="keywordflow">case</span> icubCanProto_controlmode_direct:</div>
<div class="line"><a name="l03967"></a><span class="lineno"> 3967</span>&#160;        <span class="keywordflow">return</span> VOCAB_CM_POSITION_DIRECT;</div>
<div class="line"><a name="l03968"></a><span class="lineno"> 3968</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03969"></a><span class="lineno"> 3969</span>&#160;    <span class="keywordflow">case</span> icubCanProto_controlmode_velocity:</div>
<div class="line"><a name="l03970"></a><span class="lineno"> 3970</span>&#160;        <span class="keywordflow">return</span> VOCAB_CM_VELOCITY;</div>
<div class="line"><a name="l03971"></a><span class="lineno"> 3971</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03972"></a><span class="lineno"> 3972</span>&#160;    <span class="keywordflow">case</span> icubCanProto_controlmode_torque:</div>
<div class="line"><a name="l03973"></a><span class="lineno"> 3973</span>&#160;        <span class="keywordflow">return</span> VOCAB_CM_TORQUE;</div>
<div class="line"><a name="l03974"></a><span class="lineno"> 3974</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03975"></a><span class="lineno"> 3975</span>&#160;    <span class="keywordflow">case</span> icubCanProto_controlmode_impedance_pos:</div>
<div class="line"><a name="l03976"></a><span class="lineno"> 3976</span>&#160;        <span class="keywordflow">return</span> VOCAB_CM_IMPEDANCE_POS;</div>
<div class="line"><a name="l03977"></a><span class="lineno"> 3977</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03978"></a><span class="lineno"> 3978</span>&#160;    <span class="keywordflow">case</span> icubCanProto_controlmode_impedance_vel:</div>
<div class="line"><a name="l03979"></a><span class="lineno"> 3979</span>&#160;        <span class="keywordflow">return</span> VOCAB_CM_IMPEDANCE_VEL;</div>
<div class="line"><a name="l03980"></a><span class="lineno"> 3980</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03981"></a><span class="lineno"> 3981</span>&#160;    <span class="keywordflow">case</span> icubCanProto_controlmode_openloop:</div>
<div class="line"><a name="l03982"></a><span class="lineno"> 3982</span>&#160;        <span class="keywordflow">return</span> VOCAB_CM_PWM;</div>
<div class="line"><a name="l03983"></a><span class="lineno"> 3983</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03984"></a><span class="lineno"> 3984</span>&#160; </div>
<div class="line"><a name="l03985"></a><span class="lineno"> 3985</span>&#160;    <span class="comment">//internal status</span></div>
<div class="line"><a name="l03986"></a><span class="lineno"> 3986</span>&#160;    <span class="keywordflow">case</span>  icubCanProto_controlmode_hwFault:</div>
<div class="line"><a name="l03987"></a><span class="lineno"> 3987</span>&#160;        <span class="keywordflow">return</span> VOCAB_CM_HW_FAULT;</div>
<div class="line"><a name="l03988"></a><span class="lineno"> 3988</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03989"></a><span class="lineno"> 3989</span>&#160;    <span class="keywordflow">case</span>  icubCanProto_controlmode_notConfigured:</div>
<div class="line"><a name="l03990"></a><span class="lineno"> 3990</span>&#160;        <span class="keywordflow">return</span> VOCAB_CM_NOT_CONFIGURED;</div>
<div class="line"><a name="l03991"></a><span class="lineno"> 3991</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03992"></a><span class="lineno"> 3992</span>&#160;    <span class="keywordflow">case</span>  icubCanProto_controlmode_configured:</div>
<div class="line"><a name="l03993"></a><span class="lineno"> 3993</span>&#160;        <span class="keywordflow">return</span> VOCAB_CM_CONFIGURED;</div>
<div class="line"><a name="l03994"></a><span class="lineno"> 3994</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03995"></a><span class="lineno"> 3995</span>&#160;    <span class="keywordflow">case</span>  icubCanProto_controlmode_unknownError:</div>
<div class="line"><a name="l03996"></a><span class="lineno"> 3996</span>&#160;        yError (<span class="stringliteral">&quot;&#39;icubCanProto_controlmode_unknownError&#39; error condition detected&quot;</span>);</div>
<div class="line"><a name="l03997"></a><span class="lineno"> 3997</span>&#160;        <span class="keywordflow">return</span> VOCAB_CM_UNKNOWN;</div>
<div class="line"><a name="l03998"></a><span class="lineno"> 3998</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03999"></a><span class="lineno"> 3999</span>&#160; </div>
<div class="line"><a name="l04000"></a><span class="lineno"> 4000</span>&#160;    <span class="keywordflow">case</span>  icubCanProto_controlmode_calibration:</div>
<div class="line"><a name="l04001"></a><span class="lineno"> 4001</span>&#160;<span class="comment">/*  Commented out because generate duplicate case in switch, the previous one should be enough</span></div>
<div class="line"><a name="l04002"></a><span class="lineno"> 4002</span>&#160;<span class="comment"> *  with this new version of protocol... ask RANDAZZ</span></div>
<div class="line"><a name="l04003"></a><span class="lineno"> 4003</span>&#160;<span class="comment">    case  icubCanProto_calibration_type0_hard_stops:</span></div>
<div class="line"><a name="l04004"></a><span class="lineno"> 4004</span>&#160;<span class="comment">    case  icubCanProto_calibration_type1_abs_sens_analog:</span></div>
<div class="line"><a name="l04005"></a><span class="lineno"> 4005</span>&#160;<span class="comment">    case  icubCanProto_calibration_type2_hard_stops_diff:</span></div>
<div class="line"><a name="l04006"></a><span class="lineno"> 4006</span>&#160;<span class="comment">    case  icubCanProto_calibration_type3_abs_sens_digital:</span></div>
<div class="line"><a name="l04007"></a><span class="lineno"> 4007</span>&#160;<span class="comment">    case  icubCanProto_calibration_type4_abs_and_incremental:</span></div>
<div class="line"><a name="l04008"></a><span class="lineno"> 4008</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l04009"></a><span class="lineno"> 4009</span>&#160;        <span class="keywordflow">return</span> VOCAB_CM_CALIBRATING;</div>
<div class="line"><a name="l04010"></a><span class="lineno"> 4010</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04011"></a><span class="lineno"> 4011</span>&#160; </div>
<div class="line"><a name="l04012"></a><span class="lineno"> 4012</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l04013"></a><span class="lineno"> 4013</span>&#160;        yError (<span class="stringliteral">&quot;&#39;VOCAB_CM_UNKNOWN&#39; error condition detected&quot;</span>);</div>
<div class="line"><a name="l04014"></a><span class="lineno"> 4014</span>&#160;        <span class="keywordflow">return</span> VOCAB_CM_UNKNOWN;</div>
<div class="line"><a name="l04015"></a><span class="lineno"> 4015</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04016"></a><span class="lineno"> 4016</span>&#160;    }</div>
<div class="line"><a name="l04017"></a><span class="lineno"> 4017</span>&#160;}</div>
<div class="line"><a name="l04018"></a><span class="lineno"> 4018</span>&#160; </div>
<div class="line"><a name="l04019"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a70e12eba89c67a6805b978e8fd839685"> 4019</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a70e12eba89c67a6805b978e8fd839685">CanBusMotionControl::getControlModeRaw</a>(<span class="keywordtype">int</span> j, <span class="keywordtype">int</span> *v)</div>
<div class="line"><a name="l04020"></a><span class="lineno"> 4020</span>&#160;{</div>
<div class="line"><a name="l04021"></a><span class="lineno"> 4021</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l04022"></a><span class="lineno"> 4022</span>&#160;    <span class="keywordflow">if</span> (!(j&gt;= 0 &amp;&amp; j &lt;= r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>())) </div>
<div class="line"><a name="l04023"></a><span class="lineno"> 4023</span>&#160;    {</div>
<div class="line"><a name="l04024"></a><span class="lineno"> 4024</span>&#160;        *v=VOCAB_CM_UNKNOWN;</div>
<div class="line"><a name="l04025"></a><span class="lineno"> 4025</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04026"></a><span class="lineno"> 4026</span>&#160;    }</div>
<div class="line"><a name="l04027"></a><span class="lineno"> 4027</span>&#160; </div>
<div class="line"><a name="l04028"></a><span class="lineno"> 4028</span>&#160;    <span class="keywordtype">short</span> s;</div>
<div class="line"><a name="l04029"></a><span class="lineno"> 4029</span>&#160; </div>
<div class="line"><a name="l04030"></a><span class="lineno"> 4030</span>&#160;    <a class="code" href="canControlUtils_8h.html#aed353ce9c28af351b98138a0a3cee032">DEBUG_FUNC</a>(<span class="stringliteral">&quot;Calling GET_CONTROL_MODE\n&quot;</span>);</div>
<div class="line"><a name="l04031"></a><span class="lineno"> 4031</span>&#160;    <span class="comment">//_readWord16 (CAN_GET_CONTROL_MODE, j, s); </span></div>
<div class="line"><a name="l04032"></a><span class="lineno"> 4032</span>&#160; </div>
<div class="line"><a name="l04033"></a><span class="lineno"> 4033</span>&#160;    std::lock_guard&lt;std::recursive_mutex&gt; lck(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>);</div>
<div class="line"><a name="l04034"></a><span class="lineno"> 4034</span>&#160;    s = r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#a6d942303fa98a4ee95f885be66fe3440">_controlmodeStatus</a>;</div>
<div class="line"><a name="l04035"></a><span class="lineno"> 4035</span>&#160;  </div>
<div class="line"><a name="l04036"></a><span class="lineno"> 4036</span>&#160;    *v=<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a7a8c5cb09b35c7e8d4e8a25295b4662f">from_modeint_to_modevocab</a>(s);</div>
<div class="line"><a name="l04037"></a><span class="lineno"> 4037</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04038"></a><span class="lineno"> 4038</span>&#160;}</div>
<div class="line"><a name="l04039"></a><span class="lineno"> 4039</span>&#160; </div>
<div class="line"><a name="l04040"></a><span class="lineno"> 4040</span>&#160;<span class="comment">// IControl Mode 2</span></div>
<div class="line"><a name="l04041"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a1e324896034b1ff54dfd1c4f38001985"> 4041</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a4bdebbadade4e8f2d28dd784d16a5f6d">CanBusMotionControl::getControlModesRaw</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> n_joints, <span class="keyword">const</span> <span class="keywordtype">int</span> *joints, <span class="keywordtype">int</span> *modes)</div>
<div class="line"><a name="l04042"></a><span class="lineno"> 4042</span>&#160;{</div>
<div class="line"><a name="l04043"></a><span class="lineno"> 4043</span>&#160;    <a class="code" href="canControlUtils_8h.html#aed353ce9c28af351b98138a0a3cee032">DEBUG_FUNC</a>(<span class="stringliteral">&quot;Calling GET_CONTROL_MODE MULTIPLE JOINTS \n&quot;</span>);</div>
<div class="line"><a name="l04044"></a><span class="lineno"> 4044</span>&#160;    <span class="keywordflow">if</span> (joints==0) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04045"></a><span class="lineno"> 4045</span>&#160;    <span class="keywordflow">if</span> (modes==0) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04046"></a><span class="lineno"> 4046</span>&#160; </div>
<div class="line"><a name="l04047"></a><span class="lineno"> 4047</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l04048"></a><span class="lineno"> 4048</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l04049"></a><span class="lineno"> 4049</span>&#160;    std::lock_guard&lt;std::recursive_mutex&gt; lck(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>);</div>
<div class="line"><a name="l04050"></a><span class="lineno"> 4050</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; n_joints; i++)</div>
<div class="line"><a name="l04051"></a><span class="lineno"> 4051</span>&#160;    {</div>
<div class="line"><a name="l04052"></a><span class="lineno"> 4052</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a70e12eba89c67a6805b978e8fd839685">getControlModeRaw</a>(joints[i], &amp;modes[i]);</div>
<div class="line"><a name="l04053"></a><span class="lineno"> 4053</span>&#160;    }</div>
<div class="line"><a name="l04054"></a><span class="lineno"> 4054</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04055"></a><span class="lineno"> 4055</span>&#160;}</div>
<div class="line"><a name="l04056"></a><span class="lineno"> 4056</span>&#160; </div>
<div class="line"><a name="l04057"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aca4bb6d1007e82920e3647a00321f998"> 4057</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aca4bb6d1007e82920e3647a00321f998">CanBusMotionControl::setControlModeRaw</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> j, <span class="keyword">const</span> <span class="keywordtype">int</span> mode)</div>
<div class="line"><a name="l04058"></a><span class="lineno"> 4058</span>&#160;{</div>
<div class="line"><a name="l04059"></a><span class="lineno"> 4059</span>&#160;    <span class="keywordflow">if</span> (!(j &gt;= 0 &amp;&amp; j &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>-1)*2))</div>
<div class="line"><a name="l04060"></a><span class="lineno"> 4060</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04061"></a><span class="lineno"> 4061</span>&#160; </div>
<div class="line"><a name="l04062"></a><span class="lineno"> 4062</span>&#160;    <span class="keywordflow">if</span> (mode == VOCAB_CM_TORQUE &amp;&amp; <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aec47204c6542b23914f2e0ac120fc0ca">_MCtorqueControlEnabled</a> == <span class="keyword">false</span>) {yError()&lt;&lt;<span class="stringliteral">&quot;Torque control is disabled. Check your configuration parameters&quot;</span>; <span class="keywordflow">return</span> <span class="keyword">false</span>;}</div>
<div class="line"><a name="l04063"></a><span class="lineno"> 4063</span>&#160; </div>
<div class="line"><a name="l04064"></a><span class="lineno"> 4064</span>&#160;    <a class="code" href="canControlUtils_8h.html#aed353ce9c28af351b98138a0a3cee032">DEBUG_FUNC</a>(<span class="stringliteral">&quot;Calling SET_CONTROL_MODE_RAW SINGLE JOINT\n&quot;</span>);</div>
<div class="line"><a name="l04065"></a><span class="lineno"> 4065</span>&#160;    <span class="keywordtype">bool</span> ret = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04066"></a><span class="lineno"> 4066</span>&#160; </div>
<div class="line"><a name="l04067"></a><span class="lineno"> 4067</span>&#160;    icubCanProto_controlmode_t v = <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a1ab119705abe4eab89d1f9b52f4518b5">from_modevocab_to_modeint</a>(mode);</div>
<div class="line"><a name="l04068"></a><span class="lineno"> 4068</span>&#160;    <span class="keywordflow">if</span> (v==icubCanProto_controlmode_unknownError) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04069"></a><span class="lineno"> 4069</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#acfe73ef88e6f12e63c152e63f943fb09">_writeByte8</a>(ICUBCANPROTO_POL_MC_CMD__SET_CONTROL_MODE,j,v);</div>
<div class="line"><a name="l04070"></a><span class="lineno"> 4070</span>&#160; </div>
<div class="line"><a name="l04071"></a><span class="lineno"> 4071</span>&#160;    <span class="keywordtype">int</span> current_mode = VOCAB_CM_UNKNOWN;</div>
<div class="line"><a name="l04072"></a><span class="lineno"> 4072</span>&#160;    <span class="keywordtype">int</span> timeout = 0;</div>
<div class="line"><a name="l04073"></a><span class="lineno"> 4073</span>&#160; </div>
<div class="line"><a name="l04074"></a><span class="lineno"> 4074</span>&#160;    <span class="keywordflow">do</span></div>
<div class="line"><a name="l04075"></a><span class="lineno"> 4075</span>&#160;    {</div>
<div class="line"><a name="l04076"></a><span class="lineno"> 4076</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a70e12eba89c67a6805b978e8fd839685">getControlModeRaw</a>(j,&amp;current_mode);</div>
<div class="line"><a name="l04077"></a><span class="lineno"> 4077</span>&#160;        <span class="keywordflow">if</span> (current_mode==mode) {ret = <span class="keyword">true</span>; <span class="keywordflow">break</span>;}</div>
<div class="line"><a name="l04078"></a><span class="lineno"> 4078</span>&#160;        <span class="keywordflow">if</span> (current_mode==VOCAB_CM_IDLE     &amp;&amp; mode==VOCAB_CM_FORCE_IDLE) {ret = <span class="keyword">true</span>; <span class="keywordflow">break</span>;}</div>
<div class="line"><a name="l04079"></a><span class="lineno"> 4079</span>&#160;        <span class="keywordflow">if</span> (current_mode==VOCAB_CM_HW_FAULT)</div>
<div class="line"><a name="l04080"></a><span class="lineno"> 4080</span>&#160;        {</div>
<div class="line"><a name="l04081"></a><span class="lineno"> 4081</span>&#160;            <span class="keywordflow">if</span> (mode!=VOCAB_CM_FORCE_IDLE) {yError (<span class="stringliteral">&quot;Unable to set the control mode of a joint (%s j:%d) in HW_FAULT&quot;</span>, networkName.c_str(), j);}</div>
<div class="line"><a name="l04082"></a><span class="lineno"> 4082</span>&#160;            ret = <span class="keyword">true</span>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04083"></a><span class="lineno"> 4083</span>&#160;        }</div>
<div class="line"><a name="l04084"></a><span class="lineno"> 4084</span>&#160;        yarp::os::Time::delay(0.010);</div>
<div class="line"><a name="l04085"></a><span class="lineno"> 4085</span>&#160;        <span class="keywordflow">if</span> (timeout &gt;0) yWarning (<span class="stringliteral">&quot;setControlModeRaw delay (%s j:%d), current mode: %s, requested: %s&quot;</span>, networkName.c_str(), j, yarp::os::Vocab32::decode(current_mode).c_str(), yarp::os::Vocab32::decode(mode).c_str());</div>
<div class="line"><a name="l04086"></a><span class="lineno"> 4086</span>&#160;        timeout++;</div>
<div class="line"><a name="l04087"></a><span class="lineno"> 4087</span>&#160;    }</div>
<div class="line"><a name="l04088"></a><span class="lineno"> 4088</span>&#160;    <span class="keywordflow">while</span> (timeout &lt; 10);</div>
<div class="line"><a name="l04089"></a><span class="lineno"> 4089</span>&#160;    <span class="keywordflow">if</span> (timeout&gt;=10)</div>
<div class="line"><a name="l04090"></a><span class="lineno"> 4090</span>&#160;    {</div>
<div class="line"><a name="l04091"></a><span class="lineno"> 4091</span>&#160;        ret = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04092"></a><span class="lineno"> 4092</span>&#160;        yError (<span class="stringliteral">&quot;100ms Timeout occured in setControlModeRaw (%s j:%d), current mode: %s, requested: %s&quot;</span>, networkName.c_str(), j, yarp::os::Vocab32::decode(current_mode).c_str(), yarp::os::Vocab32::decode(mode).c_str());</div>
<div class="line"><a name="l04093"></a><span class="lineno"> 4093</span>&#160;    }</div>
<div class="line"><a name="l04094"></a><span class="lineno"> 4094</span>&#160; </div>
<div class="line"><a name="l04095"></a><span class="lineno"> 4095</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l04096"></a><span class="lineno"> 4096</span>&#160;}</div>
<div class="line"><a name="l04097"></a><span class="lineno"> 4097</span>&#160; </div>
<div class="line"><a name="l04098"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a5ba3e43009b5ce20ac1b7fdd2014f359"> 4098</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a5ba3e43009b5ce20ac1b7fdd2014f359">CanBusMotionControl::setControlModesRaw</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> n_joints, <span class="keyword">const</span> <span class="keywordtype">int</span> *joints, <span class="keywordtype">int</span> *modes)</div>
<div class="line"><a name="l04099"></a><span class="lineno"> 4099</span>&#160;{</div>
<div class="line"><a name="l04100"></a><span class="lineno"> 4100</span>&#160;    <a class="code" href="canControlUtils_8h.html#aed353ce9c28af351b98138a0a3cee032">DEBUG_FUNC</a>(<span class="stringliteral">&quot;Calling SET_CONTROL_MODE_RAW MULTIPLE JOINTS\n&quot;</span>);</div>
<div class="line"><a name="l04101"></a><span class="lineno"> 4101</span>&#160;    <span class="keywordflow">if</span> (n_joints==0) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04102"></a><span class="lineno"> 4102</span>&#160;    <span class="keywordflow">if</span> (joints==0) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04103"></a><span class="lineno"> 4103</span>&#160;    <span class="keywordtype">bool</span> ret = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04104"></a><span class="lineno"> 4104</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0;i&lt;n_joints; i++)</div>
<div class="line"><a name="l04105"></a><span class="lineno"> 4105</span>&#160;    {</div>
<div class="line"><a name="l04106"></a><span class="lineno"> 4106</span>&#160;        <span class="keywordflow">if</span> (modes[i] == VOCAB_CM_TORQUE &amp;&amp; <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aec47204c6542b23914f2e0ac120fc0ca">_MCtorqueControlEnabled</a> == <span class="keyword">false</span>) {yError()&lt;&lt;<span class="stringliteral">&quot;Torque control is disabled. Check your configuration parameters&quot;</span>; <span class="keywordflow">continue</span>;}</div>
<div class="line"><a name="l04107"></a><span class="lineno"> 4107</span>&#160; </div>
<div class="line"><a name="l04108"></a><span class="lineno"> 4108</span>&#160;        icubCanProto_controlmode_t v = <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a1ab119705abe4eab89d1f9b52f4518b5">from_modevocab_to_modeint</a>(modes[i]);</div>
<div class="line"><a name="l04109"></a><span class="lineno"> 4109</span>&#160;        <span class="keywordflow">if</span> (v==icubCanProto_controlmode_unknownError) ret = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04110"></a><span class="lineno"> 4110</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#acfe73ef88e6f12e63c152e63f943fb09">_writeByte8</a>(ICUBCANPROTO_POL_MC_CMD__SET_CONTROL_MODE,joints[i],v);</div>
<div class="line"><a name="l04111"></a><span class="lineno"> 4111</span>&#160; </div>
<div class="line"><a name="l04112"></a><span class="lineno"> 4112</span>&#160;        <span class="keywordtype">int</span> current_mode = VOCAB_CM_UNKNOWN;</div>
<div class="line"><a name="l04113"></a><span class="lineno"> 4113</span>&#160;        <span class="keywordtype">int</span> timeout = 0;</div>
<div class="line"><a name="l04114"></a><span class="lineno"> 4114</span>&#160;        <span class="keywordflow">do</span></div>
<div class="line"><a name="l04115"></a><span class="lineno"> 4115</span>&#160;        {</div>
<div class="line"><a name="l04116"></a><span class="lineno"> 4116</span>&#160;            <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a70e12eba89c67a6805b978e8fd839685">getControlModeRaw</a>(joints[i],&amp;current_mode);</div>
<div class="line"><a name="l04117"></a><span class="lineno"> 4117</span>&#160;            <span class="keywordflow">if</span> (current_mode==modes[i]) {ret = <span class="keyword">true</span>; <span class="keywordflow">break</span>;}</div>
<div class="line"><a name="l04118"></a><span class="lineno"> 4118</span>&#160;            <span class="keywordflow">if</span> (current_mode==VOCAB_CM_IDLE)</div>
<div class="line"><a name="l04119"></a><span class="lineno"> 4119</span>&#160;            {</div>
<div class="line"><a name="l04120"></a><span class="lineno"> 4120</span>&#160;                <span class="keywordflow">if</span> (modes[i]!=VOCAB_CM_FORCE_IDLE) {yError (<span class="stringliteral">&quot;Unable to set the control mode of a joint (%s j:%d) in HW_FAULT&quot;</span>, networkName.c_str(), joints[i]);}</div>
<div class="line"><a name="l04121"></a><span class="lineno"> 4121</span>&#160;                ret = <span class="keyword">true</span>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04122"></a><span class="lineno"> 4122</span>&#160;            }</div>
<div class="line"><a name="l04123"></a><span class="lineno"> 4123</span>&#160;            yarp::os::Time::delay(0.010);</div>
<div class="line"><a name="l04124"></a><span class="lineno"> 4124</span>&#160;            <span class="keywordflow">if</span> (timeout &gt;0) yWarning (<span class="stringliteral">&quot;setControlModesRaw delay (%s j:%d), current mode: %s, requested: %s&quot;</span>, networkName.c_str(), joints[i], yarp::os::Vocab32::decode(current_mode).c_str(), yarp::os::Vocab32::decode(modes[i]).c_str());</div>
<div class="line"><a name="l04125"></a><span class="lineno"> 4125</span>&#160;            timeout++;</div>
<div class="line"><a name="l04126"></a><span class="lineno"> 4126</span>&#160;        }</div>
<div class="line"><a name="l04127"></a><span class="lineno"> 4127</span>&#160;        <span class="keywordflow">while</span> (timeout &lt; 10);</div>
<div class="line"><a name="l04128"></a><span class="lineno"> 4128</span>&#160;        <span class="keywordflow">if</span> (timeout&gt;=10)</div>
<div class="line"><a name="l04129"></a><span class="lineno"> 4129</span>&#160;        {</div>
<div class="line"><a name="l04130"></a><span class="lineno"> 4130</span>&#160;            ret = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04131"></a><span class="lineno"> 4131</span>&#160;            yError (<span class="stringliteral">&quot;100ms Timeout occured in setControlModesRaw(M) (%s j:%d), current mode: %s, requested: %s&quot;</span>, networkName.c_str(), joints[i], yarp::os::Vocab32::decode(current_mode).c_str(), yarp::os::Vocab32::decode(modes[i]).c_str());</div>
<div class="line"><a name="l04132"></a><span class="lineno"> 4132</span>&#160;        }</div>
<div class="line"><a name="l04133"></a><span class="lineno"> 4133</span>&#160;    }</div>
<div class="line"><a name="l04134"></a><span class="lineno"> 4134</span>&#160; </div>
<div class="line"><a name="l04135"></a><span class="lineno"> 4135</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l04136"></a><span class="lineno"> 4136</span>&#160;}</div>
<div class="line"><a name="l04137"></a><span class="lineno"> 4137</span>&#160; </div>
<div class="line"><a name="l04138"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ac32d488241bd47a8491154d5afec3060"> 4138</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ac32d488241bd47a8491154d5afec3060">CanBusMotionControl::getRemoteVariablesListRaw</a>(yarp::os::Bottle* listOfKeys)</div>
<div class="line"><a name="l04139"></a><span class="lineno"> 4139</span>&#160;{</div>
<div class="line"><a name="l04140"></a><span class="lineno"> 4140</span>&#160;    listOfKeys-&gt;clear();</div>
<div class="line"><a name="l04141"></a><span class="lineno"> 4141</span>&#160;    listOfKeys-&gt;addString(<span class="stringliteral">&quot;filterType&quot;</span>);</div>
<div class="line"><a name="l04142"></a><span class="lineno"> 4142</span>&#160;    listOfKeys-&gt;addString(<span class="stringliteral">&quot;PWMLimit&quot;</span>);</div>
<div class="line"><a name="l04143"></a><span class="lineno"> 4143</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04144"></a><span class="lineno"> 4144</span>&#160;}</div>
<div class="line"><a name="l04145"></a><span class="lineno"> 4145</span>&#160; </div>
<div class="line"><a name="l04146"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a1db552b282131ca7edcdbe42d4060021"> 4146</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a1db552b282131ca7edcdbe42d4060021">CanBusMotionControl::getRemoteVariableRaw</a>(std::string key, yarp::os::Bottle&amp; val)</div>
<div class="line"><a name="l04147"></a><span class="lineno"> 4147</span>&#160;{</div>
<div class="line"><a name="l04148"></a><span class="lineno"> 4148</span>&#160;    val.clear();</div>
<div class="line"><a name="l04149"></a><span class="lineno"> 4149</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; res = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l04150"></a><span class="lineno"> 4150</span>&#160;    <span class="keywordflow">if</span> (key == <span class="stringliteral">&quot;filterType&quot;</span>)</div>
<div class="line"><a name="l04151"></a><span class="lineno"> 4151</span>&#160;    {</div>
<div class="line"><a name="l04152"></a><span class="lineno"> 4152</span>&#160;        Bottle&amp; r = val.addList(); <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i&lt; res.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>(); i++) { <span class="keywordtype">int</span> <a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a> = 0; <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a54ab847f95be3ccd3d0d33b39437c3ba">getFilterTypeRaw</a>(i, &amp;<a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a>);  r.addInt32(<a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a>); }</div>
<div class="line"><a name="l04153"></a><span class="lineno"> 4153</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04154"></a><span class="lineno"> 4154</span>&#160;    }</div>
<div class="line"><a name="l04155"></a><span class="lineno"> 4155</span>&#160;    <span class="keywordflow">if</span> (key == <span class="stringliteral">&quot;PWMLimit&quot;</span>)</div>
<div class="line"><a name="l04156"></a><span class="lineno"> 4156</span>&#160;    {</div>
<div class="line"><a name="l04157"></a><span class="lineno"> 4157</span>&#160;        Bottle&amp; r = val.addList(); <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i&lt; res.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>(); i++) { <span class="keywordtype">double</span> <a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a> = 0; <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a958bd4c0de730eb0fe77967dcad80158">getPWMLimitRaw</a>(i, &amp;<a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a>);  r.addFloat64(<a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a>); }</div>
<div class="line"><a name="l04158"></a><span class="lineno"> 4158</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04159"></a><span class="lineno"> 4159</span>&#160;    }</div>
<div class="line"><a name="l04160"></a><span class="lineno"> 4160</span>&#160;    yWarning(<span class="stringliteral">&quot;getRemoteVariable(): Unknown variable %s&quot;</span>, key.c_str());</div>
<div class="line"><a name="l04161"></a><span class="lineno"> 4161</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04162"></a><span class="lineno"> 4162</span>&#160;}</div>
<div class="line"><a name="l04163"></a><span class="lineno"> 4163</span>&#160; </div>
<div class="line"><a name="l04164"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ad8edcd7ce7c101e2fec93d36a674a706"> 4164</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ad8edcd7ce7c101e2fec93d36a674a706">CanBusMotionControl::setRemoteVariableRaw</a>(std::string key, <span class="keyword">const</span> yarp::os::Bottle&amp; val)</div>
<div class="line"><a name="l04165"></a><span class="lineno"> 4165</span>&#160;{</div>
<div class="line"><a name="l04166"></a><span class="lineno"> 4166</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l04167"></a><span class="lineno"> 4167</span>&#160;    <span class="keywordtype">size_t</span> _njoints = r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>();</div>
<div class="line"><a name="l04168"></a><span class="lineno"> 4168</span>&#160; </div>
<div class="line"><a name="l04169"></a><span class="lineno"> 4169</span>&#160;    std::string s1 = val.toString();</div>
<div class="line"><a name="l04170"></a><span class="lineno"> 4170</span>&#160;    <span class="keywordflow">if</span> (val.size() != _njoints)</div>
<div class="line"><a name="l04171"></a><span class="lineno"> 4171</span>&#160;    {</div>
<div class="line"><a name="l04172"></a><span class="lineno"> 4172</span>&#160;        yWarning(<span class="stringliteral">&quot;setRemoteVariable(): Protocol error %s&quot;</span>, s1.c_str());</div>
<div class="line"><a name="l04173"></a><span class="lineno"> 4173</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04174"></a><span class="lineno"> 4174</span>&#160;    }</div>
<div class="line"><a name="l04175"></a><span class="lineno"> 4175</span>&#160; </div>
<div class="line"><a name="l04176"></a><span class="lineno"> 4176</span>&#160;    <span class="keywordflow">if</span> (key == <span class="stringliteral">&quot;filterType&quot;</span>)</div>
<div class="line"><a name="l04177"></a><span class="lineno"> 4177</span>&#160;    {</div>
<div class="line"><a name="l04178"></a><span class="lineno"> 4178</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>(); i++)</div>
<div class="line"><a name="l04179"></a><span class="lineno"> 4179</span>&#160;        {</div>
<div class="line"><a name="l04180"></a><span class="lineno"> 4180</span>&#160;            <span class="keywordtype">int</span> filter_type = val.get(i).asInt32();</div>
<div class="line"><a name="l04181"></a><span class="lineno"> 4181</span>&#160;            this-&gt;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#abc0ee2abe55ebb081094106e63db584c">setFilterTypeRaw</a>(i, filter_type);</div>
<div class="line"><a name="l04182"></a><span class="lineno"> 4182</span>&#160;        }</div>
<div class="line"><a name="l04183"></a><span class="lineno"> 4183</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04184"></a><span class="lineno"> 4184</span>&#160;    }</div>
<div class="line"><a name="l04185"></a><span class="lineno"> 4185</span>&#160;    <span class="keywordflow">if</span> (key == <span class="stringliteral">&quot;PWMLimit&quot;</span>)</div>
<div class="line"><a name="l04186"></a><span class="lineno"> 4186</span>&#160;    {</div>
<div class="line"><a name="l04187"></a><span class="lineno"> 4187</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>(); i++)</div>
<div class="line"><a name="l04188"></a><span class="lineno"> 4188</span>&#160;        {</div>
<div class="line"><a name="l04189"></a><span class="lineno"> 4189</span>&#160;            <span class="keywordtype">double</span> limit = val.get(i).asFloat64();</div>
<div class="line"><a name="l04190"></a><span class="lineno"> 4190</span>&#160;            this-&gt;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a86ce098d289c6a426a27c94e1a155e49">setPWMLimitRaw</a>(i, (<span class="keywordtype">int</span>)(limit));</div>
<div class="line"><a name="l04191"></a><span class="lineno"> 4191</span>&#160;        }</div>
<div class="line"><a name="l04192"></a><span class="lineno"> 4192</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04193"></a><span class="lineno"> 4193</span>&#160;    }</div>
<div class="line"><a name="l04194"></a><span class="lineno"> 4194</span>&#160;    yWarning(<span class="stringliteral">&quot;setRemoteVariable(): Unknown variable %s&quot;</span>, key.c_str());</div>
<div class="line"><a name="l04195"></a><span class="lineno"> 4195</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04196"></a><span class="lineno"> 4196</span>&#160;}</div>
<div class="line"><a name="l04197"></a><span class="lineno"> 4197</span>&#160; </div>
<div class="line"><a name="l04198"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a9660ce1aaae968abadfc2db98ea097ce"> 4198</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a9660ce1aaae968abadfc2db98ea097ce">CanBusMotionControl::getAxisNameRaw</a>(<span class="keywordtype">int</span> axis, std::string&amp; name)</div>
<div class="line"><a name="l04199"></a><span class="lineno"> 4199</span>&#160;{</div>
<div class="line"><a name="l04200"></a><span class="lineno"> 4200</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l04201"></a><span class="lineno"> 4201</span>&#160;    <span class="keywordflow">if</span> (axis &gt;= 0 &amp;&amp; axis &lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>())</div>
<div class="line"><a name="l04202"></a><span class="lineno"> 4202</span>&#160;    {</div>
<div class="line"><a name="l04203"></a><span class="lineno"> 4203</span>&#160;        name = r.<a class="code" href="classCanBusResources.html#a9ea7178d577ad82942ca0593121da31f">_jointNames</a>[axis];</div>
<div class="line"><a name="l04204"></a><span class="lineno"> 4204</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04205"></a><span class="lineno"> 4205</span>&#160;    }</div>
<div class="line"><a name="l04206"></a><span class="lineno"> 4206</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l04207"></a><span class="lineno"> 4207</span>&#160;    {</div>
<div class="line"><a name="l04208"></a><span class="lineno"> 4208</span>&#160;        name = <span class="stringliteral">&quot;ERROR&quot;</span>;</div>
<div class="line"><a name="l04209"></a><span class="lineno"> 4209</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04210"></a><span class="lineno"> 4210</span>&#160;    }</div>
<div class="line"><a name="l04211"></a><span class="lineno"> 4211</span>&#160;}</div>
<div class="line"><a name="l04212"></a><span class="lineno"> 4212</span>&#160; </div>
<div class="line"><a name="l04213"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6751a3f27900877fbb7f98084f5fedd0"> 4213</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6751a3f27900877fbb7f98084f5fedd0">CanBusMotionControl::getJointTypeRaw</a>(<span class="keywordtype">int</span> axis, yarp::dev::JointTypeEnum&amp; type)</div>
<div class="line"><a name="l04214"></a><span class="lineno"> 4214</span>&#160;{</div>
<div class="line"><a name="l04215"></a><span class="lineno"> 4215</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l04216"></a><span class="lineno"> 4216</span>&#160;    <span class="keywordflow">if</span> (axis &gt;= 0 &amp;&amp; axis &lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>())</div>
<div class="line"><a name="l04217"></a><span class="lineno"> 4217</span>&#160;    {</div>
<div class="line"><a name="l04218"></a><span class="lineno"> 4218</span>&#160;        <span class="comment">//type = joint_type[axis];</span></div>
<div class="line"><a name="l04219"></a><span class="lineno"> 4219</span>&#160;        type = VOCAB_JOINTTYPE_REVOLUTE;</div>
<div class="line"><a name="l04220"></a><span class="lineno"> 4220</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04221"></a><span class="lineno"> 4221</span>&#160;    }</div>
<div class="line"><a name="l04222"></a><span class="lineno"> 4222</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l04223"></a><span class="lineno"> 4223</span>&#160;    {</div>
<div class="line"><a name="l04224"></a><span class="lineno"> 4224</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04225"></a><span class="lineno"> 4225</span>&#160;    }</div>
<div class="line"><a name="l04226"></a><span class="lineno"> 4226</span>&#160;}</div>
<div class="line"><a name="l04227"></a><span class="lineno"> 4227</span>&#160; </div>
<div class="line"><a name="l04228"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ac7cc5a7f1f366d0ef478e515101e1979"> 4228</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a5ba3e43009b5ce20ac1b7fdd2014f359">CanBusMotionControl::setControlModesRaw</a>(<span class="keywordtype">int</span> *modes)</div>
<div class="line"><a name="l04229"></a><span class="lineno"> 4229</span>&#160;{</div>
<div class="line"><a name="l04230"></a><span class="lineno"> 4230</span>&#160;    <a class="code" href="canControlUtils_8h.html#aed353ce9c28af351b98138a0a3cee032">DEBUG_FUNC</a>(<span class="stringliteral">&quot;Calling SET_CONTROL_MODE_RAW ALL JOINT\n&quot;</span>);</div>
<div class="line"><a name="l04231"></a><span class="lineno"> 4231</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l04232"></a><span class="lineno"> 4232</span>&#160;    <span class="keywordtype">bool</span> ret = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04233"></a><span class="lineno"> 4233</span>&#160; </div>
<div class="line"><a name="l04234"></a><span class="lineno"> 4234</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>(); i++)</div>
<div class="line"><a name="l04235"></a><span class="lineno"> 4235</span>&#160;    {</div>
<div class="line"><a name="l04236"></a><span class="lineno"> 4236</span>&#160;        <span class="keywordflow">if</span> (modes[i] == VOCAB_CM_TORQUE &amp;&amp; <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aec47204c6542b23914f2e0ac120fc0ca">_MCtorqueControlEnabled</a> == <span class="keyword">false</span>) {yError()&lt;&lt;<span class="stringliteral">&quot;Torque control is disabled. Check your configuration parameters&quot;</span>; <span class="keywordflow">continue</span>;}</div>
<div class="line"><a name="l04237"></a><span class="lineno"> 4237</span>&#160; </div>
<div class="line"><a name="l04238"></a><span class="lineno"> 4238</span>&#160;        icubCanProto_controlmode_t v = <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a1ab119705abe4eab89d1f9b52f4518b5">from_modevocab_to_modeint</a>(modes[i]);</div>
<div class="line"><a name="l04239"></a><span class="lineno"> 4239</span>&#160;        <span class="keywordflow">if</span> (v==icubCanProto_controlmode_unknownError) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04240"></a><span class="lineno"> 4240</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#acfe73ef88e6f12e63c152e63f943fb09">_writeByte8</a>(ICUBCANPROTO_POL_MC_CMD__SET_CONTROL_MODE,i,v);</div>
<div class="line"><a name="l04241"></a><span class="lineno"> 4241</span>&#160; </div>
<div class="line"><a name="l04242"></a><span class="lineno"> 4242</span>&#160;        <span class="keywordtype">int</span> current_mode = VOCAB_CM_UNKNOWN;</div>
<div class="line"><a name="l04243"></a><span class="lineno"> 4243</span>&#160;        <span class="keywordtype">int</span> timeout = 0;</div>
<div class="line"><a name="l04244"></a><span class="lineno"> 4244</span>&#160;        <span class="keywordflow">do</span></div>
<div class="line"><a name="l04245"></a><span class="lineno"> 4245</span>&#160;        {</div>
<div class="line"><a name="l04246"></a><span class="lineno"> 4246</span>&#160;            <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a70e12eba89c67a6805b978e8fd839685">getControlModeRaw</a>(i,&amp;current_mode);</div>
<div class="line"><a name="l04247"></a><span class="lineno"> 4247</span>&#160;            <span class="keywordflow">if</span> (current_mode==modes[i]) {ret = <span class="keyword">true</span>; <span class="keywordflow">break</span>;}</div>
<div class="line"><a name="l04248"></a><span class="lineno"> 4248</span>&#160;            <span class="keywordflow">if</span> (current_mode==VOCAB_CM_IDLE     &amp;&amp; modes[i]==VOCAB_CM_FORCE_IDLE) {ret = <span class="keyword">true</span>; <span class="keywordflow">break</span>;}</div>
<div class="line"><a name="l04249"></a><span class="lineno"> 4249</span>&#160;            <span class="keywordflow">if</span> (current_mode==VOCAB_CM_HW_FAULT)</div>
<div class="line"><a name="l04250"></a><span class="lineno"> 4250</span>&#160;            {</div>
<div class="line"><a name="l04251"></a><span class="lineno"> 4251</span>&#160;                <span class="keywordflow">if</span> (modes[i]!=VOCAB_CM_FORCE_IDLE) {yError (<span class="stringliteral">&quot;Unable to set the control mode of a joint (%s j:%d) in HW_FAULT&quot;</span>, networkName.c_str(), i);}</div>
<div class="line"><a name="l04252"></a><span class="lineno"> 4252</span>&#160;                ret = <span class="keyword">true</span>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04253"></a><span class="lineno"> 4253</span>&#160;            }</div>
<div class="line"><a name="l04254"></a><span class="lineno"> 4254</span>&#160;            yarp::os::Time::delay(0.010);</div>
<div class="line"><a name="l04255"></a><span class="lineno"> 4255</span>&#160;            <span class="keywordflow">if</span> (timeout &gt;0) yWarning (<span class="stringliteral">&quot;setControlModesRaw delay (%s j:%d), current mode: %s, requested: %s&quot;</span>, networkName.c_str(), i, yarp::os::Vocab32::decode(current_mode).c_str(), yarp::os::Vocab32::decode(modes[i]).c_str());</div>
<div class="line"><a name="l04256"></a><span class="lineno"> 4256</span>&#160;            timeout++;</div>
<div class="line"><a name="l04257"></a><span class="lineno"> 4257</span>&#160;        }</div>
<div class="line"><a name="l04258"></a><span class="lineno"> 4258</span>&#160;        <span class="keywordflow">while</span> (timeout &lt; 10);</div>
<div class="line"><a name="l04259"></a><span class="lineno"> 4259</span>&#160;        <span class="keywordflow">if</span> (timeout&gt;=10)</div>
<div class="line"><a name="l04260"></a><span class="lineno"> 4260</span>&#160;        {</div>
<div class="line"><a name="l04261"></a><span class="lineno"> 4261</span>&#160;            ret = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04262"></a><span class="lineno"> 4262</span>&#160;            yError (<span class="stringliteral">&quot;100ms Timeout occured in setControlModesRaw (%s j:%d), current mode: %s, requested: %s&quot;</span>, networkName.c_str(), i, yarp::os::Vocab32::decode(current_mode).c_str(), yarp::os::Vocab32::decode(modes[i]).c_str());</div>
<div class="line"><a name="l04263"></a><span class="lineno"> 4263</span>&#160;        }</div>
<div class="line"><a name="l04264"></a><span class="lineno"> 4264</span>&#160;    }</div>
<div class="line"><a name="l04265"></a><span class="lineno"> 4265</span>&#160; </div>
<div class="line"><a name="l04266"></a><span class="lineno"> 4266</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l04267"></a><span class="lineno"> 4267</span>&#160;}</div>
<div class="line"><a name="l04268"></a><span class="lineno"> 4268</span>&#160; </div>
<div class="line"><a name="l04269"></a><span class="lineno"> 4269</span>&#160;<span class="comment">// return the number of controlled axes.</span></div>
<div class="line"><a name="l04270"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a7f8904e7fbc8fb307cf494a5b0957a22"> 4270</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a7f8904e7fbc8fb307cf494a5b0957a22">CanBusMotionControl::getAxes</a>(<span class="keywordtype">int</span> *ax)</div>
<div class="line"><a name="l04271"></a><span class="lineno"> 4271</span>&#160;{</div>
<div class="line"><a name="l04272"></a><span class="lineno"> 4272</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l04273"></a><span class="lineno"> 4273</span>&#160;    *ax = r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>();</div>
<div class="line"><a name="l04274"></a><span class="lineno"> 4274</span>&#160; </div>
<div class="line"><a name="l04275"></a><span class="lineno"> 4275</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04276"></a><span class="lineno"> 4276</span>&#160;}</div>
<div class="line"><a name="l04277"></a><span class="lineno"> 4277</span>&#160; </div>
<div class="line"><a name="l04278"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a577a5b439ed2ed7fc9d7cd6ddefc553b"> 4278</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a577a5b439ed2ed7fc9d7cd6ddefc553b">CanBusMotionControl::helper_setPosPidRaw</a> (<span class="keywordtype">int</span> axis, <span class="keyword">const</span> Pid &amp;pid)</div>
<div class="line"><a name="l04279"></a><span class="lineno"> 4279</span>&#160;{</div>
<div class="line"><a name="l04280"></a><span class="lineno"> 4280</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>-1)*2))</div>
<div class="line"><a name="l04281"></a><span class="lineno"> 4281</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04282"></a><span class="lineno"> 4282</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a100a40a38da173be134acb6308284b29">_writeWord16</a> (ICUBCANPROTO_POL_MC_CMD__SET_P_GAIN, axis, <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af5c4f789e8b29d4a63d538b48fc9cd77">S_16</a>(pid.kp));</div>
<div class="line"><a name="l04283"></a><span class="lineno"> 4283</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a100a40a38da173be134acb6308284b29">_writeWord16</a> (ICUBCANPROTO_POL_MC_CMD__SET_D_GAIN, axis, <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af5c4f789e8b29d4a63d538b48fc9cd77">S_16</a>(pid.kd));</div>
<div class="line"><a name="l04284"></a><span class="lineno"> 4284</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a100a40a38da173be134acb6308284b29">_writeWord16</a> (ICUBCANPROTO_POL_MC_CMD__SET_I_GAIN, axis, <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af5c4f789e8b29d4a63d538b48fc9cd77">S_16</a>(pid.ki));</div>
<div class="line"><a name="l04285"></a><span class="lineno"> 4285</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a100a40a38da173be134acb6308284b29">_writeWord16</a> (ICUBCANPROTO_POL_MC_CMD__SET_ILIM_GAIN, axis, <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af5c4f789e8b29d4a63d538b48fc9cd77">S_16</a>(pid.max_int));</div>
<div class="line"><a name="l04286"></a><span class="lineno"> 4286</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a100a40a38da173be134acb6308284b29">_writeWord16</a> (ICUBCANPROTO_POL_MC_CMD__SET_OFFSET, axis, <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af5c4f789e8b29d4a63d538b48fc9cd77">S_16</a>(pid.offset));</div>
<div class="line"><a name="l04287"></a><span class="lineno"> 4287</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a100a40a38da173be134acb6308284b29">_writeWord16</a> (ICUBCANPROTO_POL_MC_CMD__SET_SCALE, axis, <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af5c4f789e8b29d4a63d538b48fc9cd77">S_16</a>(pid.scale));</div>
<div class="line"><a name="l04288"></a><span class="lineno"> 4288</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a100a40a38da173be134acb6308284b29">_writeWord16</a> (ICUBCANPROTO_POL_MC_CMD__SET_TLIM, axis, <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af5c4f789e8b29d4a63d538b48fc9cd77">S_16</a>(pid.max_output));</div>
<div class="line"><a name="l04289"></a><span class="lineno"> 4289</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a38334546ab8ca06858c1cbc5cdcc08ba">_writeWord16Ex</a> (ICUBCANPROTO_POL_MC_CMD__SET_POS_STICTION_PARAMS, axis, <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af5c4f789e8b29d4a63d538b48fc9cd77">S_16</a>(pid.stiction_up_val), <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af5c4f789e8b29d4a63d538b48fc9cd77">S_16</a>(pid.stiction_down_val), <span class="keyword">false</span>);</div>
<div class="line"><a name="l04290"></a><span class="lineno"> 4290</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04291"></a><span class="lineno"> 4291</span>&#160;}</div>
<div class="line"><a name="l04292"></a><span class="lineno"> 4292</span>&#160; </div>
<div class="line"><a name="l04293"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a9f68e24ec7c34b3c12a7a534929ca6a9"> 4293</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a9f68e24ec7c34b3c12a7a534929ca6a9">CanBusMotionControl::setPidRaw</a> (<span class="keyword">const</span> PidControlTypeEnum&amp; pidtype, <span class="keywordtype">int</span> axis, <span class="keyword">const</span> Pid &amp;pid)</div>
<div class="line"><a name="l04294"></a><span class="lineno"> 4294</span>&#160;{</div>
<div class="line"><a name="l04295"></a><span class="lineno"> 4295</span>&#160;    <span class="comment">//    ACE_ASSERT (axis &gt;= 0 &amp;&amp; axis &lt;= (CAN_MAX_CARDS-1)*2);</span></div>
<div class="line"><a name="l04296"></a><span class="lineno"> 4296</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>-1)*2))</div>
<div class="line"><a name="l04297"></a><span class="lineno"> 4297</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04298"></a><span class="lineno"> 4298</span>&#160; </div>
<div class="line"><a name="l04299"></a><span class="lineno"> 4299</span>&#160;    <span class="keywordflow">switch</span> (pidtype)</div>
<div class="line"><a name="l04300"></a><span class="lineno"> 4300</span>&#160;    {</div>
<div class="line"><a name="l04301"></a><span class="lineno"> 4301</span>&#160;        <span class="keywordflow">case</span> VOCAB_PIDTYPE_POSITION:</div>
<div class="line"><a name="l04302"></a><span class="lineno"> 4302</span>&#160;            <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a577a5b439ed2ed7fc9d7cd6ddefc553b">helper_setPosPidRaw</a>(axis,pid);</div>
<div class="line"><a name="l04303"></a><span class="lineno"> 4303</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04304"></a><span class="lineno"> 4304</span>&#160;        <span class="keywordflow">case</span> VOCAB_PIDTYPE_VELOCITY:</div>
<div class="line"><a name="l04305"></a><span class="lineno"> 4305</span>&#160;            <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ac5959a536ae829d502b0ebe3873ea6c1">helper_setVelPidRaw</a>(axis,pid);</div>
<div class="line"><a name="l04306"></a><span class="lineno"> 4306</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04307"></a><span class="lineno"> 4307</span>&#160;        <span class="keywordflow">case</span> VOCAB_PIDTYPE_CURRENT:</div>
<div class="line"><a name="l04308"></a><span class="lineno"> 4308</span>&#160;            <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a7a18a7426b30c7fcbc39941f73acaaa5">helper_setCurPidRaw</a>(axis,pid);</div>
<div class="line"><a name="l04309"></a><span class="lineno"> 4309</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04310"></a><span class="lineno"> 4310</span>&#160;        <span class="keywordflow">case</span> VOCAB_PIDTYPE_TORQUE:</div>
<div class="line"><a name="l04311"></a><span class="lineno"> 4311</span>&#160;            <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a38c5618c9ad516e570bd362e4526d1e9">helper_setTrqPidRaw</a>(axis,pid);</div>
<div class="line"><a name="l04312"></a><span class="lineno"> 4312</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04313"></a><span class="lineno"> 4313</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l04314"></a><span class="lineno"> 4314</span>&#160;            yError()&lt;&lt;<span class="stringliteral">&quot;Invalid pidtype:&quot;</span>&lt;&lt;pidtype;</div>
<div class="line"><a name="l04315"></a><span class="lineno"> 4315</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04316"></a><span class="lineno"> 4316</span>&#160;    }</div>
<div class="line"><a name="l04317"></a><span class="lineno"> 4317</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04318"></a><span class="lineno"> 4318</span>&#160;}</div>
<div class="line"><a name="l04319"></a><span class="lineno"> 4319</span>&#160; </div>
<div class="line"><a name="l04320"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ae2889234f938e7a9ca52abdc0a6a0e35"> 4320</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ae2889234f938e7a9ca52abdc0a6a0e35">CanBusMotionControl::getImpedanceRaw</a> (<span class="keywordtype">int</span> axis, <span class="keywordtype">double</span> *stiff, <span class="keywordtype">double</span> *damp)</div>
<div class="line"><a name="l04321"></a><span class="lineno"> 4321</span>&#160;{</div>
<div class="line"><a name="l04322"></a><span class="lineno"> 4322</span>&#160;    <span class="comment">//    ACE_ASSERT (axis &gt;= 0 &amp;&amp; axis &lt;= (CAN_MAX_CARDS-1)*2);</span></div>
<div class="line"><a name="l04323"></a><span class="lineno"> 4323</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>-1)*2))</div>
<div class="line"><a name="l04324"></a><span class="lineno"> 4324</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04325"></a><span class="lineno"> 4325</span>&#160; </div>
<div class="line"><a name="l04326"></a><span class="lineno"> 4326</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a56978bb0d722116c2e86777743d17247">ENABLED</a>(axis))</div>
<div class="line"><a name="l04327"></a><span class="lineno"> 4327</span>&#160;    {</div>
<div class="line"><a name="l04328"></a><span class="lineno"> 4328</span>&#160;        <span class="comment">//@@@ TODO: check here</span></div>
<div class="line"><a name="l04329"></a><span class="lineno"> 4329</span>&#160;        <span class="comment">//*stiff = 0;</span></div>
<div class="line"><a name="l04330"></a><span class="lineno"> 4330</span>&#160;        <span class="comment">//*damp = 0;</span></div>
<div class="line"><a name="l04331"></a><span class="lineno"> 4331</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04332"></a><span class="lineno"> 4332</span>&#160;    }</div>
<div class="line"><a name="l04333"></a><span class="lineno"> 4333</span>&#160; </div>
<div class="line"><a name="l04334"></a><span class="lineno"> 4334</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l04335"></a><span class="lineno"> 4335</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.lock();</div>
<div class="line"><a name="l04336"></a><span class="lineno"> 4336</span>&#160;    <span class="keywordtype">int</span> id;</div>
<div class="line"><a name="l04337"></a><span class="lineno"> 4337</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a0de6c591abb8d8340378037eccf81951">threadPool</a>-&gt;<a class="code" href="classThreadPool2.html#af3e4ac95d374da92f359286d20bcba65">getId</a>(<span class="keywordtype">id</span>))</div>
<div class="line"><a name="l04338"></a><span class="lineno"> 4338</span>&#160;    {</div>
<div class="line"><a name="l04339"></a><span class="lineno"> 4339</span>&#160;        yError(<span class="stringliteral">&quot;More than %d threads, cannot allow more\n&quot;</span>, <a class="code" href="canControlConstants_8h.html#a3830b8707366b97dd5c993756d89f02d">CANCONTROL_MAX_THREADS</a>);</div>
<div class="line"><a name="l04340"></a><span class="lineno"> 4340</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.unlock();</div>
<div class="line"><a name="l04341"></a><span class="lineno"> 4341</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04342"></a><span class="lineno"> 4342</span>&#160;    }</div>
<div class="line"><a name="l04343"></a><span class="lineno"> 4343</span>&#160; </div>
<div class="line"><a name="l04344"></a><span class="lineno"> 4344</span>&#160;    r.<a class="code" href="classCanBusResources.html#a426cb1e9b09f03d70b8dbccb2346edb8">startPacket</a>();</div>
<div class="line"><a name="l04345"></a><span class="lineno"> 4345</span>&#160;    r.<a class="code" href="classCanBusResources.html#a1049ab4df32ee910f61efbe130ba9b41">addMessage</a> (<span class="keywordtype">id</span>, axis, ICUBCANPROTO_POL_MC_CMD__GET_IMPEDANCE_PARAMS);</div>
<div class="line"><a name="l04346"></a><span class="lineno"> 4346</span>&#160;    r.<a class="code" href="classCanBusResources.html#a36f76a689330cd6163c3f13bb8ac28d9">writePacket</a>();</div>
<div class="line"><a name="l04347"></a><span class="lineno"> 4347</span>&#160; </div>
<div class="line"><a name="l04348"></a><span class="lineno"> 4348</span>&#160;    <a class="code" href="classThreadTable2.html">ThreadTable2</a> *t=<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a0de6c591abb8d8340378037eccf81951">threadPool</a>-&gt;<a class="code" href="classThreadPool2.html#abed580daad75544f3455f08beaa06cf4">getThreadTable</a>(<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l04349"></a><span class="lineno"> 4349</span>&#160;    t-&gt;<a class="code" href="classThreadTable2.html#adba368aea4ee8d37742e332ed2f4f26e">setPending</a>(r.<a class="code" href="classCanBusResources.html#a781a7267d7eab2315d49720c1d673f29">_writeMessages</a>);</div>
<div class="line"><a name="l04350"></a><span class="lineno"> 4350</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.unlock();</div>
<div class="line"><a name="l04351"></a><span class="lineno"> 4351</span>&#160;    t-&gt;<a class="code" href="classThreadTable2.html#a47cdedbcf45603cf2a45f1758472fbc7">synch</a>();</div>
<div class="line"><a name="l04352"></a><span class="lineno"> 4352</span>&#160; </div>
<div class="line"><a name="l04353"></a><span class="lineno"> 4353</span>&#160;    <span class="keywordflow">if</span> (!r.<a class="code" href="classCanBusResources.html#a1642d0476521a6b0c8f538cef04e2a59">getErrorStatus</a>() || (t-&gt;<a class="code" href="classThreadTable2.html#af31e5328380be26902f2c1853ce2cb29">timedOut</a>()))</div>
<div class="line"><a name="l04354"></a><span class="lineno"> 4354</span>&#160;    {</div>
<div class="line"><a name="l04355"></a><span class="lineno"> 4355</span>&#160;        yError(<span class="stringliteral">&quot;getImpedanceRaw: message timed out\n&quot;</span>);</div>
<div class="line"><a name="l04356"></a><span class="lineno"> 4356</span>&#160;        <span class="comment">//@@@ TODO: check here</span></div>
<div class="line"><a name="l04357"></a><span class="lineno"> 4357</span>&#160;        <span class="comment">//*stiff = 0;</span></div>
<div class="line"><a name="l04358"></a><span class="lineno"> 4358</span>&#160;        <span class="comment">//*damp = 0;</span></div>
<div class="line"><a name="l04359"></a><span class="lineno"> 4359</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04360"></a><span class="lineno"> 4360</span>&#160;    }</div>
<div class="line"><a name="l04361"></a><span class="lineno"> 4361</span>&#160; </div>
<div class="line"><a name="l04362"></a><span class="lineno"> 4362</span>&#160;    CanMessage *m=t-&gt;<a class="code" href="classThreadTable2.html#afbbc874a92650328926f44d8638dc618">get</a>(0);</div>
<div class="line"><a name="l04363"></a><span class="lineno"> 4363</span>&#160;    <span class="keywordflow">if</span> (m==0)</div>
<div class="line"><a name="l04364"></a><span class="lineno"> 4364</span>&#160;    {</div>
<div class="line"><a name="l04365"></a><span class="lineno"> 4365</span>&#160;        <span class="comment">//@@@ TODO: check here</span></div>
<div class="line"><a name="l04366"></a><span class="lineno"> 4366</span>&#160;        <span class="comment">//*stiff = 0;</span></div>
<div class="line"><a name="l04367"></a><span class="lineno"> 4367</span>&#160;        <span class="comment">//*damp = 0;</span></div>
<div class="line"><a name="l04368"></a><span class="lineno"> 4368</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04369"></a><span class="lineno"> 4369</span>&#160;    }</div>
<div class="line"><a name="l04370"></a><span class="lineno"> 4370</span>&#160; </div>
<div class="line"><a name="l04371"></a><span class="lineno"> 4371</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>;</div>
<div class="line"><a name="l04372"></a><span class="lineno"> 4372</span>&#160;    <a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>=m-&gt;getData()+1;</div>
<div class="line"><a name="l04373"></a><span class="lineno"> 4373</span>&#160;    *stiff= *((<span class="keywordtype">short</span> *)(<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>));</div>
<div class="line"><a name="l04374"></a><span class="lineno"> 4374</span>&#160;    <a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>+=2;</div>
<div class="line"><a name="l04375"></a><span class="lineno"> 4375</span>&#160;    *damp= *((<span class="keywordtype">short</span> *)(<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>)); </div>
<div class="line"><a name="l04376"></a><span class="lineno"> 4376</span>&#160;    *damp/= 1000;</div>
<div class="line"><a name="l04377"></a><span class="lineno"> 4377</span>&#160; </div>
<div class="line"><a name="l04378"></a><span class="lineno"> 4378</span>&#160;    t-&gt;<a class="code" href="classThreadTable2.html#a2129ef023b358d00c5b30de7176f2b3e">clear</a>();</div>
<div class="line"><a name="l04379"></a><span class="lineno"> 4379</span>&#160; </div>
<div class="line"><a name="l04380"></a><span class="lineno"> 4380</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04381"></a><span class="lineno"> 4381</span>&#160;}</div>
<div class="line"><a name="l04382"></a><span class="lineno"> 4382</span>&#160; </div>
<div class="line"><a name="l04383"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a11e3d9124f279bbed1ed351cd2672061"> 4383</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a11e3d9124f279bbed1ed351cd2672061">CanBusMotionControl::getCurrentImpedanceLimitRaw</a>(<span class="keywordtype">int</span> j, <span class="keywordtype">double</span> *min_stiff, <span class="keywordtype">double</span> *max_stiff, <span class="keywordtype">double</span> *min_damp, <span class="keywordtype">double</span> *max_damp)</div>
<div class="line"><a name="l04384"></a><span class="lineno"> 4384</span>&#160;{</div>
<div class="line"><a name="l04385"></a><span class="lineno"> 4385</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l04386"></a><span class="lineno"> 4386</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> axis = j;</div>
<div class="line"><a name="l04387"></a><span class="lineno"> 4387</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>-1)*2))</div>
<div class="line"><a name="l04388"></a><span class="lineno"> 4388</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04389"></a><span class="lineno"> 4389</span>&#160; </div>
<div class="line"><a name="l04390"></a><span class="lineno"> 4390</span>&#160;    std::lock_guard&lt;std::recursive_mutex&gt; lck(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>);</div>
<div class="line"><a name="l04391"></a><span class="lineno"> 4391</span>&#160;    <span class="comment">// *** This method is implementented reading data without sending/receiving data from the Canbus ***</span></div>
<div class="line"><a name="l04392"></a><span class="lineno"> 4392</span>&#160;    *min_stiff=<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a686ec747cea2d0b6d8733d01763cff54">_axisImpedanceHelper</a>-&gt;<a class="code" href="classaxisImpedanceHelper.html#aa371f5034c3dd7f1547f091fb14b428a">getImpedanceLimits</a>()-&gt;<a class="code" href="structImpedanceLimits.html#acc59545ff476028fa1bfb8bafddbef46">get_min_stiff</a>(); </div>
<div class="line"><a name="l04393"></a><span class="lineno"> 4393</span>&#160;    *max_stiff=<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a686ec747cea2d0b6d8733d01763cff54">_axisImpedanceHelper</a>-&gt;<a class="code" href="classaxisImpedanceHelper.html#aa371f5034c3dd7f1547f091fb14b428a">getImpedanceLimits</a>()-&gt;<a class="code" href="structImpedanceLimits.html#a6a54ce5c7a144fae8cedd83c29ed1d5d">get_max_stiff</a>(); </div>
<div class="line"><a name="l04394"></a><span class="lineno"> 4394</span>&#160;    *min_damp= <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a686ec747cea2d0b6d8733d01763cff54">_axisImpedanceHelper</a>-&gt;<a class="code" href="classaxisImpedanceHelper.html#aa371f5034c3dd7f1547f091fb14b428a">getImpedanceLimits</a>()-&gt;<a class="code" href="structImpedanceLimits.html#af6ca2b2a2af0885abf824f7baf8cff56">get_min_damp</a>(); </div>
<div class="line"><a name="l04395"></a><span class="lineno"> 4395</span>&#160;    *max_damp= <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a686ec747cea2d0b6d8733d01763cff54">_axisImpedanceHelper</a>-&gt;<a class="code" href="classaxisImpedanceHelper.html#aa371f5034c3dd7f1547f091fb14b428a">getImpedanceLimits</a>()-&gt;<a class="code" href="structImpedanceLimits.html#ab4db3ea93c199daa27701a24f53a88e7">get_max_damp</a>(); </div>
<div class="line"><a name="l04396"></a><span class="lineno"> 4396</span>&#160;    <span class="keywordtype">int</span> k=castToMapper(yarp::dev::ImplementTorqueControl::helper)-&gt;toUser(j);</div>
<div class="line"><a name="l04397"></a><span class="lineno"> 4397</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04398"></a><span class="lineno"> 4398</span>&#160;}</div>
<div class="line"><a name="l04399"></a><span class="lineno"> 4399</span>&#160; </div>
<div class="line"><a name="l04400"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a3ff04a178ecced486d2f997b0d5c5a4f"> 4400</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a3ff04a178ecced486d2f997b0d5c5a4f">CanBusMotionControl::getImpedanceOffsetRaw</a> (<span class="keywordtype">int</span> axis, <span class="keywordtype">double</span> *off)</div>
<div class="line"><a name="l04401"></a><span class="lineno"> 4401</span>&#160;{</div>
<div class="line"><a name="l04402"></a><span class="lineno"> 4402</span>&#160;    <span class="comment">//    ACE_ASSERT (axis &gt;= 0 &amp;&amp; axis &lt;= (CAN_MAX_CARDS-1)*2);</span></div>
<div class="line"><a name="l04403"></a><span class="lineno"> 4403</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>-1)*2))</div>
<div class="line"><a name="l04404"></a><span class="lineno"> 4404</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04405"></a><span class="lineno"> 4405</span>&#160; </div>
<div class="line"><a name="l04406"></a><span class="lineno"> 4406</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a56978bb0d722116c2e86777743d17247">ENABLED</a>(axis))</div>
<div class="line"><a name="l04407"></a><span class="lineno"> 4407</span>&#160;    {</div>
<div class="line"><a name="l04408"></a><span class="lineno"> 4408</span>&#160;        <span class="comment">//@@@ TODO: check here</span></div>
<div class="line"><a name="l04409"></a><span class="lineno"> 4409</span>&#160;        <span class="comment">//*off = 0;</span></div>
<div class="line"><a name="l04410"></a><span class="lineno"> 4410</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04411"></a><span class="lineno"> 4411</span>&#160;    }</div>
<div class="line"><a name="l04412"></a><span class="lineno"> 4412</span>&#160; </div>
<div class="line"><a name="l04413"></a><span class="lineno"> 4413</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l04414"></a><span class="lineno"> 4414</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.lock();</div>
<div class="line"><a name="l04415"></a><span class="lineno"> 4415</span>&#160;    <span class="keywordtype">int</span> id;</div>
<div class="line"><a name="l04416"></a><span class="lineno"> 4416</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a0de6c591abb8d8340378037eccf81951">threadPool</a>-&gt;<a class="code" href="classThreadPool2.html#af3e4ac95d374da92f359286d20bcba65">getId</a>(<span class="keywordtype">id</span>))</div>
<div class="line"><a name="l04417"></a><span class="lineno"> 4417</span>&#160;    {</div>
<div class="line"><a name="l04418"></a><span class="lineno"> 4418</span>&#160;        yError(<span class="stringliteral">&quot;More than %d threads, cannot allow more\n&quot;</span>, <a class="code" href="canControlConstants_8h.html#a3830b8707366b97dd5c993756d89f02d">CANCONTROL_MAX_THREADS</a>);</div>
<div class="line"><a name="l04419"></a><span class="lineno"> 4419</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.unlock();</div>
<div class="line"><a name="l04420"></a><span class="lineno"> 4420</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04421"></a><span class="lineno"> 4421</span>&#160;    }</div>
<div class="line"><a name="l04422"></a><span class="lineno"> 4422</span>&#160; </div>
<div class="line"><a name="l04423"></a><span class="lineno"> 4423</span>&#160;    r.<a class="code" href="classCanBusResources.html#a426cb1e9b09f03d70b8dbccb2346edb8">startPacket</a>();</div>
<div class="line"><a name="l04424"></a><span class="lineno"> 4424</span>&#160;    r.<a class="code" href="classCanBusResources.html#a1049ab4df32ee910f61efbe130ba9b41">addMessage</a> (<span class="keywordtype">id</span>, axis, ICUBCANPROTO_POL_MC_CMD__GET_IMPEDANCE_OFFSET);</div>
<div class="line"><a name="l04425"></a><span class="lineno"> 4425</span>&#160;    r.<a class="code" href="classCanBusResources.html#a36f76a689330cd6163c3f13bb8ac28d9">writePacket</a>();</div>
<div class="line"><a name="l04426"></a><span class="lineno"> 4426</span>&#160; </div>
<div class="line"><a name="l04427"></a><span class="lineno"> 4427</span>&#160;    <a class="code" href="classThreadTable2.html">ThreadTable2</a> *t=<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a0de6c591abb8d8340378037eccf81951">threadPool</a>-&gt;<a class="code" href="classThreadPool2.html#abed580daad75544f3455f08beaa06cf4">getThreadTable</a>(<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l04428"></a><span class="lineno"> 4428</span>&#160;    t-&gt;<a class="code" href="classThreadTable2.html#adba368aea4ee8d37742e332ed2f4f26e">setPending</a>(r.<a class="code" href="classCanBusResources.html#a781a7267d7eab2315d49720c1d673f29">_writeMessages</a>);</div>
<div class="line"><a name="l04429"></a><span class="lineno"> 4429</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.unlock();</div>
<div class="line"><a name="l04430"></a><span class="lineno"> 4430</span>&#160;    t-&gt;<a class="code" href="classThreadTable2.html#a47cdedbcf45603cf2a45f1758472fbc7">synch</a>();</div>
<div class="line"><a name="l04431"></a><span class="lineno"> 4431</span>&#160; </div>
<div class="line"><a name="l04432"></a><span class="lineno"> 4432</span>&#160;     <span class="keywordflow">if</span> (!r.<a class="code" href="classCanBusResources.html#a1642d0476521a6b0c8f538cef04e2a59">getErrorStatus</a>() || (t-&gt;<a class="code" href="classThreadTable2.html#af31e5328380be26902f2c1853ce2cb29">timedOut</a>()))</div>
<div class="line"><a name="l04433"></a><span class="lineno"> 4433</span>&#160;    {</div>
<div class="line"><a name="l04434"></a><span class="lineno"> 4434</span>&#160;        yError(<span class="stringliteral">&quot;getImpedanceOffset: message timed out\n&quot;</span>);</div>
<div class="line"><a name="l04435"></a><span class="lineno"> 4435</span>&#160;        <span class="comment">//@@@ TODO: check here</span></div>
<div class="line"><a name="l04436"></a><span class="lineno"> 4436</span>&#160;        <span class="comment">//*off=0;</span></div>
<div class="line"><a name="l04437"></a><span class="lineno"> 4437</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04438"></a><span class="lineno"> 4438</span>&#160;    }</div>
<div class="line"><a name="l04439"></a><span class="lineno"> 4439</span>&#160; </div>
<div class="line"><a name="l04440"></a><span class="lineno"> 4440</span>&#160;    CanMessage *m=t-&gt;<a class="code" href="classThreadTable2.html#afbbc874a92650328926f44d8638dc618">get</a>(0);</div>
<div class="line"><a name="l04441"></a><span class="lineno"> 4441</span>&#160;    <span class="keywordflow">if</span> (m==0)</div>
<div class="line"><a name="l04442"></a><span class="lineno"> 4442</span>&#160;    {</div>
<div class="line"><a name="l04443"></a><span class="lineno"> 4443</span>&#160;        <span class="comment">//@@@ TODO: check here</span></div>
<div class="line"><a name="l04444"></a><span class="lineno"> 4444</span>&#160;        <span class="comment">//*off=0;</span></div>
<div class="line"><a name="l04445"></a><span class="lineno"> 4445</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04446"></a><span class="lineno"> 4446</span>&#160;    }</div>
<div class="line"><a name="l04447"></a><span class="lineno"> 4447</span>&#160; </div>
<div class="line"><a name="l04448"></a><span class="lineno"> 4448</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>;</div>
<div class="line"><a name="l04449"></a><span class="lineno"> 4449</span>&#160;    <a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>=m-&gt;getData()+1;</div>
<div class="line"><a name="l04450"></a><span class="lineno"> 4450</span>&#160;    *off= *((<span class="keywordtype">short</span> *)(<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>));</div>
<div class="line"><a name="l04451"></a><span class="lineno"> 4451</span>&#160; </div>
<div class="line"><a name="l04452"></a><span class="lineno"> 4452</span>&#160;    t-&gt;<a class="code" href="classThreadTable2.html#a2129ef023b358d00c5b30de7176f2b3e">clear</a>();</div>
<div class="line"><a name="l04453"></a><span class="lineno"> 4453</span>&#160; </div>
<div class="line"><a name="l04454"></a><span class="lineno"> 4454</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04455"></a><span class="lineno"> 4455</span>&#160;}</div>
<div class="line"><a name="l04456"></a><span class="lineno"> 4456</span>&#160; </div>
<div class="line"><a name="l04457"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6011bd2cc00e7e845fc1ee685e50c60b"> 4457</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6011bd2cc00e7e845fc1ee685e50c60b">CanBusMotionControl::setImpedanceRaw</a> (<span class="keywordtype">int</span> axis, <span class="keywordtype">double</span> stiff, <span class="keywordtype">double</span> damp)</div>
<div class="line"><a name="l04458"></a><span class="lineno"> 4458</span>&#160;{</div>
<div class="line"><a name="l04459"></a><span class="lineno"> 4459</span>&#160;    <span class="comment">//    ACE_ASSERT (axis &gt;= 0 &amp;&amp; axis &lt;= (CAN_MAX_CARDS-1)*2);</span></div>
<div class="line"><a name="l04460"></a><span class="lineno"> 4460</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>-1)*2))</div>
<div class="line"><a name="l04461"></a><span class="lineno"> 4461</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04462"></a><span class="lineno"> 4462</span>&#160; </div>
<div class="line"><a name="l04463"></a><span class="lineno"> 4463</span>&#160;    <a class="code" href="canControlUtils_8h.html#aed353ce9c28af351b98138a0a3cee032">DEBUG_FUNC</a>(<span class="stringliteral">&quot;setImpedanceRaw\n&quot;</span>);</div>
<div class="line"><a name="l04464"></a><span class="lineno"> 4464</span>&#160; </div>
<div class="line"><a name="l04465"></a><span class="lineno"> 4465</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a56978bb0d722116c2e86777743d17247">ENABLED</a>(axis))</div>
<div class="line"><a name="l04466"></a><span class="lineno"> 4466</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04467"></a><span class="lineno"> 4467</span>&#160; </div>
<div class="line"><a name="l04468"></a><span class="lineno"> 4468</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l04469"></a><span class="lineno"> 4469</span>&#160;    std::lock_guard&lt;std::recursive_mutex&gt; lck(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>);</div>
<div class="line"><a name="l04470"></a><span class="lineno"> 4470</span>&#160;    r.<a class="code" href="classCanBusResources.html#a426cb1e9b09f03d70b8dbccb2346edb8">startPacket</a>();</div>
<div class="line"><a name="l04471"></a><span class="lineno"> 4471</span>&#160;    r.<a class="code" href="classCanBusResources.html#a1049ab4df32ee910f61efbe130ba9b41">addMessage</a> (ICUBCANPROTO_POL_MC_CMD__SET_IMPEDANCE_PARAMS, axis);</div>
<div class="line"><a name="l04472"></a><span class="lineno"> 4472</span>&#160;    *((<span class="keywordtype">short</span> *)(r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()+1)) = <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af5c4f789e8b29d4a63d538b48fc9cd77">S_16</a>(stiff);</div>
<div class="line"><a name="l04473"></a><span class="lineno"> 4473</span>&#160;    *((<span class="keywordtype">short</span> *)(r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()+3)) = <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af5c4f789e8b29d4a63d538b48fc9cd77">S_16</a>(damp*1000);</div>
<div class="line"><a name="l04474"></a><span class="lineno"> 4474</span>&#160;    *((<span class="keywordtype">short</span> *)(r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()+5)) = <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af5c4f789e8b29d4a63d538b48fc9cd77">S_16</a>(0);</div>
<div class="line"><a name="l04475"></a><span class="lineno"> 4475</span>&#160;    *((<span class="keywordtype">char</span>  *)(r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()+7)) = 0;</div>
<div class="line"><a name="l04476"></a><span class="lineno"> 4476</span>&#160;    r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].setLen(8);</div>
<div class="line"><a name="l04477"></a><span class="lineno"> 4477</span>&#160;    r.<a class="code" href="classCanBusResources.html#a36f76a689330cd6163c3f13bb8ac28d9">writePacket</a>();</div>
<div class="line"><a name="l04478"></a><span class="lineno"> 4478</span>&#160; </div>
<div class="line"><a name="l04479"></a><span class="lineno"> 4479</span>&#160;    <span class="comment">//yDebug(&quot;stiffness is: %d \n&quot;, S_16(stiff));</span></div>
<div class="line"><a name="l04480"></a><span class="lineno"> 4480</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04481"></a><span class="lineno"> 4481</span>&#160;}</div>
<div class="line"><a name="l04482"></a><span class="lineno"> 4482</span>&#160; </div>
<div class="line"><a name="l04483"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a2cf4b19d42711422f3682923d31ee57f"> 4483</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a2cf4b19d42711422f3682923d31ee57f">CanBusMotionControl::setTorqueSource</a> (<span class="keywordtype">int</span> axis, <span class="keywordtype">char</span> board_id, <span class="keywordtype">char</span> board_chan )</div>
<div class="line"><a name="l04484"></a><span class="lineno"> 4484</span>&#160;{</div>
<div class="line"><a name="l04485"></a><span class="lineno"> 4485</span>&#160;    <span class="comment">//    ACE_ASSERT (axis &gt;= 0 &amp;&amp; axis &lt;= (CAN_MAX_CARDS-1)*2);</span></div>
<div class="line"><a name="l04486"></a><span class="lineno"> 4486</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>-1)*2))</div>
<div class="line"><a name="l04487"></a><span class="lineno"> 4487</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04488"></a><span class="lineno"> 4488</span>&#160; </div>
<div class="line"><a name="l04489"></a><span class="lineno"> 4489</span>&#160;    <a class="code" href="canControlUtils_8h.html#aed353ce9c28af351b98138a0a3cee032">DEBUG_FUNC</a>(<span class="stringliteral">&quot;setTorqueSource\n&quot;</span>);</div>
<div class="line"><a name="l04490"></a><span class="lineno"> 4490</span>&#160; </div>
<div class="line"><a name="l04491"></a><span class="lineno"> 4491</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a56978bb0d722116c2e86777743d17247">ENABLED</a>(axis))</div>
<div class="line"><a name="l04492"></a><span class="lineno"> 4492</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04493"></a><span class="lineno"> 4493</span>&#160; </div>
<div class="line"><a name="l04494"></a><span class="lineno"> 4494</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l04495"></a><span class="lineno"> 4495</span>&#160;    std::lock_guard&lt;std::recursive_mutex&gt; lck(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>);</div>
<div class="line"><a name="l04496"></a><span class="lineno"> 4496</span>&#160;    r.<a class="code" href="classCanBusResources.html#a426cb1e9b09f03d70b8dbccb2346edb8">startPacket</a>();</div>
<div class="line"><a name="l04497"></a><span class="lineno"> 4497</span>&#160;    r.<a class="code" href="classCanBusResources.html#a1049ab4df32ee910f61efbe130ba9b41">addMessage</a> (ICUBCANPROTO_POL_MC_CMD__SET_TORQUE_SOURCE, axis);</div>
<div class="line"><a name="l04498"></a><span class="lineno"> 4498</span>&#160;    *((<span class="keywordtype">char</span> *)(r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()+1)) = board_id;</div>
<div class="line"><a name="l04499"></a><span class="lineno"> 4499</span>&#160;    *((<span class="keywordtype">char</span> *)(r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()+2)) = board_chan;</div>
<div class="line"><a name="l04500"></a><span class="lineno"> 4500</span>&#160;    *((<span class="keywordtype">char</span> *)(r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()+3)) = 0;</div>
<div class="line"><a name="l04501"></a><span class="lineno"> 4501</span>&#160;    *((<span class="keywordtype">char</span> *)(r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()+4)) = 0;</div>
<div class="line"><a name="l04502"></a><span class="lineno"> 4502</span>&#160;    *((<span class="keywordtype">char</span> *)(r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()+5)) = 0;</div>
<div class="line"><a name="l04503"></a><span class="lineno"> 4503</span>&#160;    *((<span class="keywordtype">char</span> *)(r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()+6)) = 0;</div>
<div class="line"><a name="l04504"></a><span class="lineno"> 4504</span>&#160;    *((<span class="keywordtype">char</span> *)(r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()+7)) = 0;</div>
<div class="line"><a name="l04505"></a><span class="lineno"> 4505</span>&#160;    r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].setLen(8);</div>
<div class="line"><a name="l04506"></a><span class="lineno"> 4506</span>&#160;    r.<a class="code" href="classCanBusResources.html#a36f76a689330cd6163c3f13bb8ac28d9">writePacket</a>();</div>
<div class="line"><a name="l04507"></a><span class="lineno"> 4507</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04508"></a><span class="lineno"> 4508</span>&#160;}</div>
<div class="line"><a name="l04509"></a><span class="lineno"> 4509</span>&#160; </div>
<div class="line"><a name="l04510"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a7090c184b1080e3cf7d946d66ab640eb"> 4510</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a7090c184b1080e3cf7d946d66ab640eb">CanBusMotionControl::setImpedanceOffsetRaw</a> (<span class="keywordtype">int</span> axis, <span class="keywordtype">double</span> off)</div>
<div class="line"><a name="l04511"></a><span class="lineno"> 4511</span>&#160;{</div>
<div class="line"><a name="l04512"></a><span class="lineno"> 4512</span>&#160;    <span class="comment">//    ACE_ASSERT (axis &gt;= 0 &amp;&amp; axis &lt;= (CAN_MAX_CARDS-1)*2);</span></div>
<div class="line"><a name="l04513"></a><span class="lineno"> 4513</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>-1)*2))</div>
<div class="line"><a name="l04514"></a><span class="lineno"> 4514</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04515"></a><span class="lineno"> 4515</span>&#160; </div>
<div class="line"><a name="l04516"></a><span class="lineno"> 4516</span>&#160;    <a class="code" href="canControlUtils_8h.html#aed353ce9c28af351b98138a0a3cee032">DEBUG_FUNC</a>(<span class="stringliteral">&quot;setImpedanceOffsetRaw\n&quot;</span>);</div>
<div class="line"><a name="l04517"></a><span class="lineno"> 4517</span>&#160; </div>
<div class="line"><a name="l04518"></a><span class="lineno"> 4518</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a56978bb0d722116c2e86777743d17247">ENABLED</a>(axis))</div>
<div class="line"><a name="l04519"></a><span class="lineno"> 4519</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04520"></a><span class="lineno"> 4520</span>&#160; </div>
<div class="line"><a name="l04521"></a><span class="lineno"> 4521</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l04522"></a><span class="lineno"> 4522</span>&#160;    std::lock_guard&lt;std::recursive_mutex&gt; lck(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>);</div>
<div class="line"><a name="l04523"></a><span class="lineno"> 4523</span>&#160;    r.<a class="code" href="classCanBusResources.html#a426cb1e9b09f03d70b8dbccb2346edb8">startPacket</a>();</div>
<div class="line"><a name="l04524"></a><span class="lineno"> 4524</span>&#160;    r.<a class="code" href="classCanBusResources.html#a1049ab4df32ee910f61efbe130ba9b41">addMessage</a> (ICUBCANPROTO_POL_MC_CMD__SET_IMPEDANCE_OFFSET, axis);</div>
<div class="line"><a name="l04525"></a><span class="lineno"> 4525</span>&#160;    *((<span class="keywordtype">short</span> *)(r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()+1)) = <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af5c4f789e8b29d4a63d538b48fc9cd77">S_16</a>(off);</div>
<div class="line"><a name="l04526"></a><span class="lineno"> 4526</span>&#160;    r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].setLen(3);</div>
<div class="line"><a name="l04527"></a><span class="lineno"> 4527</span>&#160;    r.<a class="code" href="classCanBusResources.html#a36f76a689330cd6163c3f13bb8ac28d9">writePacket</a>();</div>
<div class="line"><a name="l04528"></a><span class="lineno"> 4528</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04529"></a><span class="lineno"> 4529</span>&#160;}</div>
<div class="line"><a name="l04530"></a><span class="lineno"> 4530</span>&#160; </div>
<div class="line"><a name="l04531"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a74c983063011ad78f4dc08cc3a3f5a49"> 4531</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a74c983063011ad78f4dc08cc3a3f5a49">CanBusMotionControl::helper_getPosPidRaw</a> (<span class="keywordtype">int</span> axis, Pid *<a class="code" href="sine_8m.html#a2a89187d8e8e8fba509ef9ab5f815d88">out</a>)</div>
<div class="line"><a name="l04532"></a><span class="lineno"> 4532</span>&#160;{</div>
<div class="line"><a name="l04533"></a><span class="lineno"> 4533</span>&#160;    <span class="comment">//    ACE_ASSERT (axis &gt;= 0 &amp;&amp; axis &lt;= (CAN_MAX_CARDS-1)*2);</span></div>
<div class="line"><a name="l04534"></a><span class="lineno"> 4534</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>-1)*2))</div>
<div class="line"><a name="l04535"></a><span class="lineno"> 4535</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04536"></a><span class="lineno"> 4536</span>&#160; </div>
<div class="line"><a name="l04537"></a><span class="lineno"> 4537</span>&#160;    <span class="keywordtype">short</span> s;</div>
<div class="line"><a name="l04538"></a><span class="lineno"> 4538</span>&#160;    <span class="keywordtype">short</span> s2;</div>
<div class="line"><a name="l04539"></a><span class="lineno"> 4539</span>&#160; </div>
<div class="line"><a name="l04540"></a><span class="lineno"> 4540</span>&#160;    <a class="code" href="canControlUtils_8h.html#aed353ce9c28af351b98138a0a3cee032">DEBUG_FUNC</a>(<span class="stringliteral">&quot;Calling GET_P_GAIN\n&quot;</span>);</div>
<div class="line"><a name="l04541"></a><span class="lineno"> 4541</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a41a5714a6c78ee694b7f694be991101a">_readWord16</a> (ICUBCANPROTO_POL_MC_CMD__GET_P_GAIN, axis, s); <a class="code" href="sine_8m.html#a2a89187d8e8e8fba509ef9ab5f815d88">out</a>-&gt;kp = double(s);</div>
<div class="line"><a name="l04542"></a><span class="lineno"> 4542</span>&#160;    <a class="code" href="canControlUtils_8h.html#aed353ce9c28af351b98138a0a3cee032">DEBUG_FUNC</a>(<span class="stringliteral">&quot;Calling CAN_GET_D_GAIN\n&quot;</span>);</div>
<div class="line"><a name="l04543"></a><span class="lineno"> 4543</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a41a5714a6c78ee694b7f694be991101a">_readWord16</a> (ICUBCANPROTO_POL_MC_CMD__GET_D_GAIN, axis, s); <a class="code" href="sine_8m.html#a2a89187d8e8e8fba509ef9ab5f815d88">out</a>-&gt;kd = double(s);</div>
<div class="line"><a name="l04544"></a><span class="lineno"> 4544</span>&#160;    <a class="code" href="canControlUtils_8h.html#aed353ce9c28af351b98138a0a3cee032">DEBUG_FUNC</a>(<span class="stringliteral">&quot;Calling CAN_GET_I_GAIN\n&quot;</span>);</div>
<div class="line"><a name="l04545"></a><span class="lineno"> 4545</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a41a5714a6c78ee694b7f694be991101a">_readWord16</a> (ICUBCANPROTO_POL_MC_CMD__GET_I_GAIN, axis, s); <a class="code" href="sine_8m.html#a2a89187d8e8e8fba509ef9ab5f815d88">out</a>-&gt;ki = double(s);</div>
<div class="line"><a name="l04546"></a><span class="lineno"> 4546</span>&#160;    <a class="code" href="canControlUtils_8h.html#aed353ce9c28af351b98138a0a3cee032">DEBUG_FUNC</a>(<span class="stringliteral">&quot;Calling CAN_GET_ILIM_GAIN\n&quot;</span>);</div>
<div class="line"><a name="l04547"></a><span class="lineno"> 4547</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a41a5714a6c78ee694b7f694be991101a">_readWord16</a> (ICUBCANPROTO_POL_MC_CMD__GET_ILIM_GAIN, axis, s); <a class="code" href="sine_8m.html#a2a89187d8e8e8fba509ef9ab5f815d88">out</a>-&gt;max_int = double(s);</div>
<div class="line"><a name="l04548"></a><span class="lineno"> 4548</span>&#160;    <a class="code" href="canControlUtils_8h.html#aed353ce9c28af351b98138a0a3cee032">DEBUG_FUNC</a>(<span class="stringliteral">&quot;Calling CAN_GET_OFFSET\n&quot;</span>);</div>
<div class="line"><a name="l04549"></a><span class="lineno"> 4549</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a41a5714a6c78ee694b7f694be991101a">_readWord16</a> (ICUBCANPROTO_POL_MC_CMD__GET_OFFSET, axis, s); <a class="code" href="sine_8m.html#a2a89187d8e8e8fba509ef9ab5f815d88">out</a>-&gt;offset= double(s);</div>
<div class="line"><a name="l04550"></a><span class="lineno"> 4550</span>&#160;    <a class="code" href="canControlUtils_8h.html#aed353ce9c28af351b98138a0a3cee032">DEBUG_FUNC</a>(<span class="stringliteral">&quot;Calling CAN_GET_SCALE\n&quot;</span>);</div>
<div class="line"><a name="l04551"></a><span class="lineno"> 4551</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a41a5714a6c78ee694b7f694be991101a">_readWord16</a> (ICUBCANPROTO_POL_MC_CMD__GET_SCALE, axis, s); <a class="code" href="sine_8m.html#a2a89187d8e8e8fba509ef9ab5f815d88">out</a>-&gt;scale = double(s);</div>
<div class="line"><a name="l04552"></a><span class="lineno"> 4552</span>&#160;    <a class="code" href="canControlUtils_8h.html#aed353ce9c28af351b98138a0a3cee032">DEBUG_FUNC</a>(<span class="stringliteral">&quot;Calling CAN_GET_TLIM\n&quot;</span>);</div>
<div class="line"><a name="l04553"></a><span class="lineno"> 4553</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a41a5714a6c78ee694b7f694be991101a">_readWord16</a> (ICUBCANPROTO_POL_MC_CMD__GET_TLIM, axis, s); <a class="code" href="sine_8m.html#a2a89187d8e8e8fba509ef9ab5f815d88">out</a>-&gt;max_output = double(s);</div>
<div class="line"><a name="l04554"></a><span class="lineno"> 4554</span>&#160;    <a class="code" href="canControlUtils_8h.html#aed353ce9c28af351b98138a0a3cee032">DEBUG_FUNC</a>(<span class="stringliteral">&quot;Calling CAN_GET_POS_STICTION_PARAMS\n&quot;</span>);</div>
<div class="line"><a name="l04555"></a><span class="lineno"> 4555</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a1400c4368b36fa7383a8e66de10be345">_readWord16Ex</a> (ICUBCANPROTO_POL_MC_CMD__GET_POS_STICTION_PARAMS, axis, s, s2 ); <a class="code" href="sine_8m.html#a2a89187d8e8e8fba509ef9ab5f815d88">out</a>-&gt;stiction_up_val = double(s); <a class="code" href="sine_8m.html#a2a89187d8e8e8fba509ef9ab5f815d88">out</a>-&gt;stiction_down_val = double(s2);</div>
<div class="line"><a name="l04556"></a><span class="lineno"> 4556</span>&#160;    <a class="code" href="canControlUtils_8h.html#aed353ce9c28af351b98138a0a3cee032">DEBUG_FUNC</a>(<span class="stringliteral">&quot;Get PID done!\n&quot;</span>);</div>
<div class="line"><a name="l04557"></a><span class="lineno"> 4557</span>&#160;    </div>
<div class="line"><a name="l04558"></a><span class="lineno"> 4558</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04559"></a><span class="lineno"> 4559</span>&#160;}</div>
<div class="line"><a name="l04560"></a><span class="lineno"> 4560</span>&#160; </div>
<div class="line"><a name="l04561"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a2aa8ad25903bc5904b047b26da615ca4"> 4561</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a2aa8ad25903bc5904b047b26da615ca4">CanBusMotionControl::getPidRaw</a> (<span class="keyword">const</span> PidControlTypeEnum&amp; pidtype, <span class="keywordtype">int</span> axis, Pid *pid)</div>
<div class="line"><a name="l04562"></a><span class="lineno"> 4562</span>&#160;{</div>
<div class="line"><a name="l04563"></a><span class="lineno"> 4563</span>&#160;    <span class="comment">//    ACE_ASSERT (axis &gt;= 0 &amp;&amp; axis &lt;= (CAN_MAX_CARDS-1)*2);</span></div>
<div class="line"><a name="l04564"></a><span class="lineno"> 4564</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>-1)*2))</div>
<div class="line"><a name="l04565"></a><span class="lineno"> 4565</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04566"></a><span class="lineno"> 4566</span>&#160; </div>
<div class="line"><a name="l04567"></a><span class="lineno"> 4567</span>&#160;    <span class="keywordflow">switch</span> (pidtype)</div>
<div class="line"><a name="l04568"></a><span class="lineno"> 4568</span>&#160;    {</div>
<div class="line"><a name="l04569"></a><span class="lineno"> 4569</span>&#160;        <span class="keywordflow">case</span> VOCAB_PIDTYPE_POSITION:</div>
<div class="line"><a name="l04570"></a><span class="lineno"> 4570</span>&#160;            <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a74c983063011ad78f4dc08cc3a3f5a49">helper_getPosPidRaw</a>(axis,pid);</div>
<div class="line"><a name="l04571"></a><span class="lineno"> 4571</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04572"></a><span class="lineno"> 4572</span>&#160;        <span class="keywordflow">case</span> VOCAB_PIDTYPE_VELOCITY:</div>
<div class="line"><a name="l04573"></a><span class="lineno"> 4573</span>&#160;            <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a447c8a5d0560c821bc3d86f43fc23da4">helper_getVelPidRaw</a>(axis,pid);</div>
<div class="line"><a name="l04574"></a><span class="lineno"> 4574</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04575"></a><span class="lineno"> 4575</span>&#160;        <span class="keywordflow">case</span> VOCAB_PIDTYPE_CURRENT:</div>
<div class="line"><a name="l04576"></a><span class="lineno"> 4576</span>&#160;            <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#addea91884851d7b29d70049b11ca128f">helper_getCurPidRaw</a>(axis,pid);</div>
<div class="line"><a name="l04577"></a><span class="lineno"> 4577</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04578"></a><span class="lineno"> 4578</span>&#160;        <span class="keywordflow">case</span> VOCAB_PIDTYPE_TORQUE:</div>
<div class="line"><a name="l04579"></a><span class="lineno"> 4579</span>&#160;            <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a339d51a632c762c73c6336ab8a129804">helper_getTrqPidRaw</a>(axis,pid);</div>
<div class="line"><a name="l04580"></a><span class="lineno"> 4580</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04581"></a><span class="lineno"> 4581</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l04582"></a><span class="lineno"> 4582</span>&#160;            yError()&lt;&lt;<span class="stringliteral">&quot;Invalid pidtype:&quot;</span>&lt;&lt;pidtype;</div>
<div class="line"><a name="l04583"></a><span class="lineno"> 4583</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04584"></a><span class="lineno"> 4584</span>&#160;    }</div>
<div class="line"><a name="l04585"></a><span class="lineno"> 4585</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04586"></a><span class="lineno"> 4586</span>&#160;}</div>
<div class="line"><a name="l04587"></a><span class="lineno"> 4587</span>&#160; </div>
<div class="line"><a name="l04588"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#abe49eae6376553508886ff721da9b23f"> 4588</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#abe49eae6376553508886ff721da9b23f">CanBusMotionControl::getPidsRaw</a> (<span class="keyword">const</span> PidControlTypeEnum&amp; pidtype, Pid *pids)</div>
<div class="line"><a name="l04589"></a><span class="lineno"> 4589</span>&#160;{</div>
<div class="line"><a name="l04590"></a><span class="lineno"> 4590</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l04591"></a><span class="lineno"> 4591</span>&#160; </div>
<div class="line"><a name="l04592"></a><span class="lineno"> 4592</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l04593"></a><span class="lineno"> 4593</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>(); i++)</div>
<div class="line"><a name="l04594"></a><span class="lineno"> 4594</span>&#160;    {</div>
<div class="line"><a name="l04595"></a><span class="lineno"> 4595</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a2aa8ad25903bc5904b047b26da615ca4">getPidRaw</a>(pidtype,i,&amp;pids[i]);</div>
<div class="line"><a name="l04596"></a><span class="lineno"> 4596</span>&#160;    }</div>
<div class="line"><a name="l04597"></a><span class="lineno"> 4597</span>&#160; </div>
<div class="line"><a name="l04598"></a><span class="lineno"> 4598</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04599"></a><span class="lineno"> 4599</span>&#160;}</div>
<div class="line"><a name="l04600"></a><span class="lineno"> 4600</span>&#160; </div>
<div class="line"><a name="l04601"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a38c5618c9ad516e570bd362e4526d1e9"> 4601</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a38c5618c9ad516e570bd362e4526d1e9">CanBusMotionControl::helper_setTrqPidRaw</a>(<span class="keywordtype">int</span> axis, <span class="keyword">const</span> Pid &amp;pid)</div>
<div class="line"><a name="l04602"></a><span class="lineno"> 4602</span>&#160;{</div>
<div class="line"><a name="l04604"></a><span class="lineno"> 4604</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l04605"></a><span class="lineno"> 4605</span>&#160; </div>
<div class="line"><a name="l04606"></a><span class="lineno"> 4606</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>-1)*2))</div>
<div class="line"><a name="l04607"></a><span class="lineno"> 4607</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04608"></a><span class="lineno"> 4608</span>&#160; </div>
<div class="line"><a name="l04609"></a><span class="lineno"> 4609</span>&#160;    <a class="code" href="canControlUtils_8h.html#aed353ce9c28af351b98138a0a3cee032">DEBUG_FUNC</a>(<span class="stringliteral">&quot;setTorquePidRaw\n&quot;</span>);</div>
<div class="line"><a name="l04610"></a><span class="lineno"> 4610</span>&#160; </div>
<div class="line"><a name="l04611"></a><span class="lineno"> 4611</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a56978bb0d722116c2e86777743d17247">ENABLED</a>(axis))</div>
<div class="line"><a name="l04612"></a><span class="lineno"> 4612</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04613"></a><span class="lineno"> 4613</span>&#160; </div>
<div class="line"><a name="l04614"></a><span class="lineno"> 4614</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.lock();</div>
<div class="line"><a name="l04615"></a><span class="lineno"> 4615</span>&#160;        r.<a class="code" href="classCanBusResources.html#a426cb1e9b09f03d70b8dbccb2346edb8">startPacket</a>();</div>
<div class="line"><a name="l04616"></a><span class="lineno"> 4616</span>&#160;        r.<a class="code" href="classCanBusResources.html#a1049ab4df32ee910f61efbe130ba9b41">addMessage</a> (ICUBCANPROTO_POL_MC_CMD__SET_TORQUE_PID, axis);</div>
<div class="line"><a name="l04617"></a><span class="lineno"> 4617</span>&#160;        *((<span class="keywordtype">short</span> *)(r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()+1)) = <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af5c4f789e8b29d4a63d538b48fc9cd77">S_16</a>(pid.kp);</div>
<div class="line"><a name="l04618"></a><span class="lineno"> 4618</span>&#160;        *((<span class="keywordtype">short</span> *)(r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()+3)) = <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af5c4f789e8b29d4a63d538b48fc9cd77">S_16</a>(pid.ki);</div>
<div class="line"><a name="l04619"></a><span class="lineno"> 4619</span>&#160;        *((<span class="keywordtype">short</span> *)(r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()+5)) = <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af5c4f789e8b29d4a63d538b48fc9cd77">S_16</a>(pid.kd);</div>
<div class="line"><a name="l04620"></a><span class="lineno"> 4620</span>&#160;        *((<span class="keywordtype">short</span> *)(r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()+7)) = <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af5c4f789e8b29d4a63d538b48fc9cd77">S_16</a>(pid.scale);</div>
<div class="line"><a name="l04621"></a><span class="lineno"> 4621</span>&#160;        r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].setLen(8);</div>
<div class="line"><a name="l04622"></a><span class="lineno"> 4622</span>&#160;        r.<a class="code" href="classCanBusResources.html#a36f76a689330cd6163c3f13bb8ac28d9">writePacket</a>();</div>
<div class="line"><a name="l04623"></a><span class="lineno"> 4623</span>&#160;        r.<a class="code" href="classCanBusResources.html#a426cb1e9b09f03d70b8dbccb2346edb8">startPacket</a>();</div>
<div class="line"><a name="l04624"></a><span class="lineno"> 4624</span>&#160;        r.<a class="code" href="classCanBusResources.html#a1049ab4df32ee910f61efbe130ba9b41">addMessage</a> (ICUBCANPROTO_POL_MC_CMD__SET_TORQUE_PIDLIMITS, axis);</div>
<div class="line"><a name="l04625"></a><span class="lineno"> 4625</span>&#160;        *((<span class="keywordtype">short</span> *)(r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()+1)) = <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af5c4f789e8b29d4a63d538b48fc9cd77">S_16</a>(pid.offset);</div>
<div class="line"><a name="l04626"></a><span class="lineno"> 4626</span>&#160;        *((<span class="keywordtype">short</span> *)(r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()+3)) = <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af5c4f789e8b29d4a63d538b48fc9cd77">S_16</a>(pid.max_output);</div>
<div class="line"><a name="l04627"></a><span class="lineno"> 4627</span>&#160;        *((<span class="keywordtype">short</span> *)(r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()+5)) = <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af5c4f789e8b29d4a63d538b48fc9cd77">S_16</a>(pid.max_int);</div>
<div class="line"><a name="l04628"></a><span class="lineno"> 4628</span>&#160;        *((<span class="keywordtype">short</span> *)(r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()+7)) = <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af5c4f789e8b29d4a63d538b48fc9cd77">S_16</a>(0);</div>
<div class="line"><a name="l04629"></a><span class="lineno"> 4629</span>&#160;        r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].setLen(8);</div>
<div class="line"><a name="l04630"></a><span class="lineno"> 4630</span>&#160;        r.<a class="code" href="classCanBusResources.html#a36f76a689330cd6163c3f13bb8ac28d9">writePacket</a>();</div>
<div class="line"><a name="l04631"></a><span class="lineno"> 4631</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.unlock();</div>
<div class="line"><a name="l04632"></a><span class="lineno"> 4632</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a38334546ab8ca06858c1cbc5cdcc08ba">_writeWord16Ex</a> (ICUBCANPROTO_POL_MC_CMD__SET_TORQUE_STICTION_PARAMS, axis, <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af5c4f789e8b29d4a63d538b48fc9cd77">S_16</a>(pid.stiction_up_val), <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af5c4f789e8b29d4a63d538b48fc9cd77">S_16</a>(pid.stiction_down_val), <span class="keyword">false</span>);</div>
<div class="line"><a name="l04633"></a><span class="lineno"> 4633</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.lock();</div>
<div class="line"><a name="l04634"></a><span class="lineno"> 4634</span>&#160;        r.<a class="code" href="classCanBusResources.html#a426cb1e9b09f03d70b8dbccb2346edb8">startPacket</a>();</div>
<div class="line"><a name="l04635"></a><span class="lineno"> 4635</span>&#160;        r.<a class="code" href="classCanBusResources.html#a1049ab4df32ee910f61efbe130ba9b41">addMessage</a> (ICUBCANPROTO_POL_MC_CMD__SET_MODEL_PARAMS, axis);</div>
<div class="line"><a name="l04636"></a><span class="lineno"> 4636</span>&#160;        *((<span class="keywordtype">short</span> *)(r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()+1)) = <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af5c4f789e8b29d4a63d538b48fc9cd77">S_16</a>(pid.kff);</div>
<div class="line"><a name="l04637"></a><span class="lineno"> 4637</span>&#160;        *((<span class="keywordtype">short</span> *)(r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()+3)) = <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af5c4f789e8b29d4a63d538b48fc9cd77">S_16</a>(0);</div>
<div class="line"><a name="l04638"></a><span class="lineno"> 4638</span>&#160;        *((<span class="keywordtype">short</span> *)(r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()+5)) = <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af5c4f789e8b29d4a63d538b48fc9cd77">S_16</a>(0);</div>
<div class="line"><a name="l04639"></a><span class="lineno"> 4639</span>&#160;        *((<span class="keywordtype">short</span> *)(r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()+7)) = <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af5c4f789e8b29d4a63d538b48fc9cd77">S_16</a>(0);</div>
<div class="line"><a name="l04640"></a><span class="lineno"> 4640</span>&#160;        r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].setLen(8);</div>
<div class="line"><a name="l04641"></a><span class="lineno"> 4641</span>&#160;        r.<a class="code" href="classCanBusResources.html#a36f76a689330cd6163c3f13bb8ac28d9">writePacket</a>();</div>
<div class="line"><a name="l04642"></a><span class="lineno"> 4642</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.unlock();</div>
<div class="line"><a name="l04643"></a><span class="lineno"> 4643</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04644"></a><span class="lineno"> 4644</span>&#160;}</div>
<div class="line"><a name="l04645"></a><span class="lineno"> 4645</span>&#160; </div>
<div class="line"><a name="l04646"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a339d51a632c762c73c6336ab8a129804"> 4646</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a339d51a632c762c73c6336ab8a129804">CanBusMotionControl::helper_getTrqPidRaw</a> (<span class="keywordtype">int</span> axis, Pid *<a class="code" href="sine_8m.html#a2a89187d8e8e8fba509ef9ab5f815d88">out</a>)</div>
<div class="line"><a name="l04647"></a><span class="lineno"> 4647</span>&#160;{</div>
<div class="line"><a name="l04648"></a><span class="lineno"> 4648</span>&#160;    <a class="code" href="canControlUtils_8h.html#aed353ce9c28af351b98138a0a3cee032">DEBUG_FUNC</a>(<span class="stringliteral">&quot;Calling CAN_GET_TORQUE_PID \n&quot;</span>);</div>
<div class="line"><a name="l04649"></a><span class="lineno"> 4649</span>&#160; </div>
<div class="line"><a name="l04650"></a><span class="lineno"> 4650</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l04651"></a><span class="lineno"> 4651</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>-1)*2))</div>
<div class="line"><a name="l04652"></a><span class="lineno"> 4652</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04653"></a><span class="lineno"> 4653</span>&#160; </div>
<div class="line"><a name="l04654"></a><span class="lineno"> 4654</span>&#160; </div>
<div class="line"><a name="l04655"></a><span class="lineno"> 4655</span>&#160; </div>
<div class="line"><a name="l04656"></a><span class="lineno"> 4656</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a56978bb0d722116c2e86777743d17247">ENABLED</a>(axis))</div>
<div class="line"><a name="l04657"></a><span class="lineno"> 4657</span>&#160;    {</div>
<div class="line"><a name="l04658"></a><span class="lineno"> 4658</span>&#160;        <span class="comment">//@@@ TODO: check here</span></div>
<div class="line"><a name="l04659"></a><span class="lineno"> 4659</span>&#160;        <span class="comment">// value = 0;</span></div>
<div class="line"><a name="l04660"></a><span class="lineno"> 4660</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04661"></a><span class="lineno"> 4661</span>&#160;    }</div>
<div class="line"><a name="l04662"></a><span class="lineno"> 4662</span>&#160; </div>
<div class="line"><a name="l04663"></a><span class="lineno"> 4663</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.lock();</div>
<div class="line"><a name="l04664"></a><span class="lineno"> 4664</span>&#160;    <span class="keywordtype">int</span> id;</div>
<div class="line"><a name="l04665"></a><span class="lineno"> 4665</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a0de6c591abb8d8340378037eccf81951">threadPool</a>-&gt;<a class="code" href="classThreadPool2.html#af3e4ac95d374da92f359286d20bcba65">getId</a>(<span class="keywordtype">id</span>))</div>
<div class="line"><a name="l04666"></a><span class="lineno"> 4666</span>&#160;    {</div>
<div class="line"><a name="l04667"></a><span class="lineno"> 4667</span>&#160;        yError(<span class="stringliteral">&quot;More than %d threads, cannot allow more\n&quot;</span>, <a class="code" href="canControlConstants_8h.html#a3830b8707366b97dd5c993756d89f02d">CANCONTROL_MAX_THREADS</a>);</div>
<div class="line"><a name="l04668"></a><span class="lineno"> 4668</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.unlock();</div>
<div class="line"><a name="l04669"></a><span class="lineno"> 4669</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04670"></a><span class="lineno"> 4670</span>&#160;    }</div>
<div class="line"><a name="l04671"></a><span class="lineno"> 4671</span>&#160; </div>
<div class="line"><a name="l04672"></a><span class="lineno"> 4672</span>&#160;    r.<a class="code" href="classCanBusResources.html#a426cb1e9b09f03d70b8dbccb2346edb8">startPacket</a>();</div>
<div class="line"><a name="l04673"></a><span class="lineno"> 4673</span>&#160;    r.<a class="code" href="classCanBusResources.html#a1049ab4df32ee910f61efbe130ba9b41">addMessage</a> (<span class="keywordtype">id</span>, axis, ICUBCANPROTO_POL_MC_CMD__GET_TORQUE_PID);</div>
<div class="line"><a name="l04674"></a><span class="lineno"> 4674</span>&#160;    r.<a class="code" href="classCanBusResources.html#a36f76a689330cd6163c3f13bb8ac28d9">writePacket</a>();</div>
<div class="line"><a name="l04675"></a><span class="lineno"> 4675</span>&#160; </div>
<div class="line"><a name="l04676"></a><span class="lineno"> 4676</span>&#160;    <a class="code" href="classThreadTable2.html">ThreadTable2</a> *t=<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a0de6c591abb8d8340378037eccf81951">threadPool</a>-&gt;<a class="code" href="classThreadPool2.html#abed580daad75544f3455f08beaa06cf4">getThreadTable</a>(<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l04677"></a><span class="lineno"> 4677</span>&#160;    t-&gt;<a class="code" href="classThreadTable2.html#adba368aea4ee8d37742e332ed2f4f26e">setPending</a>(r.<a class="code" href="classCanBusResources.html#a781a7267d7eab2315d49720c1d673f29">_writeMessages</a>);</div>
<div class="line"><a name="l04678"></a><span class="lineno"> 4678</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.unlock();</div>
<div class="line"><a name="l04679"></a><span class="lineno"> 4679</span>&#160;    t-&gt;<a class="code" href="classThreadTable2.html#a47cdedbcf45603cf2a45f1758472fbc7">synch</a>();</div>
<div class="line"><a name="l04680"></a><span class="lineno"> 4680</span>&#160; </div>
<div class="line"><a name="l04681"></a><span class="lineno"> 4681</span>&#160;    <span class="keywordflow">if</span> (!r.<a class="code" href="classCanBusResources.html#a1642d0476521a6b0c8f538cef04e2a59">getErrorStatus</a>() || (t-&gt;<a class="code" href="classThreadTable2.html#af31e5328380be26902f2c1853ce2cb29">timedOut</a>()))</div>
<div class="line"><a name="l04682"></a><span class="lineno"> 4682</span>&#160;    {</div>
<div class="line"><a name="l04683"></a><span class="lineno"> 4683</span>&#160;        yError(<span class="stringliteral">&quot;getTorquePid: message timed out\n&quot;</span>);</div>
<div class="line"><a name="l04684"></a><span class="lineno"> 4684</span>&#160;        <span class="comment">//@@@ TODO: check here</span></div>
<div class="line"><a name="l04685"></a><span class="lineno"> 4685</span>&#160;        <span class="comment">// value=0;</span></div>
<div class="line"><a name="l04686"></a><span class="lineno"> 4686</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04687"></a><span class="lineno"> 4687</span>&#160;    }</div>
<div class="line"><a name="l04688"></a><span class="lineno"> 4688</span>&#160; </div>
<div class="line"><a name="l04689"></a><span class="lineno"> 4689</span>&#160;    CanMessage *m=t-&gt;<a class="code" href="classThreadTable2.html#afbbc874a92650328926f44d8638dc618">get</a>(0);</div>
<div class="line"><a name="l04690"></a><span class="lineno"> 4690</span>&#160;    <span class="keywordflow">if</span> (m==0)</div>
<div class="line"><a name="l04691"></a><span class="lineno"> 4691</span>&#160;    {</div>
<div class="line"><a name="l04692"></a><span class="lineno"> 4692</span>&#160;        <span class="comment">//@@@ TODO: check here</span></div>
<div class="line"><a name="l04693"></a><span class="lineno"> 4693</span>&#160;        <span class="comment">// value=0;</span></div>
<div class="line"><a name="l04694"></a><span class="lineno"> 4694</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04695"></a><span class="lineno"> 4695</span>&#160;    }</div>
<div class="line"><a name="l04696"></a><span class="lineno"> 4696</span>&#160; </div>
<div class="line"><a name="l04697"></a><span class="lineno"> 4697</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>;</div>
<div class="line"><a name="l04698"></a><span class="lineno"> 4698</span>&#160;    <a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>=m-&gt;getData()+1;</div>
<div class="line"><a name="l04699"></a><span class="lineno"> 4699</span>&#160;    <a class="code" href="sine_8m.html#a2a89187d8e8e8fba509ef9ab5f815d88">out</a>-&gt;kp= *((<span class="keywordtype">short</span> *)(<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>));</div>
<div class="line"><a name="l04700"></a><span class="lineno"> 4700</span>&#160;    <a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>+=2;</div>
<div class="line"><a name="l04701"></a><span class="lineno"> 4701</span>&#160;    <a class="code" href="sine_8m.html#a2a89187d8e8e8fba509ef9ab5f815d88">out</a>-&gt;ki= *((<span class="keywordtype">short</span> *)(<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>));</div>
<div class="line"><a name="l04702"></a><span class="lineno"> 4702</span>&#160;    <a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>+=2;</div>
<div class="line"><a name="l04703"></a><span class="lineno"> 4703</span>&#160;    <a class="code" href="sine_8m.html#a2a89187d8e8e8fba509ef9ab5f815d88">out</a>-&gt;kd= *((<span class="keywordtype">short</span> *)(<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>));</div>
<div class="line"><a name="l04704"></a><span class="lineno"> 4704</span>&#160;    <a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>+=2;</div>
<div class="line"><a name="l04705"></a><span class="lineno"> 4705</span>&#160;    <a class="code" href="sine_8m.html#a2a89187d8e8e8fba509ef9ab5f815d88">out</a>-&gt;scale= *((<span class="keywordtype">char</span> *)(<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>));</div>
<div class="line"><a name="l04706"></a><span class="lineno"> 4706</span>&#160; </div>
<div class="line"><a name="l04707"></a><span class="lineno"> 4707</span>&#160;    t-&gt;<a class="code" href="classThreadTable2.html#a2129ef023b358d00c5b30de7176f2b3e">clear</a>();</div>
<div class="line"><a name="l04708"></a><span class="lineno"> 4708</span>&#160; </div>
<div class="line"><a name="l04709"></a><span class="lineno"> 4709</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.lock();</div>
<div class="line"><a name="l04710"></a><span class="lineno"> 4710</span>&#160;    </div>
<div class="line"><a name="l04711"></a><span class="lineno"> 4711</span>&#160;    <a class="code" href="canControlUtils_8h.html#aed353ce9c28af351b98138a0a3cee032">DEBUG_FUNC</a>(<span class="stringliteral">&quot;Calling CAN_GET_TORQUE_PIDLIMITS\n&quot;</span>);</div>
<div class="line"><a name="l04712"></a><span class="lineno"> 4712</span>&#160;   </div>
<div class="line"><a name="l04713"></a><span class="lineno"> 4713</span>&#160;    r.<a class="code" href="classCanBusResources.html#a426cb1e9b09f03d70b8dbccb2346edb8">startPacket</a>();</div>
<div class="line"><a name="l04714"></a><span class="lineno"> 4714</span>&#160;    r.<a class="code" href="classCanBusResources.html#a1049ab4df32ee910f61efbe130ba9b41">addMessage</a> (<span class="keywordtype">id</span>, axis, ICUBCANPROTO_POL_MC_CMD__GET_TORQUE_PIDLIMITS);</div>
<div class="line"><a name="l04715"></a><span class="lineno"> 4715</span>&#160;    r.<a class="code" href="classCanBusResources.html#a36f76a689330cd6163c3f13bb8ac28d9">writePacket</a>();</div>
<div class="line"><a name="l04716"></a><span class="lineno"> 4716</span>&#160; </div>
<div class="line"><a name="l04717"></a><span class="lineno"> 4717</span>&#160;    <span class="comment">// ThreadTable2 *t=threadPool-&gt;getThreadTable(id);</span></div>
<div class="line"><a name="l04718"></a><span class="lineno"> 4718</span>&#160;    t-&gt;<a class="code" href="classThreadTable2.html#adba368aea4ee8d37742e332ed2f4f26e">setPending</a>(r.<a class="code" href="classCanBusResources.html#a781a7267d7eab2315d49720c1d673f29">_writeMessages</a>);</div>
<div class="line"><a name="l04719"></a><span class="lineno"> 4719</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.unlock();</div>
<div class="line"><a name="l04720"></a><span class="lineno"> 4720</span>&#160;    t-&gt;<a class="code" href="classThreadTable2.html#a47cdedbcf45603cf2a45f1758472fbc7">synch</a>();</div>
<div class="line"><a name="l04721"></a><span class="lineno"> 4721</span>&#160; </div>
<div class="line"><a name="l04722"></a><span class="lineno"> 4722</span>&#160;    <span class="keywordflow">if</span> (!r.<a class="code" href="classCanBusResources.html#a1642d0476521a6b0c8f538cef04e2a59">getErrorStatus</a>() || (t-&gt;<a class="code" href="classThreadTable2.html#af31e5328380be26902f2c1853ce2cb29">timedOut</a>()))</div>
<div class="line"><a name="l04723"></a><span class="lineno"> 4723</span>&#160;    {</div>
<div class="line"><a name="l04724"></a><span class="lineno"> 4724</span>&#160;        yError(<span class="stringliteral">&quot;getTorquePidLimits: message timed out\n&quot;</span>);</div>
<div class="line"><a name="l04725"></a><span class="lineno"> 4725</span>&#160;        <span class="comment">//@@@ TODO: check here</span></div>
<div class="line"><a name="l04726"></a><span class="lineno"> 4726</span>&#160;        <span class="comment">// value=0;</span></div>
<div class="line"><a name="l04727"></a><span class="lineno"> 4727</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04728"></a><span class="lineno"> 4728</span>&#160;    }</div>
<div class="line"><a name="l04729"></a><span class="lineno"> 4729</span>&#160; </div>
<div class="line"><a name="l04730"></a><span class="lineno"> 4730</span>&#160;    m=t-&gt;<a class="code" href="classThreadTable2.html#afbbc874a92650328926f44d8638dc618">get</a>(0);</div>
<div class="line"><a name="l04731"></a><span class="lineno"> 4731</span>&#160;    <span class="keywordflow">if</span> (m==0)</div>
<div class="line"><a name="l04732"></a><span class="lineno"> 4732</span>&#160;    {</div>
<div class="line"><a name="l04733"></a><span class="lineno"> 4733</span>&#160;        <span class="comment">//@@@ TODO: check here</span></div>
<div class="line"><a name="l04734"></a><span class="lineno"> 4734</span>&#160;        <span class="comment">// value=0;</span></div>
<div class="line"><a name="l04735"></a><span class="lineno"> 4735</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04736"></a><span class="lineno"> 4736</span>&#160;    }</div>
<div class="line"><a name="l04737"></a><span class="lineno"> 4737</span>&#160; </div>
<div class="line"><a name="l04738"></a><span class="lineno"> 4738</span>&#160;    <a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>=m-&gt;getData()+1;</div>
<div class="line"><a name="l04739"></a><span class="lineno"> 4739</span>&#160;    <a class="code" href="sine_8m.html#a2a89187d8e8e8fba509ef9ab5f815d88">out</a>-&gt;offset= *((<span class="keywordtype">short</span> *)(<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>));</div>
<div class="line"><a name="l04740"></a><span class="lineno"> 4740</span>&#160;    <a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>+=2;</div>
<div class="line"><a name="l04741"></a><span class="lineno"> 4741</span>&#160;    <a class="code" href="sine_8m.html#a2a89187d8e8e8fba509ef9ab5f815d88">out</a>-&gt;max_output= *((<span class="keywordtype">short</span> *)(<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>));</div>
<div class="line"><a name="l04742"></a><span class="lineno"> 4742</span>&#160;    <a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>+=2;</div>
<div class="line"><a name="l04743"></a><span class="lineno"> 4743</span>&#160;    <a class="code" href="sine_8m.html#a2a89187d8e8e8fba509ef9ab5f815d88">out</a>-&gt;max_int= *((<span class="keywordtype">short</span> *)(<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>));</div>
<div class="line"><a name="l04744"></a><span class="lineno"> 4744</span>&#160; </div>
<div class="line"><a name="l04745"></a><span class="lineno"> 4745</span>&#160;    t-&gt;<a class="code" href="classThreadTable2.html#a2129ef023b358d00c5b30de7176f2b3e">clear</a>();</div>
<div class="line"><a name="l04746"></a><span class="lineno"> 4746</span>&#160; </div>
<div class="line"><a name="l04747"></a><span class="lineno"> 4747</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.lock();</div>
<div class="line"><a name="l04748"></a><span class="lineno"> 4748</span>&#160;    </div>
<div class="line"><a name="l04749"></a><span class="lineno"> 4749</span>&#160;    <a class="code" href="canControlUtils_8h.html#aed353ce9c28af351b98138a0a3cee032">DEBUG_FUNC</a>(<span class="stringliteral">&quot;Calling CAN_GET_MODEL_PARAMS\n&quot;</span>);</div>
<div class="line"><a name="l04750"></a><span class="lineno"> 4750</span>&#160;   </div>
<div class="line"><a name="l04751"></a><span class="lineno"> 4751</span>&#160;    r.<a class="code" href="classCanBusResources.html#a426cb1e9b09f03d70b8dbccb2346edb8">startPacket</a>();</div>
<div class="line"><a name="l04752"></a><span class="lineno"> 4752</span>&#160;    r.<a class="code" href="classCanBusResources.html#a1049ab4df32ee910f61efbe130ba9b41">addMessage</a> (<span class="keywordtype">id</span>, axis, ICUBCANPROTO_POL_MC_CMD__GET_MODEL_PARAMS);</div>
<div class="line"><a name="l04753"></a><span class="lineno"> 4753</span>&#160;    r.<a class="code" href="classCanBusResources.html#a36f76a689330cd6163c3f13bb8ac28d9">writePacket</a>();</div>
<div class="line"><a name="l04754"></a><span class="lineno"> 4754</span>&#160; </div>
<div class="line"><a name="l04755"></a><span class="lineno"> 4755</span>&#160;    <span class="comment">// ThreadTable2 *t=threadPool-&gt;getThreadTable(id);</span></div>
<div class="line"><a name="l04756"></a><span class="lineno"> 4756</span>&#160;    t-&gt;<a class="code" href="classThreadTable2.html#adba368aea4ee8d37742e332ed2f4f26e">setPending</a>(r.<a class="code" href="classCanBusResources.html#a781a7267d7eab2315d49720c1d673f29">_writeMessages</a>);</div>
<div class="line"><a name="l04757"></a><span class="lineno"> 4757</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.unlock();</div>
<div class="line"><a name="l04758"></a><span class="lineno"> 4758</span>&#160;    t-&gt;<a class="code" href="classThreadTable2.html#a47cdedbcf45603cf2a45f1758472fbc7">synch</a>();</div>
<div class="line"><a name="l04759"></a><span class="lineno"> 4759</span>&#160; </div>
<div class="line"><a name="l04760"></a><span class="lineno"> 4760</span>&#160;    <span class="keywordflow">if</span> (!r.<a class="code" href="classCanBusResources.html#a1642d0476521a6b0c8f538cef04e2a59">getErrorStatus</a>() || (t-&gt;<a class="code" href="classThreadTable2.html#af31e5328380be26902f2c1853ce2cb29">timedOut</a>()))</div>
<div class="line"><a name="l04761"></a><span class="lineno"> 4761</span>&#160;    {</div>
<div class="line"><a name="l04762"></a><span class="lineno"> 4762</span>&#160;        yError(<span class="stringliteral">&quot;CAN_GET_MODEL_PARAMS: message timed out\n&quot;</span>);</div>
<div class="line"><a name="l04763"></a><span class="lineno"> 4763</span>&#160;        <span class="comment">//@@@ TODO: check here</span></div>
<div class="line"><a name="l04764"></a><span class="lineno"> 4764</span>&#160;        <span class="comment">// value=0;</span></div>
<div class="line"><a name="l04765"></a><span class="lineno"> 4765</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04766"></a><span class="lineno"> 4766</span>&#160;    }</div>
<div class="line"><a name="l04767"></a><span class="lineno"> 4767</span>&#160; </div>
<div class="line"><a name="l04768"></a><span class="lineno"> 4768</span>&#160;    m=t-&gt;<a class="code" href="classThreadTable2.html#afbbc874a92650328926f44d8638dc618">get</a>(0);</div>
<div class="line"><a name="l04769"></a><span class="lineno"> 4769</span>&#160;    <span class="keywordflow">if</span> (m==0)</div>
<div class="line"><a name="l04770"></a><span class="lineno"> 4770</span>&#160;    {</div>
<div class="line"><a name="l04771"></a><span class="lineno"> 4771</span>&#160;        <span class="comment">//@@@ TODO: check here</span></div>
<div class="line"><a name="l04772"></a><span class="lineno"> 4772</span>&#160;        <span class="comment">// value=0;</span></div>
<div class="line"><a name="l04773"></a><span class="lineno"> 4773</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04774"></a><span class="lineno"> 4774</span>&#160;    }</div>
<div class="line"><a name="l04775"></a><span class="lineno"> 4775</span>&#160; </div>
<div class="line"><a name="l04776"></a><span class="lineno"> 4776</span>&#160;    <a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>=m-&gt;getData()+1;</div>
<div class="line"><a name="l04777"></a><span class="lineno"> 4777</span>&#160;    <a class="code" href="sine_8m.html#a2a89187d8e8e8fba509ef9ab5f815d88">out</a>-&gt;kff= *((<span class="keywordtype">short</span> *)(<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>));</div>
<div class="line"><a name="l04778"></a><span class="lineno"> 4778</span>&#160; </div>
<div class="line"><a name="l04779"></a><span class="lineno"> 4779</span>&#160;    t-&gt;<a class="code" href="classThreadTable2.html#a2129ef023b358d00c5b30de7176f2b3e">clear</a>();</div>
<div class="line"><a name="l04780"></a><span class="lineno"> 4780</span>&#160; </div>
<div class="line"><a name="l04781"></a><span class="lineno"> 4781</span>&#160;    <a class="code" href="canControlUtils_8h.html#aed353ce9c28af351b98138a0a3cee032">DEBUG_FUNC</a>(<span class="stringliteral">&quot;Calling CAN_GET_TORQUE_STICTION_PARAMS\n&quot;</span>);</div>
<div class="line"><a name="l04782"></a><span class="lineno"> 4782</span>&#160;    <span class="keywordtype">short</span> s1;</div>
<div class="line"><a name="l04783"></a><span class="lineno"> 4783</span>&#160;    <span class="keywordtype">short</span> s2;</div>
<div class="line"><a name="l04784"></a><span class="lineno"> 4784</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a1400c4368b36fa7383a8e66de10be345">_readWord16Ex</a> (ICUBCANPROTO_POL_MC_CMD__GET_TORQUE_STICTION_PARAMS, axis, s1, s2 );</div>
<div class="line"><a name="l04785"></a><span class="lineno"> 4785</span>&#160;    <a class="code" href="sine_8m.html#a2a89187d8e8e8fba509ef9ab5f815d88">out</a>-&gt;stiction_up_val = double(s1); </div>
<div class="line"><a name="l04786"></a><span class="lineno"> 4786</span>&#160;    <a class="code" href="sine_8m.html#a2a89187d8e8e8fba509ef9ab5f815d88">out</a>-&gt;stiction_down_val = double(s2);</div>
<div class="line"><a name="l04787"></a><span class="lineno"> 4787</span>&#160; </div>
<div class="line"><a name="l04788"></a><span class="lineno"> 4788</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04789"></a><span class="lineno"> 4789</span>&#160;}</div>
<div class="line"><a name="l04790"></a><span class="lineno"> 4790</span>&#160; </div>
<div class="line"><a name="l04791"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af7c58d6043fc6a82e3a8b3e80c92a194"> 4791</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af7c58d6043fc6a82e3a8b3e80c92a194">CanBusMotionControl::setPidsRaw</a>(<span class="keyword">const</span> PidControlTypeEnum&amp; pidtype, <span class="keyword">const</span> Pid *pids)</div>
<div class="line"><a name="l04792"></a><span class="lineno"> 4792</span>&#160;{</div>
<div class="line"><a name="l04793"></a><span class="lineno"> 4793</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l04794"></a><span class="lineno"> 4794</span>&#160;    <span class="keywordflow">if</span> (pids==0) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04795"></a><span class="lineno"> 4795</span>&#160; </div>
<div class="line"><a name="l04796"></a><span class="lineno"> 4796</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l04797"></a><span class="lineno"> 4797</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>(); i++)</div>
<div class="line"><a name="l04798"></a><span class="lineno"> 4798</span>&#160;    {</div>
<div class="line"><a name="l04799"></a><span class="lineno"> 4799</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a9f68e24ec7c34b3c12a7a534929ca6a9">setPidRaw</a>(pidtype, i, pids[i]);</div>
<div class="line"><a name="l04800"></a><span class="lineno"> 4800</span>&#160;    }</div>
<div class="line"><a name="l04801"></a><span class="lineno"> 4801</span>&#160; </div>
<div class="line"><a name="l04802"></a><span class="lineno"> 4802</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04803"></a><span class="lineno"> 4803</span>&#160;}</div>
<div class="line"><a name="l04804"></a><span class="lineno"> 4804</span>&#160; </div>
<div class="line"><a name="l04806"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a1e84ac9733f8795e5d1cb820280c7c97"> 4806</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a1e84ac9733f8795e5d1cb820280c7c97">CanBusMotionControl::setPidReferenceRaw</a> (<span class="keyword">const</span> PidControlTypeEnum&amp; pidtype, <span class="keywordtype">int</span> j, <span class="keywordtype">double</span> ref)</div>
<div class="line"><a name="l04807"></a><span class="lineno"> 4807</span>&#160;{</div>
<div class="line"><a name="l04808"></a><span class="lineno"> 4808</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="CanBusMotionControl_8cpp.html#a35a12201dd9ff39ea640f1d8b39f0770">NOT_YET_IMPLEMENTED</a>(<span class="stringliteral">&quot;setPidReferenceRaw&quot;</span>);</div>
<div class="line"><a name="l04809"></a><span class="lineno"> 4809</span>&#160;}</div>
<div class="line"><a name="l04810"></a><span class="lineno"> 4810</span>&#160; </div>
<div class="line"><a name="l04812"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a9ee2be499ae0dfd75b1e6ecb6bc313c0"> 4812</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a9ee2be499ae0dfd75b1e6ecb6bc313c0">CanBusMotionControl::setPidReferencesRaw</a> (<span class="keyword">const</span> PidControlTypeEnum&amp; pidtype, <span class="keyword">const</span> <span class="keywordtype">double</span> *refs)</div>
<div class="line"><a name="l04813"></a><span class="lineno"> 4813</span>&#160;{</div>
<div class="line"><a name="l04814"></a><span class="lineno"> 4814</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l04815"></a><span class="lineno"> 4815</span>&#160;    <span class="keywordflow">if</span> (refs==0) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04816"></a><span class="lineno"> 4816</span>&#160; </div>
<div class="line"><a name="l04817"></a><span class="lineno"> 4817</span>&#160;    <span class="keywordtype">int</span> i=0;</div>
<div class="line"><a name="l04818"></a><span class="lineno"> 4818</span>&#160;    <span class="keywordtype">bool</span> ret = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04819"></a><span class="lineno"> 4819</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>(); i++)</div>
<div class="line"><a name="l04820"></a><span class="lineno"> 4820</span>&#160;    {</div>
<div class="line"><a name="l04821"></a><span class="lineno"> 4821</span>&#160;        ret = ret &amp; <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a1e84ac9733f8795e5d1cb820280c7c97">setPidReferenceRaw</a>(pidtype,i,refs[i]);</div>
<div class="line"><a name="l04822"></a><span class="lineno"> 4822</span>&#160;    }</div>
<div class="line"><a name="l04823"></a><span class="lineno"> 4823</span>&#160; </div>
<div class="line"><a name="l04824"></a><span class="lineno"> 4824</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l04825"></a><span class="lineno"> 4825</span>&#160;}</div>
<div class="line"><a name="l04826"></a><span class="lineno"> 4826</span>&#160; </div>
<div class="line"><a name="l04828"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ac77b8c41b69bd9fc8b357c8af8f16fda"> 4828</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ac77b8c41b69bd9fc8b357c8af8f16fda">CanBusMotionControl::setRefTorqueRaw</a> (<span class="keywordtype">int</span> j, <span class="keywordtype">double</span> ref_trq)</div>
<div class="line"><a name="l04829"></a><span class="lineno"> 4829</span>&#160;{</div>
<div class="line"><a name="l04830"></a><span class="lineno"> 4830</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> axis = j;</div>
<div class="line"><a name="l04831"></a><span class="lineno"> 4831</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>-1)*2))</div>
<div class="line"><a name="l04832"></a><span class="lineno"> 4832</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04833"></a><span class="lineno"> 4833</span>&#160; </div>
<div class="line"><a name="l04834"></a><span class="lineno"> 4834</span>&#160;    <span class="comment">//I&#39;m sending a DWORD but the value MUST be clamped to S_16. Do not change.</span></div>
<div class="line"><a name="l04835"></a><span class="lineno"> 4835</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a3c5883fff29d225096173b0209107362">_writeDWord</a> (ICUBCANPROTO_POL_MC_CMD__SET_DESIRED_TORQUE, axis, <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af5c4f789e8b29d4a63d538b48fc9cd77">S_16</a>(ref_trq));</div>
<div class="line"><a name="l04836"></a><span class="lineno"> 4836</span>&#160;}</div>
<div class="line"><a name="l04837"></a><span class="lineno"> 4837</span>&#160; </div>
<div class="line"><a name="l04838"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aef295030a9681fa91e4291853114f9b6"> 4838</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a34fc7603311c0487a086c1e30de773a6">CanBusMotionControl::setRefTorquesRaw</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> n_joint, <span class="keyword">const</span> <span class="keywordtype">int</span> *joints, <span class="keyword">const</span> <span class="keywordtype">double</span> *t)</div>
<div class="line"><a name="l04839"></a><span class="lineno"> 4839</span>&#160;{</div>
<div class="line"><a name="l04840"></a><span class="lineno"> 4840</span>&#160;    <span class="keywordtype">bool</span> ret = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04841"></a><span class="lineno"> 4841</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0; j&lt; n_joint; j++)</div>
<div class="line"><a name="l04842"></a><span class="lineno"> 4842</span>&#160;    {</div>
<div class="line"><a name="l04843"></a><span class="lineno"> 4843</span>&#160;        ret &amp;= <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ac77b8c41b69bd9fc8b357c8af8f16fda">setRefTorqueRaw</a>(joints[j], t[j]);</div>
<div class="line"><a name="l04844"></a><span class="lineno"> 4844</span>&#160;    }</div>
<div class="line"><a name="l04845"></a><span class="lineno"> 4845</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l04846"></a><span class="lineno"> 4846</span>&#160;}</div>
<div class="line"><a name="l04847"></a><span class="lineno"> 4847</span>&#160; </div>
<div class="line"><a name="l04849"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ae7548afd722f10263a27471e2f797289"> 4849</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ae7548afd722f10263a27471e2f797289">CanBusMotionControl::getTorqueRaw</a> (<span class="keywordtype">int</span> j, <span class="keywordtype">double</span> *trq)</div>
<div class="line"><a name="l04850"></a><span class="lineno"> 4850</span>&#160;{</div>
<div class="line"><a name="l04851"></a><span class="lineno"> 4851</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l04852"></a><span class="lineno"> 4852</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> axis = j;</div>
<div class="line"><a name="l04853"></a><span class="lineno"> 4853</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>-1)*2))</div>
<div class="line"><a name="l04854"></a><span class="lineno"> 4854</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04855"></a><span class="lineno"> 4855</span>&#160; </div>
<div class="line"><a name="l04856"></a><span class="lineno"> 4856</span>&#160;    <span class="keywordtype">int</span> k=castToMapper(yarp::dev::ImplementTorqueControl::helper)-&gt;toUser(j);</div>
<div class="line"><a name="l04857"></a><span class="lineno"> 4857</span>&#160;    std::lock_guard&lt;std::recursive_mutex&gt; lck(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>);</div>
<div class="line"><a name="l04858"></a><span class="lineno"> 4858</span>&#160;    *trq = double(r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[k].<a class="code" href="classBCastBufferElement.html#af468ae55809a2d6b8ffe2d9e657606cd">_torque</a>);</div>
<div class="line"><a name="l04859"></a><span class="lineno"> 4859</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04860"></a><span class="lineno"> 4860</span>&#160;}</div>
<div class="line"><a name="l04861"></a><span class="lineno"> 4861</span>&#160; </div>
<div class="line"><a name="l04863"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a34fc7603311c0487a086c1e30de773a6"> 4863</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a34fc7603311c0487a086c1e30de773a6">CanBusMotionControl::setRefTorquesRaw</a> (<span class="keyword">const</span> <span class="keywordtype">double</span> *ref_trqs)</div>
<div class="line"><a name="l04864"></a><span class="lineno"> 4864</span>&#160;{</div>
<div class="line"><a name="l04865"></a><span class="lineno"> 4865</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l04866"></a><span class="lineno"> 4866</span>&#160; </div>
<div class="line"><a name="l04867"></a><span class="lineno"> 4867</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l04868"></a><span class="lineno"> 4868</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>(); i++)</div>
<div class="line"><a name="l04869"></a><span class="lineno"> 4869</span>&#160;    {</div>
<div class="line"><a name="l04870"></a><span class="lineno"> 4870</span>&#160;        <span class="comment">//I&#39;m sending a DWORD but the value MUST be clamped to S_16. Do not change.</span></div>
<div class="line"><a name="l04871"></a><span class="lineno"> 4871</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a3c5883fff29d225096173b0209107362">_writeDWord</a> (ICUBCANPROTO_POL_MC_CMD__SET_DESIRED_TORQUE, i, <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af5c4f789e8b29d4a63d538b48fc9cd77">S_16</a>(ref_trqs[i])) != <span class="keyword">true</span>)</div>
<div class="line"><a name="l04872"></a><span class="lineno"> 4872</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04873"></a><span class="lineno"> 4873</span>&#160;    }</div>
<div class="line"><a name="l04874"></a><span class="lineno"> 4874</span>&#160; </div>
<div class="line"><a name="l04875"></a><span class="lineno"> 4875</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04876"></a><span class="lineno"> 4876</span>&#160;}</div>
<div class="line"><a name="l04877"></a><span class="lineno"> 4877</span>&#160; </div>
<div class="line"><a name="l04879"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af06842e3a7356d29441d0f00f773d1be"> 4879</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af06842e3a7356d29441d0f00f773d1be">CanBusMotionControl::getTorquesRaw</a> (<span class="keywordtype">double</span> *trqs)</div>
<div class="line"><a name="l04880"></a><span class="lineno"> 4880</span>&#160;{</div>
<div class="line"><a name="l04881"></a><span class="lineno"> 4881</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l04882"></a><span class="lineno"> 4882</span>&#160;    <span class="keywordtype">bool</span> ret = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04883"></a><span class="lineno"> 4883</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>() &amp;&amp; ret; j++)</div>
<div class="line"><a name="l04884"></a><span class="lineno"> 4884</span>&#160;    {</div>
<div class="line"><a name="l04885"></a><span class="lineno"> 4885</span>&#160;        ret &amp;= <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ae7548afd722f10263a27471e2f797289">getTorqueRaw</a>(j, &amp;trqs[j]);</div>
<div class="line"><a name="l04886"></a><span class="lineno"> 4886</span>&#160;    }</div>
<div class="line"><a name="l04887"></a><span class="lineno"> 4887</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l04888"></a><span class="lineno"> 4888</span>&#160;}</div>
<div class="line"><a name="l04889"></a><span class="lineno"> 4889</span>&#160; </div>
<div class="line"><a name="l04890"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a9d158cd029d79928dc35fa3a6a71c594"> 4890</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a9d158cd029d79928dc35fa3a6a71c594">CanBusMotionControl::getTorqueRangeRaw</a> (<span class="keywordtype">int</span> j, <span class="keywordtype">double</span> *<a class="code" href="namespacestrain_1_1dsp_1_1fsc.html#a746ce6f9a14034939607ccead53e3fd6">min</a>, <span class="keywordtype">double</span> *<a class="code" href="namespacestrain_1_1dsp_1_1fsc.html#a65804363dbaa9346e53442cb1bb9d73f">max</a>)</div>
<div class="line"><a name="l04891"></a><span class="lineno"> 4891</span>&#160;{</div>
<div class="line"><a name="l04892"></a><span class="lineno"> 4892</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l04893"></a><span class="lineno"> 4893</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> axis = j;</div>
<div class="line"><a name="l04894"></a><span class="lineno"> 4894</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>-1)*2))</div>
<div class="line"><a name="l04895"></a><span class="lineno"> 4895</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04896"></a><span class="lineno"> 4896</span>&#160; </div>
<div class="line"><a name="l04897"></a><span class="lineno"> 4897</span>&#160;    std::lock_guard&lt;std::recursive_mutex&gt; lck(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>);</div>
<div class="line"><a name="l04898"></a><span class="lineno"> 4898</span>&#160;    <span class="comment">// *** This method is implementented reading data without sending/receiving data from the Canbus ***</span></div>
<div class="line"><a name="l04899"></a><span class="lineno"> 4899</span>&#160;    *<a class="code" href="namespacestrain_1_1dsp_1_1fsc.html#a746ce6f9a14034939607ccead53e3fd6">min</a>=0; <span class="comment">//set output to zero (default value)</span></div>
<div class="line"><a name="l04900"></a><span class="lineno"> 4900</span>&#160;    *<a class="code" href="namespacestrain_1_1dsp_1_1fsc.html#a65804363dbaa9346e53442cb1bb9d73f">max</a>=0; <span class="comment">//set output to zero (default value)</span></div>
<div class="line"><a name="l04901"></a><span class="lineno"> 4901</span>&#160;    <span class="keywordtype">int</span> k=castToMapper(yarp::dev::ImplementTorqueControl::helper)-&gt;toUser(j);</div>
<div class="line"><a name="l04902"></a><span class="lineno"> 4902</span>&#160; </div>
<div class="line"><a name="l04903"></a><span class="lineno"> 4903</span>&#160;    std::list&lt;TBR_AnalogSensor *&gt;::iterator it=analogSensors.begin();</div>
<div class="line"><a name="l04904"></a><span class="lineno"> 4904</span>&#160;    <span class="keywordflow">while</span>(it!=analogSensors.end())</div>
<div class="line"><a name="l04905"></a><span class="lineno"> 4905</span>&#160;    {</div>
<div class="line"><a name="l04906"></a><span class="lineno"> 4906</span>&#160;        <span class="keywordflow">if</span> (*it)</div>
<div class="line"><a name="l04907"></a><span class="lineno"> 4907</span>&#160;        {</div>
<div class="line"><a name="l04908"></a><span class="lineno"> 4908</span>&#160;            <span class="keywordtype">int</span> <span class="keywordtype">id</span> = (*it)-&gt;getId();</div>
<div class="line"><a name="l04909"></a><span class="lineno"> 4909</span>&#160;            <span class="keywordtype">int</span> cfgId   = <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a45a4d8f2668d10afc8b28314f9c8551a">_axisTorqueHelper</a>-&gt;<a class="code" href="classaxisTorqueHelper.html#ae678c98b7446156b16016bbef1a9eccb">getTorqueSensorId</a>(k);</div>
<div class="line"><a name="l04910"></a><span class="lineno"> 4910</span>&#160;            <span class="keywordflow">if</span> (cfgId == 0) </div>
<div class="line"><a name="l04911"></a><span class="lineno"> 4911</span>&#160;            {</div>
<div class="line"><a name="l04912"></a><span class="lineno"> 4912</span>&#160;                *<a class="code" href="namespacestrain_1_1dsp_1_1fsc.html#a746ce6f9a14034939607ccead53e3fd6">min</a>=0;</div>
<div class="line"><a name="l04913"></a><span class="lineno"> 4913</span>&#160;                *<a class="code" href="namespacestrain_1_1dsp_1_1fsc.html#a65804363dbaa9346e53442cb1bb9d73f">max</a>=0;</div>
<div class="line"><a name="l04914"></a><span class="lineno"> 4914</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04915"></a><span class="lineno"> 4915</span>&#160;            }</div>
<div class="line"><a name="l04916"></a><span class="lineno"> 4916</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cfgId==<span class="keywordtype">id</span>)</div>
<div class="line"><a name="l04917"></a><span class="lineno"> 4917</span>&#160;            {</div>
<div class="line"><a name="l04918"></a><span class="lineno"> 4918</span>&#160;                *<a class="code" href="namespacestrain_1_1dsp_1_1fsc.html#a746ce6f9a14034939607ccead53e3fd6">min</a>=-<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a45a4d8f2668d10afc8b28314f9c8551a">_axisTorqueHelper</a>-&gt;<a class="code" href="classaxisTorqueHelper.html#a7d1d66be5efc1ae5c7d3953311afd626">getMaximumTorque</a>(k);</div>
<div class="line"><a name="l04919"></a><span class="lineno"> 4919</span>&#160;                *<a class="code" href="namespacestrain_1_1dsp_1_1fsc.html#a65804363dbaa9346e53442cb1bb9d73f">max</a>=+<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a45a4d8f2668d10afc8b28314f9c8551a">_axisTorqueHelper</a>-&gt;<a class="code" href="classaxisTorqueHelper.html#a7d1d66be5efc1ae5c7d3953311afd626">getMaximumTorque</a>(k);</div>
<div class="line"><a name="l04920"></a><span class="lineno"> 4920</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04921"></a><span class="lineno"> 4921</span>&#160;            }</div>
<div class="line"><a name="l04922"></a><span class="lineno"> 4922</span>&#160;        }</div>
<div class="line"><a name="l04923"></a><span class="lineno"> 4923</span>&#160;        it++;</div>
<div class="line"><a name="l04924"></a><span class="lineno"> 4924</span>&#160;    }</div>
<div class="line"><a name="l04925"></a><span class="lineno"> 4925</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04926"></a><span class="lineno"> 4926</span>&#160;}</div>
<div class="line"><a name="l04927"></a><span class="lineno"> 4927</span>&#160; </div>
<div class="line"><a name="l04928"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a31db37a26531bfecdfb362a9ba247da0"> 4928</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a31db37a26531bfecdfb362a9ba247da0">CanBusMotionControl::getTorqueRangesRaw</a> (<span class="keywordtype">double</span> *<a class="code" href="namespacestrain_1_1dsp_1_1fsc.html#a746ce6f9a14034939607ccead53e3fd6">min</a>, <span class="keywordtype">double</span> *<a class="code" href="namespacestrain_1_1dsp_1_1fsc.html#a65804363dbaa9346e53442cb1bb9d73f">max</a>)</div>
<div class="line"><a name="l04929"></a><span class="lineno"> 4929</span>&#160;{</div>
<div class="line"><a name="l04930"></a><span class="lineno"> 4930</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="CanBusMotionControl_8cpp.html#a35a12201dd9ff39ea640f1d8b39f0770">NOT_YET_IMPLEMENTED</a>(<span class="stringliteral">&quot;getTorqueRangesRaw&quot;</span>);</div>
<div class="line"><a name="l04931"></a><span class="lineno"> 4931</span>&#160;}</div>
<div class="line"><a name="l04932"></a><span class="lineno"> 4932</span>&#160; </div>
<div class="line"><a name="l04933"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ad85fd01bf9bf0f346d222435d038d893"> 4933</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ad85fd01bf9bf0f346d222435d038d893">CanBusMotionControl::getPidErrorRaw</a>(<span class="keyword">const</span> PidControlTypeEnum&amp; pidtype, <span class="keywordtype">int</span> axis, <span class="keywordtype">double</span> *err)</div>
<div class="line"><a name="l04934"></a><span class="lineno"> 4934</span>&#160;{</div>
<div class="line"><a name="l04935"></a><span class="lineno"> 4935</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l04936"></a><span class="lineno"> 4936</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>()))</div>
<div class="line"><a name="l04937"></a><span class="lineno"> 4937</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04938"></a><span class="lineno"> 4938</span>&#160; </div>
<div class="line"><a name="l04939"></a><span class="lineno"> 4939</span>&#160;    std::lock_guard&lt;std::recursive_mutex&gt; lck(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>);</div>
<div class="line"><a name="l04940"></a><span class="lineno"> 4940</span>&#160;    <span class="keywordflow">switch</span> (pidtype)</div>
<div class="line"><a name="l04941"></a><span class="lineno"> 4941</span>&#160;    {</div>
<div class="line"><a name="l04942"></a><span class="lineno"> 4942</span>&#160;        <span class="keywordflow">case</span> VOCAB_PIDTYPE_POSITION:</div>
<div class="line"><a name="l04943"></a><span class="lineno"> 4943</span>&#160;        *err = double(r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[axis].<a class="code" href="classBCastBufferElement.html#af8335d1d20eaf06c3ec15c6424894b4c">_position_error</a>);</div>
<div class="line"><a name="l04944"></a><span class="lineno"> 4944</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04945"></a><span class="lineno"> 4945</span>&#160;        <span class="keywordflow">case</span> VOCAB_PIDTYPE_TORQUE:</div>
<div class="line"><a name="l04946"></a><span class="lineno"> 4946</span>&#160;        *err = double(r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[axis].<a class="code" href="classBCastBufferElement.html#a88ce6518b4ce93049d015c9994b21bc1">_torque_error</a>);</div>
<div class="line"><a name="l04947"></a><span class="lineno"> 4947</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04948"></a><span class="lineno"> 4948</span>&#160;        <span class="keywordflow">case</span> VOCAB_PIDTYPE_VELOCITY:</div>
<div class="line"><a name="l04949"></a><span class="lineno"> 4949</span>&#160;        *err = 0; <span class="comment">//not yet implemented</span></div>
<div class="line"><a name="l04950"></a><span class="lineno"> 4950</span>&#160;        <a class="code" href="CanBusMotionControl_8cpp.html#a35a12201dd9ff39ea640f1d8b39f0770">NOT_YET_IMPLEMENTED</a>(<span class="stringliteral">&quot;getPidErrorRaw VOCAB_PIDTYPE_VELOCITY&quot;</span>);</div>
<div class="line"><a name="l04951"></a><span class="lineno"> 4951</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04952"></a><span class="lineno"> 4952</span>&#160;        <span class="keywordflow">case</span> VOCAB_PIDTYPE_CURRENT:</div>
<div class="line"><a name="l04953"></a><span class="lineno"> 4953</span>&#160;        *err = 0; <span class="comment">//not yet implemented</span></div>
<div class="line"><a name="l04954"></a><span class="lineno"> 4954</span>&#160;        <a class="code" href="CanBusMotionControl_8cpp.html#a35a12201dd9ff39ea640f1d8b39f0770">NOT_YET_IMPLEMENTED</a>(<span class="stringliteral">&quot;getPidErrorRaw VOCAB_PIDTYPE_CURRENT&quot;</span>);</div>
<div class="line"><a name="l04955"></a><span class="lineno"> 4955</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04956"></a><span class="lineno"> 4956</span>&#160;    }</div>
<div class="line"><a name="l04957"></a><span class="lineno"> 4957</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04958"></a><span class="lineno"> 4958</span>&#160;}</div>
<div class="line"><a name="l04959"></a><span class="lineno"> 4959</span>&#160; </div>
<div class="line"><a name="l04960"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a79706f32809c64c6cbccd6bc90bb927b"> 4960</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a79706f32809c64c6cbccd6bc90bb927b">CanBusMotionControl::getTargetPositionRaw</a>(<span class="keywordtype">int</span> axis, <span class="keywordtype">double</span> *ref)</div>
<div class="line"><a name="l04961"></a><span class="lineno"> 4961</span>&#160;{</div>
<div class="line"><a name="l04962"></a><span class="lineno"> 4962</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l04963"></a><span class="lineno"> 4963</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>()))</div>
<div class="line"><a name="l04964"></a><span class="lineno"> 4964</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04965"></a><span class="lineno"> 4965</span>&#160;    std::lock_guard&lt;std::recursive_mutex&gt; lck(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>);</div>
<div class="line"><a name="l04966"></a><span class="lineno"> 4966</span>&#160;    *(ref) = this-&gt;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a703140d587d4c5eb582e35005df73057">_ref_command_positions</a>[axis];</div>
<div class="line"><a name="l04967"></a><span class="lineno"> 4967</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04968"></a><span class="lineno"> 4968</span>&#160;}</div>
<div class="line"><a name="l04969"></a><span class="lineno"> 4969</span>&#160; </div>
<div class="line"><a name="l04970"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ac07fc3ea7235575023fa2f818a31ce79"> 4970</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ac07fc3ea7235575023fa2f818a31ce79">CanBusMotionControl::getTargetPositionsRaw</a>(<span class="keywordtype">double</span> *ref)</div>
<div class="line"><a name="l04971"></a><span class="lineno"> 4971</span>&#160;{</div>
<div class="line"><a name="l04972"></a><span class="lineno"> 4972</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l04973"></a><span class="lineno"> 4973</span>&#160;    <span class="keywordtype">bool</span> ret = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04974"></a><span class="lineno"> 4974</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>() &amp;&amp; ret; j++)</div>
<div class="line"><a name="l04975"></a><span class="lineno"> 4975</span>&#160;    {</div>
<div class="line"><a name="l04976"></a><span class="lineno"> 4976</span>&#160;        ret &amp;= <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a79706f32809c64c6cbccd6bc90bb927b">getTargetPositionRaw</a>(j, &amp;ref[j]);</div>
<div class="line"><a name="l04977"></a><span class="lineno"> 4977</span>&#160;    }</div>
<div class="line"><a name="l04978"></a><span class="lineno"> 4978</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l04979"></a><span class="lineno"> 4979</span>&#160;}</div>
<div class="line"><a name="l04980"></a><span class="lineno"> 4980</span>&#160; </div>
<div class="line"><a name="l04981"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a9281b3a57f042209d3abcefacb67e9ae"> 4981</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ac07fc3ea7235575023fa2f818a31ce79">CanBusMotionControl::getTargetPositionsRaw</a>(<span class="keywordtype">int</span> nj, <span class="keyword">const</span> <span class="keywordtype">int</span> * <a class="code" href="icub-main_2src_2tools_2simpleClient_2main_8cpp.html#aac40ef34e7573177f3e908c5195594a6">jnts</a>, <span class="keywordtype">double</span> *refs)</div>
<div class="line"><a name="l04982"></a><span class="lineno"> 4982</span>&#160;{</div>
<div class="line"><a name="l04983"></a><span class="lineno"> 4983</span>&#160;    <span class="keywordtype">bool</span> ret = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04984"></a><span class="lineno"> 4984</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; nj &amp;&amp; ret; j++)</div>
<div class="line"><a name="l04985"></a><span class="lineno"> 4985</span>&#160;    {</div>
<div class="line"><a name="l04986"></a><span class="lineno"> 4986</span>&#160;        ret &amp;= <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a79706f32809c64c6cbccd6bc90bb927b">getTargetPositionRaw</a>(<a class="code" href="icub-main_2src_2tools_2simpleClient_2main_8cpp.html#aac40ef34e7573177f3e908c5195594a6">jnts</a>[j], &amp;refs[j]);</div>
<div class="line"><a name="l04987"></a><span class="lineno"> 4987</span>&#160;    }</div>
<div class="line"><a name="l04988"></a><span class="lineno"> 4988</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l04989"></a><span class="lineno"> 4989</span>&#160;}</div>
<div class="line"><a name="l04990"></a><span class="lineno"> 4990</span>&#160; </div>
<div class="line"><a name="l04991"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a2dee256b3714b4999a2174f966adec4b"> 4991</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a2dee256b3714b4999a2174f966adec4b">CanBusMotionControl::getRefVelocityRaw</a>(<span class="keywordtype">int</span> axis, <span class="keywordtype">double</span> *ref)</div>
<div class="line"><a name="l04992"></a><span class="lineno"> 4992</span>&#160;{</div>
<div class="line"><a name="l04993"></a><span class="lineno"> 4993</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l04994"></a><span class="lineno"> 4994</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>()))</div>
<div class="line"><a name="l04995"></a><span class="lineno"> 4995</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04996"></a><span class="lineno"> 4996</span>&#160;    std::lock_guard&lt;std::recursive_mutex&gt; lck(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>);</div>
<div class="line"><a name="l04997"></a><span class="lineno"> 4997</span>&#160;    *(ref) = this-&gt;<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#acb562cd6f8c00ca3e0bbb1f716093131">_ref_command_speeds</a>[axis];</div>
<div class="line"><a name="l04998"></a><span class="lineno"> 4998</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04999"></a><span class="lineno"> 4999</span>&#160;}</div>
<div class="line"><a name="l05000"></a><span class="lineno"> 5000</span>&#160; </div>
<div class="line"><a name="l05001"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a0d09a2eed60640ebea43058e6f539100"> 5001</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a0d09a2eed60640ebea43058e6f539100">CanBusMotionControl::getRefVelocitiesRaw</a>(<span class="keywordtype">double</span> *ref)</div>
<div class="line"><a name="l05002"></a><span class="lineno"> 5002</span>&#160;{</div>
<div class="line"><a name="l05003"></a><span class="lineno"> 5003</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l05004"></a><span class="lineno"> 5004</span>&#160;    <span class="keywordtype">bool</span> ret = <span class="keyword">true</span>;</div>
<div class="line"><a name="l05005"></a><span class="lineno"> 5005</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>() &amp;&amp; ret; j++)</div>
<div class="line"><a name="l05006"></a><span class="lineno"> 5006</span>&#160;    {</div>
<div class="line"><a name="l05007"></a><span class="lineno"> 5007</span>&#160;        ret &amp;= <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a2dee256b3714b4999a2174f966adec4b">getRefVelocityRaw</a>(j, &amp;ref[j]);</div>
<div class="line"><a name="l05008"></a><span class="lineno"> 5008</span>&#160;    }</div>
<div class="line"><a name="l05009"></a><span class="lineno"> 5009</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l05010"></a><span class="lineno"> 5010</span>&#160;}</div>
<div class="line"><a name="l05011"></a><span class="lineno"> 5011</span>&#160; </div>
<div class="line"><a name="l05012"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a78c4f99eabf7c02a85832617137d3026"> 5012</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a0d09a2eed60640ebea43058e6f539100">CanBusMotionControl::getRefVelocitiesRaw</a>(<span class="keywordtype">int</span> nj, <span class="keyword">const</span> <span class="keywordtype">int</span> * <a class="code" href="icub-main_2src_2tools_2simpleClient_2main_8cpp.html#aac40ef34e7573177f3e908c5195594a6">jnts</a>, <span class="keywordtype">double</span> *refs)</div>
<div class="line"><a name="l05013"></a><span class="lineno"> 5013</span>&#160;{</div>
<div class="line"><a name="l05014"></a><span class="lineno"> 5014</span>&#160;    <span class="keywordtype">bool</span> ret = <span class="keyword">true</span>;</div>
<div class="line"><a name="l05015"></a><span class="lineno"> 5015</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; nj &amp;&amp; ret; j++)</div>
<div class="line"><a name="l05016"></a><span class="lineno"> 5016</span>&#160;    {</div>
<div class="line"><a name="l05017"></a><span class="lineno"> 5017</span>&#160;        ret &amp;= <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a2dee256b3714b4999a2174f966adec4b">getRefVelocityRaw</a>(<a class="code" href="icub-main_2src_2tools_2simpleClient_2main_8cpp.html#aac40ef34e7573177f3e908c5195594a6">jnts</a>[j], &amp;refs[j]);</div>
<div class="line"><a name="l05018"></a><span class="lineno"> 5018</span>&#160;    }</div>
<div class="line"><a name="l05019"></a><span class="lineno"> 5019</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l05020"></a><span class="lineno"> 5020</span>&#160;}</div>
<div class="line"><a name="l05021"></a><span class="lineno"> 5021</span>&#160; </div>
<div class="line"><a name="l05022"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ad9759a858596ced17882d868059cee1f"> 5022</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ad9759a858596ced17882d868059cee1f">CanBusMotionControl::getRefPositionRaw</a>(<span class="keywordtype">int</span> axis, <span class="keywordtype">double</span> *ref)</div>
<div class="line"><a name="l05023"></a><span class="lineno"> 5023</span>&#160;{</div>
<div class="line"><a name="l05024"></a><span class="lineno"> 5024</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l05025"></a><span class="lineno"> 5025</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>()))</div>
<div class="line"><a name="l05026"></a><span class="lineno"> 5026</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05027"></a><span class="lineno"> 5027</span>&#160;    *ref = <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#abc6148aa0f69586ad3ddbfea4fcd9771">_ref_positions</a>[axis];</div>
<div class="line"><a name="l05028"></a><span class="lineno"> 5028</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05029"></a><span class="lineno"> 5029</span>&#160;}</div>
<div class="line"><a name="l05030"></a><span class="lineno"> 5030</span>&#160; </div>
<div class="line"><a name="l05031"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a5650c30673f98427eade9f0822d99138"> 5031</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a5650c30673f98427eade9f0822d99138">CanBusMotionControl::getRefPositionsRaw</a>(<span class="keywordtype">double</span> *ref)</div>
<div class="line"><a name="l05032"></a><span class="lineno"> 5032</span>&#160;{</div>
<div class="line"><a name="l05033"></a><span class="lineno"> 5033</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l05034"></a><span class="lineno"> 5034</span>&#160;    <span class="keywordtype">bool</span> ret = <span class="keyword">true</span>;</div>
<div class="line"><a name="l05035"></a><span class="lineno"> 5035</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>() &amp;&amp; ret; j++)</div>
<div class="line"><a name="l05036"></a><span class="lineno"> 5036</span>&#160;    {</div>
<div class="line"><a name="l05037"></a><span class="lineno"> 5037</span>&#160;        ret &amp;= <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ad9759a858596ced17882d868059cee1f">getRefPositionRaw</a>(j, &amp;ref[j]);</div>
<div class="line"><a name="l05038"></a><span class="lineno"> 5038</span>&#160;    }</div>
<div class="line"><a name="l05039"></a><span class="lineno"> 5039</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l05040"></a><span class="lineno"> 5040</span>&#160;}</div>
<div class="line"><a name="l05041"></a><span class="lineno"> 5041</span>&#160; </div>
<div class="line"><a name="l05042"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a5f83f2c18ffe96e3c46ea4b9e8f6d09f"> 5042</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a5650c30673f98427eade9f0822d99138">CanBusMotionControl::getRefPositionsRaw</a>(<span class="keywordtype">int</span> nj, <span class="keyword">const</span> <span class="keywordtype">int</span> * <a class="code" href="icub-main_2src_2tools_2simpleClient_2main_8cpp.html#aac40ef34e7573177f3e908c5195594a6">jnts</a>, <span class="keywordtype">double</span> *refs)</div>
<div class="line"><a name="l05043"></a><span class="lineno"> 5043</span>&#160;{</div>
<div class="line"><a name="l05044"></a><span class="lineno"> 5044</span>&#160;    <span class="keywordtype">bool</span> ret = <span class="keyword">true</span>;</div>
<div class="line"><a name="l05045"></a><span class="lineno"> 5045</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; nj &amp;&amp; ret; j++)</div>
<div class="line"><a name="l05046"></a><span class="lineno"> 5046</span>&#160;    {</div>
<div class="line"><a name="l05047"></a><span class="lineno"> 5047</span>&#160;        ret &amp;= <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ad9759a858596ced17882d868059cee1f">getRefPositionRaw</a>(<a class="code" href="icub-main_2src_2tools_2simpleClient_2main_8cpp.html#aac40ef34e7573177f3e908c5195594a6">jnts</a>[j], &amp;refs[j]);</div>
<div class="line"><a name="l05048"></a><span class="lineno"> 5048</span>&#160;    }</div>
<div class="line"><a name="l05049"></a><span class="lineno"> 5049</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l05050"></a><span class="lineno"> 5050</span>&#160;}</div>
<div class="line"><a name="l05051"></a><span class="lineno"> 5051</span>&#160; </div>
<div class="line"><a name="l05052"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a702233c10d2353eb3cad82ce32bcaced"> 5052</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a702233c10d2353eb3cad82ce32bcaced">CanBusMotionControl::getPidErrorsRaw</a>(<span class="keyword">const</span> PidControlTypeEnum&amp; pidtype, <span class="keywordtype">double</span> *errs)</div>
<div class="line"><a name="l05053"></a><span class="lineno"> 5053</span>&#160;{</div>
<div class="line"><a name="l05054"></a><span class="lineno"> 5054</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l05055"></a><span class="lineno"> 5055</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>(); i++)</div>
<div class="line"><a name="l05056"></a><span class="lineno"> 5056</span>&#160;    {</div>
<div class="line"><a name="l05057"></a><span class="lineno"> 5057</span>&#160;        errs[i] = <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ad85fd01bf9bf0f346d222435d038d893">getPidErrorRaw</a>(pidtype, i, &amp;errs[i]);</div>
<div class="line"><a name="l05058"></a><span class="lineno"> 5058</span>&#160;    }</div>
<div class="line"><a name="l05059"></a><span class="lineno"> 5059</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05060"></a><span class="lineno"> 5060</span>&#160;}</div>
<div class="line"><a name="l05061"></a><span class="lineno"> 5061</span>&#160; </div>
<div class="line"><a name="l05062"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ace239ebe508b3562b18091abf552833a"> 5062</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ace239ebe508b3562b18091abf552833a">CanBusMotionControl::getParameterRaw</a>(<span class="keywordtype">int</span> axis, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> type, <span class="keywordtype">double</span>* value)</div>
<div class="line"><a name="l05063"></a><span class="lineno"> 5063</span>&#160;{</div>
<div class="line"><a name="l05064"></a><span class="lineno"> 5064</span>&#160;    <span class="comment">//    ACE_ASSERT (axis &gt;= 0 &amp;&amp; axis &lt;= (CAN_MAX_CARDS-1)*2);</span></div>
<div class="line"><a name="l05065"></a><span class="lineno"> 5065</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>-1)*2))</div>
<div class="line"><a name="l05066"></a><span class="lineno"> 5066</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05067"></a><span class="lineno"> 5067</span>&#160; </div>
<div class="line"><a name="l05068"></a><span class="lineno"> 5068</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a56978bb0d722116c2e86777743d17247">ENABLED</a>(axis))</div>
<div class="line"><a name="l05069"></a><span class="lineno"> 5069</span>&#160;    {</div>
<div class="line"><a name="l05070"></a><span class="lineno"> 5070</span>&#160;        <span class="comment">//@@@ TODO: check here</span></div>
<div class="line"><a name="l05071"></a><span class="lineno"> 5071</span>&#160;        <span class="comment">// value = 0;</span></div>
<div class="line"><a name="l05072"></a><span class="lineno"> 5072</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05073"></a><span class="lineno"> 5073</span>&#160;    }</div>
<div class="line"><a name="l05074"></a><span class="lineno"> 5074</span>&#160; </div>
<div class="line"><a name="l05075"></a><span class="lineno"> 5075</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l05076"></a><span class="lineno"> 5076</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.lock();</div>
<div class="line"><a name="l05077"></a><span class="lineno"> 5077</span>&#160;    <span class="keywordtype">int</span> id;</div>
<div class="line"><a name="l05078"></a><span class="lineno"> 5078</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a0de6c591abb8d8340378037eccf81951">threadPool</a>-&gt;<a class="code" href="classThreadPool2.html#af3e4ac95d374da92f359286d20bcba65">getId</a>(<span class="keywordtype">id</span>))</div>
<div class="line"><a name="l05079"></a><span class="lineno"> 5079</span>&#160;    {</div>
<div class="line"><a name="l05080"></a><span class="lineno"> 5080</span>&#160;        yError(<span class="stringliteral">&quot;More than %d threads, cannot allow more\n&quot;</span>, <a class="code" href="canControlConstants_8h.html#a3830b8707366b97dd5c993756d89f02d">CANCONTROL_MAX_THREADS</a>);</div>
<div class="line"><a name="l05081"></a><span class="lineno"> 5081</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.unlock();</div>
<div class="line"><a name="l05082"></a><span class="lineno"> 5082</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05083"></a><span class="lineno"> 5083</span>&#160;    }</div>
<div class="line"><a name="l05084"></a><span class="lineno"> 5084</span>&#160; </div>
<div class="line"><a name="l05085"></a><span class="lineno"> 5085</span>&#160;    r.<a class="code" href="classCanBusResources.html#a426cb1e9b09f03d70b8dbccb2346edb8">startPacket</a>();</div>
<div class="line"><a name="l05086"></a><span class="lineno"> 5086</span>&#160;    r.<a class="code" href="classCanBusResources.html#a1049ab4df32ee910f61efbe130ba9b41">addMessage</a> (<span class="keywordtype">id</span>, axis, type);</div>
<div class="line"><a name="l05087"></a><span class="lineno"> 5087</span>&#160;    r.<a class="code" href="classCanBusResources.html#a36f76a689330cd6163c3f13bb8ac28d9">writePacket</a>();</div>
<div class="line"><a name="l05088"></a><span class="lineno"> 5088</span>&#160; </div>
<div class="line"><a name="l05089"></a><span class="lineno"> 5089</span>&#160;    <a class="code" href="classThreadTable2.html">ThreadTable2</a> *t=<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a0de6c591abb8d8340378037eccf81951">threadPool</a>-&gt;<a class="code" href="classThreadPool2.html#abed580daad75544f3455f08beaa06cf4">getThreadTable</a>(<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l05090"></a><span class="lineno"> 5090</span>&#160;    t-&gt;<a class="code" href="classThreadTable2.html#adba368aea4ee8d37742e332ed2f4f26e">setPending</a>(r.<a class="code" href="classCanBusResources.html#a781a7267d7eab2315d49720c1d673f29">_writeMessages</a>);</div>
<div class="line"><a name="l05091"></a><span class="lineno"> 5091</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.unlock();</div>
<div class="line"><a name="l05092"></a><span class="lineno"> 5092</span>&#160;    t-&gt;<a class="code" href="classThreadTable2.html#a47cdedbcf45603cf2a45f1758472fbc7">synch</a>();</div>
<div class="line"><a name="l05093"></a><span class="lineno"> 5093</span>&#160; </div>
<div class="line"><a name="l05094"></a><span class="lineno"> 5094</span>&#160;    <span class="keywordflow">if</span> (!r.<a class="code" href="classCanBusResources.html#a1642d0476521a6b0c8f538cef04e2a59">getErrorStatus</a>() || (t-&gt;<a class="code" href="classThreadTable2.html#af31e5328380be26902f2c1853ce2cb29">timedOut</a>()))</div>
<div class="line"><a name="l05095"></a><span class="lineno"> 5095</span>&#160;    {</div>
<div class="line"><a name="l05096"></a><span class="lineno"> 5096</span>&#160;        yError(<span class="stringliteral">&quot;getParameterRaw: message timed out\n&quot;</span>);</div>
<div class="line"><a name="l05097"></a><span class="lineno"> 5097</span>&#160;        <span class="comment">//@@@ TODO: check here</span></div>
<div class="line"><a name="l05098"></a><span class="lineno"> 5098</span>&#160;        <span class="comment">// value=0;</span></div>
<div class="line"><a name="l05099"></a><span class="lineno"> 5099</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05100"></a><span class="lineno"> 5100</span>&#160;    }</div>
<div class="line"><a name="l05101"></a><span class="lineno"> 5101</span>&#160; </div>
<div class="line"><a name="l05102"></a><span class="lineno"> 5102</span>&#160;    CanMessage *m=t-&gt;<a class="code" href="classThreadTable2.html#afbbc874a92650328926f44d8638dc618">get</a>(0);</div>
<div class="line"><a name="l05103"></a><span class="lineno"> 5103</span>&#160;    <span class="keywordflow">if</span> (m==0)</div>
<div class="line"><a name="l05104"></a><span class="lineno"> 5104</span>&#160;    {</div>
<div class="line"><a name="l05105"></a><span class="lineno"> 5105</span>&#160;        <span class="comment">//@@@ TODO: check here</span></div>
<div class="line"><a name="l05106"></a><span class="lineno"> 5106</span>&#160;        <span class="comment">// value=0;</span></div>
<div class="line"><a name="l05107"></a><span class="lineno"> 5107</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05108"></a><span class="lineno"> 5108</span>&#160;    }</div>
<div class="line"><a name="l05109"></a><span class="lineno"> 5109</span>&#160; </div>
<div class="line"><a name="l05110"></a><span class="lineno"> 5110</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>;</div>
<div class="line"><a name="l05111"></a><span class="lineno"> 5111</span>&#160;    <a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>=m-&gt;getData()+1;</div>
<div class="line"><a name="l05112"></a><span class="lineno"> 5112</span>&#160;    *value= *((<span class="keywordtype">short</span> *)(<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>));</div>
<div class="line"><a name="l05113"></a><span class="lineno"> 5113</span>&#160; </div>
<div class="line"><a name="l05114"></a><span class="lineno"> 5114</span>&#160;    t-&gt;<a class="code" href="classThreadTable2.html#a2129ef023b358d00c5b30de7176f2b3e">clear</a>();</div>
<div class="line"><a name="l05115"></a><span class="lineno"> 5115</span>&#160; </div>
<div class="line"><a name="l05116"></a><span class="lineno"> 5116</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05117"></a><span class="lineno"> 5117</span>&#160;}</div>
<div class="line"><a name="l05118"></a><span class="lineno"> 5118</span>&#160; </div>
<div class="line"><a name="l05119"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aaa58a7981fab4acc421df6a31dd2efca"> 5119</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aaa58a7981fab4acc421df6a31dd2efca">CanBusMotionControl::getDebugParameterRaw</a>(<span class="keywordtype">int</span> axis, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index, <span class="keywordtype">double</span>* value)</div>
<div class="line"><a name="l05120"></a><span class="lineno"> 5120</span>&#160;{</div>
<div class="line"><a name="l05121"></a><span class="lineno"> 5121</span>&#160;    <span class="comment">//    ACE_ASSERT (axis &gt;= 0 &amp;&amp; axis &lt;= (CAN_MAX_CARDS-1)*2);</span></div>
<div class="line"><a name="l05122"></a><span class="lineno"> 5122</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>-1)*2))</div>
<div class="line"><a name="l05123"></a><span class="lineno"> 5123</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05124"></a><span class="lineno"> 5124</span>&#160; </div>
<div class="line"><a name="l05125"></a><span class="lineno"> 5125</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a56978bb0d722116c2e86777743d17247">ENABLED</a>(axis))</div>
<div class="line"><a name="l05126"></a><span class="lineno"> 5126</span>&#160;    {</div>
<div class="line"><a name="l05127"></a><span class="lineno"> 5127</span>&#160;        <span class="comment">//@@@ TODO: check here</span></div>
<div class="line"><a name="l05128"></a><span class="lineno"> 5128</span>&#160;        <span class="comment">// value = 0;</span></div>
<div class="line"><a name="l05129"></a><span class="lineno"> 5129</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05130"></a><span class="lineno"> 5130</span>&#160;    }</div>
<div class="line"><a name="l05131"></a><span class="lineno"> 5131</span>&#160; </div>
<div class="line"><a name="l05132"></a><span class="lineno"> 5132</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l05133"></a><span class="lineno"> 5133</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.lock();</div>
<div class="line"><a name="l05134"></a><span class="lineno"> 5134</span>&#160;    <span class="keywordtype">int</span> id;</div>
<div class="line"><a name="l05135"></a><span class="lineno"> 5135</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a0de6c591abb8d8340378037eccf81951">threadPool</a>-&gt;<a class="code" href="classThreadPool2.html#af3e4ac95d374da92f359286d20bcba65">getId</a>(<span class="keywordtype">id</span>))</div>
<div class="line"><a name="l05136"></a><span class="lineno"> 5136</span>&#160;    {</div>
<div class="line"><a name="l05137"></a><span class="lineno"> 5137</span>&#160;        yError(<span class="stringliteral">&quot;More than %d threads, cannot allow more\n&quot;</span>, <a class="code" href="canControlConstants_8h.html#a3830b8707366b97dd5c993756d89f02d">CANCONTROL_MAX_THREADS</a>);</div>
<div class="line"><a name="l05138"></a><span class="lineno"> 5138</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.unlock();</div>
<div class="line"><a name="l05139"></a><span class="lineno"> 5139</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05140"></a><span class="lineno"> 5140</span>&#160;    }</div>
<div class="line"><a name="l05141"></a><span class="lineno"> 5141</span>&#160; </div>
<div class="line"><a name="l05142"></a><span class="lineno"> 5142</span>&#160;    r.<a class="code" href="classCanBusResources.html#a426cb1e9b09f03d70b8dbccb2346edb8">startPacket</a>();</div>
<div class="line"><a name="l05143"></a><span class="lineno"> 5143</span>&#160;    r.<a class="code" href="classCanBusResources.html#a1049ab4df32ee910f61efbe130ba9b41">addMessage</a> (<span class="keywordtype">id</span>, axis, ICUBCANPROTO_POL_MC_CMD__GET_DEBUG_PARAM);</div>
<div class="line"><a name="l05144"></a><span class="lineno"> 5144</span>&#160;    *((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)(r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()+1)) = index;</div>
<div class="line"><a name="l05145"></a><span class="lineno"> 5145</span>&#160;    r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].setLen(2);</div>
<div class="line"><a name="l05146"></a><span class="lineno"> 5146</span>&#160;    r.<a class="code" href="classCanBusResources.html#a36f76a689330cd6163c3f13bb8ac28d9">writePacket</a>();</div>
<div class="line"><a name="l05147"></a><span class="lineno"> 5147</span>&#160; </div>
<div class="line"><a name="l05148"></a><span class="lineno"> 5148</span>&#160;    <a class="code" href="classThreadTable2.html">ThreadTable2</a> *t=<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a0de6c591abb8d8340378037eccf81951">threadPool</a>-&gt;<a class="code" href="classThreadPool2.html#abed580daad75544f3455f08beaa06cf4">getThreadTable</a>(<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l05149"></a><span class="lineno"> 5149</span>&#160;    t-&gt;<a class="code" href="classThreadTable2.html#adba368aea4ee8d37742e332ed2f4f26e">setPending</a>(r.<a class="code" href="classCanBusResources.html#a781a7267d7eab2315d49720c1d673f29">_writeMessages</a>);</div>
<div class="line"><a name="l05150"></a><span class="lineno"> 5150</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.unlock();</div>
<div class="line"><a name="l05151"></a><span class="lineno"> 5151</span>&#160;    t-&gt;<a class="code" href="classThreadTable2.html#a47cdedbcf45603cf2a45f1758472fbc7">synch</a>();</div>
<div class="line"><a name="l05152"></a><span class="lineno"> 5152</span>&#160; </div>
<div class="line"><a name="l05153"></a><span class="lineno"> 5153</span>&#160;    <span class="keywordflow">if</span> (!r.<a class="code" href="classCanBusResources.html#a1642d0476521a6b0c8f538cef04e2a59">getErrorStatus</a>() || (t-&gt;<a class="code" href="classThreadTable2.html#af31e5328380be26902f2c1853ce2cb29">timedOut</a>()))</div>
<div class="line"><a name="l05154"></a><span class="lineno"> 5154</span>&#160;    {</div>
<div class="line"><a name="l05155"></a><span class="lineno"> 5155</span>&#160;        yError(<span class="stringliteral">&quot;getDebugParameterRaw: message timed out\n&quot;</span>);</div>
<div class="line"><a name="l05156"></a><span class="lineno"> 5156</span>&#160;        <span class="comment">//@@@ TODO: check here</span></div>
<div class="line"><a name="l05157"></a><span class="lineno"> 5157</span>&#160;        <span class="comment">// value=0;</span></div>
<div class="line"><a name="l05158"></a><span class="lineno"> 5158</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05159"></a><span class="lineno"> 5159</span>&#160;    }</div>
<div class="line"><a name="l05160"></a><span class="lineno"> 5160</span>&#160; </div>
<div class="line"><a name="l05161"></a><span class="lineno"> 5161</span>&#160;    CanMessage *m=t-&gt;<a class="code" href="classThreadTable2.html#afbbc874a92650328926f44d8638dc618">get</a>(0);</div>
<div class="line"><a name="l05162"></a><span class="lineno"> 5162</span>&#160;    <span class="keywordflow">if</span> (m==0)</div>
<div class="line"><a name="l05163"></a><span class="lineno"> 5163</span>&#160;    {</div>
<div class="line"><a name="l05164"></a><span class="lineno"> 5164</span>&#160;        <span class="comment">//@@@ TODO: check here</span></div>
<div class="line"><a name="l05165"></a><span class="lineno"> 5165</span>&#160;        <span class="comment">// value=0;</span></div>
<div class="line"><a name="l05166"></a><span class="lineno"> 5166</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05167"></a><span class="lineno"> 5167</span>&#160;    }</div>
<div class="line"><a name="l05168"></a><span class="lineno"> 5168</span>&#160; </div>
<div class="line"><a name="l05169"></a><span class="lineno"> 5169</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>;</div>
<div class="line"><a name="l05170"></a><span class="lineno"> 5170</span>&#160;    <a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>=m-&gt;getData()+1;</div>
<div class="line"><a name="l05171"></a><span class="lineno"> 5171</span>&#160;    *value= *((<span class="keywordtype">short</span> *)(<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>));</div>
<div class="line"><a name="l05172"></a><span class="lineno"> 5172</span>&#160; </div>
<div class="line"><a name="l05173"></a><span class="lineno"> 5173</span>&#160;    t-&gt;<a class="code" href="classThreadTable2.html#a2129ef023b358d00c5b30de7176f2b3e">clear</a>();</div>
<div class="line"><a name="l05174"></a><span class="lineno"> 5174</span>&#160; </div>
<div class="line"><a name="l05175"></a><span class="lineno"> 5175</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05176"></a><span class="lineno"> 5176</span>&#160;}</div>
<div class="line"><a name="l05177"></a><span class="lineno"> 5177</span>&#160; </div>
<div class="line"><a name="l05178"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aeb1b3151a9ae48f4f380360091533945"> 5178</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aeb1b3151a9ae48f4f380360091533945">CanBusMotionControl::getDebugReferencePositionRaw</a>(<span class="keywordtype">int</span> axis, <span class="keywordtype">double</span>* value)</div>
<div class="line"><a name="l05179"></a><span class="lineno"> 5179</span>&#160;{</div>
<div class="line"><a name="l05180"></a><span class="lineno"> 5180</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>-1)*2))</div>
<div class="line"><a name="l05181"></a><span class="lineno"> 5181</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05182"></a><span class="lineno"> 5182</span>&#160; </div>
<div class="line"><a name="l05183"></a><span class="lineno"> 5183</span>&#160;    <span class="keywordtype">int</span> val = 0;</div>
<div class="line"><a name="l05184"></a><span class="lineno"> 5184</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a93eee03780e92ffbf67eaa3cab11fbca">_readDWord</a> (ICUBCANPROTO_POL_MC_CMD__GET_DESIRED_POSITION, axis, val) == <span class="keyword">true</span>)</div>
<div class="line"><a name="l05185"></a><span class="lineno"> 5185</span>&#160;        *value = double (val);</div>
<div class="line"><a name="l05186"></a><span class="lineno"> 5186</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l05187"></a><span class="lineno"> 5187</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05188"></a><span class="lineno"> 5188</span>&#160; </div>
<div class="line"><a name="l05189"></a><span class="lineno"> 5189</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05190"></a><span class="lineno"> 5190</span>&#160;}</div>
<div class="line"><a name="l05191"></a><span class="lineno"> 5191</span>&#160; </div>
<div class="line"><a name="l05192"></a><span class="lineno"> 5192</span>&#160; </div>
<div class="line"><a name="l05193"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa21418ca3d7f90d67e06b17fbf3b77f3"> 5193</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa21418ca3d7f90d67e06b17fbf3b77f3">CanBusMotionControl::getFirmwareVersionRaw</a> (<span class="keywordtype">int</span> axis, <a class="code" href="structcan__protocol__info.html">can_protocol_info</a> <span class="keyword">const</span>&amp; icub_interface_protocol, <a class="code" href="structfirmware__info.html">firmware_info</a>* fw_info)</div>
<div class="line"><a name="l05194"></a><span class="lineno"> 5194</span>&#160;{</div>
<div class="line"><a name="l05195"></a><span class="lineno"> 5195</span>&#160;    <span class="comment">//    ACE_ASSERT (axis &gt;= 0 &amp;&amp; axis &lt;= (CAN_MAX_CARDS-1)*2);</span></div>
<div class="line"><a name="l05196"></a><span class="lineno"> 5196</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>-1)*2))</div>
<div class="line"><a name="l05197"></a><span class="lineno"> 5197</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05198"></a><span class="lineno"> 5198</span>&#160; </div>
<div class="line"><a name="l05199"></a><span class="lineno"> 5199</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a56978bb0d722116c2e86777743d17247">ENABLED</a>(axis))</div>
<div class="line"><a name="l05200"></a><span class="lineno"> 5200</span>&#160;    {</div>
<div class="line"><a name="l05201"></a><span class="lineno"> 5201</span>&#160;        <span class="comment">//@@@ TODO: check here</span></div>
<div class="line"><a name="l05202"></a><span class="lineno"> 5202</span>&#160;        <span class="comment">// value = 0;</span></div>
<div class="line"><a name="l05203"></a><span class="lineno"> 5203</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05204"></a><span class="lineno"> 5204</span>&#160;    }</div>
<div class="line"><a name="l05205"></a><span class="lineno"> 5205</span>&#160; </div>
<div class="line"><a name="l05206"></a><span class="lineno"> 5206</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l05207"></a><span class="lineno"> 5207</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.lock();</div>
<div class="line"><a name="l05208"></a><span class="lineno"> 5208</span>&#160;    <span class="keywordtype">int</span> id;</div>
<div class="line"><a name="l05209"></a><span class="lineno"> 5209</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a0de6c591abb8d8340378037eccf81951">threadPool</a>-&gt;<a class="code" href="classThreadPool2.html#af3e4ac95d374da92f359286d20bcba65">getId</a>(<span class="keywordtype">id</span>))</div>
<div class="line"><a name="l05210"></a><span class="lineno"> 5210</span>&#160;    {</div>
<div class="line"><a name="l05211"></a><span class="lineno"> 5211</span>&#160;        yError(<span class="stringliteral">&quot;More than %d threads, cannot allow more\n&quot;</span>, <a class="code" href="canControlConstants_8h.html#a3830b8707366b97dd5c993756d89f02d">CANCONTROL_MAX_THREADS</a>);</div>
<div class="line"><a name="l05212"></a><span class="lineno"> 5212</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.unlock();</div>
<div class="line"><a name="l05213"></a><span class="lineno"> 5213</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05214"></a><span class="lineno"> 5214</span>&#160;    }</div>
<div class="line"><a name="l05215"></a><span class="lineno"> 5215</span>&#160; </div>
<div class="line"><a name="l05216"></a><span class="lineno"> 5216</span>&#160;    fw_info-&gt;<a class="code" href="structfirmware__info.html#a0a71018e94ae5ba2d2f4043864b68943">network_name</a>=this-&gt;canDevName;</div>
<div class="line"><a name="l05217"></a><span class="lineno"> 5217</span>&#160;    fw_info-&gt;<a class="code" href="structfirmware__info.html#a65242ee2c04da206accf7c2854ad16aa">joint</a>=axis;</div>
<div class="line"><a name="l05218"></a><span class="lineno"> 5218</span>&#160;    fw_info-&gt;<a class="code" href="structfirmware__info.html#a374d9a5a6471c545990044cca9debd20">board_can_id</a>=r.<a class="code" href="classCanBusResources.html#aebb638eb231f9461b10f514b580dab67">_destinations</a>[axis/2] &amp; 0x0f;</div>
<div class="line"><a name="l05219"></a><span class="lineno"> 5219</span>&#160;    fw_info-&gt;<a class="code" href="structfirmware__info.html#a7b9273550f30a4cde15716811d8a7beb">network_number</a>=r.<a class="code" href="classCanBusResources.html#a5434ee36839850ff8330ef5322171ff8">_networkN</a>;</div>
<div class="line"><a name="l05220"></a><span class="lineno"> 5220</span>&#160; </div>
<div class="line"><a name="l05221"></a><span class="lineno"> 5221</span>&#160;    r.<a class="code" href="classCanBusResources.html#a426cb1e9b09f03d70b8dbccb2346edb8">startPacket</a>();</div>
<div class="line"><a name="l05222"></a><span class="lineno"> 5222</span>&#160;    r.<a class="code" href="classCanBusResources.html#a1049ab4df32ee910f61efbe130ba9b41">addMessage</a> (<span class="keywordtype">id</span>, axis, ICUBCANPROTO_POL_MC_CMD__GET_FIRMWARE_VERSION);</div>
<div class="line"><a name="l05223"></a><span class="lineno"> 5223</span>&#160;    *((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)(r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()+1)) = (<span class="keywordtype">unsigned</span> char)(icub_interface_protocol.<a class="code" href="structcan__protocol__info.html#a128ed1b70a1b00817997462b084084e4">major</a> &amp; 0xFF);</div>
<div class="line"><a name="l05224"></a><span class="lineno"> 5224</span>&#160;    *((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)(r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()+2)) = (<span class="keywordtype">unsigned</span> char)(icub_interface_protocol.<a class="code" href="structcan__protocol__info.html#acb049abee5fd6b84ad261b85fb675ced">minor</a> &amp; 0xFF);</div>
<div class="line"><a name="l05225"></a><span class="lineno"> 5225</span>&#160;    r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].setLen(3);</div>
<div class="line"><a name="l05226"></a><span class="lineno"> 5226</span>&#160;    r.<a class="code" href="classCanBusResources.html#a36f76a689330cd6163c3f13bb8ac28d9">writePacket</a>();</div>
<div class="line"><a name="l05227"></a><span class="lineno"> 5227</span>&#160; </div>
<div class="line"><a name="l05228"></a><span class="lineno"> 5228</span>&#160;    <a class="code" href="classThreadTable2.html">ThreadTable2</a> *t=<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a0de6c591abb8d8340378037eccf81951">threadPool</a>-&gt;<a class="code" href="classThreadPool2.html#abed580daad75544f3455f08beaa06cf4">getThreadTable</a>(<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l05229"></a><span class="lineno"> 5229</span>&#160;    t-&gt;<a class="code" href="classThreadTable2.html#adba368aea4ee8d37742e332ed2f4f26e">setPending</a>(r.<a class="code" href="classCanBusResources.html#a781a7267d7eab2315d49720c1d673f29">_writeMessages</a>);</div>
<div class="line"><a name="l05230"></a><span class="lineno"> 5230</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.unlock();</div>
<div class="line"><a name="l05231"></a><span class="lineno"> 5231</span>&#160;    t-&gt;<a class="code" href="classThreadTable2.html#a47cdedbcf45603cf2a45f1758472fbc7">synch</a>();</div>
<div class="line"><a name="l05232"></a><span class="lineno"> 5232</span>&#160; </div>
<div class="line"><a name="l05233"></a><span class="lineno"> 5233</span>&#160;    <span class="keywordflow">if</span> (!r.<a class="code" href="classCanBusResources.html#a1642d0476521a6b0c8f538cef04e2a59">getErrorStatus</a>() || (t-&gt;<a class="code" href="classThreadTable2.html#af31e5328380be26902f2c1853ce2cb29">timedOut</a>()))</div>
<div class="line"><a name="l05234"></a><span class="lineno"> 5234</span>&#160;    {</div>
<div class="line"><a name="l05235"></a><span class="lineno"> 5235</span>&#160;        yError(<span class="stringliteral">&quot;getFirmwareVersion: message timed out\n&quot;</span>);</div>
<div class="line"><a name="l05236"></a><span class="lineno"> 5236</span>&#160;        fw_info-&gt;<a class="code" href="structfirmware__info.html#abfb4c0e64322ed052f8a50f5f07ca402">board_type</a>= 0;</div>
<div class="line"><a name="l05237"></a><span class="lineno"> 5237</span>&#160;        fw_info-&gt;<a class="code" href="structfirmware__info.html#a9a623e585680454696e15f7b68c3a03a">fw_major</a>= 0;</div>
<div class="line"><a name="l05238"></a><span class="lineno"> 5238</span>&#160;        fw_info-&gt;<a class="code" href="structfirmware__info.html#a19f4bea78f6c27ec57ca5942043a099f">fw_version</a>= 0;</div>
<div class="line"><a name="l05239"></a><span class="lineno"> 5239</span>&#160;        fw_info-&gt;<a class="code" href="structfirmware__info.html#a31a8139337c38e480c9c1a228b087fd5">fw_build</a>= 0;</div>
<div class="line"><a name="l05240"></a><span class="lineno"> 5240</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05241"></a><span class="lineno"> 5241</span>&#160;    }</div>
<div class="line"><a name="l05242"></a><span class="lineno"> 5242</span>&#160; </div>
<div class="line"><a name="l05243"></a><span class="lineno"> 5243</span>&#160;    CanMessage *m=t-&gt;<a class="code" href="classThreadTable2.html#afbbc874a92650328926f44d8638dc618">get</a>(0);</div>
<div class="line"><a name="l05244"></a><span class="lineno"> 5244</span>&#160;    <span class="keywordflow">if</span> (m==0)</div>
<div class="line"><a name="l05245"></a><span class="lineno"> 5245</span>&#160;    {</div>
<div class="line"><a name="l05246"></a><span class="lineno"> 5246</span>&#160;        yError(<span class="stringliteral">&quot;getFirmwareVersion: message error\n&quot;</span>);</div>
<div class="line"><a name="l05247"></a><span class="lineno"> 5247</span>&#160;        fw_info-&gt;<a class="code" href="structfirmware__info.html#abfb4c0e64322ed052f8a50f5f07ca402">board_type</a>= 0;</div>
<div class="line"><a name="l05248"></a><span class="lineno"> 5248</span>&#160;        fw_info-&gt;<a class="code" href="structfirmware__info.html#a9a623e585680454696e15f7b68c3a03a">fw_major</a>= 0;</div>
<div class="line"><a name="l05249"></a><span class="lineno"> 5249</span>&#160;        fw_info-&gt;<a class="code" href="structfirmware__info.html#a19f4bea78f6c27ec57ca5942043a099f">fw_version</a>= 0;</div>
<div class="line"><a name="l05250"></a><span class="lineno"> 5250</span>&#160;        fw_info-&gt;<a class="code" href="structfirmware__info.html#a31a8139337c38e480c9c1a228b087fd5">fw_build</a>= 0;</div>
<div class="line"><a name="l05251"></a><span class="lineno"> 5251</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05252"></a><span class="lineno"> 5252</span>&#160;    }</div>
<div class="line"><a name="l05253"></a><span class="lineno"> 5253</span>&#160; </div>
<div class="line"><a name="l05254"></a><span class="lineno"> 5254</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>;</div>
<div class="line"><a name="l05255"></a><span class="lineno"> 5255</span>&#160;    <a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>=m-&gt;getData()+1;</div>
<div class="line"><a name="l05256"></a><span class="lineno"> 5256</span>&#160;    fw_info-&gt;<a class="code" href="structfirmware__info.html#abfb4c0e64322ed052f8a50f5f07ca402">board_type</a>= *((<span class="keywordtype">char</span> *)(<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>));</div>
<div class="line"><a name="l05257"></a><span class="lineno"> 5257</span>&#160;    <a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>+=1;</div>
<div class="line"><a name="l05258"></a><span class="lineno"> 5258</span>&#160;    fw_info-&gt;<a class="code" href="structfirmware__info.html#a9a623e585680454696e15f7b68c3a03a">fw_major</a>= *((<span class="keywordtype">char</span> *)(<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>));</div>
<div class="line"><a name="l05259"></a><span class="lineno"> 5259</span>&#160;    <a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>+=1;</div>
<div class="line"><a name="l05260"></a><span class="lineno"> 5260</span>&#160;    fw_info-&gt;<a class="code" href="structfirmware__info.html#a19f4bea78f6c27ec57ca5942043a099f">fw_version</a>= *((<span class="keywordtype">char</span> *)(<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>));</div>
<div class="line"><a name="l05261"></a><span class="lineno"> 5261</span>&#160;    <a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>+=1;</div>
<div class="line"><a name="l05262"></a><span class="lineno"> 5262</span>&#160;    fw_info-&gt;<a class="code" href="structfirmware__info.html#a31a8139337c38e480c9c1a228b087fd5">fw_build</a>= *((<span class="keywordtype">char</span> *)(<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>));</div>
<div class="line"><a name="l05263"></a><span class="lineno"> 5263</span>&#160;    <a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>+=1;</div>
<div class="line"><a name="l05264"></a><span class="lineno"> 5264</span>&#160;    fw_info-&gt;<a class="code" href="structfirmware__info.html#a977bdc2d76c6f7457b9168d2b2fe0968">can_protocol</a>.<a class="code" href="structcan__protocol__info.html#a128ed1b70a1b00817997462b084084e4">major</a> = *((<span class="keywordtype">char</span> *)(<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>));</div>
<div class="line"><a name="l05265"></a><span class="lineno"> 5265</span>&#160;    <a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>+=1;</div>
<div class="line"><a name="l05266"></a><span class="lineno"> 5266</span>&#160;    fw_info-&gt;<a class="code" href="structfirmware__info.html#a977bdc2d76c6f7457b9168d2b2fe0968">can_protocol</a>.<a class="code" href="structcan__protocol__info.html#acb049abee5fd6b84ad261b85fb675ced">minor</a> = *((<span class="keywordtype">char</span> *)(<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>));</div>
<div class="line"><a name="l05267"></a><span class="lineno"> 5267</span>&#160;    <a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>+=1;</div>
<div class="line"><a name="l05268"></a><span class="lineno"> 5268</span>&#160;    fw_info-&gt;<a class="code" href="structfirmware__info.html#a72f5f4284ca9591d4049437eec4ee401">ack</a> = *((<span class="keywordtype">char</span> *)(<a class="code" href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a>));</div>
<div class="line"><a name="l05269"></a><span class="lineno"> 5269</span>&#160;    t-&gt;<a class="code" href="classThreadTable2.html#a2129ef023b358d00c5b30de7176f2b3e">clear</a>();</div>
<div class="line"><a name="l05270"></a><span class="lineno"> 5270</span>&#160; </div>
<div class="line"><a name="l05271"></a><span class="lineno"> 5271</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05272"></a><span class="lineno"> 5272</span>&#160;}</div>
<div class="line"><a name="l05273"></a><span class="lineno"> 5273</span>&#160; </div>
<div class="line"><a name="l05274"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#adca5112eb82f000d352c59fda6e94440"> 5274</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#adca5112eb82f000d352c59fda6e94440">CanBusMotionControl::getPidReferenceRaw</a>(<span class="keyword">const</span> PidControlTypeEnum&amp; pidtype, <span class="keywordtype">int</span> j, <span class="keywordtype">double</span> *ref)</div>
<div class="line"><a name="l05275"></a><span class="lineno"> 5275</span>&#160;{</div>
<div class="line"><a name="l05276"></a><span class="lineno"> 5276</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> axis = j;</div>
<div class="line"><a name="l05277"></a><span class="lineno"> 5277</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>-1)*2))</div>
<div class="line"><a name="l05278"></a><span class="lineno"> 5278</span>&#160;    {</div>
<div class="line"><a name="l05279"></a><span class="lineno"> 5279</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05280"></a><span class="lineno"> 5280</span>&#160;    }</div>
<div class="line"><a name="l05281"></a><span class="lineno"> 5281</span>&#160; </div>
<div class="line"><a name="l05282"></a><span class="lineno"> 5282</span>&#160;    <span class="keywordflow">switch</span> (pidtype)</div>
<div class="line"><a name="l05283"></a><span class="lineno"> 5283</span>&#160;    {</div>
<div class="line"><a name="l05284"></a><span class="lineno"> 5284</span>&#160;        <span class="keywordflow">case</span> VOCAB_PIDTYPE_POSITION:</div>
<div class="line"><a name="l05285"></a><span class="lineno"> 5285</span>&#160;        {</div>
<div class="line"><a name="l05286"></a><span class="lineno"> 5286</span>&#160;            <span class="keywordtype">int</span> value = 0;</div>
<div class="line"><a name="l05287"></a><span class="lineno"> 5287</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a93eee03780e92ffbf67eaa3cab11fbca">_readDWord</a> (ICUBCANPROTO_POL_MC_CMD__GET_DESIRED_POSITION, axis, value) == <span class="keyword">true</span>)</div>
<div class="line"><a name="l05288"></a><span class="lineno"> 5288</span>&#160;            { *ref = double (value);}</div>
<div class="line"><a name="l05289"></a><span class="lineno"> 5289</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l05290"></a><span class="lineno"> 5290</span>&#160;            { *ref =0; yError() &lt;&lt; <span class="stringliteral">&quot;Invalid _readDWord (ICUBCANPROTO_POL_MC_CMD__GET_DESIRED_POSITION)&quot;</span>; <span class="keywordflow">return</span> <span class="keyword">false</span>; }</div>
<div class="line"><a name="l05291"></a><span class="lineno"> 5291</span>&#160;        }</div>
<div class="line"><a name="l05292"></a><span class="lineno"> 5292</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05293"></a><span class="lineno"> 5293</span>&#160;        <span class="keywordflow">case</span> VOCAB_PIDTYPE_VELOCITY:</div>
<div class="line"><a name="l05294"></a><span class="lineno"> 5294</span>&#160;        {</div>
<div class="line"><a name="l05295"></a><span class="lineno"> 5295</span>&#160;            *ref=0;</div>
<div class="line"><a name="l05296"></a><span class="lineno"> 5296</span>&#160;            <a class="code" href="CanBusMotionControl_8cpp.html#a35a12201dd9ff39ea640f1d8b39f0770">NOT_YET_IMPLEMENTED</a>(<span class="stringliteral">&quot;getPidReferenceRaw VOCAB_PIDTYPE_VELOCITY&quot;</span>);</div>
<div class="line"><a name="l05297"></a><span class="lineno"> 5297</span>&#160;        }</div>
<div class="line"><a name="l05298"></a><span class="lineno"> 5298</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05299"></a><span class="lineno"> 5299</span>&#160;        <span class="keywordflow">case</span> VOCAB_PIDTYPE_CURRENT:</div>
<div class="line"><a name="l05300"></a><span class="lineno"> 5300</span>&#160;        {</div>
<div class="line"><a name="l05301"></a><span class="lineno"> 5301</span>&#160;            *ref=0;</div>
<div class="line"><a name="l05302"></a><span class="lineno"> 5302</span>&#160;            <a class="code" href="CanBusMotionControl_8cpp.html#a35a12201dd9ff39ea640f1d8b39f0770">NOT_YET_IMPLEMENTED</a>(<span class="stringliteral">&quot;getPidReferenceRaw VOCAB_PIDTYPE_CURRENT&quot;</span>);</div>
<div class="line"><a name="l05303"></a><span class="lineno"> 5303</span>&#160;        }</div>
<div class="line"><a name="l05304"></a><span class="lineno"> 5304</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05305"></a><span class="lineno"> 5305</span>&#160;        <span class="keywordflow">case</span> VOCAB_PIDTYPE_TORQUE:</div>
<div class="line"><a name="l05306"></a><span class="lineno"> 5306</span>&#160;        {</div>
<div class="line"><a name="l05307"></a><span class="lineno"> 5307</span>&#160;            *ref=0;</div>
<div class="line"><a name="l05308"></a><span class="lineno"> 5308</span>&#160;            <a class="code" href="CanBusMotionControl_8cpp.html#a35a12201dd9ff39ea640f1d8b39f0770">NOT_YET_IMPLEMENTED</a>(<span class="stringliteral">&quot;getPidReferenceRaw VOCAB_PIDTYPE_TORQUE&quot;</span>);</div>
<div class="line"><a name="l05309"></a><span class="lineno"> 5309</span>&#160;        }</div>
<div class="line"><a name="l05310"></a><span class="lineno"> 5310</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05311"></a><span class="lineno"> 5311</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l05312"></a><span class="lineno"> 5312</span>&#160;        {</div>
<div class="line"><a name="l05313"></a><span class="lineno"> 5313</span>&#160;            *ref=0;</div>
<div class="line"><a name="l05314"></a><span class="lineno"> 5314</span>&#160;            yError()&lt;&lt;<span class="stringliteral">&quot;Invalid pidtype:&quot;</span>&lt;&lt;pidtype;</div>
<div class="line"><a name="l05315"></a><span class="lineno"> 5315</span>&#160;        }</div>
<div class="line"><a name="l05316"></a><span class="lineno"> 5316</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05317"></a><span class="lineno"> 5317</span>&#160;    }</div>
<div class="line"><a name="l05318"></a><span class="lineno"> 5318</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05319"></a><span class="lineno"> 5319</span>&#160;}</div>
<div class="line"><a name="l05320"></a><span class="lineno"> 5320</span>&#160; </div>
<div class="line"><a name="l05321"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a5e22d6c2d25fd1e5b84f699f8b472746"> 5321</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a5e22d6c2d25fd1e5b84f699f8b472746">CanBusMotionControl::getPidReferencesRaw</a>(<span class="keyword">const</span> PidControlTypeEnum&amp; pidtype, <span class="keywordtype">double</span> *refs)</div>
<div class="line"><a name="l05322"></a><span class="lineno"> 5322</span>&#160;{</div>
<div class="line"><a name="l05323"></a><span class="lineno"> 5323</span>&#160;    <span class="keywordtype">bool</span> ret = <span class="keyword">true</span>;</div>
<div class="line"><a name="l05324"></a><span class="lineno"> 5324</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l05325"></a><span class="lineno"> 5325</span>&#160;    <span class="keywordflow">if</span> (refs==0) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05326"></a><span class="lineno"> 5326</span>&#160; </div>
<div class="line"><a name="l05327"></a><span class="lineno"> 5327</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>(); i++)</div>
<div class="line"><a name="l05328"></a><span class="lineno"> 5328</span>&#160;    {</div>
<div class="line"><a name="l05329"></a><span class="lineno"> 5329</span>&#160;        ret &amp;= <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#adca5112eb82f000d352c59fda6e94440">getPidReferenceRaw</a>(pidtype, i, &amp;refs[i]);</div>
<div class="line"><a name="l05330"></a><span class="lineno"> 5330</span>&#160;    }</div>
<div class="line"><a name="l05331"></a><span class="lineno"> 5331</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l05332"></a><span class="lineno"> 5332</span>&#160;}</div>
<div class="line"><a name="l05333"></a><span class="lineno"> 5333</span>&#160; </div>
<div class="line"><a name="l05334"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af791f726f8ee2ed45e43cb1813d5f444"> 5334</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af791f726f8ee2ed45e43cb1813d5f444">CanBusMotionControl::getPidErrorLimitRaw</a>(<span class="keyword">const</span> PidControlTypeEnum&amp; pidtype, <span class="keywordtype">int</span> j, <span class="keywordtype">double</span> *err)</div>
<div class="line"><a name="l05335"></a><span class="lineno"> 5335</span>&#160;{</div>
<div class="line"><a name="l05336"></a><span class="lineno"> 5336</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="CanBusMotionControl_8cpp.html#a35a12201dd9ff39ea640f1d8b39f0770">NOT_YET_IMPLEMENTED</a>(<span class="stringliteral">&quot;getErrorLimit&quot;</span>);</div>
<div class="line"><a name="l05337"></a><span class="lineno"> 5337</span>&#160;}</div>
<div class="line"><a name="l05338"></a><span class="lineno"> 5338</span>&#160; </div>
<div class="line"><a name="l05339"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ae670c17b8e8d56844cd15dbd17153abf"> 5339</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ae670c17b8e8d56844cd15dbd17153abf">CanBusMotionControl::getPidErrorLimitsRaw</a>(<span class="keyword">const</span> PidControlTypeEnum&amp; pidtype, <span class="keywordtype">double</span> *errs)</div>
<div class="line"><a name="l05340"></a><span class="lineno"> 5340</span>&#160;{</div>
<div class="line"><a name="l05341"></a><span class="lineno"> 5341</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="CanBusMotionControl_8cpp.html#a35a12201dd9ff39ea640f1d8b39f0770">NOT_YET_IMPLEMENTED</a>(<span class="stringliteral">&quot;getErrorLimits&quot;</span>);</div>
<div class="line"><a name="l05342"></a><span class="lineno"> 5342</span>&#160;}</div>
<div class="line"><a name="l05343"></a><span class="lineno"> 5343</span>&#160; </div>
<div class="line"><a name="l05344"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a604f3de83a8e787c9b4e404fa4201d7f"> 5344</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a604f3de83a8e787c9b4e404fa4201d7f">CanBusMotionControl::setPidErrorLimitRaw</a>(<span class="keyword">const</span> PidControlTypeEnum&amp; pidtype, <span class="keywordtype">int</span> j, <span class="keywordtype">double</span> limit)</div>
<div class="line"><a name="l05345"></a><span class="lineno"> 5345</span>&#160;{</div>
<div class="line"><a name="l05346"></a><span class="lineno"> 5346</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="CanBusMotionControl_8cpp.html#a35a12201dd9ff39ea640f1d8b39f0770">NOT_YET_IMPLEMENTED</a>(<span class="stringliteral">&quot;setErrorLimit&quot;</span>);</div>
<div class="line"><a name="l05347"></a><span class="lineno"> 5347</span>&#160;}</div>
<div class="line"><a name="l05348"></a><span class="lineno"> 5348</span>&#160; </div>
<div class="line"><a name="l05349"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a99115334b9f83d15917d2572f7cd0fc5"> 5349</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a99115334b9f83d15917d2572f7cd0fc5">CanBusMotionControl::setPidErrorLimitsRaw</a>(<span class="keyword">const</span> PidControlTypeEnum&amp; pidtype, <span class="keyword">const</span> <span class="keywordtype">double</span> *limits)</div>
<div class="line"><a name="l05350"></a><span class="lineno"> 5350</span>&#160;{</div>
<div class="line"><a name="l05351"></a><span class="lineno"> 5351</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="CanBusMotionControl_8cpp.html#a35a12201dd9ff39ea640f1d8b39f0770">NOT_YET_IMPLEMENTED</a>(<span class="stringliteral">&quot;setErrorLimits&quot;</span>);</div>
<div class="line"><a name="l05352"></a><span class="lineno"> 5352</span>&#160;}</div>
<div class="line"><a name="l05353"></a><span class="lineno"> 5353</span>&#160; </div>
<div class="line"><a name="l05354"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af253e0caf312fc039e6a22f2b91b00dd"> 5354</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af253e0caf312fc039e6a22f2b91b00dd">CanBusMotionControl::resetPidRaw</a>(<span class="keyword">const</span> PidControlTypeEnum&amp; pidtype, <span class="keywordtype">int</span> j)</div>
<div class="line"><a name="l05355"></a><span class="lineno"> 5355</span>&#160;{</div>
<div class="line"><a name="l05356"></a><span class="lineno"> 5356</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="CanBusMotionControl_8cpp.html#a35a12201dd9ff39ea640f1d8b39f0770">NOT_YET_IMPLEMENTED</a>(<span class="stringliteral">&quot;resetPid&quot;</span>);</div>
<div class="line"><a name="l05357"></a><span class="lineno"> 5357</span>&#160;}</div>
<div class="line"><a name="l05358"></a><span class="lineno"> 5358</span>&#160; </div>
<div class="line"><a name="l05359"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a01cd42df21de5e00a242ec2392a86055"> 5359</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a01cd42df21de5e00a242ec2392a86055">CanBusMotionControl::enablePidRaw</a>(<span class="keyword">const</span> PidControlTypeEnum&amp; pidtype, <span class="keywordtype">int</span> axis)</div>
<div class="line"><a name="l05360"></a><span class="lineno"> 5360</span>&#160;{</div>
<div class="line"><a name="l05361"></a><span class="lineno"> 5361</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="CanBusMotionControl_8cpp.html#a35a12201dd9ff39ea640f1d8b39f0770">NOT_YET_IMPLEMENTED</a>(<span class="stringliteral">&quot;enablePidRaw&quot;</span>);</div>
<div class="line"><a name="l05362"></a><span class="lineno"> 5362</span>&#160;}</div>
<div class="line"><a name="l05363"></a><span class="lineno"> 5363</span>&#160; </div>
<div class="line"><a name="l05364"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a3065556e1b6df46bad9345d2298a114b"> 5364</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a3065556e1b6df46bad9345d2298a114b">CanBusMotionControl::setPidOffsetRaw</a>(<span class="keyword">const</span> PidControlTypeEnum&amp; pidtype, <span class="keywordtype">int</span> axis, <span class="keywordtype">double</span> v)</div>
<div class="line"><a name="l05365"></a><span class="lineno"> 5365</span>&#160;{</div>
<div class="line"><a name="l05366"></a><span class="lineno"> 5366</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>-1)*2))</div>
<div class="line"><a name="l05367"></a><span class="lineno"> 5367</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05368"></a><span class="lineno"> 5368</span>&#160; </div>
<div class="line"><a name="l05369"></a><span class="lineno"> 5369</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a100a40a38da173be134acb6308284b29">_writeWord16</a> (ICUBCANPROTO_POL_MC_CMD__SET_OFFSET, axis, <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af5c4f789e8b29d4a63d538b48fc9cd77">S_16</a>(v));</div>
<div class="line"><a name="l05370"></a><span class="lineno"> 5370</span>&#160; </div>
<div class="line"><a name="l05371"></a><span class="lineno"> 5371</span>&#160;}</div>
<div class="line"><a name="l05372"></a><span class="lineno"> 5372</span>&#160; </div>
<div class="line"><a name="l05373"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a27edda0012e79ac8e0e6cb1c71a17352"> 5373</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a27edda0012e79ac8e0e6cb1c71a17352">CanBusMotionControl::setParameterRaw</a>(<span class="keywordtype">int</span> axis, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> type, <span class="keywordtype">double</span> value)</div>
<div class="line"><a name="l05374"></a><span class="lineno"> 5374</span>&#160;{</div>
<div class="line"><a name="l05375"></a><span class="lineno"> 5375</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>-1)*2))</div>
<div class="line"><a name="l05376"></a><span class="lineno"> 5376</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05377"></a><span class="lineno"> 5377</span>&#160; </div>
<div class="line"><a name="l05378"></a><span class="lineno"> 5378</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a100a40a38da173be134acb6308284b29">_writeWord16</a> (type, axis, <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af5c4f789e8b29d4a63d538b48fc9cd77">S_16</a>(value));</div>
<div class="line"><a name="l05379"></a><span class="lineno"> 5379</span>&#160; </div>
<div class="line"><a name="l05380"></a><span class="lineno"> 5380</span>&#160;}</div>
<div class="line"><a name="l05381"></a><span class="lineno"> 5381</span>&#160; </div>
<div class="line"><a name="l05382"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ad26e63d069d56c37db49786881c90bd2"> 5382</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ad26e63d069d56c37db49786881c90bd2">CanBusMotionControl::setDebugParameterRaw</a>(<span class="keywordtype">int</span> axis, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index, <span class="keywordtype">double</span> value)</div>
<div class="line"><a name="l05383"></a><span class="lineno"> 5383</span>&#160;{</div>
<div class="line"><a name="l05384"></a><span class="lineno"> 5384</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>-1)*2))</div>
<div class="line"><a name="l05385"></a><span class="lineno"> 5385</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05386"></a><span class="lineno"> 5386</span>&#160; </div>
<div class="line"><a name="l05387"></a><span class="lineno"> 5387</span>&#160;    </div>
<div class="line"><a name="l05388"></a><span class="lineno"> 5388</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l05389"></a><span class="lineno"> 5389</span>&#160;    std::lock_guard&lt;std::recursive_mutex&gt; lck(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>);</div>
<div class="line"><a name="l05390"></a><span class="lineno"> 5390</span>&#160;    r.<a class="code" href="classCanBusResources.html#a426cb1e9b09f03d70b8dbccb2346edb8">startPacket</a>();</div>
<div class="line"><a name="l05391"></a><span class="lineno"> 5391</span>&#160;    r.<a class="code" href="classCanBusResources.html#a1049ab4df32ee910f61efbe130ba9b41">addMessage</a> (ICUBCANPROTO_POL_MC_CMD__SET_DEBUG_PARAM, axis);</div>
<div class="line"><a name="l05392"></a><span class="lineno"> 5392</span>&#160;    *((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)(r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()+1)) = (<span class="keywordtype">unsigned</span> char)(index &amp; 0xFF);</div>
<div class="line"><a name="l05393"></a><span class="lineno"> 5393</span>&#160;    *((<span class="keywordtype">short</span> *)(r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()+2)) = <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af5c4f789e8b29d4a63d538b48fc9cd77">S_16</a>(value);</div>
<div class="line"><a name="l05394"></a><span class="lineno"> 5394</span>&#160;    *((<span class="keywordtype">short</span> *)(r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()+4)) = 0;</div>
<div class="line"><a name="l05395"></a><span class="lineno"> 5395</span>&#160;    *((<span class="keywordtype">short</span> *)(r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()+6)) = 0;</div>
<div class="line"><a name="l05396"></a><span class="lineno"> 5396</span>&#160;    r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].setLen(8);</div>
<div class="line"><a name="l05397"></a><span class="lineno"> 5397</span>&#160;    r.<a class="code" href="classCanBusResources.html#a36f76a689330cd6163c3f13bb8ac28d9">writePacket</a>();</div>
<div class="line"><a name="l05398"></a><span class="lineno"> 5398</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05399"></a><span class="lineno"> 5399</span>&#160;}</div>
<div class="line"><a name="l05400"></a><span class="lineno"> 5400</span>&#160; </div>
<div class="line"><a name="l05401"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a954bb681bc7e21d05ac6f48e939979b1"> 5401</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a954bb681bc7e21d05ac6f48e939979b1">CanBusMotionControl::setDebugReferencePositionRaw</a>(<span class="keywordtype">int</span> axis, <span class="keywordtype">double</span> value)</div>
<div class="line"><a name="l05402"></a><span class="lineno"> 5402</span>&#160;{</div>
<div class="line"><a name="l05403"></a><span class="lineno"> 5403</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>-1)*2))</div>
<div class="line"><a name="l05404"></a><span class="lineno"> 5404</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05405"></a><span class="lineno"> 5405</span>&#160; </div>
<div class="line"><a name="l05406"></a><span class="lineno"> 5406</span>&#160;    <span class="comment">//return _writeDWord (ICUBCANPROTO_POL_MC_CMD__SET_DESIRED_POSITION, axis, S_32(value));</span></div>
<div class="line"><a name="l05407"></a><span class="lineno"> 5407</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a3c5883fff29d225096173b0209107362">_writeDWord</a> (ICUBCANPROTO_POL_MC_CMD__SET_COMMAND_POSITION, axis, <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ae6ad0f0f8abc5fcd9469978a25c22e7a">S_32</a>(value));</div>
<div class="line"><a name="l05408"></a><span class="lineno"> 5408</span>&#160;}</div>
<div class="line"><a name="l05409"></a><span class="lineno"> 5409</span>&#160; </div>
<div class="line"><a name="l05410"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a39ce60ad15b6d7d93d172cbc94c19010"> 5410</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a39ce60ad15b6d7d93d172cbc94c19010">CanBusMotionControl::getPidOutputRaw</a>(<span class="keyword">const</span> PidControlTypeEnum&amp; pidtype, <span class="keywordtype">int</span> axis, <span class="keywordtype">double</span> *<a class="code" href="sine_8m.html#a2a89187d8e8e8fba509ef9ab5f815d88">out</a>)</div>
<div class="line"><a name="l05411"></a><span class="lineno"> 5411</span>&#160;{</div>
<div class="line"><a name="l05412"></a><span class="lineno"> 5412</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l05413"></a><span class="lineno"> 5413</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>()))</div>
<div class="line"><a name="l05414"></a><span class="lineno"> 5414</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05415"></a><span class="lineno"> 5415</span>&#160; </div>
<div class="line"><a name="l05416"></a><span class="lineno"> 5416</span>&#160;    std::lock_guard&lt;std::recursive_mutex&gt; lck(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>);</div>
<div class="line"><a name="l05417"></a><span class="lineno"> 5417</span>&#160;    <span class="keywordflow">switch</span> (pidtype)</div>
<div class="line"><a name="l05418"></a><span class="lineno"> 5418</span>&#160;    {</div>
<div class="line"><a name="l05419"></a><span class="lineno"> 5419</span>&#160;        <span class="keywordflow">case</span> VOCAB_PIDTYPE_POSITION:</div>
<div class="line"><a name="l05420"></a><span class="lineno"> 5420</span>&#160;            *(<a class="code" href="sine_8m.html#a2a89187d8e8e8fba509ef9ab5f815d88">out</a>) = <span class="keywordtype">double</span>(r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[axis].<a class="code" href="classBCastBufferElement.html#a96b136248573dc3f1b4f245f402bd18c">_pid_value</a>);</div>
<div class="line"><a name="l05421"></a><span class="lineno"> 5421</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05422"></a><span class="lineno"> 5422</span>&#160;        <span class="keywordflow">case</span> VOCAB_PIDTYPE_VELOCITY:</div>
<div class="line"><a name="l05423"></a><span class="lineno"> 5423</span>&#160;            *(<a class="code" href="sine_8m.html#a2a89187d8e8e8fba509ef9ab5f815d88">out</a>) = <span class="keywordtype">double</span>(r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[axis].<a class="code" href="classBCastBufferElement.html#a96b136248573dc3f1b4f245f402bd18c">_pid_value</a>);</div>
<div class="line"><a name="l05424"></a><span class="lineno"> 5424</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05425"></a><span class="lineno"> 5425</span>&#160;        <span class="keywordflow">case</span> VOCAB_PIDTYPE_CURRENT:</div>
<div class="line"><a name="l05426"></a><span class="lineno"> 5426</span>&#160;            *(<a class="code" href="sine_8m.html#a2a89187d8e8e8fba509ef9ab5f815d88">out</a>) = <span class="keywordtype">double</span>(r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[axis].<a class="code" href="classBCastBufferElement.html#a96b136248573dc3f1b4f245f402bd18c">_pid_value</a>);</div>
<div class="line"><a name="l05427"></a><span class="lineno"> 5427</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05428"></a><span class="lineno"> 5428</span>&#160;        <span class="keywordflow">case</span> VOCAB_PIDTYPE_TORQUE:</div>
<div class="line"><a name="l05429"></a><span class="lineno"> 5429</span>&#160;            *(<a class="code" href="sine_8m.html#a2a89187d8e8e8fba509ef9ab5f815d88">out</a>) = <span class="keywordtype">double</span>(r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[axis].<a class="code" href="classBCastBufferElement.html#a96b136248573dc3f1b4f245f402bd18c">_pid_value</a>);</div>
<div class="line"><a name="l05430"></a><span class="lineno"> 5430</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05431"></a><span class="lineno"> 5431</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l05432"></a><span class="lineno"> 5432</span>&#160;            yError()&lt;&lt;<span class="stringliteral">&quot;Invalid pidtype:&quot;</span>&lt;&lt;pidtype;</div>
<div class="line"><a name="l05433"></a><span class="lineno"> 5433</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05434"></a><span class="lineno"> 5434</span>&#160;    }</div>
<div class="line"><a name="l05435"></a><span class="lineno"> 5435</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05436"></a><span class="lineno"> 5436</span>&#160;}</div>
<div class="line"><a name="l05437"></a><span class="lineno"> 5437</span>&#160; </div>
<div class="line"><a name="l05438"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ad755610d67121248660e90f5f0a42999"> 5438</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ad755610d67121248660e90f5f0a42999">CanBusMotionControl::getPidOutputsRaw</a>(<span class="keyword">const</span> PidControlTypeEnum&amp; pidtype, <span class="keywordtype">double</span> *outs)</div>
<div class="line"><a name="l05439"></a><span class="lineno"> 5439</span>&#160;{</div>
<div class="line"><a name="l05440"></a><span class="lineno"> 5440</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l05441"></a><span class="lineno"> 5441</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>(); i++)</div>
<div class="line"><a name="l05442"></a><span class="lineno"> 5442</span>&#160;    {</div>
<div class="line"><a name="l05443"></a><span class="lineno"> 5443</span>&#160;        getPidOutput(pidtype, i, &amp;outs[i]);</div>
<div class="line"><a name="l05444"></a><span class="lineno"> 5444</span>&#160;    }</div>
<div class="line"><a name="l05445"></a><span class="lineno"> 5445</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05446"></a><span class="lineno"> 5446</span>&#160;}</div>
<div class="line"><a name="l05447"></a><span class="lineno"> 5447</span>&#160; </div>
<div class="line"><a name="l05448"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aee1b5836c505d87a94a82d460e67216e"> 5448</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aee1b5836c505d87a94a82d460e67216e">CanBusMotionControl::disablePidRaw</a>(<span class="keyword">const</span> PidControlTypeEnum&amp; pidtype, <span class="keywordtype">int</span> axis)</div>
<div class="line"><a name="l05449"></a><span class="lineno"> 5449</span>&#160;{</div>
<div class="line"><a name="l05450"></a><span class="lineno"> 5450</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="CanBusMotionControl_8cpp.html#a35a12201dd9ff39ea640f1d8b39f0770">NOT_YET_IMPLEMENTED</a>(<span class="stringliteral">&quot;disablePidRaw&quot;</span>);</div>
<div class="line"><a name="l05451"></a><span class="lineno"> 5451</span>&#160;}</div>
<div class="line"><a name="l05452"></a><span class="lineno"> 5452</span>&#160; </div>
<div class="line"><a name="l05453"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a96bfa233fcea3beaae56851757c38fa7"> 5453</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a96bfa233fcea3beaae56851757c38fa7">CanBusMotionControl::positionMoveRaw</a>(<span class="keywordtype">int</span> axis, <span class="keywordtype">double</span> ref)</div>
<div class="line"><a name="l05454"></a><span class="lineno"> 5454</span>&#160;{</div>
<div class="line"><a name="l05456"></a><span class="lineno"> 5456</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l05457"></a><span class="lineno"> 5457</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>-1)*2))</div>
<div class="line"><a name="l05458"></a><span class="lineno"> 5458</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05459"></a><span class="lineno"> 5459</span>&#160; </div>
<div class="line"><a name="l05460"></a><span class="lineno"> 5460</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a56978bb0d722116c2e86777743d17247">ENABLED</a> (axis))</div>
<div class="line"><a name="l05461"></a><span class="lineno"> 5461</span>&#160;    {</div>
<div class="line"><a name="l05462"></a><span class="lineno"> 5462</span>&#160;        <span class="comment">// still fills the _ref_position structure.</span></div>
<div class="line"><a name="l05463"></a><span class="lineno"> 5463</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a703140d587d4c5eb582e35005df73057">_ref_command_positions</a>[axis] = ref;</div>
<div class="line"><a name="l05464"></a><span class="lineno"> 5464</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05465"></a><span class="lineno"> 5465</span>&#160;    }</div>
<div class="line"><a name="l05466"></a><span class="lineno"> 5466</span>&#160; </div>
<div class="line"><a name="l05467"></a><span class="lineno"> 5467</span>&#160;    <span class="keywordflow">if</span> (yarp::os::Time::now()-<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a9fdde85f4719086043eb7132a26a6eb6">_last_position_move_time</a>[axis]&lt;<a class="code" href="CanBusMotionControl_8h.html#aa051d60eae501813d4a93a240f3e3088">MAX_POSITION_MOVE_INTERVAL</a>) </div>
<div class="line"><a name="l05468"></a><span class="lineno"> 5468</span>&#160;    {</div>
<div class="line"><a name="l05469"></a><span class="lineno"> 5469</span>&#160;        yWarning() &lt;&lt; <span class="stringliteral">&quot;Performance warning: You are using positionMove commands at high rate (&lt;&quot;</span>&lt;&lt; <a class="code" href="CanBusMotionControl_8h.html#aa051d60eae501813d4a93a240f3e3088">MAX_POSITION_MOVE_INTERVAL</a>*1000.0 &lt;&lt;<span class="stringliteral">&quot; ms). Probably position control mode is not the right control mode to use.&quot;</span>;</div>
<div class="line"><a name="l05470"></a><span class="lineno"> 5470</span>&#160;    }</div>
<div class="line"><a name="l05471"></a><span class="lineno"> 5471</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a9fdde85f4719086043eb7132a26a6eb6">_last_position_move_time</a>[axis] = yarp::os::Time::now();</div>
<div class="line"><a name="l05472"></a><span class="lineno"> 5472</span>&#160; </div>
<div class="line"><a name="l05473"></a><span class="lineno"> 5473</span>&#160;    <span class="keywordtype">int</span> mode = 0;</div>
<div class="line"><a name="l05474"></a><span class="lineno"> 5474</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a70e12eba89c67a6805b978e8fd839685">getControlModeRaw</a>(axis, &amp;mode);</div>
<div class="line"><a name="l05475"></a><span class="lineno"> 5475</span>&#160;    <span class="keywordflow">if</span> (mode != VOCAB_CM_POSITION &amp;&amp;</div>
<div class="line"><a name="l05476"></a><span class="lineno"> 5476</span>&#160;        mode != VOCAB_CM_MIXED    &amp;&amp;</div>
<div class="line"><a name="l05477"></a><span class="lineno"> 5477</span>&#160;        mode != VOCAB_CM_IMPEDANCE_POS &amp;&amp;</div>
<div class="line"><a name="l05478"></a><span class="lineno"> 5478</span>&#160;        mode != VOCAB_CM_IDLE)</div>
<div class="line"><a name="l05479"></a><span class="lineno"> 5479</span>&#160;    {</div>
<div class="line"><a name="l05480"></a><span class="lineno"> 5480</span>&#160;        yError() &lt;&lt; <span class="stringliteral">&quot;positionMoveRaw: skipping command because &quot;</span> &lt;&lt; networkName.c_str() &lt;&lt; <span class="stringliteral">&quot; joint &quot;</span> &lt;&lt; axis &lt;&lt; <span class="stringliteral">&quot;is not in VOCAB_CM_POSITION mode&quot;</span>;</div>
<div class="line"><a name="l05481"></a><span class="lineno"> 5481</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05482"></a><span class="lineno"> 5482</span>&#160;    }</div>
<div class="line"><a name="l05483"></a><span class="lineno"> 5483</span>&#160; </div>
<div class="line"><a name="l05484"></a><span class="lineno"> 5484</span>&#160;    std::lock_guard&lt;std::recursive_mutex&gt; lck(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>);</div>
<div class="line"><a name="l05485"></a><span class="lineno"> 5485</span>&#160; </div>
<div class="line"><a name="l05486"></a><span class="lineno"> 5486</span>&#160;    r.<a class="code" href="classCanBusResources.html#a426cb1e9b09f03d70b8dbccb2346edb8">startPacket</a>();</div>
<div class="line"><a name="l05487"></a><span class="lineno"> 5487</span>&#160;    r.<a class="code" href="classCanBusResources.html#a1049ab4df32ee910f61efbe130ba9b41">addMessage</a> (ICUBCANPROTO_POL_MC_CMD__POSITION_MOVE, axis);</div>
<div class="line"><a name="l05488"></a><span class="lineno"> 5488</span>&#160; </div>
<div class="line"><a name="l05489"></a><span class="lineno"> 5489</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a703140d587d4c5eb582e35005df73057">_ref_command_positions</a>[axis] = ref;</div>
<div class="line"><a name="l05490"></a><span class="lineno"> 5490</span>&#160;    *((<span class="keywordtype">int</span>*)(r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData() + 1)) = <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ae6ad0f0f8abc5fcd9469978a25c22e7a">S_32</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a703140d587d4c5eb582e35005df73057">_ref_command_positions</a>[axis]);</div>
<div class="line"><a name="l05491"></a><span class="lineno"> 5491</span>&#160;    *((<span class="keywordtype">short</span>*)(r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData() + 5)) = <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af5c4f789e8b29d4a63d538b48fc9cd77">S_16</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa892a2a25975c1b8d9fc3ec03522cfa1">_ref_speeds</a>[axis]);</div>
<div class="line"><a name="l05492"></a><span class="lineno"> 5492</span>&#160;    r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].setLen(7);</div>
<div class="line"><a name="l05493"></a><span class="lineno"> 5493</span>&#160; </div>
<div class="line"><a name="l05494"></a><span class="lineno"> 5494</span>&#160;    r.<a class="code" href="classCanBusResources.html#a36f76a689330cd6163c3f13bb8ac28d9">writePacket</a>();</div>
<div class="line"><a name="l05495"></a><span class="lineno"> 5495</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05496"></a><span class="lineno"> 5496</span>&#160;}</div>
<div class="line"><a name="l05497"></a><span class="lineno"> 5497</span>&#160; </div>
<div class="line"><a name="l05498"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ae7b02f909a65ece5e99aa35b29c8529e"> 5498</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a96bfa233fcea3beaae56851757c38fa7">CanBusMotionControl::positionMoveRaw</a>(<span class="keyword">const</span> <span class="keywordtype">double</span> *refs)</div>
<div class="line"><a name="l05499"></a><span class="lineno"> 5499</span>&#160;{</div>
<div class="line"><a name="l05500"></a><span class="lineno"> 5500</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l05501"></a><span class="lineno"> 5501</span>&#160;    <span class="keywordtype">int</span> i = 0;</div>
<div class="line"><a name="l05502"></a><span class="lineno"> 5502</span>&#160;    <span class="keywordflow">if</span> (refs == 0) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05503"></a><span class="lineno"> 5503</span>&#160;    <span class="keywordtype">bool</span> ret = <span class="keyword">true</span>;</div>
<div class="line"><a name="l05504"></a><span class="lineno"> 5504</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a> (); i++)</div>
<div class="line"><a name="l05505"></a><span class="lineno"> 5505</span>&#160;    {</div>
<div class="line"><a name="l05506"></a><span class="lineno"> 5506</span>&#160;        ret = ret &amp; <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a96bfa233fcea3beaae56851757c38fa7">positionMoveRaw</a>(i, refs[i]);</div>
<div class="line"><a name="l05507"></a><span class="lineno"> 5507</span>&#160;    }</div>
<div class="line"><a name="l05508"></a><span class="lineno"> 5508</span>&#160; </div>
<div class="line"><a name="l05509"></a><span class="lineno"> 5509</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l05510"></a><span class="lineno"> 5510</span>&#160;}</div>
<div class="line"><a name="l05511"></a><span class="lineno"> 5511</span>&#160; </div>
<div class="line"><a name="l05512"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa6881bd76bad201475623452a0f060f0"> 5512</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa6881bd76bad201475623452a0f060f0">CanBusMotionControl::relativeMoveRaw</a>(<span class="keywordtype">int</span> j, <span class="keywordtype">double</span> delta)</div>
<div class="line"><a name="l05513"></a><span class="lineno"> 5513</span>&#160;{</div>
<div class="line"><a name="l05514"></a><span class="lineno"> 5514</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="CanBusMotionControl_8cpp.html#a35a12201dd9ff39ea640f1d8b39f0770">NOT_YET_IMPLEMENTED</a>(<span class="stringliteral">&quot;positionRelative&quot;</span>);</div>
<div class="line"><a name="l05515"></a><span class="lineno"> 5515</span>&#160;}</div>
<div class="line"><a name="l05516"></a><span class="lineno"> 5516</span>&#160; </div>
<div class="line"><a name="l05517"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a8fbeec69193e132d3eeaab2fd930bfda"> 5517</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa6881bd76bad201475623452a0f060f0">CanBusMotionControl::relativeMoveRaw</a>(<span class="keyword">const</span> <span class="keywordtype">double</span> *deltas)</div>
<div class="line"><a name="l05518"></a><span class="lineno"> 5518</span>&#160;{</div>
<div class="line"><a name="l05519"></a><span class="lineno"> 5519</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="CanBusMotionControl_8cpp.html#a35a12201dd9ff39ea640f1d8b39f0770">NOT_YET_IMPLEMENTED</a>(<span class="stringliteral">&quot;positionRelative&quot;</span>);</div>
<div class="line"><a name="l05520"></a><span class="lineno"> 5520</span>&#160;}</div>
<div class="line"><a name="l05521"></a><span class="lineno"> 5521</span>&#160; </div>
<div class="line"><a name="l05523"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a95b5e286a6a36e2c47423ab39a6a6420"> 5523</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a4e7658c799be9e171612809cd43cecd5">CanBusMotionControl::checkMotionDoneRaw</a>(<span class="keywordtype">int</span> axis, <span class="keywordtype">bool</span> *ret)</div>
<div class="line"><a name="l05524"></a><span class="lineno"> 5524</span>&#160;{</div>
<div class="line"><a name="l05525"></a><span class="lineno"> 5525</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>-1)*2))</div>
<div class="line"><a name="l05526"></a><span class="lineno"> 5526</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05527"></a><span class="lineno"> 5527</span>&#160; </div>
<div class="line"><a name="l05528"></a><span class="lineno"> 5528</span>&#160;    <span class="keywordtype">short</span> value;</div>
<div class="line"><a name="l05529"></a><span class="lineno"> 5529</span>&#160; </div>
<div class="line"><a name="l05530"></a><span class="lineno"> 5530</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a41a5714a6c78ee694b7f694be991101a">_readWord16</a> (ICUBCANPROTO_POL_MC_CMD__MOTION_DONE, axis, value))</div>
<div class="line"><a name="l05531"></a><span class="lineno"> 5531</span>&#160;    {</div>
<div class="line"><a name="l05532"></a><span class="lineno"> 5532</span>&#160;        *ret=<span class="keyword">false</span>;</div>
<div class="line"><a name="l05533"></a><span class="lineno"> 5533</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05534"></a><span class="lineno"> 5534</span>&#160;    }</div>
<div class="line"><a name="l05535"></a><span class="lineno"> 5535</span>&#160; </div>
<div class="line"><a name="l05536"></a><span class="lineno"> 5536</span>&#160;    *ret= (value!=0);</div>
<div class="line"><a name="l05537"></a><span class="lineno"> 5537</span>&#160; </div>
<div class="line"><a name="l05538"></a><span class="lineno"> 5538</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05539"></a><span class="lineno"> 5539</span>&#160;}</div>
<div class="line"><a name="l05540"></a><span class="lineno"> 5540</span>&#160; </div>
<div class="line"><a name="l05542"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a4e7658c799be9e171612809cd43cecd5"> 5542</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a4e7658c799be9e171612809cd43cecd5">CanBusMotionControl::checkMotionDoneRaw</a> (<span class="keywordtype">bool</span> *val)</div>
<div class="line"><a name="l05543"></a><span class="lineno"> 5543</span>&#160;{</div>
<div class="line"><a name="l05544"></a><span class="lineno"> 5544</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l05545"></a><span class="lineno"> 5545</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l05546"></a><span class="lineno"> 5546</span>&#160;    <span class="keywordtype">short</span> value;</div>
<div class="line"><a name="l05547"></a><span class="lineno"> 5547</span>&#160; </div>
<div class="line"><a name="l05548"></a><span class="lineno"> 5548</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.lock();</div>
<div class="line"><a name="l05549"></a><span class="lineno"> 5549</span>&#160; </div>
<div class="line"><a name="l05550"></a><span class="lineno"> 5550</span>&#160;    <span class="keywordtype">int</span> id;</div>
<div class="line"><a name="l05551"></a><span class="lineno"> 5551</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a0de6c591abb8d8340378037eccf81951">threadPool</a>-&gt;<a class="code" href="classThreadPool2.html#af3e4ac95d374da92f359286d20bcba65">getId</a>(<span class="keywordtype">id</span>))</div>
<div class="line"><a name="l05552"></a><span class="lineno"> 5552</span>&#160;    {</div>
<div class="line"><a name="l05553"></a><span class="lineno"> 5553</span>&#160;        yError(<span class="stringliteral">&quot;More than %d threads, cannot allow more\n&quot;</span>, <a class="code" href="canControlConstants_8h.html#a3830b8707366b97dd5c993756d89f02d">CANCONTROL_MAX_THREADS</a>);</div>
<div class="line"><a name="l05554"></a><span class="lineno"> 5554</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.unlock();</div>
<div class="line"><a name="l05555"></a><span class="lineno"> 5555</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05556"></a><span class="lineno"> 5556</span>&#160;    }</div>
<div class="line"><a name="l05557"></a><span class="lineno"> 5557</span>&#160; </div>
<div class="line"><a name="l05558"></a><span class="lineno"> 5558</span>&#160;    r.<a class="code" href="classCanBusResources.html#a426cb1e9b09f03d70b8dbccb2346edb8">startPacket</a>();</div>
<div class="line"><a name="l05559"></a><span class="lineno"> 5559</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>(); i++)</div>
<div class="line"><a name="l05560"></a><span class="lineno"> 5560</span>&#160;    {</div>
<div class="line"><a name="l05561"></a><span class="lineno"> 5561</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a56978bb0d722116c2e86777743d17247">ENABLED</a>(i))</div>
<div class="line"><a name="l05562"></a><span class="lineno"> 5562</span>&#160;        {</div>
<div class="line"><a name="l05563"></a><span class="lineno"> 5563</span>&#160;            r.<a class="code" href="classCanBusResources.html#a1049ab4df32ee910f61efbe130ba9b41">addMessage</a> (<span class="keywordtype">id</span>, i, ICUBCANPROTO_POL_MC_CMD__MOTION_DONE);</div>
<div class="line"><a name="l05564"></a><span class="lineno"> 5564</span>&#160;        }</div>
<div class="line"><a name="l05565"></a><span class="lineno"> 5565</span>&#160;    }</div>
<div class="line"><a name="l05566"></a><span class="lineno"> 5566</span>&#160; </div>
<div class="line"><a name="l05567"></a><span class="lineno"> 5567</span>&#160;    <span class="keywordflow">if</span> (r.<a class="code" href="classCanBusResources.html#a781a7267d7eab2315d49720c1d673f29">_writeMessages</a> &lt; 1)</div>
<div class="line"><a name="l05568"></a><span class="lineno"> 5568</span>&#160;    {</div>
<div class="line"><a name="l05569"></a><span class="lineno"> 5569</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.unlock();</div>
<div class="line"><a name="l05570"></a><span class="lineno"> 5570</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05571"></a><span class="lineno"> 5571</span>&#160;    }</div>
<div class="line"><a name="l05572"></a><span class="lineno"> 5572</span>&#160; </div>
<div class="line"><a name="l05573"></a><span class="lineno"> 5573</span>&#160;    r.<a class="code" href="classCanBusResources.html#a36f76a689330cd6163c3f13bb8ac28d9">writePacket</a>(); <span class="comment">//write immediatly</span></div>
<div class="line"><a name="l05574"></a><span class="lineno"> 5574</span>&#160; </div>
<div class="line"><a name="l05575"></a><span class="lineno"> 5575</span>&#160;    <a class="code" href="classThreadTable2.html">ThreadTable2</a> *t=<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a0de6c591abb8d8340378037eccf81951">threadPool</a>-&gt;<a class="code" href="classThreadPool2.html#abed580daad75544f3455f08beaa06cf4">getThreadTable</a>(<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l05576"></a><span class="lineno"> 5576</span>&#160;    t-&gt;<a class="code" href="classThreadTable2.html#adba368aea4ee8d37742e332ed2f4f26e">setPending</a>(r.<a class="code" href="classCanBusResources.html#a781a7267d7eab2315d49720c1d673f29">_writeMessages</a>);</div>
<div class="line"><a name="l05577"></a><span class="lineno"> 5577</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.unlock();</div>
<div class="line"><a name="l05578"></a><span class="lineno"> 5578</span>&#160;    t-&gt;<a class="code" href="classThreadTable2.html#a47cdedbcf45603cf2a45f1758472fbc7">synch</a>();</div>
<div class="line"><a name="l05579"></a><span class="lineno"> 5579</span>&#160; </div>
<div class="line"><a name="l05580"></a><span class="lineno"> 5580</span>&#160;    <span class="keywordflow">if</span> (!r.<a class="code" href="classCanBusResources.html#a1642d0476521a6b0c8f538cef04e2a59">getErrorStatus</a>())</div>
<div class="line"><a name="l05581"></a><span class="lineno"> 5581</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05582"></a><span class="lineno"> 5582</span>&#160; </div>
<div class="line"><a name="l05583"></a><span class="lineno"> 5583</span>&#160;    <span class="keywordtype">int</span> j;</div>
<div class="line"><a name="l05584"></a><span class="lineno"> 5584</span>&#160;    <span class="keywordflow">for</span> (i = 0, j = 0; i &lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>(); i++)</div>
<div class="line"><a name="l05585"></a><span class="lineno"> 5585</span>&#160;    {</div>
<div class="line"><a name="l05586"></a><span class="lineno"> 5586</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a56978bb0d722116c2e86777743d17247">ENABLED</a>(i))</div>
<div class="line"><a name="l05587"></a><span class="lineno"> 5587</span>&#160;        {</div>
<div class="line"><a name="l05588"></a><span class="lineno"> 5588</span>&#160;            CanMessage *m = t-&gt;<a class="code" href="classThreadTable2.html#a5ac48ab511cfb6e31f9b32ba005374b6">getByJoint</a>(i, r.<a class="code" href="classCanBusResources.html#a5eb200eec7f8c10314fc9349f4088ff3">_destInv</a>);</div>
<div class="line"><a name="l05589"></a><span class="lineno"> 5589</span>&#160;            <span class="keywordflow">if</span> ( (m!=0) &amp;&amp; (m-&gt;getId() != 0xffff) )</div>
<div class="line"><a name="l05590"></a><span class="lineno"> 5590</span>&#160;            {</div>
<div class="line"><a name="l05591"></a><span class="lineno"> 5591</span>&#160;                value = *((<span class="keywordtype">short</span> *)(m-&gt;getData()+1));</div>
<div class="line"><a name="l05592"></a><span class="lineno"> 5592</span>&#160;                <span class="keywordflow">if</span> (!value)</div>
<div class="line"><a name="l05593"></a><span class="lineno"> 5593</span>&#160;                {</div>
<div class="line"><a name="l05594"></a><span class="lineno"> 5594</span>&#160;                    *val=<span class="keyword">false</span>;</div>
<div class="line"><a name="l05595"></a><span class="lineno"> 5595</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05596"></a><span class="lineno"> 5596</span>&#160;                }</div>
<div class="line"><a name="l05597"></a><span class="lineno"> 5597</span>&#160;            }</div>
<div class="line"><a name="l05598"></a><span class="lineno"> 5598</span>&#160;            j++;</div>
<div class="line"><a name="l05599"></a><span class="lineno"> 5599</span>&#160;        }</div>
<div class="line"><a name="l05600"></a><span class="lineno"> 5600</span>&#160;    }</div>
<div class="line"><a name="l05601"></a><span class="lineno"> 5601</span>&#160; </div>
<div class="line"><a name="l05602"></a><span class="lineno"> 5602</span>&#160;    t-&gt;<a class="code" href="classThreadTable2.html#a2129ef023b358d00c5b30de7176f2b3e">clear</a>();</div>
<div class="line"><a name="l05603"></a><span class="lineno"> 5603</span>&#160; </div>
<div class="line"><a name="l05604"></a><span class="lineno"> 5604</span>&#160;    *val=<span class="keyword">true</span>;</div>
<div class="line"><a name="l05605"></a><span class="lineno"> 5605</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05606"></a><span class="lineno"> 5606</span>&#160;}</div>
<div class="line"><a name="l05607"></a><span class="lineno"> 5607</span>&#160; </div>
<div class="line"><a name="l05608"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a8d778a17670e47541df4fe4296fa8ef4"> 5608</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a8d778a17670e47541df4fe4296fa8ef4">CanBusMotionControl::calibrateAxisWithParamsRaw</a>(<span class="keywordtype">int</span> axis, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> type, <span class="keywordtype">double</span> p1, <span class="keywordtype">double</span> p2, <span class="keywordtype">double</span> p3)</div>
<div class="line"><a name="l05609"></a><span class="lineno"> 5609</span>&#160;{</div>
<div class="line"><a name="l05610"></a><span class="lineno"> 5610</span>&#160;    <span class="keywordtype">bool</span> b = <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a7e4043b59bbeff7d30f1d85edb84df11">_writeByteWords16</a>(ICUBCANPROTO_POL_MC_CMD__CALIBRATE_ENCODER, axis, type, <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af5c4f789e8b29d4a63d538b48fc9cd77">S_16</a>(p1), <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af5c4f789e8b29d4a63d538b48fc9cd77">S_16</a>(p2), <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af5c4f789e8b29d4a63d538b48fc9cd77">S_16</a>(p3));</div>
<div class="line"><a name="l05611"></a><span class="lineno"> 5611</span>&#160;    <span class="keywordflow">return</span> b;</div>
<div class="line"><a name="l05612"></a><span class="lineno"> 5612</span>&#160;}</div>
<div class="line"><a name="l05613"></a><span class="lineno"> 5613</span>&#160; </div>
<div class="line"><a name="l05614"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ac487a396bb662ac59bf498fe32ef1c37"> 5614</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ac487a396bb662ac59bf498fe32ef1c37">CanBusMotionControl::setCalibrationParametersRaw</a>(<span class="keywordtype">int</span> j, <span class="keyword">const</span> CalibrationParameters&amp; params)</div>
<div class="line"><a name="l05615"></a><span class="lineno"> 5615</span>&#160;{</div>
<div class="line"><a name="l05616"></a><span class="lineno"> 5616</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a8d778a17670e47541df4fe4296fa8ef4">calibrateAxisWithParamsRaw</a>(j, params.type, params.param1, params.param2, params.param3);</div>
<div class="line"><a name="l05617"></a><span class="lineno"> 5617</span>&#160;}</div>
<div class="line"><a name="l05618"></a><span class="lineno"> 5618</span>&#160; </div>
<div class="line"><a name="l05619"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ae7407df4c6b55bbe923fdfa5afb69c7f"> 5619</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ae7407df4c6b55bbe923fdfa5afb69c7f">CanBusMotionControl::setRefSpeedRaw</a>(<span class="keywordtype">int</span> axis, <span class="keywordtype">double</span> sp)</div>
<div class="line"><a name="l05620"></a><span class="lineno"> 5620</span>&#160;{</div>
<div class="line"><a name="l05621"></a><span class="lineno"> 5621</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>-1)*2))</div>
<div class="line"><a name="l05622"></a><span class="lineno"> 5622</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05623"></a><span class="lineno"> 5623</span>&#160; </div>
<div class="line"><a name="l05624"></a><span class="lineno"> 5624</span>&#160;    sp /= 10.0; <span class="comment">// encoder ticks per ms</span></div>
<div class="line"><a name="l05625"></a><span class="lineno"> 5625</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa892a2a25975c1b8d9fc3ec03522cfa1">_ref_speeds</a>[axis] = sp;</div>
<div class="line"><a name="l05626"></a><span class="lineno"> 5626</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05627"></a><span class="lineno"> 5627</span>&#160;}</div>
<div class="line"><a name="l05628"></a><span class="lineno"> 5628</span>&#160; </div>
<div class="line"><a name="l05629"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a196ca3abd5139d92111b6ca128c2ae3c"> 5629</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a196ca3abd5139d92111b6ca128c2ae3c">CanBusMotionControl::setRefSpeedsRaw</a>(<span class="keyword">const</span> <span class="keywordtype">double</span> *spds)</div>
<div class="line"><a name="l05630"></a><span class="lineno"> 5630</span>&#160;{</div>
<div class="line"><a name="l05631"></a><span class="lineno"> 5631</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l05632"></a><span class="lineno"> 5632</span>&#160;    memcpy(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa892a2a25975c1b8d9fc3ec03522cfa1">_ref_speeds</a>, spds, <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>)* r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>());</div>
<div class="line"><a name="l05633"></a><span class="lineno"> 5633</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l05634"></a><span class="lineno"> 5634</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>(); i++)</div>
<div class="line"><a name="l05635"></a><span class="lineno"> 5635</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa892a2a25975c1b8d9fc3ec03522cfa1">_ref_speeds</a>[i] /= 10.0;</div>
<div class="line"><a name="l05636"></a><span class="lineno"> 5636</span>&#160; </div>
<div class="line"><a name="l05637"></a><span class="lineno"> 5637</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05638"></a><span class="lineno"> 5638</span>&#160;}</div>
<div class="line"><a name="l05639"></a><span class="lineno"> 5639</span>&#160; </div>
<div class="line"><a name="l05640"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a26d920313a34bdd2fc33dfdd558df799"> 5640</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a26d920313a34bdd2fc33dfdd558df799">CanBusMotionControl::setRefAccelerationRaw</a>(<span class="keywordtype">int</span> axis, <span class="keywordtype">double</span> <a class="code" href="dataTypes_8h.html#ae0191316140fce1e08c6f21b0a2dbf0a">acc</a>)</div>
<div class="line"><a name="l05641"></a><span class="lineno"> 5641</span>&#160;{</div>
<div class="line"><a name="l05642"></a><span class="lineno"> 5642</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>-1)*2))</div>
<div class="line"><a name="l05643"></a><span class="lineno"> 5643</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05644"></a><span class="lineno"> 5644</span>&#160; </div>
<div class="line"><a name="l05645"></a><span class="lineno"> 5645</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l05646"></a><span class="lineno"> 5646</span>&#160;<span class="comment">    *Acceleration is expressed in imp/s^2. </span></div>
<div class="line"><a name="l05647"></a><span class="lineno"> 5647</span>&#160;<span class="comment">    *We divided it by 1000^2 to express </span></div>
<div class="line"><a name="l05648"></a><span class="lineno"> 5648</span>&#160;<span class="comment">    *it in imp/ms^2</span></div>
<div class="line"><a name="l05649"></a><span class="lineno"> 5649</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l05650"></a><span class="lineno"> 5650</span>&#160;    <a class="code" href="dataTypes_8h.html#ae0191316140fce1e08c6f21b0a2dbf0a">acc</a> /= 1000.0;</div>
<div class="line"><a name="l05651"></a><span class="lineno"> 5651</span>&#160;    <a class="code" href="dataTypes_8h.html#ae0191316140fce1e08c6f21b0a2dbf0a">acc</a> /= 1000.0;</div>
<div class="line"><a name="l05652"></a><span class="lineno"> 5652</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ae7e725d08c542ce4a21f23d834984379">_ref_accs</a>[axis] = <a class="code" href="dataTypes_8h.html#ae0191316140fce1e08c6f21b0a2dbf0a">acc</a>;</div>
<div class="line"><a name="l05653"></a><span class="lineno"> 5653</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">short</span> s = <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af5c4f789e8b29d4a63d538b48fc9cd77">S_16</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ae7e725d08c542ce4a21f23d834984379">_ref_accs</a>[axis]);</div>
<div class="line"><a name="l05654"></a><span class="lineno"> 5654</span>&#160; </div>
<div class="line"><a name="l05655"></a><span class="lineno"> 5655</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a100a40a38da173be134acb6308284b29">_writeWord16</a> (ICUBCANPROTO_POL_MC_CMD__SET_DESIRED_ACCELER, axis, s);</div>
<div class="line"><a name="l05656"></a><span class="lineno"> 5656</span>&#160;}</div>
<div class="line"><a name="l05657"></a><span class="lineno"> 5657</span>&#160; </div>
<div class="line"><a name="l05658"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ad947172b9a8d2b73de893cdc41224af2"> 5658</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ad947172b9a8d2b73de893cdc41224af2">CanBusMotionControl::setRefAccelerationsRaw</a>(<span class="keyword">const</span> <span class="keywordtype">double</span> *accs)</div>
<div class="line"><a name="l05659"></a><span class="lineno"> 5659</span>&#160;{</div>
<div class="line"><a name="l05660"></a><span class="lineno"> 5660</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l05661"></a><span class="lineno"> 5661</span>&#160; </div>
<div class="line"><a name="l05662"></a><span class="lineno"> 5662</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l05663"></a><span class="lineno"> 5663</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>(); i++)</div>
<div class="line"><a name="l05664"></a><span class="lineno"> 5664</span>&#160;    {</div>
<div class="line"><a name="l05665"></a><span class="lineno"> 5665</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l05666"></a><span class="lineno"> 5666</span>&#160;<span class="comment">        *Acceleration is expressed in imp/s^2. </span></div>
<div class="line"><a name="l05667"></a><span class="lineno"> 5667</span>&#160;<span class="comment">        *We divided it by 1000^2 to express </span></div>
<div class="line"><a name="l05668"></a><span class="lineno"> 5668</span>&#160;<span class="comment">        *it in imp/ms^2</span></div>
<div class="line"><a name="l05669"></a><span class="lineno"> 5669</span>&#160;<span class="comment">        */</span></div>
<div class="line"><a name="l05670"></a><span class="lineno"> 5670</span>&#160;        <span class="keywordtype">double</span> <a class="code" href="dataTypes_8h.html#ae0191316140fce1e08c6f21b0a2dbf0a">acc</a>;</div>
<div class="line"><a name="l05671"></a><span class="lineno"> 5671</span>&#160;        <a class="code" href="dataTypes_8h.html#ae0191316140fce1e08c6f21b0a2dbf0a">acc</a> = accs[i]/1000.0;</div>
<div class="line"><a name="l05672"></a><span class="lineno"> 5672</span>&#160;        <a class="code" href="dataTypes_8h.html#ae0191316140fce1e08c6f21b0a2dbf0a">acc</a> /= 1000.0;</div>
<div class="line"><a name="l05673"></a><span class="lineno"> 5673</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ae7e725d08c542ce4a21f23d834984379">_ref_accs</a>[i] = <a class="code" href="dataTypes_8h.html#ae0191316140fce1e08c6f21b0a2dbf0a">acc</a>;</div>
<div class="line"><a name="l05674"></a><span class="lineno"> 5674</span>&#160; </div>
<div class="line"><a name="l05675"></a><span class="lineno"> 5675</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a100a40a38da173be134acb6308284b29">_writeWord16</a> (ICUBCANPROTO_POL_MC_CMD__SET_DESIRED_ACCELER, i, <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af5c4f789e8b29d4a63d538b48fc9cd77">S_16</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ae7e725d08c542ce4a21f23d834984379">_ref_accs</a>[i])))</div>
<div class="line"><a name="l05676"></a><span class="lineno"> 5676</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05677"></a><span class="lineno"> 5677</span>&#160;    }</div>
<div class="line"><a name="l05678"></a><span class="lineno"> 5678</span>&#160; </div>
<div class="line"><a name="l05679"></a><span class="lineno"> 5679</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05680"></a><span class="lineno"> 5680</span>&#160;}</div>
<div class="line"><a name="l05681"></a><span class="lineno"> 5681</span>&#160; </div>
<div class="line"><a name="l05683"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a904f51287296939ef50721ea4d0a59fa"> 5683</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a904f51287296939ef50721ea4d0a59fa">CanBusMotionControl::getRefSpeedsRaw</a> (<span class="keywordtype">double</span> *spds)</div>
<div class="line"><a name="l05684"></a><span class="lineno"> 5684</span>&#160;{</div>
<div class="line"><a name="l05685"></a><span class="lineno"> 5685</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l05686"></a><span class="lineno"> 5686</span>&#160; </div>
<div class="line"><a name="l05687"></a><span class="lineno"> 5687</span>&#160;    memcpy(spds, <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa892a2a25975c1b8d9fc3ec03522cfa1">_ref_speeds</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>)* r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>());</div>
<div class="line"><a name="l05688"></a><span class="lineno"> 5688</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l05689"></a><span class="lineno"> 5689</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>(); i++)</div>
<div class="line"><a name="l05690"></a><span class="lineno"> 5690</span>&#160;        spds[i] *= 10.0;</div>
<div class="line"><a name="l05691"></a><span class="lineno"> 5691</span>&#160; </div>
<div class="line"><a name="l05692"></a><span class="lineno"> 5692</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05693"></a><span class="lineno"> 5693</span>&#160;}</div>
<div class="line"><a name="l05694"></a><span class="lineno"> 5694</span>&#160; </div>
<div class="line"><a name="l05695"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#afd2de980685371cebfa860de6afe6094"> 5695</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#afd2de980685371cebfa860de6afe6094">CanBusMotionControl::getRefSpeedRaw</a> (<span class="keywordtype">int</span> axis, <span class="keywordtype">double</span> *spd)</div>
<div class="line"><a name="l05696"></a><span class="lineno"> 5696</span>&#160;{</div>
<div class="line"><a name="l05697"></a><span class="lineno"> 5697</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>-1)*2))</div>
<div class="line"><a name="l05698"></a><span class="lineno"> 5698</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05699"></a><span class="lineno"> 5699</span>&#160;    *spd = <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa892a2a25975c1b8d9fc3ec03522cfa1">_ref_speeds</a>[axis] * 10.0;</div>
<div class="line"><a name="l05700"></a><span class="lineno"> 5700</span>&#160; </div>
<div class="line"><a name="l05701"></a><span class="lineno"> 5701</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05702"></a><span class="lineno"> 5702</span>&#160;}</div>
<div class="line"><a name="l05703"></a><span class="lineno"> 5703</span>&#160; </div>
<div class="line"><a name="l05705"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ab77e86fff33c35b8f61dc18315966602"> 5705</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ab77e86fff33c35b8f61dc18315966602">CanBusMotionControl::getRefAccelerationsRaw</a> (<span class="keywordtype">double</span> *accs)</div>
<div class="line"><a name="l05706"></a><span class="lineno"> 5706</span>&#160;{</div>
<div class="line"><a name="l05707"></a><span class="lineno"> 5707</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l05708"></a><span class="lineno"> 5708</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l05709"></a><span class="lineno"> 5709</span>&#160;    <span class="keywordtype">short</span> value = 0;</div>
<div class="line"><a name="l05710"></a><span class="lineno"> 5710</span>&#160; </div>
<div class="line"><a name="l05711"></a><span class="lineno"> 5711</span>&#160;    <span class="keywordflow">for</span>(i = 0; i &lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>(); i++)</div>
<div class="line"><a name="l05712"></a><span class="lineno"> 5712</span>&#160;    {</div>
<div class="line"><a name="l05713"></a><span class="lineno"> 5713</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a41a5714a6c78ee694b7f694be991101a">_readWord16</a> (ICUBCANPROTO_POL_MC_CMD__GET_DESIRED_ACCELER, i, value) == <span class="keyword">true</span>) {</div>
<div class="line"><a name="l05714"></a><span class="lineno"> 5714</span>&#160;            <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ae7e725d08c542ce4a21f23d834984379">_ref_accs</a>[i] = accs[i] = double (value);</div>
<div class="line"><a name="l05715"></a><span class="lineno"> 5715</span>&#160;            accs[i] *= 1000.0;</div>
<div class="line"><a name="l05716"></a><span class="lineno"> 5716</span>&#160;            accs[i] *= 1000.0;</div>
<div class="line"><a name="l05717"></a><span class="lineno"> 5717</span>&#160;        }</div>
<div class="line"><a name="l05718"></a><span class="lineno"> 5718</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l05719"></a><span class="lineno"> 5719</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05720"></a><span class="lineno"> 5720</span>&#160;    }</div>
<div class="line"><a name="l05721"></a><span class="lineno"> 5721</span>&#160; </div>
<div class="line"><a name="l05722"></a><span class="lineno"> 5722</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05723"></a><span class="lineno"> 5723</span>&#160;}</div>
<div class="line"><a name="l05724"></a><span class="lineno"> 5724</span>&#160; </div>
<div class="line"><a name="l05726"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a86266c3dc40fd836fdbd1cd04d1f18f5"> 5726</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a86266c3dc40fd836fdbd1cd04d1f18f5">CanBusMotionControl::getRefAccelerationRaw</a> (<span class="keywordtype">int</span> axis, <span class="keywordtype">double</span> *accs)</div>
<div class="line"><a name="l05727"></a><span class="lineno"> 5727</span>&#160;{</div>
<div class="line"><a name="l05728"></a><span class="lineno"> 5728</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>-1)*2))</div>
<div class="line"><a name="l05729"></a><span class="lineno"> 5729</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05730"></a><span class="lineno"> 5730</span>&#160; </div>
<div class="line"><a name="l05731"></a><span class="lineno"> 5731</span>&#160;    <span class="keywordtype">short</span> value = 0;</div>
<div class="line"><a name="l05732"></a><span class="lineno"> 5732</span>&#160; </div>
<div class="line"><a name="l05733"></a><span class="lineno"> 5733</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a41a5714a6c78ee694b7f694be991101a">_readWord16</a> (ICUBCANPROTO_POL_MC_CMD__GET_DESIRED_ACCELER, axis, value) == <span class="keyword">true</span>)</div>
<div class="line"><a name="l05734"></a><span class="lineno"> 5734</span>&#160;    {</div>
<div class="line"><a name="l05735"></a><span class="lineno"> 5735</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ae7e725d08c542ce4a21f23d834984379">_ref_accs</a>[axis] = double (value);</div>
<div class="line"><a name="l05736"></a><span class="lineno"> 5736</span>&#160;        *accs = double(value) * 1000.0 * 1000.0;</div>
<div class="line"><a name="l05737"></a><span class="lineno"> 5737</span>&#160;    }</div>
<div class="line"><a name="l05738"></a><span class="lineno"> 5738</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l05739"></a><span class="lineno"> 5739</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05740"></a><span class="lineno"> 5740</span>&#160; </div>
<div class="line"><a name="l05741"></a><span class="lineno"> 5741</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05742"></a><span class="lineno"> 5742</span>&#160;}</div>
<div class="line"><a name="l05743"></a><span class="lineno"> 5743</span>&#160; </div>
<div class="line"><a name="l05745"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ad6effdecfeccf6d39f5f2f577115c38b"> 5745</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ad6effdecfeccf6d39f5f2f577115c38b">CanBusMotionControl::getRefTorquesRaw</a> (<span class="keywordtype">double</span> *ref_trqs)</div>
<div class="line"><a name="l05746"></a><span class="lineno"> 5746</span>&#160;{</div>
<div class="line"><a name="l05747"></a><span class="lineno"> 5747</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l05748"></a><span class="lineno"> 5748</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l05749"></a><span class="lineno"> 5749</span>&#160;    <span class="keywordtype">short</span> value = 0;</div>
<div class="line"><a name="l05750"></a><span class="lineno"> 5750</span>&#160; </div>
<div class="line"><a name="l05751"></a><span class="lineno"> 5751</span>&#160;    <span class="keywordflow">for</span>(i = 0; i &lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>(); i++)</div>
<div class="line"><a name="l05752"></a><span class="lineno"> 5752</span>&#160;    {</div>
<div class="line"><a name="l05753"></a><span class="lineno"> 5753</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a41a5714a6c78ee694b7f694be991101a">_readWord16</a> (ICUBCANPROTO_POL_MC_CMD__GET_DESIRED_TORQUE, i, value) == <span class="keyword">true</span>) {</div>
<div class="line"><a name="l05754"></a><span class="lineno"> 5754</span>&#160;            <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#abe9ae05191a1daf39f64829e7704bece">_ref_torques</a>[i] = ref_trqs[i] = double (value);</div>
<div class="line"><a name="l05755"></a><span class="lineno"> 5755</span>&#160;        }</div>
<div class="line"><a name="l05756"></a><span class="lineno"> 5756</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l05757"></a><span class="lineno"> 5757</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05758"></a><span class="lineno"> 5758</span>&#160;    }</div>
<div class="line"><a name="l05759"></a><span class="lineno"> 5759</span>&#160; </div>
<div class="line"><a name="l05760"></a><span class="lineno"> 5760</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05761"></a><span class="lineno"> 5761</span>&#160;}</div>
<div class="line"><a name="l05762"></a><span class="lineno"> 5762</span>&#160; </div>
<div class="line"><a name="l05764"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a3460f4c7956afff624247030fd977e28"> 5764</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a3460f4c7956afff624247030fd977e28">CanBusMotionControl::getRefTorqueRaw</a> (<span class="keywordtype">int</span> axis, <span class="keywordtype">double</span> *ref_trq)</div>
<div class="line"><a name="l05765"></a><span class="lineno"> 5765</span>&#160;{</div>
<div class="line"><a name="l05766"></a><span class="lineno"> 5766</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>-1)*2))</div>
<div class="line"><a name="l05767"></a><span class="lineno"> 5767</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05768"></a><span class="lineno"> 5768</span>&#160; </div>
<div class="line"><a name="l05769"></a><span class="lineno"> 5769</span>&#160;    <span class="keywordtype">short</span> value = 0;</div>
<div class="line"><a name="l05770"></a><span class="lineno"> 5770</span>&#160; </div>
<div class="line"><a name="l05771"></a><span class="lineno"> 5771</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a41a5714a6c78ee694b7f694be991101a">_readWord16</a> (ICUBCANPROTO_POL_MC_CMD__GET_DESIRED_TORQUE, axis, value))</div>
<div class="line"><a name="l05772"></a><span class="lineno"> 5772</span>&#160;    {</div>
<div class="line"><a name="l05773"></a><span class="lineno"> 5773</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#abe9ae05191a1daf39f64829e7704bece">_ref_torques</a>[axis] = double (value);</div>
<div class="line"><a name="l05774"></a><span class="lineno"> 5774</span>&#160;        *ref_trq = double (value);</div>
<div class="line"><a name="l05775"></a><span class="lineno"> 5775</span>&#160;    }</div>
<div class="line"><a name="l05776"></a><span class="lineno"> 5776</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l05777"></a><span class="lineno"> 5777</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05778"></a><span class="lineno"> 5778</span>&#160; </div>
<div class="line"><a name="l05779"></a><span class="lineno"> 5779</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05780"></a><span class="lineno"> 5780</span>&#160;}</div>
<div class="line"><a name="l05781"></a><span class="lineno"> 5781</span>&#160; </div>
<div class="line"><a name="l05782"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ab380747605ad8dd73338cd2dce39a2ab"> 5782</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ab380747605ad8dd73338cd2dce39a2ab">CanBusMotionControl::getMotorTorqueParamsRaw</a> (<span class="keywordtype">int</span> axis, MotorTorqueParameters *param)</div>
<div class="line"><a name="l05783"></a><span class="lineno"> 5783</span>&#160;{</div>
<div class="line"><a name="l05784"></a><span class="lineno"> 5784</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l05785"></a><span class="lineno"> 5785</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>-1)*2))</div>
<div class="line"><a name="l05786"></a><span class="lineno"> 5786</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05787"></a><span class="lineno"> 5787</span>&#160; </div>
<div class="line"><a name="l05788"></a><span class="lineno"> 5788</span>&#160;    MotorTorqueParameters pzero;</div>
<div class="line"><a name="l05789"></a><span class="lineno"> 5789</span>&#160;    *param = pzero;</div>
<div class="line"><a name="l05790"></a><span class="lineno"> 5790</span>&#160; </div>
<div class="line"><a name="l05791"></a><span class="lineno"> 5791</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a56978bb0d722116c2e86777743d17247">ENABLED</a>(axis))</div>
<div class="line"><a name="l05792"></a><span class="lineno"> 5792</span>&#160;    {</div>
<div class="line"><a name="l05793"></a><span class="lineno"> 5793</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05794"></a><span class="lineno"> 5794</span>&#160;    }</div>
<div class="line"><a name="l05795"></a><span class="lineno"> 5795</span>&#160; </div>
<div class="line"><a name="l05796"></a><span class="lineno"> 5796</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.lock();</div>
<div class="line"><a name="l05797"></a><span class="lineno"> 5797</span>&#160;    <span class="keywordtype">int</span> id;</div>
<div class="line"><a name="l05798"></a><span class="lineno"> 5798</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a0de6c591abb8d8340378037eccf81951">threadPool</a>-&gt;<a class="code" href="classThreadPool2.html#af3e4ac95d374da92f359286d20bcba65">getId</a>(<span class="keywordtype">id</span>))</div>
<div class="line"><a name="l05799"></a><span class="lineno"> 5799</span>&#160;    {</div>
<div class="line"><a name="l05800"></a><span class="lineno"> 5800</span>&#160;        yError(<span class="stringliteral">&quot;More than %d threads, cannot allow more\n&quot;</span>, <a class="code" href="canControlConstants_8h.html#a3830b8707366b97dd5c993756d89f02d">CANCONTROL_MAX_THREADS</a>);</div>
<div class="line"><a name="l05801"></a><span class="lineno"> 5801</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.unlock();</div>
<div class="line"><a name="l05802"></a><span class="lineno"> 5802</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05803"></a><span class="lineno"> 5803</span>&#160;    }</div>
<div class="line"><a name="l05804"></a><span class="lineno"> 5804</span>&#160; </div>
<div class="line"><a name="l05805"></a><span class="lineno"> 5805</span>&#160;    r.<a class="code" href="classCanBusResources.html#a426cb1e9b09f03d70b8dbccb2346edb8">startPacket</a>();</div>
<div class="line"><a name="l05806"></a><span class="lineno"> 5806</span>&#160;    r.<a class="code" href="classCanBusResources.html#a1049ab4df32ee910f61efbe130ba9b41">addMessage</a> (<span class="keywordtype">id</span>, axis, ICUBCANPROTO_POL_MC_CMD__GET_MOTOR_PARAMS);</div>
<div class="line"><a name="l05807"></a><span class="lineno"> 5807</span>&#160; </div>
<div class="line"><a name="l05808"></a><span class="lineno"> 5808</span>&#160;    r.<a class="code" href="classCanBusResources.html#a36f76a689330cd6163c3f13bb8ac28d9">writePacket</a>();</div>
<div class="line"><a name="l05809"></a><span class="lineno"> 5809</span>&#160; </div>
<div class="line"><a name="l05810"></a><span class="lineno"> 5810</span>&#160;    <a class="code" href="classThreadTable2.html">ThreadTable2</a> *t=<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a0de6c591abb8d8340378037eccf81951">threadPool</a>-&gt;<a class="code" href="classThreadPool2.html#abed580daad75544f3455f08beaa06cf4">getThreadTable</a>(<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l05811"></a><span class="lineno"> 5811</span>&#160;    t-&gt;<a class="code" href="classThreadTable2.html#adba368aea4ee8d37742e332ed2f4f26e">setPending</a>(r.<a class="code" href="classCanBusResources.html#a781a7267d7eab2315d49720c1d673f29">_writeMessages</a>);</div>
<div class="line"><a name="l05812"></a><span class="lineno"> 5812</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.unlock();</div>
<div class="line"><a name="l05813"></a><span class="lineno"> 5813</span>&#160;    t-&gt;<a class="code" href="classThreadTable2.html#a47cdedbcf45603cf2a45f1758472fbc7">synch</a>();</div>
<div class="line"><a name="l05814"></a><span class="lineno"> 5814</span>&#160; </div>
<div class="line"><a name="l05815"></a><span class="lineno"> 5815</span>&#160;    <span class="keywordflow">if</span> (!r.<a class="code" href="classCanBusResources.html#a1642d0476521a6b0c8f538cef04e2a59">getErrorStatus</a>() || (t-&gt;<a class="code" href="classThreadTable2.html#af31e5328380be26902f2c1853ce2cb29">timedOut</a>()))</div>
<div class="line"><a name="l05816"></a><span class="lineno"> 5816</span>&#160;    {</div>
<div class="line"><a name="l05817"></a><span class="lineno"> 5817</span>&#160;        yError(<span class="stringliteral">&quot;getMotorTorqueParamsRaw: message timed out\n&quot;</span>);</div>
<div class="line"><a name="l05818"></a><span class="lineno"> 5818</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05819"></a><span class="lineno"> 5819</span>&#160;    }</div>
<div class="line"><a name="l05820"></a><span class="lineno"> 5820</span>&#160; </div>
<div class="line"><a name="l05821"></a><span class="lineno"> 5821</span>&#160;    CanMessage *m=t-&gt;<a class="code" href="classThreadTable2.html#afbbc874a92650328926f44d8638dc618">get</a>(0);</div>
<div class="line"><a name="l05822"></a><span class="lineno"> 5822</span>&#160;    <span class="keywordflow">if</span> (m==0)</div>
<div class="line"><a name="l05823"></a><span class="lineno"> 5823</span>&#160;    {</div>
<div class="line"><a name="l05824"></a><span class="lineno"> 5824</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05825"></a><span class="lineno"> 5825</span>&#160;    }</div>
<div class="line"><a name="l05826"></a><span class="lineno"> 5826</span>&#160; </div>
<div class="line"><a name="l05827"></a><span class="lineno"> 5827</span>&#160;    param-&gt;bemf = *((<span class="keywordtype">short</span> *)(m-&gt;getData()+1)); <span class="comment">//1&amp;2</span></div>
<div class="line"><a name="l05828"></a><span class="lineno"> 5828</span>&#160;    param-&gt;bemf_scale = 0;</div>
<div class="line"><a name="l05829"></a><span class="lineno"> 5829</span>&#160;    param-&gt;ktau = *((<span class="keywordtype">short</span> *)(m-&gt;getData()+4)); <span class="comment">//4&amp;5 </span></div>
<div class="line"><a name="l05830"></a><span class="lineno"> 5830</span>&#160;    param-&gt;ktau_scale = 0;</div>
<div class="line"><a name="l05831"></a><span class="lineno"> 5831</span>&#160;    <span class="comment">//7 dummy</span></div>
<div class="line"><a name="l05832"></a><span class="lineno"> 5832</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05833"></a><span class="lineno"> 5833</span>&#160;}</div>
<div class="line"><a name="l05834"></a><span class="lineno"> 5834</span>&#160; </div>
<div class="line"><a name="l05835"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a54ab847f95be3ccd3d0d33b39437c3ba"> 5835</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a54ab847f95be3ccd3d0d33b39437c3ba">CanBusMotionControl::getFilterTypeRaw</a>(<span class="keywordtype">int</span> j, <span class="keywordtype">int</span>* type)</div>
<div class="line"><a name="l05836"></a><span class="lineno"> 5836</span>&#160;{</div>
<div class="line"><a name="l05837"></a><span class="lineno"> 5837</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> axis = j;</div>
<div class="line"><a name="l05838"></a><span class="lineno"> 5838</span>&#160; </div>
<div class="line"><a name="l05840"></a><span class="lineno"> 5840</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l05841"></a><span class="lineno"> 5841</span>&#160; </div>
<div class="line"><a name="l05842"></a><span class="lineno"> 5842</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a> - 1) * 2))</div>
<div class="line"><a name="l05843"></a><span class="lineno"> 5843</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05844"></a><span class="lineno"> 5844</span>&#160; </div>
<div class="line"><a name="l05845"></a><span class="lineno"> 5845</span>&#160;    <span class="keywordtype">int</span> val = 0;</div>
<div class="line"><a name="l05846"></a><span class="lineno"> 5846</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a0c8ca57697ca8c81f8b798b1b59d55ae">_readByte8</a>(ICUBCANPROTO_POL_MC_CMD__GET_TCFILTER_TYPE, axis, val))</div>
<div class="line"><a name="l05847"></a><span class="lineno"> 5847</span>&#160;    {</div>
<div class="line"><a name="l05848"></a><span class="lineno"> 5848</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05849"></a><span class="lineno"> 5849</span>&#160;    }</div>
<div class="line"><a name="l05850"></a><span class="lineno"> 5850</span>&#160;    *type = val;</div>
<div class="line"><a name="l05851"></a><span class="lineno"> 5851</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05852"></a><span class="lineno"> 5852</span>&#160;}</div>
<div class="line"><a name="l05853"></a><span class="lineno"> 5853</span>&#160; </div>
<div class="line"><a name="l05854"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#abc0ee2abe55ebb081094106e63db584c"> 5854</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#abc0ee2abe55ebb081094106e63db584c">CanBusMotionControl::setFilterTypeRaw</a> (<span class="keywordtype">int</span> j, <span class="keywordtype">int</span> type)</div>
<div class="line"><a name="l05855"></a><span class="lineno"> 5855</span>&#160;{</div>
<div class="line"><a name="l05856"></a><span class="lineno"> 5856</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> axis = j;</div>
<div class="line"><a name="l05857"></a><span class="lineno"> 5857</span>&#160; </div>
<div class="line"><a name="l05859"></a><span class="lineno"> 5859</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l05860"></a><span class="lineno"> 5860</span>&#160; </div>
<div class="line"><a name="l05861"></a><span class="lineno"> 5861</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>-1)*2))</div>
<div class="line"><a name="l05862"></a><span class="lineno"> 5862</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05863"></a><span class="lineno"> 5863</span>&#160; </div>
<div class="line"><a name="l05864"></a><span class="lineno"> 5864</span>&#160;    std::lock_guard&lt;std::recursive_mutex&gt; lck(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>);</div>
<div class="line"><a name="l05865"></a><span class="lineno"> 5865</span>&#160;    r.<a class="code" href="classCanBusResources.html#a426cb1e9b09f03d70b8dbccb2346edb8">startPacket</a>();</div>
<div class="line"><a name="l05866"></a><span class="lineno"> 5866</span>&#160;    r.<a class="code" href="classCanBusResources.html#a1049ab4df32ee910f61efbe130ba9b41">addMessage</a> (ICUBCANPROTO_POL_MC_CMD__SET_TCFILTER_TYPE, axis);</div>
<div class="line"><a name="l05867"></a><span class="lineno"> 5867</span>&#160;    *((<span class="keywordtype">short</span> *)(r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()+1)) = <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af5c4f789e8b29d4a63d538b48fc9cd77">S_16</a>(type);</div>
<div class="line"><a name="l05868"></a><span class="lineno"> 5868</span>&#160;    r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].setLen(2);</div>
<div class="line"><a name="l05869"></a><span class="lineno"> 5869</span>&#160;    r.<a class="code" href="classCanBusResources.html#a36f76a689330cd6163c3f13bb8ac28d9">writePacket</a>();</div>
<div class="line"><a name="l05870"></a><span class="lineno"> 5870</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05871"></a><span class="lineno"> 5871</span>&#160;}</div>
<div class="line"><a name="l05872"></a><span class="lineno"> 5872</span>&#160; </div>
<div class="line"><a name="l05873"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af0a19ea62af20604ad5068e6d471652c"> 5873</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af0a19ea62af20604ad5068e6d471652c">CanBusMotionControl::setMotorTorqueParamsRaw</a> (<span class="keywordtype">int</span> j, MotorTorqueParameters param)</div>
<div class="line"><a name="l05874"></a><span class="lineno"> 5874</span>&#160;{</div>
<div class="line"><a name="l05875"></a><span class="lineno"> 5875</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> axis = j;</div>
<div class="line"><a name="l05876"></a><span class="lineno"> 5876</span>&#160; </div>
<div class="line"><a name="l05878"></a><span class="lineno"> 5878</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l05879"></a><span class="lineno"> 5879</span>&#160; </div>
<div class="line"><a name="l05880"></a><span class="lineno"> 5880</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>-1)*2))</div>
<div class="line"><a name="l05881"></a><span class="lineno"> 5881</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05882"></a><span class="lineno"> 5882</span>&#160; </div>
<div class="line"><a name="l05883"></a><span class="lineno"> 5883</span>&#160;    std::lock_guard&lt;std::recursive_mutex&gt; lck(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>);</div>
<div class="line"><a name="l05884"></a><span class="lineno"> 5884</span>&#160;    r.<a class="code" href="classCanBusResources.html#a426cb1e9b09f03d70b8dbccb2346edb8">startPacket</a>();</div>
<div class="line"><a name="l05885"></a><span class="lineno"> 5885</span>&#160;    r.<a class="code" href="classCanBusResources.html#a1049ab4df32ee910f61efbe130ba9b41">addMessage</a> (ICUBCANPROTO_POL_MC_CMD__SET_MOTOR_PARAMS, axis);</div>
<div class="line"><a name="l05886"></a><span class="lineno"> 5886</span>&#160;    *((<span class="keywordtype">short</span> *)(r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()+1)) = <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af5c4f789e8b29d4a63d538b48fc9cd77">S_16</a>(param.bemf);</div>
<div class="line"><a name="l05887"></a><span class="lineno"> 5887</span>&#160;    *((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>  *)(r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()+3)) = (<span class="keywordtype">unsigned</span> char) (param.bemf_scale);</div>
<div class="line"><a name="l05888"></a><span class="lineno"> 5888</span>&#160;    *((<span class="keywordtype">short</span> *)(r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()+4)) = <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af5c4f789e8b29d4a63d538b48fc9cd77">S_16</a>(param.ktau);</div>
<div class="line"><a name="l05889"></a><span class="lineno"> 5889</span>&#160;    *((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>  *)(r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()+6)) = (<span class="keywordtype">unsigned</span> char) (param.ktau_scale);</div>
<div class="line"><a name="l05890"></a><span class="lineno"> 5890</span>&#160;    *((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>  *)(r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()+7)) = (<span class="keywordtype">unsigned</span> char) (0);</div>
<div class="line"><a name="l05891"></a><span class="lineno"> 5891</span>&#160;    r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].setLen(8);</div>
<div class="line"><a name="l05892"></a><span class="lineno"> 5892</span>&#160;    r.<a class="code" href="classCanBusResources.html#a36f76a689330cd6163c3f13bb8ac28d9">writePacket</a>();</div>
<div class="line"><a name="l05893"></a><span class="lineno"> 5893</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05894"></a><span class="lineno"> 5894</span>&#160;}</div>
<div class="line"><a name="l05895"></a><span class="lineno"> 5895</span>&#160; </div>
<div class="line"><a name="l05896"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ae72c6ff283276dfcc602e095beacf3e6"> 5896</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a2c64ab9c1bb700af940611bc271248d0">CanBusMotionControl::stopRaw</a>(<span class="keywordtype">int</span> j)</div>
<div class="line"><a name="l05897"></a><span class="lineno"> 5897</span>&#160;{</div>
<div class="line"><a name="l05898"></a><span class="lineno"> 5898</span>&#160;    <span class="keywordtype">bool</span> ret = <span class="keyword">true</span>;</div>
<div class="line"><a name="l05899"></a><span class="lineno"> 5899</span>&#160;    ret &amp;= <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a893086dd6dade4b2fec570798f52262f">_writeNone</a>  (ICUBCANPROTO_POL_MC_CMD__STOP_TRAJECTORY, j);</div>
<div class="line"><a name="l05900"></a><span class="lineno"> 5900</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l05901"></a><span class="lineno"> 5901</span>&#160;}</div>
<div class="line"><a name="l05902"></a><span class="lineno"> 5902</span>&#160; </div>
<div class="line"><a name="l05903"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a2c64ab9c1bb700af940611bc271248d0"> 5903</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a2c64ab9c1bb700af940611bc271248d0">CanBusMotionControl::stopRaw</a>()</div>
<div class="line"><a name="l05904"></a><span class="lineno"> 5904</span>&#160;{</div>
<div class="line"><a name="l05905"></a><span class="lineno"> 5905</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l05906"></a><span class="lineno"> 5906</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="debugFunctions_8cpp.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a>=r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>();</div>
<div class="line"><a name="l05907"></a><span class="lineno"> 5907</span>&#160;    <span class="keywordtype">bool</span> ret = <span class="keyword">true</span>;</div>
<div class="line"><a name="l05908"></a><span class="lineno"> 5908</span>&#160; </div>
<div class="line"><a name="l05909"></a><span class="lineno"> 5909</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j&lt;<a class="code" href="debugFunctions_8cpp.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a>; j++)</div>
<div class="line"><a name="l05910"></a><span class="lineno"> 5910</span>&#160;    {</div>
<div class="line"><a name="l05911"></a><span class="lineno"> 5911</span>&#160;       ret &amp;= <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a893086dd6dade4b2fec570798f52262f">_writeNone</a>  (ICUBCANPROTO_POL_MC_CMD__STOP_TRAJECTORY, j);</div>
<div class="line"><a name="l05912"></a><span class="lineno"> 5912</span>&#160;    }</div>
<div class="line"><a name="l05913"></a><span class="lineno"> 5913</span>&#160;    </div>
<div class="line"><a name="l05914"></a><span class="lineno"> 5914</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l05915"></a><span class="lineno"> 5915</span>&#160;}</div>
<div class="line"><a name="l05916"></a><span class="lineno"> 5916</span>&#160; </div>
<div class="line"><a name="l05919"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ab9883108643d2bf367239e7d7e1d3d08"> 5919</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ab9883108643d2bf367239e7d7e1d3d08">CanBusMotionControl::velocityMoveRaw</a> (<span class="keywordtype">int</span> axis, <span class="keywordtype">double</span> sp)</div>
<div class="line"><a name="l05920"></a><span class="lineno"> 5920</span>&#160;{</div>
<div class="line"><a name="l05922"></a><span class="lineno"> 5922</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l05923"></a><span class="lineno"> 5923</span>&#160; </div>
<div class="line"><a name="l05924"></a><span class="lineno"> 5924</span>&#160;    <span class="keywordtype">int</span> mode = 0;</div>
<div class="line"><a name="l05925"></a><span class="lineno"> 5925</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a70e12eba89c67a6805b978e8fd839685">getControlModeRaw</a>(axis, &amp;mode);</div>
<div class="line"><a name="l05926"></a><span class="lineno"> 5926</span>&#160;    <span class="keywordflow">if</span> (mode != VOCAB_CM_VELOCITY &amp;&amp;</div>
<div class="line"><a name="l05927"></a><span class="lineno"> 5927</span>&#160;        mode != VOCAB_CM_MIXED    &amp;&amp;</div>
<div class="line"><a name="l05928"></a><span class="lineno"> 5928</span>&#160;        mode != VOCAB_CM_IMPEDANCE_VEL &amp;&amp; </div>
<div class="line"><a name="l05929"></a><span class="lineno"> 5929</span>&#160;        mode != VOCAB_CM_IDLE)</div>
<div class="line"><a name="l05930"></a><span class="lineno"> 5930</span>&#160;    {</div>
<div class="line"><a name="l05931"></a><span class="lineno"> 5931</span>&#160;        yError() &lt;&lt; <span class="stringliteral">&quot;velocityMoveRaw: skipping command because &quot;</span> &lt;&lt; networkName.c_str() &lt;&lt; <span class="stringliteral">&quot; joint &quot;</span> &lt;&lt; axis &lt;&lt; <span class="stringliteral">&quot;is not in VOCAB_CM_VELOCITY mode&quot;</span>;</div>
<div class="line"><a name="l05932"></a><span class="lineno"> 5932</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05933"></a><span class="lineno"> 5933</span>&#160;    }</div>
<div class="line"><a name="l05934"></a><span class="lineno"> 5934</span>&#160; </div>
<div class="line"><a name="l05935"></a><span class="lineno"> 5935</span>&#160;    std::lock_guard&lt;std::recursive_mutex&gt; lck(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>);</div>
<div class="line"><a name="l05936"></a><span class="lineno"> 5936</span>&#160; </div>
<div class="line"><a name="l05937"></a><span class="lineno"> 5937</span>&#160;    r.<a class="code" href="classCanBusResources.html#a426cb1e9b09f03d70b8dbccb2346edb8">startPacket</a>();</div>
<div class="line"><a name="l05938"></a><span class="lineno"> 5938</span>&#160; </div>
<div class="line"><a name="l05939"></a><span class="lineno"> 5939</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a56978bb0d722116c2e86777743d17247">ENABLED</a> (axis))</div>
<div class="line"><a name="l05940"></a><span class="lineno"> 5940</span>&#160;    {</div>
<div class="line"><a name="l05941"></a><span class="lineno"> 5941</span>&#160;        r.<a class="code" href="classCanBusResources.html#a1049ab4df32ee910f61efbe130ba9b41">addMessage</a> (ICUBCANPROTO_POL_MC_CMD__VELOCITY_MOVE, axis);</div>
<div class="line"><a name="l05942"></a><span class="lineno"> 5942</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> j = r.<a class="code" href="classCanBusResources.html#a781a7267d7eab2315d49720c1d673f29">_writeMessages</a> - 1;</div>
<div class="line"><a name="l05943"></a><span class="lineno"> 5943</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#acb562cd6f8c00ca3e0bbb1f716093131">_ref_command_speeds</a>[axis] = sp / 1000.0;</div>
<div class="line"><a name="l05944"></a><span class="lineno"> 5944</span>&#160; </div>
<div class="line"><a name="l05945"></a><span class="lineno"> 5945</span>&#160;        *((<span class="keywordtype">short</span>*)(r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[j].getData() + 1)) = <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af5c4f789e8b29d4a63d538b48fc9cd77">S_16</a>(r.<a class="code" href="classCanBusResources.html#a1db33f4c5115794fad9dbe81c0108f46">_velShifts</a>[axis] * <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#acb562cd6f8c00ca3e0bbb1f716093131">_ref_command_speeds</a>[axis]);</div>
<div class="line"><a name="l05946"></a><span class="lineno"> 5946</span>&#160; </div>
<div class="line"><a name="l05947"></a><span class="lineno"> 5947</span>&#160;        <span class="keywordflow">if</span> (r.<a class="code" href="classCanBusResources.html#a1db33f4c5115794fad9dbe81c0108f46">_velShifts</a>[axis]*<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ae7e725d08c542ce4a21f23d834984379">_ref_accs</a>[axis]&gt;1)</div>
<div class="line"><a name="l05948"></a><span class="lineno"> 5948</span>&#160;            *((<span class="keywordtype">short</span>*)(r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[j].getData()+3)) = <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af5c4f789e8b29d4a63d538b48fc9cd77">S_16</a>(r.<a class="code" href="classCanBusResources.html#a1db33f4c5115794fad9dbe81c0108f46">_velShifts</a>[axis]*<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ae7e725d08c542ce4a21f23d834984379">_ref_accs</a>[axis]);</div>
<div class="line"><a name="l05949"></a><span class="lineno"> 5949</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l05950"></a><span class="lineno"> 5950</span>&#160;            *((<span class="keywordtype">short</span>*)(r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[j].getData()+3)) = <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af5c4f789e8b29d4a63d538b48fc9cd77">S_16</a>(1);</div>
<div class="line"><a name="l05951"></a><span class="lineno"> 5951</span>&#160; </div>
<div class="line"><a name="l05952"></a><span class="lineno"> 5952</span>&#160;        r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[j].setLen(5);</div>
<div class="line"><a name="l05953"></a><span class="lineno"> 5953</span>&#160;    }</div>
<div class="line"><a name="l05954"></a><span class="lineno"> 5954</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l05955"></a><span class="lineno"> 5955</span>&#160;    {</div>
<div class="line"><a name="l05956"></a><span class="lineno"> 5956</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#acb562cd6f8c00ca3e0bbb1f716093131">_ref_command_speeds</a>[axis] = sp / 1000.0;</div>
<div class="line"><a name="l05957"></a><span class="lineno"> 5957</span>&#160;    }</div>
<div class="line"><a name="l05958"></a><span class="lineno"> 5958</span>&#160; </div>
<div class="line"><a name="l05959"></a><span class="lineno"> 5959</span>&#160;    r.<a class="code" href="classCanBusResources.html#a36f76a689330cd6163c3f13bb8ac28d9">writePacket</a>();</div>
<div class="line"><a name="l05960"></a><span class="lineno"> 5960</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05961"></a><span class="lineno"> 5961</span>&#160;}</div>
<div class="line"><a name="l05962"></a><span class="lineno"> 5962</span>&#160; </div>
<div class="line"><a name="l05965"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a2c2b9d9ec6e42efbce034eaf697fe4c0"> 5965</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ab9883108643d2bf367239e7d7e1d3d08">CanBusMotionControl::velocityMoveRaw</a> (<span class="keyword">const</span> <span class="keywordtype">double</span> *sp)</div>
<div class="line"><a name="l05966"></a><span class="lineno"> 5966</span>&#160;{</div>
<div class="line"><a name="l05967"></a><span class="lineno"> 5967</span>&#160;    <span class="keywordflow">if</span> (sp==0) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05968"></a><span class="lineno"> 5968</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l05969"></a><span class="lineno"> 5969</span>&#160;    <span class="keywordtype">bool</span> ret = <span class="keyword">true</span>;</div>
<div class="line"><a name="l05970"></a><span class="lineno"> 5970</span>&#160;    <span class="keywordtype">int</span> j=0;</div>
<div class="line"><a name="l05971"></a><span class="lineno"> 5971</span>&#160;    <span class="keywordflow">for</span>(j=0; j&lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>(); j++)</div>
<div class="line"><a name="l05972"></a><span class="lineno"> 5972</span>&#160;    {</div>
<div class="line"><a name="l05973"></a><span class="lineno"> 5973</span>&#160;        ret = ret &amp;&amp; <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ab9883108643d2bf367239e7d7e1d3d08">velocityMoveRaw</a>(j, sp[j]);</div>
<div class="line"><a name="l05974"></a><span class="lineno"> 5974</span>&#160;    }</div>
<div class="line"><a name="l05975"></a><span class="lineno"> 5975</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l05976"></a><span class="lineno"> 5976</span>&#160;}</div>
<div class="line"><a name="l05977"></a><span class="lineno"> 5977</span>&#160; </div>
<div class="line"><a name="l05978"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a04de8a391b709a777e33b34f65e082aa"> 5978</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a04de8a391b709a777e33b34f65e082aa">CanBusMotionControl::setEncoderRaw</a>(<span class="keywordtype">int</span> j, <span class="keywordtype">double</span> val)</div>
<div class="line"><a name="l05979"></a><span class="lineno"> 5979</span>&#160;{</div>
<div class="line"><a name="l05980"></a><span class="lineno"> 5980</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> axis = j;</div>
<div class="line"><a name="l05981"></a><span class="lineno"> 5981</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>-1)*2))</div>
<div class="line"><a name="l05982"></a><span class="lineno"> 5982</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05983"></a><span class="lineno"> 5983</span>&#160; </div>
<div class="line"><a name="l05984"></a><span class="lineno"> 5984</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a3c5883fff29d225096173b0209107362">_writeDWord</a> (ICUBCANPROTO_POL_MC_CMD__SET_ENCODER_POSITION, axis, <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ae6ad0f0f8abc5fcd9469978a25c22e7a">S_32</a>(val));</div>
<div class="line"><a name="l05985"></a><span class="lineno"> 5985</span>&#160;}</div>
<div class="line"><a name="l05986"></a><span class="lineno"> 5986</span>&#160; </div>
<div class="line"><a name="l05987"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aec9e9f394703224e97edbee245c7c405"> 5987</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aec9e9f394703224e97edbee245c7c405">CanBusMotionControl::setEncodersRaw</a>(<span class="keyword">const</span> <span class="keywordtype">double</span> *vals)</div>
<div class="line"><a name="l05988"></a><span class="lineno"> 5988</span>&#160;{</div>
<div class="line"><a name="l05989"></a><span class="lineno"> 5989</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l05990"></a><span class="lineno"> 5990</span>&#160; </div>
<div class="line"><a name="l05991"></a><span class="lineno"> 5991</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l05992"></a><span class="lineno"> 5992</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>(); i++)</div>
<div class="line"><a name="l05993"></a><span class="lineno"> 5993</span>&#160;    {</div>
<div class="line"><a name="l05994"></a><span class="lineno"> 5994</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a3c5883fff29d225096173b0209107362">_writeDWord</a> (ICUBCANPROTO_POL_MC_CMD__SET_ENCODER_POSITION, i, <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ae6ad0f0f8abc5fcd9469978a25c22e7a">S_32</a>(vals[i])) != <span class="keyword">true</span>)</div>
<div class="line"><a name="l05995"></a><span class="lineno"> 5995</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05996"></a><span class="lineno"> 5996</span>&#160;    }</div>
<div class="line"><a name="l05997"></a><span class="lineno"> 5997</span>&#160; </div>
<div class="line"><a name="l05998"></a><span class="lineno"> 5998</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05999"></a><span class="lineno"> 5999</span>&#160;}</div>
<div class="line"><a name="l06000"></a><span class="lineno"> 6000</span>&#160; </div>
<div class="line"><a name="l06001"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ac2df9083b7693c20112789bbe9234f71"> 6001</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ac2df9083b7693c20112789bbe9234f71">CanBusMotionControl::resetEncoderRaw</a>(<span class="keywordtype">int</span> j)</div>
<div class="line"><a name="l06002"></a><span class="lineno"> 6002</span>&#160;{</div>
<div class="line"><a name="l06003"></a><span class="lineno"> 6003</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a04de8a391b709a777e33b34f65e082aa">setEncoderRaw</a>(j, 0);</div>
<div class="line"><a name="l06004"></a><span class="lineno"> 6004</span>&#160;}</div>
<div class="line"><a name="l06005"></a><span class="lineno"> 6005</span>&#160; </div>
<div class="line"><a name="l06006"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a39fcd6bd101753e1b3a6e8b1819bfc8d"> 6006</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a39fcd6bd101753e1b3a6e8b1819bfc8d">CanBusMotionControl::resetEncodersRaw</a>()</div>
<div class="line"><a name="l06007"></a><span class="lineno"> 6007</span>&#160;{</div>
<div class="line"><a name="l06008"></a><span class="lineno"> 6008</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="debugFunctions_8cpp.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a>=<a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>).<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>();</div>
<div class="line"><a name="l06009"></a><span class="lineno"> 6009</span>&#160;    <span class="keywordtype">double</span> *<a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a> = <span class="keyword">new</span> <span class="keywordtype">double</span> [<a class="code" href="debugFunctions_8cpp.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a>];</div>
<div class="line"><a name="l06010"></a><span class="lineno"> 6010</span>&#160;    ACE_ASSERT (<a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a> != NULL);</div>
<div class="line"><a name="l06011"></a><span class="lineno"> 6011</span>&#160; </div>
<div class="line"><a name="l06012"></a><span class="lineno"> 6012</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;<a class="code" href="debugFunctions_8cpp.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a>;i++)</div>
<div class="line"><a name="l06013"></a><span class="lineno"> 6013</span>&#160;        <a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a>[i]=0;</div>
<div class="line"><a name="l06014"></a><span class="lineno"> 6014</span>&#160; </div>
<div class="line"><a name="l06015"></a><span class="lineno"> 6015</span>&#160;    <span class="keywordtype">bool</span> ret= <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aec9e9f394703224e97edbee245c7c405">setEncodersRaw</a>(<a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a>);</div>
<div class="line"><a name="l06016"></a><span class="lineno"> 6016</span>&#160; </div>
<div class="line"><a name="l06017"></a><span class="lineno"> 6017</span>&#160;    <span class="keyword">delete</span> [] <a class="code" href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">tmp</a>;</div>
<div class="line"><a name="l06018"></a><span class="lineno"> 6018</span>&#160; </div>
<div class="line"><a name="l06019"></a><span class="lineno"> 6019</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l06020"></a><span class="lineno"> 6020</span>&#160;}</div>
<div class="line"><a name="l06021"></a><span class="lineno"> 6021</span>&#160; </div>
<div class="line"><a name="l06022"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a2c7b55ce33c01fef128c2f81debd2da8"> 6022</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a2c7b55ce33c01fef128c2f81debd2da8">CanBusMotionControl::getEncodersRaw</a>(<span class="keywordtype">double</span> *v)</div>
<div class="line"><a name="l06023"></a><span class="lineno"> 6023</span>&#160;{</div>
<div class="line"><a name="l06024"></a><span class="lineno"> 6024</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l06025"></a><span class="lineno"> 6025</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l06026"></a><span class="lineno"> 6026</span>&#160; </div>
<div class="line"><a name="l06027"></a><span class="lineno"> 6027</span>&#160;    std::lock_guard&lt;std::recursive_mutex&gt; lck(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>);</div>
<div class="line"><a name="l06028"></a><span class="lineno"> 6028</span>&#160;    </div>
<div class="line"><a name="l06029"></a><span class="lineno"> 6029</span>&#160;    <span class="keywordtype">double</span> stamp=0;</div>
<div class="line"><a name="l06030"></a><span class="lineno"> 6030</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>(); i++) {</div>
<div class="line"><a name="l06031"></a><span class="lineno"> 6031</span>&#160;        v[i] = double(r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[i].<a class="code" href="classBCastBufferElement.html#af9b2502ea8bef890aec0d7f70205e2c0">_position_joint</a>.<a class="code" href="structBCastElement.html#a048622f3390102c83b081b8799ac97d1">_value</a>);</div>
<div class="line"><a name="l06032"></a><span class="lineno"> 6032</span>&#160; </div>
<div class="line"><a name="l06033"></a><span class="lineno"> 6033</span>&#160;        <span class="keywordflow">if</span> (stamp&lt;r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[i].<a class="code" href="classBCastBufferElement.html#af9b2502ea8bef890aec0d7f70205e2c0">_position_joint</a>.<a class="code" href="structBCastElement.html#abe5b0e1af1d11df4b9e32bd1e43555fa">_stamp</a>)</div>
<div class="line"><a name="l06034"></a><span class="lineno"> 6034</span>&#160;            stamp=r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[i].<a class="code" href="classBCastBufferElement.html#af9b2502ea8bef890aec0d7f70205e2c0">_position_joint</a>.<a class="code" href="structBCastElement.html#abe5b0e1af1d11df4b9e32bd1e43555fa">_stamp</a>;</div>
<div class="line"><a name="l06035"></a><span class="lineno"> 6035</span>&#160;    }</div>
<div class="line"><a name="l06036"></a><span class="lineno"> 6036</span>&#160; </div>
<div class="line"><a name="l06037"></a><span class="lineno"> 6037</span>&#160;    stampEncoders.update(stamp);</div>
<div class="line"><a name="l06038"></a><span class="lineno"> 6038</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l06039"></a><span class="lineno"> 6039</span>&#160;}</div>
<div class="line"><a name="l06040"></a><span class="lineno"> 6040</span>&#160; </div>
<div class="line"><a name="l06041"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a4221e933dd6de9c0e15e90d50faa409d"> 6041</a></span>&#160;Stamp <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a4221e933dd6de9c0e15e90d50faa409d">CanBusMotionControl::getLastInputStamp</a>()</div>
<div class="line"><a name="l06042"></a><span class="lineno"> 6042</span>&#160;{</div>
<div class="line"><a name="l06043"></a><span class="lineno"> 6043</span>&#160;    std::lock_guard&lt;std::recursive_mutex&gt; lck(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>);</div>
<div class="line"><a name="l06044"></a><span class="lineno"> 6044</span>&#160;    Stamp ret=stampEncoders;</div>
<div class="line"><a name="l06045"></a><span class="lineno"> 6045</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l06046"></a><span class="lineno"> 6046</span>&#160;}</div>
<div class="line"><a name="l06047"></a><span class="lineno"> 6047</span>&#160; </div>
<div class="line"><a name="l06048"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a270549824ae8e51788213867a918a2b0"> 6048</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a270549824ae8e51788213867a918a2b0">CanBusMotionControl::getEncoderRaw</a>(<span class="keywordtype">int</span> axis, <span class="keywordtype">double</span> *v)</div>
<div class="line"><a name="l06049"></a><span class="lineno"> 6049</span>&#160;{</div>
<div class="line"><a name="l06050"></a><span class="lineno"> 6050</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l06051"></a><span class="lineno"> 6051</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>()))<span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l06052"></a><span class="lineno"> 6052</span>&#160; </div>
<div class="line"><a name="l06053"></a><span class="lineno"> 6053</span>&#160;    std::lock_guard&lt;std::recursive_mutex&gt; lck(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>);</div>
<div class="line"><a name="l06054"></a><span class="lineno"> 6054</span>&#160;    *v = double(r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[axis].<a class="code" href="classBCastBufferElement.html#af9b2502ea8bef890aec0d7f70205e2c0">_position_joint</a>.<a class="code" href="structBCastElement.html#a048622f3390102c83b081b8799ac97d1">_value</a>);</div>
<div class="line"><a name="l06055"></a><span class="lineno"> 6055</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l06056"></a><span class="lineno"> 6056</span>&#160;}</div>
<div class="line"><a name="l06057"></a><span class="lineno"> 6057</span>&#160; </div>
<div class="line"><a name="l06058"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a427f1c66bcf0bd7a9a593c59516bb238"> 6058</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a427f1c66bcf0bd7a9a593c59516bb238">CanBusMotionControl::getEncoderSpeedsRaw</a>(<span class="keywordtype">double</span> *v)</div>
<div class="line"><a name="l06059"></a><span class="lineno"> 6059</span>&#160;{</div>
<div class="line"><a name="l06060"></a><span class="lineno"> 6060</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l06061"></a><span class="lineno"> 6061</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l06062"></a><span class="lineno"> 6062</span>&#160;    std::lock_guard&lt;std::recursive_mutex&gt; lck(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>);</div>
<div class="line"><a name="l06063"></a><span class="lineno"> 6063</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>(); i++) {</div>
<div class="line"><a name="l06064"></a><span class="lineno"> 6064</span>&#160;        <span class="keywordtype">int</span> vel_factor = (1 &lt;&lt; int(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a39d04a47c66340a06d79edfc52f4d93d">_speedEstimationHelper</a>-&gt;<a class="code" href="classspeedEstimationHelper.html#a21efd7fea69f13304b98f2370674913b">getEstimationParameters</a>(i).<a class="code" href="structSpeedEstimationParameters.html#a41921b59d93b2adb33b9e4746a02d273">jnt_Vel_estimator_shift</a>));</div>
<div class="line"><a name="l06065"></a><span class="lineno"> 6065</span>&#160;        v[i] = (double(r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[i].<a class="code" href="classBCastBufferElement.html#a9b63eaaf5853d209b692e0f928242993">_speed_joint</a>)*1000.0)/vel_factor;</div>
<div class="line"><a name="l06066"></a><span class="lineno"> 6066</span>&#160;    }</div>
<div class="line"><a name="l06067"></a><span class="lineno"> 6067</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l06068"></a><span class="lineno"> 6068</span>&#160;}</div>
<div class="line"><a name="l06069"></a><span class="lineno"> 6069</span>&#160; </div>
<div class="line"><a name="l06070"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aee1771fee1454527b31eeabc3388141e"> 6070</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aee1771fee1454527b31eeabc3388141e">CanBusMotionControl::getEncoderSpeedRaw</a>(<span class="keywordtype">int</span> j, <span class="keywordtype">double</span> *v)</div>
<div class="line"><a name="l06071"></a><span class="lineno"> 6071</span>&#160;{</div>
<div class="line"><a name="l06072"></a><span class="lineno"> 6072</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l06073"></a><span class="lineno"> 6073</span>&#160;    <span class="comment">//ACE_ASSERT (j &gt;= 0 &amp;&amp; j &lt;= r.getJoints());</span></div>
<div class="line"><a name="l06074"></a><span class="lineno"> 6074</span>&#160;    <span class="keywordflow">if</span> (!(j &gt;= 0 &amp;&amp; j &lt;= r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>()))</div>
<div class="line"><a name="l06075"></a><span class="lineno"> 6075</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l06076"></a><span class="lineno"> 6076</span>&#160; </div>
<div class="line"><a name="l06077"></a><span class="lineno"> 6077</span>&#160;    std::lock_guard&lt;std::recursive_mutex&gt; lck(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>);</div>
<div class="line"><a name="l06078"></a><span class="lineno"> 6078</span>&#160;    <span class="keywordtype">int</span> vel_factor = (1 &lt;&lt; int(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a39d04a47c66340a06d79edfc52f4d93d">_speedEstimationHelper</a>-&gt;<a class="code" href="classspeedEstimationHelper.html#a21efd7fea69f13304b98f2370674913b">getEstimationParameters</a>(j).<a class="code" href="structSpeedEstimationParameters.html#a41921b59d93b2adb33b9e4746a02d273">jnt_Vel_estimator_shift</a>));</div>
<div class="line"><a name="l06079"></a><span class="lineno"> 6079</span>&#160;    *v = (double(r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#a9b63eaaf5853d209b692e0f928242993">_speed_joint</a>)*1000.0)/vel_factor;</div>
<div class="line"><a name="l06080"></a><span class="lineno"> 6080</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l06081"></a><span class="lineno"> 6081</span>&#160;}</div>
<div class="line"><a name="l06082"></a><span class="lineno"> 6082</span>&#160; </div>
<div class="line"><a name="l06083"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a1697d27654489934e64e0e3d83fd419f"> 6083</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a1697d27654489934e64e0e3d83fd419f">CanBusMotionControl::getEncoderAccelerationsRaw</a>(<span class="keywordtype">double</span> *v)</div>
<div class="line"><a name="l06084"></a><span class="lineno"> 6084</span>&#160;{</div>
<div class="line"><a name="l06085"></a><span class="lineno"> 6085</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l06086"></a><span class="lineno"> 6086</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l06087"></a><span class="lineno"> 6087</span>&#160;    std::lock_guard&lt;std::recursive_mutex&gt; lck(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>);</div>
<div class="line"><a name="l06088"></a><span class="lineno"> 6088</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>(); i++) {</div>
<div class="line"><a name="l06089"></a><span class="lineno"> 6089</span>&#160;        <span class="keywordtype">int</span> vel_factor = (1 &lt;&lt; int(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a39d04a47c66340a06d79edfc52f4d93d">_speedEstimationHelper</a>-&gt;<a class="code" href="classspeedEstimationHelper.html#a21efd7fea69f13304b98f2370674913b">getEstimationParameters</a>(i).<a class="code" href="structSpeedEstimationParameters.html#a41921b59d93b2adb33b9e4746a02d273">jnt_Vel_estimator_shift</a>));</div>
<div class="line"><a name="l06090"></a><span class="lineno"> 6090</span>&#160;        <span class="keywordtype">int</span> acc_factor = (1 &lt;&lt; int(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a39d04a47c66340a06d79edfc52f4d93d">_speedEstimationHelper</a>-&gt;<a class="code" href="classspeedEstimationHelper.html#a21efd7fea69f13304b98f2370674913b">getEstimationParameters</a>(i).<a class="code" href="structSpeedEstimationParameters.html#afdbee7f31bfb779d001f2da46f53963c">jnt_Acc_estimator_shift</a>));</div>
<div class="line"><a name="l06091"></a><span class="lineno"> 6091</span>&#160;        v[i] = (double(r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[i].<a class="code" href="classBCastBufferElement.html#af13a3497fba917355754e42c77235163">_accel_joint</a>)*1000000.0)/(vel_factor*acc_factor);</div>
<div class="line"><a name="l06092"></a><span class="lineno"> 6092</span>&#160;    }</div>
<div class="line"><a name="l06093"></a><span class="lineno"> 6093</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l06094"></a><span class="lineno"> 6094</span>&#160;}</div>
<div class="line"><a name="l06095"></a><span class="lineno"> 6095</span>&#160; </div>
<div class="line"><a name="l06096"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a9b85f390ba6214fba74696779f0f9a24"> 6096</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a9b85f390ba6214fba74696779f0f9a24">CanBusMotionControl::getEncoderAccelerationRaw</a>(<span class="keywordtype">int</span> j, <span class="keywordtype">double</span> *v)</div>
<div class="line"><a name="l06097"></a><span class="lineno"> 6097</span>&#160;{</div>
<div class="line"><a name="l06098"></a><span class="lineno"> 6098</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l06099"></a><span class="lineno"> 6099</span>&#160;    <span class="comment">//ACE_ASSERT (j &gt;= 0 &amp;&amp; j &lt;= r.getJoints());</span></div>
<div class="line"><a name="l06100"></a><span class="lineno"> 6100</span>&#160;    <span class="keywordflow">if</span> (!(j &gt;= 0 &amp;&amp; j &lt;= r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>()))</div>
<div class="line"><a name="l06101"></a><span class="lineno"> 6101</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l06102"></a><span class="lineno"> 6102</span>&#160; </div>
<div class="line"><a name="l06103"></a><span class="lineno"> 6103</span>&#160;    std::lock_guard&lt;std::recursive_mutex&gt; lck(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>);</div>
<div class="line"><a name="l06104"></a><span class="lineno"> 6104</span>&#160;    <span class="keywordtype">int</span> vel_factor = (1 &lt;&lt; int(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a39d04a47c66340a06d79edfc52f4d93d">_speedEstimationHelper</a>-&gt;<a class="code" href="classspeedEstimationHelper.html#a21efd7fea69f13304b98f2370674913b">getEstimationParameters</a>(j).<a class="code" href="structSpeedEstimationParameters.html#a41921b59d93b2adb33b9e4746a02d273">jnt_Vel_estimator_shift</a>));</div>
<div class="line"><a name="l06105"></a><span class="lineno"> 6105</span>&#160;    <span class="keywordtype">int</span> acc_factor = (1 &lt;&lt; int(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a39d04a47c66340a06d79edfc52f4d93d">_speedEstimationHelper</a>-&gt;<a class="code" href="classspeedEstimationHelper.html#a21efd7fea69f13304b98f2370674913b">getEstimationParameters</a>(j).<a class="code" href="structSpeedEstimationParameters.html#afdbee7f31bfb779d001f2da46f53963c">jnt_Acc_estimator_shift</a>));</div>
<div class="line"><a name="l06106"></a><span class="lineno"> 6106</span>&#160;    *v = (double(r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#af13a3497fba917355754e42c77235163">_accel_joint</a>)*1000000.0)/(vel_factor*acc_factor);</div>
<div class="line"><a name="l06107"></a><span class="lineno"> 6107</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l06108"></a><span class="lineno"> 6108</span>&#160;}</div>
<div class="line"><a name="l06109"></a><span class="lineno"> 6109</span>&#160; </div>
<div class="line"><a name="l06110"></a><span class="lineno"> 6110</span>&#160; </div>
<div class="line"><a name="l06111"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a83fe2d898506633721c8bb367d206069"> 6111</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a83fe2d898506633721c8bb367d206069">CanBusMotionControl::setMotorEncoderRaw</a>(<span class="keywordtype">int</span> m, <span class="keyword">const</span> <span class="keywordtype">double</span> val)</div>
<div class="line"><a name="l06112"></a><span class="lineno"> 6112</span>&#160;{</div>
<div class="line"><a name="l06113"></a><span class="lineno"> 6113</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="CanBusMotionControl_8cpp.html#a35a12201dd9ff39ea640f1d8b39f0770">NOT_YET_IMPLEMENTED</a>(<span class="stringliteral">&quot;setMotorEncoderRaw&quot;</span>);</div>
<div class="line"><a name="l06114"></a><span class="lineno"> 6114</span>&#160;}</div>
<div class="line"><a name="l06115"></a><span class="lineno"> 6115</span>&#160; </div>
<div class="line"><a name="l06116"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a4286bc93ffcb7c6ae79eb8436909b2e3"> 6116</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a4286bc93ffcb7c6ae79eb8436909b2e3">CanBusMotionControl::setMotorEncodersRaw</a>(<span class="keyword">const</span> <span class="keywordtype">double</span> *vals)</div>
<div class="line"><a name="l06117"></a><span class="lineno"> 6117</span>&#160;{</div>
<div class="line"><a name="l06118"></a><span class="lineno"> 6118</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="CanBusMotionControl_8cpp.html#a35a12201dd9ff39ea640f1d8b39f0770">NOT_YET_IMPLEMENTED</a>(<span class="stringliteral">&quot;setMotorEncodersRaw&quot;</span>);</div>
<div class="line"><a name="l06119"></a><span class="lineno"> 6119</span>&#160;}</div>
<div class="line"><a name="l06120"></a><span class="lineno"> 6120</span>&#160; </div>
<div class="line"><a name="l06121"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ae7d41075196d8f415a4dbde0ac84aed7"> 6121</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ae7d41075196d8f415a4dbde0ac84aed7">CanBusMotionControl::resetMotorEncoderRaw</a>(<span class="keywordtype">int</span> m)</div>
<div class="line"><a name="l06122"></a><span class="lineno"> 6122</span>&#160;{</div>
<div class="line"><a name="l06123"></a><span class="lineno"> 6123</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="CanBusMotionControl_8cpp.html#a35a12201dd9ff39ea640f1d8b39f0770">NOT_YET_IMPLEMENTED</a>(<span class="stringliteral">&quot;resetMotorEncoderRaw&quot;</span>);</div>
<div class="line"><a name="l06124"></a><span class="lineno"> 6124</span>&#160;}</div>
<div class="line"><a name="l06125"></a><span class="lineno"> 6125</span>&#160; </div>
<div class="line"><a name="l06126"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6f1d725e38b7c6938cb1b1342d4eceb8"> 6126</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6f1d725e38b7c6938cb1b1342d4eceb8">CanBusMotionControl::resetMotorEncodersRaw</a>()</div>
<div class="line"><a name="l06127"></a><span class="lineno"> 6127</span>&#160;{</div>
<div class="line"><a name="l06128"></a><span class="lineno"> 6128</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="CanBusMotionControl_8cpp.html#a35a12201dd9ff39ea640f1d8b39f0770">NOT_YET_IMPLEMENTED</a>(<span class="stringliteral">&quot;resetMotorEncodersRaw&quot;</span>);</div>
<div class="line"><a name="l06129"></a><span class="lineno"> 6129</span>&#160;}</div>
<div class="line"><a name="l06130"></a><span class="lineno"> 6130</span>&#160; </div>
<div class="line"><a name="l06131"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ab3fe4733ea9b51882ec4561619d08aea"> 6131</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ab3fe4733ea9b51882ec4561619d08aea">CanBusMotionControl::getMotorEncodersRaw</a>(<span class="keywordtype">double</span> *v)</div>
<div class="line"><a name="l06132"></a><span class="lineno"> 6132</span>&#160;{</div>
<div class="line"><a name="l06133"></a><span class="lineno"> 6133</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l06134"></a><span class="lineno"> 6134</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l06135"></a><span class="lineno"> 6135</span>&#160; </div>
<div class="line"><a name="l06136"></a><span class="lineno"> 6136</span>&#160;    std::lock_guard&lt;std::recursive_mutex&gt; lck(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>);</div>
<div class="line"><a name="l06137"></a><span class="lineno"> 6137</span>&#160;    </div>
<div class="line"><a name="l06138"></a><span class="lineno"> 6138</span>&#160;    <span class="keywordtype">double</span> stamp=0;</div>
<div class="line"><a name="l06139"></a><span class="lineno"> 6139</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>(); i++) {</div>
<div class="line"><a name="l06140"></a><span class="lineno"> 6140</span>&#160;        v[i] = double(r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[i].<a class="code" href="classBCastBufferElement.html#af7fcbef201ebbd71f56df7ec94ef15b5">_position_rotor</a>.<a class="code" href="structBCastElement.html#a048622f3390102c83b081b8799ac97d1">_value</a>);</div>
<div class="line"><a name="l06141"></a><span class="lineno"> 6141</span>&#160; </div>
<div class="line"><a name="l06142"></a><span class="lineno"> 6142</span>&#160;        <span class="keywordflow">if</span> (stamp&lt;r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[i].<a class="code" href="classBCastBufferElement.html#af7fcbef201ebbd71f56df7ec94ef15b5">_position_rotor</a>.<a class="code" href="structBCastElement.html#abe5b0e1af1d11df4b9e32bd1e43555fa">_stamp</a>)</div>
<div class="line"><a name="l06143"></a><span class="lineno"> 6143</span>&#160;            stamp=r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[i].<a class="code" href="classBCastBufferElement.html#af7fcbef201ebbd71f56df7ec94ef15b5">_position_rotor</a>.<a class="code" href="structBCastElement.html#abe5b0e1af1d11df4b9e32bd1e43555fa">_stamp</a>;</div>
<div class="line"><a name="l06144"></a><span class="lineno"> 6144</span>&#160;    }</div>
<div class="line"><a name="l06145"></a><span class="lineno"> 6145</span>&#160; </div>
<div class="line"><a name="l06146"></a><span class="lineno"> 6146</span>&#160;    stampEncoders.update(stamp);</div>
<div class="line"><a name="l06147"></a><span class="lineno"> 6147</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l06148"></a><span class="lineno"> 6148</span>&#160;}</div>
<div class="line"><a name="l06149"></a><span class="lineno"> 6149</span>&#160; </div>
<div class="line"><a name="l06150"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a1a353ca1cf3cb26c4e03211209c089f8"> 6150</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a1a353ca1cf3cb26c4e03211209c089f8">CanBusMotionControl::getMotorEncoderRaw</a>(<span class="keywordtype">int</span> m, <span class="keywordtype">double</span> *v)</div>
<div class="line"><a name="l06151"></a><span class="lineno"> 6151</span>&#160;{</div>
<div class="line"><a name="l06152"></a><span class="lineno"> 6152</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l06153"></a><span class="lineno"> 6153</span>&#160;    <span class="keywordflow">if</span> (!(m &gt;= 0 &amp;&amp; m &lt;= r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>()))<span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l06154"></a><span class="lineno"> 6154</span>&#160; </div>
<div class="line"><a name="l06155"></a><span class="lineno"> 6155</span>&#160;    std::lock_guard&lt;std::recursive_mutex&gt; lck(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>);</div>
<div class="line"><a name="l06156"></a><span class="lineno"> 6156</span>&#160;    *v = double(r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[m].<a class="code" href="classBCastBufferElement.html#af7fcbef201ebbd71f56df7ec94ef15b5">_position_rotor</a>.<a class="code" href="structBCastElement.html#a048622f3390102c83b081b8799ac97d1">_value</a>);</div>
<div class="line"><a name="l06157"></a><span class="lineno"> 6157</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l06158"></a><span class="lineno"> 6158</span>&#160;}</div>
<div class="line"><a name="l06159"></a><span class="lineno"> 6159</span>&#160; </div>
<div class="line"><a name="l06160"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a10c73f4260062bdbb2a02aac0e8ee98b"> 6160</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a10c73f4260062bdbb2a02aac0e8ee98b">CanBusMotionControl::getMotorEncodersTimedRaw</a>(<span class="keywordtype">double</span> *v, <span class="keywordtype">double</span> *t)</div>
<div class="line"><a name="l06161"></a><span class="lineno"> 6161</span>&#160;{</div>
<div class="line"><a name="l06162"></a><span class="lineno"> 6162</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l06163"></a><span class="lineno"> 6163</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l06164"></a><span class="lineno"> 6164</span>&#160; </div>
<div class="line"><a name="l06165"></a><span class="lineno"> 6165</span>&#160;    std::lock_guard&lt;std::recursive_mutex&gt; lck(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>);</div>
<div class="line"><a name="l06166"></a><span class="lineno"> 6166</span>&#160;    </div>
<div class="line"><a name="l06167"></a><span class="lineno"> 6167</span>&#160;    <span class="keywordtype">double</span> stamp=0;</div>
<div class="line"><a name="l06168"></a><span class="lineno"> 6168</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>(); i++) {</div>
<div class="line"><a name="l06169"></a><span class="lineno"> 6169</span>&#160;        v[i] = double(r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[i].<a class="code" href="classBCastBufferElement.html#af7fcbef201ebbd71f56df7ec94ef15b5">_position_rotor</a>.<a class="code" href="structBCastElement.html#a048622f3390102c83b081b8799ac97d1">_value</a>);</div>
<div class="line"><a name="l06170"></a><span class="lineno"> 6170</span>&#160;        t[i] = r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[i].<a class="code" href="classBCastBufferElement.html#af7fcbef201ebbd71f56df7ec94ef15b5">_position_rotor</a>.<a class="code" href="structBCastElement.html#abe5b0e1af1d11df4b9e32bd1e43555fa">_stamp</a>;</div>
<div class="line"><a name="l06171"></a><span class="lineno"> 6171</span>&#160; </div>
<div class="line"><a name="l06172"></a><span class="lineno"> 6172</span>&#160;        <span class="keywordflow">if</span> (stamp&lt;r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[i].<a class="code" href="classBCastBufferElement.html#af7fcbef201ebbd71f56df7ec94ef15b5">_position_rotor</a>.<a class="code" href="structBCastElement.html#abe5b0e1af1d11df4b9e32bd1e43555fa">_stamp</a>)</div>
<div class="line"><a name="l06173"></a><span class="lineno"> 6173</span>&#160;            stamp=r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[i].<a class="code" href="classBCastBufferElement.html#af7fcbef201ebbd71f56df7ec94ef15b5">_position_rotor</a>.<a class="code" href="structBCastElement.html#abe5b0e1af1d11df4b9e32bd1e43555fa">_stamp</a>;</div>
<div class="line"><a name="l06174"></a><span class="lineno"> 6174</span>&#160;    }</div>
<div class="line"><a name="l06175"></a><span class="lineno"> 6175</span>&#160; </div>
<div class="line"><a name="l06176"></a><span class="lineno"> 6176</span>&#160;    stampEncoders.update(stamp);</div>
<div class="line"><a name="l06177"></a><span class="lineno"> 6177</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l06178"></a><span class="lineno"> 6178</span>&#160;}</div>
<div class="line"><a name="l06179"></a><span class="lineno"> 6179</span>&#160; </div>
<div class="line"><a name="l06180"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a667f8febb3fa047ae938e45b8c194da1"> 6180</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a667f8febb3fa047ae938e45b8c194da1">CanBusMotionControl::getMotorEncoderTimedRaw</a>(<span class="keywordtype">int</span> m, <span class="keywordtype">double</span> *v, <span class="keywordtype">double</span> *t)</div>
<div class="line"><a name="l06181"></a><span class="lineno"> 6181</span>&#160;{</div>
<div class="line"><a name="l06182"></a><span class="lineno"> 6182</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l06183"></a><span class="lineno"> 6183</span>&#160;    <span class="keywordflow">if</span> (!(m &gt;= 0 &amp;&amp; m &lt;= r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>()))<span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l06184"></a><span class="lineno"> 6184</span>&#160; </div>
<div class="line"><a name="l06185"></a><span class="lineno"> 6185</span>&#160;    std::lock_guard&lt;std::recursive_mutex&gt; lck(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>);</div>
<div class="line"><a name="l06186"></a><span class="lineno"> 6186</span>&#160;    *v = double(r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[m].<a class="code" href="classBCastBufferElement.html#af7fcbef201ebbd71f56df7ec94ef15b5">_position_rotor</a>.<a class="code" href="structBCastElement.html#a048622f3390102c83b081b8799ac97d1">_value</a>);</div>
<div class="line"><a name="l06187"></a><span class="lineno"> 6187</span>&#160;    *t = r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[m].<a class="code" href="classBCastBufferElement.html#af7fcbef201ebbd71f56df7ec94ef15b5">_position_rotor</a>.<a class="code" href="structBCastElement.html#abe5b0e1af1d11df4b9e32bd1e43555fa">_stamp</a>;</div>
<div class="line"><a name="l06188"></a><span class="lineno"> 6188</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l06189"></a><span class="lineno"> 6189</span>&#160;}</div>
<div class="line"><a name="l06190"></a><span class="lineno"> 6190</span>&#160; </div>
<div class="line"><a name="l06191"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ab8b40537c6f99b99c3a6b87784394de9"> 6191</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ab8b40537c6f99b99c3a6b87784394de9">CanBusMotionControl::getMotorEncoderCountsPerRevolutionRaw</a>(<span class="keywordtype">int</span> m, <span class="keywordtype">double</span> *cpr)</div>
<div class="line"><a name="l06192"></a><span class="lineno"> 6192</span>&#160;{</div>
<div class="line"><a name="l06193"></a><span class="lineno"> 6193</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="CanBusMotionControl_8cpp.html#a35a12201dd9ff39ea640f1d8b39f0770">NOT_YET_IMPLEMENTED</a>(<span class="stringliteral">&quot;getMotorEncodersCountsPerRevolutionRaw&quot;</span>);</div>
<div class="line"><a name="l06194"></a><span class="lineno"> 6194</span>&#160;}</div>
<div class="line"><a name="l06195"></a><span class="lineno"> 6195</span>&#160; </div>
<div class="line"><a name="l06196"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a2f388f86340ab8742d247c6579edb7f6"> 6196</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a2f388f86340ab8742d247c6579edb7f6">CanBusMotionControl::setMotorEncoderCountsPerRevolutionRaw</a>(<span class="keywordtype">int</span> m, <span class="keyword">const</span> <span class="keywordtype">double</span> cpr)</div>
<div class="line"><a name="l06197"></a><span class="lineno"> 6197</span>&#160;{</div>
<div class="line"><a name="l06198"></a><span class="lineno"> 6198</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="CanBusMotionControl_8cpp.html#a35a12201dd9ff39ea640f1d8b39f0770">NOT_YET_IMPLEMENTED</a>(<span class="stringliteral">&quot;setMotorEncodersCountsPerRevolutionRaw&quot;</span>);</div>
<div class="line"><a name="l06199"></a><span class="lineno"> 6199</span>&#160;}</div>
<div class="line"><a name="l06200"></a><span class="lineno"> 6200</span>&#160; </div>
<div class="line"><a name="l06201"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a79749b0a501197275aa7ae043fbaa011"> 6201</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a79749b0a501197275aa7ae043fbaa011">CanBusMotionControl::getNumberOfMotorEncodersRaw</a>(<span class="keywordtype">int</span>* m)</div>
<div class="line"><a name="l06202"></a><span class="lineno"> 6202</span>&#160;{</div>
<div class="line"><a name="l06203"></a><span class="lineno"> 6203</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l06204"></a><span class="lineno"> 6204</span>&#160;    *m=r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>();</div>
<div class="line"><a name="l06205"></a><span class="lineno"> 6205</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l06206"></a><span class="lineno"> 6206</span>&#160;}</div>
<div class="line"><a name="l06207"></a><span class="lineno"> 6207</span>&#160; </div>
<div class="line"><a name="l06208"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa6958d7c7dd77d9733631fa78e7ab270"> 6208</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa6958d7c7dd77d9733631fa78e7ab270">CanBusMotionControl::getNumberOfMotorsRaw</a>(<span class="keywordtype">int</span>* m)</div>
<div class="line"><a name="l06209"></a><span class="lineno"> 6209</span>&#160;{</div>
<div class="line"><a name="l06210"></a><span class="lineno"> 6210</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l06211"></a><span class="lineno"> 6211</span>&#160;    *m=r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>();</div>
<div class="line"><a name="l06212"></a><span class="lineno"> 6212</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l06213"></a><span class="lineno"> 6213</span>&#160;}</div>
<div class="line"><a name="l06214"></a><span class="lineno"> 6214</span>&#160; </div>
<div class="line"><a name="l06215"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ab69427e35b91b6a76c2c75d2467c17b5"> 6215</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ab69427e35b91b6a76c2c75d2467c17b5">CanBusMotionControl::getMotorEncoderSpeedsRaw</a>(<span class="keywordtype">double</span> *v)</div>
<div class="line"><a name="l06216"></a><span class="lineno"> 6216</span>&#160;{</div>
<div class="line"><a name="l06217"></a><span class="lineno"> 6217</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l06218"></a><span class="lineno"> 6218</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l06219"></a><span class="lineno"> 6219</span>&#160;    std::lock_guard&lt;std::recursive_mutex&gt; lck(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>);</div>
<div class="line"><a name="l06220"></a><span class="lineno"> 6220</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>(); i++) {</div>
<div class="line"><a name="l06221"></a><span class="lineno"> 6221</span>&#160;        <span class="keywordtype">int</span> vel_factor = (1 &lt;&lt; int(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a39d04a47c66340a06d79edfc52f4d93d">_speedEstimationHelper</a>-&gt;<a class="code" href="classspeedEstimationHelper.html#a21efd7fea69f13304b98f2370674913b">getEstimationParameters</a>(i).<a class="code" href="structSpeedEstimationParameters.html#a8ca61687daf50b0654e6609825e43820">mot_Vel_estimator_shift</a>));</div>
<div class="line"><a name="l06222"></a><span class="lineno"> 6222</span>&#160;        v[i] = (double(r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[i].<a class="code" href="classBCastBufferElement.html#a98a2371848368d28cc00f180375a9161">_speed_rotor</a>.<a class="code" href="structBCastElement.html#a048622f3390102c83b081b8799ac97d1">_value</a>)*1000.0)/vel_factor;</div>
<div class="line"><a name="l06223"></a><span class="lineno"> 6223</span>&#160;    }</div>
<div class="line"><a name="l06224"></a><span class="lineno"> 6224</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l06225"></a><span class="lineno"> 6225</span>&#160;}</div>
<div class="line"><a name="l06226"></a><span class="lineno"> 6226</span>&#160; </div>
<div class="line"><a name="l06227"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a69df21943550a704c6276e10ef9360d4"> 6227</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a69df21943550a704c6276e10ef9360d4">CanBusMotionControl::getMotorEncoderSpeedRaw</a>(<span class="keywordtype">int</span> m, <span class="keywordtype">double</span> *v)</div>
<div class="line"><a name="l06228"></a><span class="lineno"> 6228</span>&#160;{</div>
<div class="line"><a name="l06229"></a><span class="lineno"> 6229</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l06230"></a><span class="lineno"> 6230</span>&#160;    <span class="keywordflow">if</span> (!(m &gt;= 0 &amp;&amp; m &lt;= r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>()))<span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l06231"></a><span class="lineno"> 6231</span>&#160; </div>
<div class="line"><a name="l06232"></a><span class="lineno"> 6232</span>&#160;    std::lock_guard&lt;std::recursive_mutex&gt; lck(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>);</div>
<div class="line"><a name="l06233"></a><span class="lineno"> 6233</span>&#160;    <span class="keywordtype">int</span> vel_factor = (1 &lt;&lt; int(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a39d04a47c66340a06d79edfc52f4d93d">_speedEstimationHelper</a>-&gt;<a class="code" href="classspeedEstimationHelper.html#a21efd7fea69f13304b98f2370674913b">getEstimationParameters</a>(m).<a class="code" href="structSpeedEstimationParameters.html#a8ca61687daf50b0654e6609825e43820">mot_Vel_estimator_shift</a>));</div>
<div class="line"><a name="l06234"></a><span class="lineno"> 6234</span>&#160;    *v = (double(r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[m].<a class="code" href="classBCastBufferElement.html#a98a2371848368d28cc00f180375a9161">_speed_rotor</a>.<a class="code" href="structBCastElement.html#a048622f3390102c83b081b8799ac97d1">_value</a>)*1000.0)/vel_factor;</div>
<div class="line"><a name="l06235"></a><span class="lineno"> 6235</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l06236"></a><span class="lineno"> 6236</span>&#160;}</div>
<div class="line"><a name="l06237"></a><span class="lineno"> 6237</span>&#160; </div>
<div class="line"><a name="l06238"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aff346c382fd5cf57f33a3a3f5d4d9585"> 6238</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aff346c382fd5cf57f33a3a3f5d4d9585">CanBusMotionControl::getMotorEncoderAccelerationsRaw</a>(<span class="keywordtype">double</span> *accs)</div>
<div class="line"><a name="l06239"></a><span class="lineno"> 6239</span>&#160;{</div>
<div class="line"><a name="l06240"></a><span class="lineno"> 6240</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l06241"></a><span class="lineno"> 6241</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l06242"></a><span class="lineno"> 6242</span>&#160;    std::lock_guard&lt;std::recursive_mutex&gt; lck(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>);</div>
<div class="line"><a name="l06243"></a><span class="lineno"> 6243</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>(); i++) {</div>
<div class="line"><a name="l06244"></a><span class="lineno"> 6244</span>&#160;        <span class="keywordtype">int</span> vel_factor = (1 &lt;&lt; int(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a39d04a47c66340a06d79edfc52f4d93d">_speedEstimationHelper</a>-&gt;<a class="code" href="classspeedEstimationHelper.html#a21efd7fea69f13304b98f2370674913b">getEstimationParameters</a>(i).<a class="code" href="structSpeedEstimationParameters.html#a8ca61687daf50b0654e6609825e43820">mot_Vel_estimator_shift</a>));</div>
<div class="line"><a name="l06245"></a><span class="lineno"> 6245</span>&#160;        <span class="keywordtype">int</span> acc_factor = (1 &lt;&lt; int(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a39d04a47c66340a06d79edfc52f4d93d">_speedEstimationHelper</a>-&gt;<a class="code" href="classspeedEstimationHelper.html#a21efd7fea69f13304b98f2370674913b">getEstimationParameters</a>(i).<a class="code" href="structSpeedEstimationParameters.html#a89b69c29d7642ee7d5aa4c9080d9a8fe">mot_Acc_estimator_shift</a>));</div>
<div class="line"><a name="l06246"></a><span class="lineno"> 6246</span>&#160;        accs[i] = (double(r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[i].<a class="code" href="classBCastBufferElement.html#acbfdea5c30c6cff7e50a75b42233b460">_accel_rotor</a>.<a class="code" href="structBCastElement.html#a048622f3390102c83b081b8799ac97d1">_value</a>)*1000000.0)/(vel_factor*acc_factor);</div>
<div class="line"><a name="l06247"></a><span class="lineno"> 6247</span>&#160;    }</div>
<div class="line"><a name="l06248"></a><span class="lineno"> 6248</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l06249"></a><span class="lineno"> 6249</span>&#160;}</div>
<div class="line"><a name="l06250"></a><span class="lineno"> 6250</span>&#160; </div>
<div class="line"><a name="l06251"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a46cea1139fde278cba304cfa8d970a0b"> 6251</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a46cea1139fde278cba304cfa8d970a0b">CanBusMotionControl::getMotorEncoderAccelerationRaw</a>(<span class="keywordtype">int</span> m, <span class="keywordtype">double</span> *<a class="code" href="dataTypes_8h.html#ae0191316140fce1e08c6f21b0a2dbf0a">acc</a>)</div>
<div class="line"><a name="l06252"></a><span class="lineno"> 6252</span>&#160;{</div>
<div class="line"><a name="l06253"></a><span class="lineno"> 6253</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l06254"></a><span class="lineno"> 6254</span>&#160;    <span class="keywordflow">if</span> (!(m &gt;= 0 &amp;&amp; m &lt;= r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>()))<span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l06255"></a><span class="lineno"> 6255</span>&#160; </div>
<div class="line"><a name="l06256"></a><span class="lineno"> 6256</span>&#160;    std::lock_guard&lt;std::recursive_mutex&gt; lck(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>);</div>
<div class="line"><a name="l06257"></a><span class="lineno"> 6257</span>&#160;    <span class="keywordtype">int</span> vel_factor = (1 &lt;&lt; int(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a39d04a47c66340a06d79edfc52f4d93d">_speedEstimationHelper</a>-&gt;<a class="code" href="classspeedEstimationHelper.html#a21efd7fea69f13304b98f2370674913b">getEstimationParameters</a>(m).<a class="code" href="structSpeedEstimationParameters.html#a8ca61687daf50b0654e6609825e43820">mot_Vel_estimator_shift</a>));</div>
<div class="line"><a name="l06258"></a><span class="lineno"> 6258</span>&#160;    <span class="keywordtype">int</span> acc_factor = (1 &lt;&lt; int(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a39d04a47c66340a06d79edfc52f4d93d">_speedEstimationHelper</a>-&gt;<a class="code" href="classspeedEstimationHelper.html#a21efd7fea69f13304b98f2370674913b">getEstimationParameters</a>(m).<a class="code" href="structSpeedEstimationParameters.html#a89b69c29d7642ee7d5aa4c9080d9a8fe">mot_Acc_estimator_shift</a>));</div>
<div class="line"><a name="l06259"></a><span class="lineno"> 6259</span>&#160;    *<a class="code" href="dataTypes_8h.html#ae0191316140fce1e08c6f21b0a2dbf0a">acc</a> = (double(r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[m].<a class="code" href="classBCastBufferElement.html#acbfdea5c30c6cff7e50a75b42233b460">_accel_rotor</a>.<a class="code" href="structBCastElement.html#a048622f3390102c83b081b8799ac97d1">_value</a>)*1000000.0)/(vel_factor*acc_factor);</div>
<div class="line"><a name="l06260"></a><span class="lineno"> 6260</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l06261"></a><span class="lineno"> 6261</span>&#160;}</div>
<div class="line"><a name="l06262"></a><span class="lineno"> 6262</span>&#160; </div>
<div class="line"><a name="l06263"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a2cd4eeacac3d01517a552971e20cf21f"> 6263</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a2cd4eeacac3d01517a552971e20cf21f">CanBusMotionControl::disableAmpRaw</a>(<span class="keywordtype">int</span> axis)</div>
<div class="line"><a name="l06264"></a><span class="lineno"> 6264</span>&#160;{</div>
<div class="line"><a name="l06265"></a><span class="lineno"> 6265</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="CanBusMotionControl_8cpp.html#ac7fb8baadd4641d17b25e7076ff25336">DEPRECATED</a>(<span class="stringliteral">&quot;disableAmpRaw&quot;</span>);</div>
<div class="line"><a name="l06266"></a><span class="lineno"> 6266</span>&#160;}</div>
<div class="line"><a name="l06267"></a><span class="lineno"> 6267</span>&#160; </div>
<div class="line"><a name="l06268"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#afa9e0f8809718c951eee334a7a6a350d"> 6268</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#afa9e0f8809718c951eee334a7a6a350d">CanBusMotionControl::enableAmpRaw</a>(<span class="keywordtype">int</span> axis)</div>
<div class="line"><a name="l06269"></a><span class="lineno"> 6269</span>&#160;{</div>
<div class="line"><a name="l06270"></a><span class="lineno"> 6270</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="CanBusMotionControl_8cpp.html#ac7fb8baadd4641d17b25e7076ff25336">DEPRECATED</a>(<span class="stringliteral">&quot;enableAmpRaw&quot;</span>);</div>
<div class="line"><a name="l06271"></a><span class="lineno"> 6271</span>&#160;}</div>
<div class="line"><a name="l06272"></a><span class="lineno"> 6272</span>&#160; </div>
<div class="line"><a name="l06273"></a><span class="lineno"> 6273</span>&#160;<span class="comment">// bcast</span></div>
<div class="line"><a name="l06274"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a51bc7c2609f0103e6c99f28be3e4fb64"> 6274</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a51bc7c2609f0103e6c99f28be3e4fb64">CanBusMotionControl::getCurrentsRaw</a>(<span class="keywordtype">double</span> *cs)</div>
<div class="line"><a name="l06275"></a><span class="lineno"> 6275</span>&#160;{</div>
<div class="line"><a name="l06276"></a><span class="lineno"> 6276</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l06277"></a><span class="lineno"> 6277</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l06278"></a><span class="lineno"> 6278</span>&#160; </div>
<div class="line"><a name="l06279"></a><span class="lineno"> 6279</span>&#160;    std::lock_guard&lt;std::recursive_mutex&gt; lck(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>);</div>
<div class="line"><a name="l06280"></a><span class="lineno"> 6280</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>(); i++)</div>
<div class="line"><a name="l06281"></a><span class="lineno"> 6281</span>&#160;    {</div>
<div class="line"><a name="l06282"></a><span class="lineno"> 6282</span>&#160;        cs[i] = double(r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[i].<a class="code" href="classBCastBufferElement.html#a9f1be6e90a870951a2f8221aab3dfdd6">_current</a>);</div>
<div class="line"><a name="l06283"></a><span class="lineno"> 6283</span>&#160;    }</div>
<div class="line"><a name="l06284"></a><span class="lineno"> 6284</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l06285"></a><span class="lineno"> 6285</span>&#160;}</div>
<div class="line"><a name="l06286"></a><span class="lineno"> 6286</span>&#160; </div>
<div class="line"><a name="l06287"></a><span class="lineno"> 6287</span>&#160;<span class="comment">// bcast currents</span></div>
<div class="line"><a name="l06288"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a229bc3278bbdea2ff36c29c1f49715ed"> 6288</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a229bc3278bbdea2ff36c29c1f49715ed">CanBusMotionControl::getCurrentRaw</a>(<span class="keywordtype">int</span> axis, <span class="keywordtype">double</span> *c)</div>
<div class="line"><a name="l06289"></a><span class="lineno"> 6289</span>&#160;{</div>
<div class="line"><a name="l06290"></a><span class="lineno"> 6290</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l06291"></a><span class="lineno"> 6291</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>()))</div>
<div class="line"><a name="l06292"></a><span class="lineno"> 6292</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l06293"></a><span class="lineno"> 6293</span>&#160; </div>
<div class="line"><a name="l06294"></a><span class="lineno"> 6294</span>&#160;    std::lock_guard&lt;std::recursive_mutex&gt; lck(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>);</div>
<div class="line"><a name="l06295"></a><span class="lineno"> 6295</span>&#160;    *c = double(r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[axis].<a class="code" href="classBCastBufferElement.html#a9f1be6e90a870951a2f8221aab3dfdd6">_current</a>);</div>
<div class="line"><a name="l06296"></a><span class="lineno"> 6296</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l06297"></a><span class="lineno"> 6297</span>&#160;}</div>
<div class="line"><a name="l06298"></a><span class="lineno"> 6298</span>&#160; </div>
<div class="line"><a name="l06299"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a4e695811ced457896e07213c4307742a"> 6299</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a4e695811ced457896e07213c4307742a">CanBusMotionControl::setMaxCurrentRaw</a>(<span class="keywordtype">int</span> axis, <span class="keywordtype">double</span> v)</div>
<div class="line"><a name="l06300"></a><span class="lineno"> 6300</span>&#160;{</div>
<div class="line"><a name="l06301"></a><span class="lineno"> 6301</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>-1)*2))</div>
<div class="line"><a name="l06302"></a><span class="lineno"> 6302</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l06303"></a><span class="lineno"> 6303</span>&#160; </div>
<div class="line"><a name="l06304"></a><span class="lineno"> 6304</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a3c5883fff29d225096173b0209107362">_writeDWord</a> (ICUBCANPROTO_POL_MC_CMD__SET_CURRENT_LIMIT, axis, <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ae6ad0f0f8abc5fcd9469978a25c22e7a">S_32</a>(v));</div>
<div class="line"><a name="l06305"></a><span class="lineno"> 6305</span>&#160;}</div>
<div class="line"><a name="l06306"></a><span class="lineno"> 6306</span>&#160; </div>
<div class="line"><a name="l06307"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aadac75213b34aa68903c3e89af8f6769"> 6307</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aadac75213b34aa68903c3e89af8f6769">CanBusMotionControl::getMaxCurrentRaw</a>(<span class="keywordtype">int</span> axis, <span class="keywordtype">double</span>* v)</div>
<div class="line"><a name="l06308"></a><span class="lineno"> 6308</span>&#160;{</div>
<div class="line"><a name="l06309"></a><span class="lineno"> 6309</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>-1)*2))</div>
<div class="line"><a name="l06310"></a><span class="lineno"> 6310</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l06311"></a><span class="lineno"> 6311</span>&#160; </div>
<div class="line"><a name="l06312"></a><span class="lineno"> 6312</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="CanBusMotionControl_8cpp.html#a35a12201dd9ff39ea640f1d8b39f0770">NOT_YET_IMPLEMENTED</a>(<span class="stringliteral">&quot;getMaxCurrentRaw&quot;</span>);</div>
<div class="line"><a name="l06313"></a><span class="lineno"> 6313</span>&#160;    <span class="comment">//int tmp=0;</span></div>
<div class="line"><a name="l06314"></a><span class="lineno"> 6314</span>&#160;    <span class="comment">//v=0;</span></div>
<div class="line"><a name="l06315"></a><span class="lineno"> 6315</span>&#160;    <span class="comment">//bool ret = _readDWord (ICUBCANPROTO_POL_MC_CMD__GET_CURRENT_LIMIT, axis, tmp);</span></div>
<div class="line"><a name="l06316"></a><span class="lineno"> 6316</span>&#160;    <span class="comment">//if (ret) *v=tmp; </span></div>
<div class="line"><a name="l06317"></a><span class="lineno"> 6317</span>&#160;    <span class="comment">//return ret;</span></div>
<div class="line"><a name="l06318"></a><span class="lineno"> 6318</span>&#160;}</div>
<div class="line"><a name="l06319"></a><span class="lineno"> 6319</span>&#160; </div>
<div class="line"><a name="l06320"></a><span class="lineno"> 6320</span>&#160; </div>
<div class="line"><a name="l06321"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#abbc6d69a556c4c7dce9cb49249f122ed"> 6321</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#abbc6d69a556c4c7dce9cb49249f122ed">CanBusMotionControl::setVelocityShiftRaw</a>(<span class="keywordtype">int</span> axis, <span class="keywordtype">double</span> shift)</div>
<div class="line"><a name="l06322"></a><span class="lineno"> 6322</span>&#160;{</div>
<div class="line"><a name="l06323"></a><span class="lineno"> 6323</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>-1)*2))</div>
<div class="line"><a name="l06324"></a><span class="lineno"> 6324</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l06325"></a><span class="lineno"> 6325</span>&#160; </div>
<div class="line"><a name="l06326"></a><span class="lineno"> 6326</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a100a40a38da173be134acb6308284b29">_writeWord16</a> (ICUBCANPROTO_POL_MC_CMD__SET_VEL_SHIFT, axis, <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af5c4f789e8b29d4a63d538b48fc9cd77">S_16</a>(shift));</div>
<div class="line"><a name="l06327"></a><span class="lineno"> 6327</span>&#160;}</div>
<div class="line"><a name="l06328"></a><span class="lineno"> 6328</span>&#160; </div>
<div class="line"><a name="l06329"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa3467a610690ac610627aeb3e6f08785"> 6329</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa3467a610690ac610627aeb3e6f08785">CanBusMotionControl::getTemperatureRaw</a>(<span class="keywordtype">int</span> m, <span class="keywordtype">double</span>* val)</div>
<div class="line"><a name="l06330"></a><span class="lineno"> 6330</span>&#160;{</div>
<div class="line"><a name="l06331"></a><span class="lineno"> 6331</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="CanBusMotionControl_8cpp.html#a35a12201dd9ff39ea640f1d8b39f0770">NOT_YET_IMPLEMENTED</a>(<span class="stringliteral">&quot;getTemperatureRaw&quot;</span>);</div>
<div class="line"><a name="l06332"></a><span class="lineno"> 6332</span>&#160;}</div>
<div class="line"><a name="l06333"></a><span class="lineno"> 6333</span>&#160; </div>
<div class="line"><a name="l06334"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aebf315644fb4a7ed908b2cd64cc30caf"> 6334</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aebf315644fb4a7ed908b2cd64cc30caf">CanBusMotionControl::getTemperaturesRaw</a>(<span class="keywordtype">double</span> *vals)</div>
<div class="line"><a name="l06335"></a><span class="lineno"> 6335</span>&#160;{</div>
<div class="line"><a name="l06336"></a><span class="lineno"> 6336</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="CanBusMotionControl_8cpp.html#a35a12201dd9ff39ea640f1d8b39f0770">NOT_YET_IMPLEMENTED</a>(<span class="stringliteral">&quot;getTemperaturesRaw&quot;</span>);</div>
<div class="line"><a name="l06337"></a><span class="lineno"> 6337</span>&#160;}</div>
<div class="line"><a name="l06338"></a><span class="lineno"> 6338</span>&#160; </div>
<div class="line"><a name="l06339"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a036ca01cd47d5361c27c2478a371b6c4"> 6339</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a036ca01cd47d5361c27c2478a371b6c4">CanBusMotionControl::getTemperatureLimitRaw</a>(<span class="keywordtype">int</span> m, <span class="keywordtype">double</span> *temp)</div>
<div class="line"><a name="l06340"></a><span class="lineno"> 6340</span>&#160;{</div>
<div class="line"><a name="l06341"></a><span class="lineno"> 6341</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="CanBusMotionControl_8cpp.html#a35a12201dd9ff39ea640f1d8b39f0770">NOT_YET_IMPLEMENTED</a>(<span class="stringliteral">&quot;getTemperatureLimitRaw&quot;</span>);</div>
<div class="line"><a name="l06342"></a><span class="lineno"> 6342</span>&#160;}</div>
<div class="line"><a name="l06343"></a><span class="lineno"> 6343</span>&#160; </div>
<div class="line"><a name="l06344"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6a3bb265be70ccfd4d148e01b263916e"> 6344</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6a3bb265be70ccfd4d148e01b263916e">CanBusMotionControl::setTemperatureLimitRaw</a>(<span class="keywordtype">int</span> m, <span class="keyword">const</span> <span class="keywordtype">double</span> temp)</div>
<div class="line"><a name="l06345"></a><span class="lineno"> 6345</span>&#160;{</div>
<div class="line"><a name="l06346"></a><span class="lineno"> 6346</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="CanBusMotionControl_8cpp.html#a35a12201dd9ff39ea640f1d8b39f0770">NOT_YET_IMPLEMENTED</a>(<span class="stringliteral">&quot;setTemperatureLimitRaw&quot;</span>);</div>
<div class="line"><a name="l06347"></a><span class="lineno"> 6347</span>&#160;}</div>
<div class="line"><a name="l06348"></a><span class="lineno"> 6348</span>&#160; </div>
<div class="line"><a name="l06349"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ac072c8d4077289a7a4defba390c20065"> 6349</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ac072c8d4077289a7a4defba390c20065">CanBusMotionControl::getPeakCurrentRaw</a>(<span class="keywordtype">int</span> m, <span class="keywordtype">double</span> *val)</div>
<div class="line"><a name="l06350"></a><span class="lineno"> 6350</span>&#160;{</div>
<div class="line"><a name="l06351"></a><span class="lineno"> 6351</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="CanBusMotionControl_8cpp.html#a35a12201dd9ff39ea640f1d8b39f0770">NOT_YET_IMPLEMENTED</a>(<span class="stringliteral">&quot;getPeakCurrentRaw&quot;</span>);</div>
<div class="line"><a name="l06352"></a><span class="lineno"> 6352</span>&#160;}</div>
<div class="line"><a name="l06353"></a><span class="lineno"> 6353</span>&#160; </div>
<div class="line"><a name="l06354"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa01b48069f592569a91293308853c3a0"> 6354</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa01b48069f592569a91293308853c3a0">CanBusMotionControl::setPeakCurrentRaw</a>(<span class="keywordtype">int</span> m, <span class="keyword">const</span> <span class="keywordtype">double</span> val)</div>
<div class="line"><a name="l06355"></a><span class="lineno"> 6355</span>&#160;{</div>
<div class="line"><a name="l06356"></a><span class="lineno"> 6356</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="CanBusMotionControl_8cpp.html#a35a12201dd9ff39ea640f1d8b39f0770">NOT_YET_IMPLEMENTED</a>(<span class="stringliteral">&quot;setPeakCurrentRaw&quot;</span>);</div>
<div class="line"><a name="l06357"></a><span class="lineno"> 6357</span>&#160;}</div>
<div class="line"><a name="l06358"></a><span class="lineno"> 6358</span>&#160; </div>
<div class="line"><a name="l06359"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a1e1114403cdf59539cb26cded8dc5345"> 6359</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a1e1114403cdf59539cb26cded8dc5345">CanBusMotionControl::getNominalCurrentRaw</a>(<span class="keywordtype">int</span> m, <span class="keywordtype">double</span> *val)</div>
<div class="line"><a name="l06360"></a><span class="lineno"> 6360</span>&#160;{</div>
<div class="line"><a name="l06361"></a><span class="lineno"> 6361</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="CanBusMotionControl_8cpp.html#a35a12201dd9ff39ea640f1d8b39f0770">NOT_YET_IMPLEMENTED</a>(<span class="stringliteral">&quot;getNominalCurrentRaw&quot;</span>);</div>
<div class="line"><a name="l06362"></a><span class="lineno"> 6362</span>&#160;}</div>
<div class="line"><a name="l06363"></a><span class="lineno"> 6363</span>&#160; </div>
<div class="line"><a name="l06364"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aff2fed3fa7ee5608b184114d47fd252b"> 6364</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aff2fed3fa7ee5608b184114d47fd252b">CanBusMotionControl::setNominalCurrentRaw</a>(<span class="keywordtype">int</span> m, <span class="keyword">const</span> <span class="keywordtype">double</span> val)</div>
<div class="line"><a name="l06365"></a><span class="lineno"> 6365</span>&#160;{</div>
<div class="line"><a name="l06366"></a><span class="lineno"> 6366</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="CanBusMotionControl_8cpp.html#a35a12201dd9ff39ea640f1d8b39f0770">NOT_YET_IMPLEMENTED</a>(<span class="stringliteral">&quot;setNominalCurrentRaw&quot;</span>);</div>
<div class="line"><a name="l06367"></a><span class="lineno"> 6367</span>&#160;}</div>
<div class="line"><a name="l06368"></a><span class="lineno"> 6368</span>&#160; </div>
<div class="line"><a name="l06369"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#acfd878d2d3ffed1c9e3d5375bb36eec5"> 6369</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#acfd878d2d3ffed1c9e3d5375bb36eec5">CanBusMotionControl::getPWMRaw</a>(<span class="keywordtype">int</span> j, <span class="keywordtype">double</span>* val)</div>
<div class="line"><a name="l06370"></a><span class="lineno"> 6370</span>&#160;{</div>
<div class="line"><a name="l06371"></a><span class="lineno"> 6371</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="CanBusMotionControl_8cpp.html#a35a12201dd9ff39ea640f1d8b39f0770">NOT_YET_IMPLEMENTED</a>(<span class="stringliteral">&quot;getPWMRaw&quot;</span>);</div>
<div class="line"><a name="l06372"></a><span class="lineno"> 6372</span>&#160;}</div>
<div class="line"><a name="l06373"></a><span class="lineno"> 6373</span>&#160; </div>
<div class="line"><a name="l06374"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a958bd4c0de730eb0fe77967dcad80158"> 6374</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a958bd4c0de730eb0fe77967dcad80158">CanBusMotionControl::getPWMLimitRaw</a>(<span class="keywordtype">int</span> j, <span class="keywordtype">double</span>* val)</div>
<div class="line"><a name="l06375"></a><span class="lineno"> 6375</span>&#160;{</div>
<div class="line"><a name="l06376"></a><span class="lineno"> 6376</span>&#160;    <span class="keywordflow">if</span> (!(j &gt;= 0 &amp;&amp; j &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a> - 1) * 2))</div>
<div class="line"><a name="l06377"></a><span class="lineno"> 6377</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l06378"></a><span class="lineno"> 6378</span>&#160; </div>
<div class="line"><a name="l06379"></a><span class="lineno"> 6379</span>&#160;    <span class="keywordtype">short</span> s = 0;</div>
<div class="line"><a name="l06380"></a><span class="lineno"> 6380</span>&#160;    <span class="keywordtype">bool</span> ret = <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a41a5714a6c78ee694b7f694be991101a">_readWord16</a>(ICUBCANPROTO_POL_MC_CMD__GET_PWM_LIMIT, j, s);</div>
<div class="line"><a name="l06381"></a><span class="lineno"> 6381</span>&#160;    *val = s;</div>
<div class="line"><a name="l06382"></a><span class="lineno"> 6382</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l06383"></a><span class="lineno"> 6383</span>&#160;}</div>
<div class="line"><a name="l06384"></a><span class="lineno"> 6384</span>&#160; </div>
<div class="line"><a name="l06385"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a86ce098d289c6a426a27c94e1a155e49"> 6385</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a86ce098d289c6a426a27c94e1a155e49">CanBusMotionControl::setPWMLimitRaw</a>(<span class="keywordtype">int</span> j, <span class="keyword">const</span> <span class="keywordtype">double</span> val)</div>
<div class="line"><a name="l06386"></a><span class="lineno"> 6386</span>&#160;{</div>
<div class="line"><a name="l06387"></a><span class="lineno"> 6387</span>&#160;    <span class="keywordflow">if</span> (!(j &gt;= 0 &amp;&amp; j &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a> - 1) * 2))</div>
<div class="line"><a name="l06388"></a><span class="lineno"> 6388</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l06389"></a><span class="lineno"> 6389</span>&#160; </div>
<div class="line"><a name="l06390"></a><span class="lineno"> 6390</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a100a40a38da173be134acb6308284b29">_writeWord16</a>(ICUBCANPROTO_POL_MC_CMD__SET_PWM_LIMIT, j, <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af5c4f789e8b29d4a63d538b48fc9cd77">S_16</a>(val));</div>
<div class="line"><a name="l06391"></a><span class="lineno"> 6391</span>&#160;}</div>
<div class="line"><a name="l06392"></a><span class="lineno"> 6392</span>&#160; </div>
<div class="line"><a name="l06393"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a793810fa043a4432de3c7d849994d338"> 6393</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a793810fa043a4432de3c7d849994d338">CanBusMotionControl::getPowerSupplyVoltageRaw</a>(<span class="keywordtype">int</span> j, <span class="keywordtype">double</span>* val)</div>
<div class="line"><a name="l06394"></a><span class="lineno"> 6394</span>&#160;{</div>
<div class="line"><a name="l06395"></a><span class="lineno"> 6395</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="CanBusMotionControl_8cpp.html#a35a12201dd9ff39ea640f1d8b39f0770">NOT_YET_IMPLEMENTED</a>(<span class="stringliteral">&quot;getPowerSupplyVoltageRaw&quot;</span>);</div>
<div class="line"><a name="l06396"></a><span class="lineno"> 6396</span>&#160;}</div>
<div class="line"><a name="l06397"></a><span class="lineno"> 6397</span>&#160; </div>
<div class="line"><a name="l06398"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ac71b1f64e2f1192cf1e60f01117806b0"> 6398</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ac71b1f64e2f1192cf1e60f01117806b0">CanBusMotionControl::setSpeedEstimatorShiftRaw</a>(<span class="keywordtype">int</span> axis, <span class="keywordtype">double</span> jnt_speed, <span class="keywordtype">double</span> jnt_acc, <span class="keywordtype">double</span> mot_speed, <span class="keywordtype">double</span> mot_acc)</div>
<div class="line"><a name="l06399"></a><span class="lineno"> 6399</span>&#160;{</div>
<div class="line"><a name="l06400"></a><span class="lineno"> 6400</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>-1)*2))</div>
<div class="line"><a name="l06401"></a><span class="lineno"> 6401</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l06402"></a><span class="lineno"> 6402</span>&#160;    </div>
<div class="line"><a name="l06403"></a><span class="lineno"> 6403</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l06404"></a><span class="lineno"> 6404</span>&#160;    std::lock_guard&lt;std::recursive_mutex&gt; lck(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>);</div>
<div class="line"><a name="l06405"></a><span class="lineno"> 6405</span>&#160;    r.<a class="code" href="classCanBusResources.html#a426cb1e9b09f03d70b8dbccb2346edb8">startPacket</a>();</div>
<div class="line"><a name="l06406"></a><span class="lineno"> 6406</span>&#160;    r.<a class="code" href="classCanBusResources.html#a1049ab4df32ee910f61efbe130ba9b41">addMessage</a> (ICUBCANPROTO_POL_MC_CMD__SET_SPEED_ESTIM_SHIFT, axis);</div>
<div class="line"><a name="l06407"></a><span class="lineno"> 6407</span>&#160;    *((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)(r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()+1)) = (<span class="keywordtype">unsigned</span> char)(jnt_speed) &amp; 0xFF;</div>
<div class="line"><a name="l06408"></a><span class="lineno"> 6408</span>&#160;    *((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)(r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()+2)) = (<span class="keywordtype">unsigned</span> char)(jnt_acc)   &amp; 0xFF;</div>
<div class="line"><a name="l06409"></a><span class="lineno"> 6409</span>&#160;    *((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)(r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()+3)) = (<span class="keywordtype">unsigned</span> char)(mot_speed) &amp; 0xFF;</div>
<div class="line"><a name="l06410"></a><span class="lineno"> 6410</span>&#160;    *((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)(r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()+4)) = (<span class="keywordtype">unsigned</span> char)(mot_acc)   &amp; 0xFF;</div>
<div class="line"><a name="l06411"></a><span class="lineno"> 6411</span>&#160;    r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].setLen(5);</div>
<div class="line"><a name="l06412"></a><span class="lineno"> 6412</span>&#160;    r.<a class="code" href="classCanBusResources.html#a36f76a689330cd6163c3f13bb8ac28d9">writePacket</a>();</div>
<div class="line"><a name="l06413"></a><span class="lineno"> 6413</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l06414"></a><span class="lineno"> 6414</span>&#160;}</div>
<div class="line"><a name="l06415"></a><span class="lineno"> 6415</span>&#160; </div>
<div class="line"><a name="l06416"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ac18e9c911763b7adb7c64639bb4c8b39"> 6416</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ac18e9c911763b7adb7c64639bb4c8b39">CanBusMotionControl::setVelocityTimeoutRaw</a>(<span class="keywordtype">int</span> axis, <span class="keywordtype">double</span> timeout)</div>
<div class="line"><a name="l06417"></a><span class="lineno"> 6417</span>&#160;{</div>
<div class="line"><a name="l06418"></a><span class="lineno"> 6418</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>-1)*2))</div>
<div class="line"><a name="l06419"></a><span class="lineno"> 6419</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l06420"></a><span class="lineno"> 6420</span>&#160; </div>
<div class="line"><a name="l06421"></a><span class="lineno"> 6421</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a100a40a38da173be134acb6308284b29">_writeWord16</a> (ICUBCANPROTO_POL_MC_CMD__SET_VEL_TIMEOUT, axis, <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af5c4f789e8b29d4a63d538b48fc9cd77">S_16</a>(timeout));</div>
<div class="line"><a name="l06422"></a><span class="lineno"> 6422</span>&#160;}</div>
<div class="line"><a name="l06423"></a><span class="lineno"> 6423</span>&#160; </div>
<div class="line"><a name="l06424"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a458b0963c915e8fb0ad02d4b5f968484"> 6424</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a458b0963c915e8fb0ad02d4b5f968484">CanBusMotionControl::calibrationDoneRaw</a>(<span class="keywordtype">int</span> axis)</div>
<div class="line"><a name="l06425"></a><span class="lineno"> 6425</span>&#160;{</div>
<div class="line"><a name="l06426"></a><span class="lineno"> 6426</span>&#160;    <span class="keywordtype">short</span> value = 0;</div>
<div class="line"><a name="l06427"></a><span class="lineno"> 6427</span>&#160;    <a class="code" href="canControlUtils_8h.html#aed353ce9c28af351b98138a0a3cee032">DEBUG_FUNC</a>(<span class="stringliteral">&quot;Calling doneRaw for joint %d\n&quot;</span>, axis);</div>
<div class="line"><a name="l06428"></a><span class="lineno"> 6428</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>-1)*2))</div>
<div class="line"><a name="l06429"></a><span class="lineno"> 6429</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l06430"></a><span class="lineno"> 6430</span>&#160; </div>
<div class="line"><a name="l06431"></a><span class="lineno"> 6431</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a41a5714a6c78ee694b7f694be991101a">_readWord16</a> (ICUBCANPROTO_POL_MC_CMD__GET_CONTROL_MODE, axis, value))</div>
<div class="line"><a name="l06432"></a><span class="lineno"> 6432</span>&#160;    {</div>
<div class="line"><a name="l06433"></a><span class="lineno"> 6433</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l06434"></a><span class="lineno"> 6434</span>&#160;    } </div>
<div class="line"><a name="l06435"></a><span class="lineno"> 6435</span>&#160; </div>
<div class="line"><a name="l06436"></a><span class="lineno"> 6436</span>&#160;    <span class="keywordflow">if</span> (!(value &amp; 0xf0))</div>
<div class="line"><a name="l06437"></a><span class="lineno"> 6437</span>&#160;    {</div>
<div class="line"><a name="l06438"></a><span class="lineno"> 6438</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l06439"></a><span class="lineno"> 6439</span>&#160;    }</div>
<div class="line"><a name="l06440"></a><span class="lineno"> 6440</span>&#160; </div>
<div class="line"><a name="l06441"></a><span class="lineno"> 6441</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l06442"></a><span class="lineno"> 6442</span>&#160;}</div>
<div class="line"><a name="l06443"></a><span class="lineno"> 6443</span>&#160; </div>
<div class="line"><a name="l06444"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a1acee8c7a619502c5eb23ab5d4b74b76"> 6444</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a1acee8c7a619502c5eb23ab5d4b74b76">CanBusMotionControl::setPrintFunction</a>(<span class="keywordtype">int</span> (*<a class="code" href="compute__ekf__sym_8m.html#a633de4b0c14ca52ea2432a3c8a5c4c31">f</a>) (<span class="keyword">const</span> <span class="keywordtype">char</span> *fmt, ...))</div>
<div class="line"><a name="l06445"></a><span class="lineno"> 6445</span>&#160;{</div>
<div class="line"><a name="l06446"></a><span class="lineno"> 6446</span>&#160;    yError(<span class="stringliteral">&quot;Calling obsolete function setPrintFunction\n&quot;</span>);</div>
<div class="line"><a name="l06447"></a><span class="lineno"> 6447</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l06448"></a><span class="lineno"> 6448</span>&#160;}</div>
<div class="line"><a name="l06449"></a><span class="lineno"> 6449</span>&#160; </div>
<div class="line"><a name="l06450"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ad3b095127494a1b493e19c9e68e032ea"> 6450</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ad3b095127494a1b493e19c9e68e032ea">CanBusMotionControl::getAmpStatusRaw</a>(<span class="keywordtype">int</span> *st)</div>
<div class="line"><a name="l06451"></a><span class="lineno"> 6451</span>&#160;{</div>
<div class="line"><a name="l06452"></a><span class="lineno"> 6452</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l06453"></a><span class="lineno"> 6453</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l06454"></a><span class="lineno"> 6454</span>&#160; </div>
<div class="line"><a name="l06455"></a><span class="lineno"> 6455</span>&#160;    std::lock_guard&lt;std::recursive_mutex&gt; lck(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>);</div>
<div class="line"><a name="l06456"></a><span class="lineno"> 6456</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>(); i++)</div>
<div class="line"><a name="l06457"></a><span class="lineno"> 6457</span>&#160;    {</div>
<div class="line"><a name="l06458"></a><span class="lineno"> 6458</span>&#160;    <span class="comment">//  WARNING</span></div>
<div class="line"><a name="l06459"></a><span class="lineno"> 6459</span>&#160;    <span class="comment">//    Line changed with no idea about what it should do</span></div>
<div class="line"><a name="l06460"></a><span class="lineno"> 6460</span>&#160;    <span class="comment">//    st[i] = short(r._bcastRecvBuffer[i]._fault);  </span></div>
<div class="line"><a name="l06461"></a><span class="lineno"> 6461</span>&#160;        st[i] = short(r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[i].<a class="code" href="classBCastBufferElement.html#af521bd74a402411d52e25d07ce009801">_axisStatus</a>);  </div>
<div class="line"><a name="l06462"></a><span class="lineno"> 6462</span>&#160;   </div>
<div class="line"><a name="l06463"></a><span class="lineno"> 6463</span>&#160;    }</div>
<div class="line"><a name="l06464"></a><span class="lineno"> 6464</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l06465"></a><span class="lineno"> 6465</span>&#160;}</div>
<div class="line"><a name="l06466"></a><span class="lineno"> 6466</span>&#160; </div>
<div class="line"><a name="l06467"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ab49ee99e1b11b0adb2de7bc674f85d7a"> 6467</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ad3b095127494a1b493e19c9e68e032ea">CanBusMotionControl::getAmpStatusRaw</a>(<span class="keywordtype">int</span> j, <span class="keywordtype">int</span> *st)</div>
<div class="line"><a name="l06468"></a><span class="lineno"> 6468</span>&#160;{</div>
<div class="line"><a name="l06469"></a><span class="lineno"> 6469</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l06470"></a><span class="lineno"> 6470</span>&#160; </div>
<div class="line"><a name="l06471"></a><span class="lineno"> 6471</span>&#160;    std::lock_guard&lt;std::recursive_mutex&gt; lck(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>);</div>
<div class="line"><a name="l06472"></a><span class="lineno"> 6472</span>&#160;    st[j] = short(r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#af521bd74a402411d52e25d07ce009801">_axisStatus</a>);  </div>
<div class="line"><a name="l06473"></a><span class="lineno"> 6473</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l06474"></a><span class="lineno"> 6474</span>&#160;}</div>
<div class="line"><a name="l06475"></a><span class="lineno"> 6475</span>&#160; </div>
<div class="line"><a name="l06476"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa174e460ecec714071cc563626c06b6b"> 6476</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa174e460ecec714071cc563626c06b6b">CanBusMotionControl::setLimitsRaw</a>(<span class="keywordtype">int</span> axis, <span class="keywordtype">double</span> <a class="code" href="namespacestrain_1_1dsp_1_1fsc.html#a746ce6f9a14034939607ccead53e3fd6">min</a>, <span class="keywordtype">double</span> <a class="code" href="namespacestrain_1_1dsp_1_1fsc.html#a65804363dbaa9346e53442cb1bb9d73f">max</a>)</div>
<div class="line"><a name="l06477"></a><span class="lineno"> 6477</span>&#160;{</div>
<div class="line"><a name="l06478"></a><span class="lineno"> 6478</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>-1)*2))</div>
<div class="line"><a name="l06479"></a><span class="lineno"> 6479</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l06480"></a><span class="lineno"> 6480</span>&#160; </div>
<div class="line"><a name="l06481"></a><span class="lineno"> 6481</span>&#160;    <span class="keywordtype">bool</span> ret=<span class="keyword">true</span>;</div>
<div class="line"><a name="l06482"></a><span class="lineno"> 6482</span>&#160; </div>
<div class="line"><a name="l06483"></a><span class="lineno"> 6483</span>&#160;    ret = ret &amp;&amp; <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a3c5883fff29d225096173b0209107362">_writeDWord</a> (ICUBCANPROTO_POL_MC_CMD__SET_MIN_POSITION, axis, <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ae6ad0f0f8abc5fcd9469978a25c22e7a">S_32</a>(<a class="code" href="namespacestrain_1_1dsp_1_1fsc.html#a746ce6f9a14034939607ccead53e3fd6">min</a>));</div>
<div class="line"><a name="l06484"></a><span class="lineno"> 6484</span>&#160;    ret = ret &amp;&amp; <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a3c5883fff29d225096173b0209107362">_writeDWord</a> (ICUBCANPROTO_POL_MC_CMD__SET_MAX_POSITION, axis, <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ae6ad0f0f8abc5fcd9469978a25c22e7a">S_32</a>(<a class="code" href="namespacestrain_1_1dsp_1_1fsc.html#a65804363dbaa9346e53442cb1bb9d73f">max</a>));</div>
<div class="line"><a name="l06485"></a><span class="lineno"> 6485</span>&#160; </div>
<div class="line"><a name="l06486"></a><span class="lineno"> 6486</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l06487"></a><span class="lineno"> 6487</span>&#160;}</div>
<div class="line"><a name="l06488"></a><span class="lineno"> 6488</span>&#160; </div>
<div class="line"><a name="l06489"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a2ccc4340a732887e159d1bc6de46f18a"> 6489</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a2ccc4340a732887e159d1bc6de46f18a">CanBusMotionControl::getLimitsRaw</a>(<span class="keywordtype">int</span> axis, <span class="keywordtype">double</span> *<a class="code" href="namespacestrain_1_1dsp_1_1fsc.html#a746ce6f9a14034939607ccead53e3fd6">min</a>, <span class="keywordtype">double</span> *<a class="code" href="namespacestrain_1_1dsp_1_1fsc.html#a65804363dbaa9346e53442cb1bb9d73f">max</a>)</div>
<div class="line"><a name="l06490"></a><span class="lineno"> 6490</span>&#160;{</div>
<div class="line"><a name="l06491"></a><span class="lineno"> 6491</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>-1)*2))</div>
<div class="line"><a name="l06492"></a><span class="lineno"> 6492</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l06493"></a><span class="lineno"> 6493</span>&#160;    <span class="keywordtype">int</span> iMin=0;</div>
<div class="line"><a name="l06494"></a><span class="lineno"> 6494</span>&#160;    <span class="keywordtype">int</span> iMax=0;</div>
<div class="line"><a name="l06495"></a><span class="lineno"> 6495</span>&#160;    <span class="keywordtype">bool</span> ret=<span class="keyword">true</span>;</div>
<div class="line"><a name="l06496"></a><span class="lineno"> 6496</span>&#160; </div>
<div class="line"><a name="l06497"></a><span class="lineno"> 6497</span>&#160;    ret = ret &amp;&amp; <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a93eee03780e92ffbf67eaa3cab11fbca">_readDWord</a> (ICUBCANPROTO_POL_MC_CMD__GET_MIN_POSITION, axis, iMin);</div>
<div class="line"><a name="l06498"></a><span class="lineno"> 6498</span>&#160;    ret = ret &amp;&amp; <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a93eee03780e92ffbf67eaa3cab11fbca">_readDWord</a> (ICUBCANPROTO_POL_MC_CMD__GET_MAX_POSITION, axis, iMax);</div>
<div class="line"><a name="l06499"></a><span class="lineno"> 6499</span>&#160; </div>
<div class="line"><a name="l06500"></a><span class="lineno"> 6500</span>&#160;    *<a class="code" href="namespacestrain_1_1dsp_1_1fsc.html#a746ce6f9a14034939607ccead53e3fd6">min</a>=iMin;</div>
<div class="line"><a name="l06501"></a><span class="lineno"> 6501</span>&#160;    *<a class="code" href="namespacestrain_1_1dsp_1_1fsc.html#a65804363dbaa9346e53442cb1bb9d73f">max</a>=iMax;</div>
<div class="line"><a name="l06502"></a><span class="lineno"> 6502</span>&#160; </div>
<div class="line"><a name="l06503"></a><span class="lineno"> 6503</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l06504"></a><span class="lineno"> 6504</span>&#160;}</div>
<div class="line"><a name="l06505"></a><span class="lineno"> 6505</span>&#160; </div>
<div class="line"><a name="l06506"></a><span class="lineno"> 6506</span>&#160; </div>
<div class="line"><a name="l06508"></a><span class="lineno"> 6508</span>&#160;<span class="comment">//     Position control2 interface    //</span></div>
<div class="line"><a name="l06510"></a><span class="lineno"> 6510</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l06511"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a36ac23a21118b226779c1b14d8df2442"> 6511</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a96bfa233fcea3beaae56851757c38fa7">CanBusMotionControl::positionMoveRaw</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> n_joint, <span class="keyword">const</span> <span class="keywordtype">int</span> *joints, <span class="keyword">const</span> <span class="keywordtype">double</span> *refs)</div>
<div class="line"><a name="l06512"></a><span class="lineno"> 6512</span>&#160;{</div>
<div class="line"><a name="l06513"></a><span class="lineno"> 6513</span>&#160;    <span class="keywordtype">bool</span> ret = <span class="keyword">true</span>;</div>
<div class="line"><a name="l06514"></a><span class="lineno"> 6514</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0; j&lt;n_joint; j++)</div>
<div class="line"><a name="l06515"></a><span class="lineno"> 6515</span>&#160;    {</div>
<div class="line"><a name="l06516"></a><span class="lineno"> 6516</span>&#160;        ret = ret &amp;&amp; <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a96bfa233fcea3beaae56851757c38fa7">positionMoveRaw</a>(joints[j], refs[j]);</div>
<div class="line"><a name="l06517"></a><span class="lineno"> 6517</span>&#160;    }</div>
<div class="line"><a name="l06518"></a><span class="lineno"> 6518</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l06519"></a><span class="lineno"> 6519</span>&#160;}</div>
<div class="line"><a name="l06520"></a><span class="lineno"> 6520</span>&#160; </div>
<div class="line"><a name="l06521"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a85ef3845ee450479fb1fbda41e9cc5d3"> 6521</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa6881bd76bad201475623452a0f060f0">CanBusMotionControl::relativeMoveRaw</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> n_joint, <span class="keyword">const</span> <span class="keywordtype">int</span> *joints, <span class="keyword">const</span> <span class="keywordtype">double</span> *deltas)</div>
<div class="line"><a name="l06522"></a><span class="lineno"> 6522</span>&#160;{</div>
<div class="line"><a name="l06523"></a><span class="lineno"> 6523</span>&#160;    <span class="keywordtype">bool</span> ret = <span class="keyword">true</span>;</div>
<div class="line"><a name="l06524"></a><span class="lineno"> 6524</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0; j&lt;n_joint; j++)</div>
<div class="line"><a name="l06525"></a><span class="lineno"> 6525</span>&#160;    {</div>
<div class="line"><a name="l06526"></a><span class="lineno"> 6526</span>&#160;        ret = ret &amp;&amp; <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa6881bd76bad201475623452a0f060f0">relativeMoveRaw</a>(joints[j], deltas[j]);</div>
<div class="line"><a name="l06527"></a><span class="lineno"> 6527</span>&#160;    }</div>
<div class="line"><a name="l06528"></a><span class="lineno"> 6528</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l06529"></a><span class="lineno"> 6529</span>&#160;}</div>
<div class="line"><a name="l06530"></a><span class="lineno"> 6530</span>&#160; </div>
<div class="line"><a name="l06531"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a3562903e411373aa50cb9d2d8efc231e"> 6531</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a4e7658c799be9e171612809cd43cecd5">CanBusMotionControl::checkMotionDoneRaw</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> n_joint, <span class="keyword">const</span> <span class="keywordtype">int</span> *joints, <span class="keywordtype">bool</span> *flag)</div>
<div class="line"><a name="l06532"></a><span class="lineno"> 6532</span>&#160;{</div>
<div class="line"><a name="l06533"></a><span class="lineno"> 6533</span>&#160;    <span class="keywordtype">bool</span> ret = <span class="keyword">true</span>;</div>
<div class="line"><a name="l06534"></a><span class="lineno"> 6534</span>&#160;    <span class="keywordtype">bool</span> value = <span class="keyword">true</span>;</div>
<div class="line"><a name="l06535"></a><span class="lineno"> 6535</span>&#160;    <span class="keywordtype">bool</span> tot_value = <span class="keyword">true</span>;</div>
<div class="line"><a name="l06536"></a><span class="lineno"> 6536</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0; j&lt;n_joint; j++)</div>
<div class="line"><a name="l06537"></a><span class="lineno"> 6537</span>&#160;    {</div>
<div class="line"><a name="l06538"></a><span class="lineno"> 6538</span>&#160;        ret = ret &amp;&amp; <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a4e7658c799be9e171612809cd43cecd5">checkMotionDoneRaw</a>(joints[j], &amp;value);</div>
<div class="line"><a name="l06539"></a><span class="lineno"> 6539</span>&#160;        tot_value &amp;= value;</div>
<div class="line"><a name="l06540"></a><span class="lineno"> 6540</span>&#160;    }</div>
<div class="line"><a name="l06541"></a><span class="lineno"> 6541</span>&#160;    *flag = tot_value;</div>
<div class="line"><a name="l06542"></a><span class="lineno"> 6542</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l06543"></a><span class="lineno"> 6543</span>&#160;}</div>
<div class="line"><a name="l06544"></a><span class="lineno"> 6544</span>&#160; </div>
<div class="line"><a name="l06545"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a0d19236b569254fe0a9d67560c7c6f79"> 6545</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a196ca3abd5139d92111b6ca128c2ae3c">CanBusMotionControl::setRefSpeedsRaw</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> n_joint, <span class="keyword">const</span> <span class="keywordtype">int</span> *joints, <span class="keyword">const</span> <span class="keywordtype">double</span> *spds)</div>
<div class="line"><a name="l06546"></a><span class="lineno"> 6546</span>&#160;{</div>
<div class="line"><a name="l06547"></a><span class="lineno"> 6547</span>&#160;    <span class="keywordtype">bool</span> ret = <span class="keyword">true</span>;</div>
<div class="line"><a name="l06548"></a><span class="lineno"> 6548</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0; j&lt;n_joint; j++)</div>
<div class="line"><a name="l06549"></a><span class="lineno"> 6549</span>&#160;    {</div>
<div class="line"><a name="l06550"></a><span class="lineno"> 6550</span>&#160;        ret = ret &amp;&amp; <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ae7407df4c6b55bbe923fdfa5afb69c7f">setRefSpeedRaw</a>(joints[j], spds[j]);</div>
<div class="line"><a name="l06551"></a><span class="lineno"> 6551</span>&#160;    }</div>
<div class="line"><a name="l06552"></a><span class="lineno"> 6552</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l06553"></a><span class="lineno"> 6553</span>&#160;}</div>
<div class="line"><a name="l06554"></a><span class="lineno"> 6554</span>&#160; </div>
<div class="line"><a name="l06555"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aec1c2e05f6a73c31dde06fe93608bfda"> 6555</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ad947172b9a8d2b73de893cdc41224af2">CanBusMotionControl::setRefAccelerationsRaw</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> n_joint, <span class="keyword">const</span> <span class="keywordtype">int</span> *joints, <span class="keyword">const</span> <span class="keywordtype">double</span> *accs)</div>
<div class="line"><a name="l06556"></a><span class="lineno"> 6556</span>&#160;{</div>
<div class="line"><a name="l06557"></a><span class="lineno"> 6557</span>&#160;    <span class="keywordtype">bool</span> ret = <span class="keyword">true</span>;</div>
<div class="line"><a name="l06558"></a><span class="lineno"> 6558</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0; j&lt;n_joint; j++)</div>
<div class="line"><a name="l06559"></a><span class="lineno"> 6559</span>&#160;    {</div>
<div class="line"><a name="l06560"></a><span class="lineno"> 6560</span>&#160;        ret = ret &amp;&amp; <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a26d920313a34bdd2fc33dfdd558df799">setRefAccelerationRaw</a>(joints[j], accs[j]);</div>
<div class="line"><a name="l06561"></a><span class="lineno"> 6561</span>&#160;    }</div>
<div class="line"><a name="l06562"></a><span class="lineno"> 6562</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l06563"></a><span class="lineno"> 6563</span>&#160;}</div>
<div class="line"><a name="l06564"></a><span class="lineno"> 6564</span>&#160; </div>
<div class="line"><a name="l06565"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ac8610b611bb9405f9299862846364d70"> 6565</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a904f51287296939ef50721ea4d0a59fa">CanBusMotionControl::getRefSpeedsRaw</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> n_joint, <span class="keyword">const</span> <span class="keywordtype">int</span> *joints, <span class="keywordtype">double</span> *spds)</div>
<div class="line"><a name="l06566"></a><span class="lineno"> 6566</span>&#160;{</div>
<div class="line"><a name="l06567"></a><span class="lineno"> 6567</span>&#160;    <span class="keywordtype">bool</span> ret = <span class="keyword">true</span>;</div>
<div class="line"><a name="l06568"></a><span class="lineno"> 6568</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0; j&lt;n_joint; j++)</div>
<div class="line"><a name="l06569"></a><span class="lineno"> 6569</span>&#160;    {</div>
<div class="line"><a name="l06570"></a><span class="lineno"> 6570</span>&#160;        ret = ret &amp;&amp; <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#afd2de980685371cebfa860de6afe6094">getRefSpeedRaw</a>(joints[j], &amp;spds[j]);</div>
<div class="line"><a name="l06571"></a><span class="lineno"> 6571</span>&#160;    }</div>
<div class="line"><a name="l06572"></a><span class="lineno"> 6572</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l06573"></a><span class="lineno"> 6573</span>&#160;}</div>
<div class="line"><a name="l06574"></a><span class="lineno"> 6574</span>&#160; </div>
<div class="line"><a name="l06575"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a5cfb383382b51526fcdefd91495358f6"> 6575</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ab77e86fff33c35b8f61dc18315966602">CanBusMotionControl::getRefAccelerationsRaw</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> n_joint, <span class="keyword">const</span> <span class="keywordtype">int</span> *joints, <span class="keywordtype">double</span> *accs)</div>
<div class="line"><a name="l06576"></a><span class="lineno"> 6576</span>&#160;{</div>
<div class="line"><a name="l06577"></a><span class="lineno"> 6577</span>&#160;    <span class="keywordtype">bool</span> ret = <span class="keyword">true</span>;</div>
<div class="line"><a name="l06578"></a><span class="lineno"> 6578</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0; j&lt;n_joint; j++)</div>
<div class="line"><a name="l06579"></a><span class="lineno"> 6579</span>&#160;    {</div>
<div class="line"><a name="l06580"></a><span class="lineno"> 6580</span>&#160;        ret = ret &amp;&amp; <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a86266c3dc40fd836fdbd1cd04d1f18f5">getRefAccelerationRaw</a>(joints[j], &amp;accs[j]);</div>
<div class="line"><a name="l06581"></a><span class="lineno"> 6581</span>&#160;    }</div>
<div class="line"><a name="l06582"></a><span class="lineno"> 6582</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l06583"></a><span class="lineno"> 6583</span>&#160;}</div>
<div class="line"><a name="l06584"></a><span class="lineno"> 6584</span>&#160; </div>
<div class="line"><a name="l06585"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#abd0e874b065ea70a743ae07fd6c4ab2c"> 6585</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a2c64ab9c1bb700af940611bc271248d0">CanBusMotionControl::stopRaw</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> n_joint, <span class="keyword">const</span> <span class="keywordtype">int</span> *joints)</div>
<div class="line"><a name="l06586"></a><span class="lineno"> 6586</span>&#160;{</div>
<div class="line"><a name="l06587"></a><span class="lineno"> 6587</span>&#160;    <span class="keywordtype">bool</span> ret = <span class="keyword">true</span>;</div>
<div class="line"><a name="l06588"></a><span class="lineno"> 6588</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0; j&lt;n_joint; j++)</div>
<div class="line"><a name="l06589"></a><span class="lineno"> 6589</span>&#160;    {</div>
<div class="line"><a name="l06590"></a><span class="lineno"> 6590</span>&#160;        ret = ret &amp;&amp; <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a2c64ab9c1bb700af940611bc271248d0">stopRaw</a>(joints[j]);</div>
<div class="line"><a name="l06591"></a><span class="lineno"> 6591</span>&#160;    }</div>
<div class="line"><a name="l06592"></a><span class="lineno"> 6592</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l06593"></a><span class="lineno"> 6593</span>&#160;}</div>
<div class="line"><a name="l06594"></a><span class="lineno"> 6594</span>&#160; </div>
<div class="line"><a name="l06596"></a><span class="lineno"> 6596</span>&#160; </div>
<div class="line"><a name="l06598"></a><span class="lineno"> 6598</span>&#160;<span class="comment">//     Velocity control2 interface    //</span></div>
<div class="line"><a name="l06600"></a><span class="lineno"> 6600</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l06601"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a077ef604fbc80c3898cfda1111df7390"> 6601</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ab9883108643d2bf367239e7d7e1d3d08">CanBusMotionControl::velocityMoveRaw</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> n_joint, <span class="keyword">const</span> <span class="keywordtype">int</span> *joints, <span class="keyword">const</span> <span class="keywordtype">double</span> *spds)</div>
<div class="line"><a name="l06602"></a><span class="lineno"> 6602</span>&#160;{</div>
<div class="line"><a name="l06603"></a><span class="lineno"> 6603</span>&#160;    <span class="keywordtype">bool</span> ret = <span class="keyword">true</span>;</div>
<div class="line"><a name="l06604"></a><span class="lineno"> 6604</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0; j&lt; n_joint; j++)</div>
<div class="line"><a name="l06605"></a><span class="lineno"> 6605</span>&#160;    {</div>
<div class="line"><a name="l06606"></a><span class="lineno"> 6606</span>&#160;        ret = ret &amp;&amp; <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ab9883108643d2bf367239e7d7e1d3d08">velocityMoveRaw</a>(joints[j], spds[j]);</div>
<div class="line"><a name="l06607"></a><span class="lineno"> 6607</span>&#160;    }</div>
<div class="line"><a name="l06608"></a><span class="lineno"> 6608</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l06609"></a><span class="lineno"> 6609</span>&#160;}</div>
<div class="line"><a name="l06610"></a><span class="lineno"> 6610</span>&#160; </div>
<div class="line"><a name="l06611"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a7a18a7426b30c7fcbc39941f73acaaa5"> 6611</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a7a18a7426b30c7fcbc39941f73acaaa5">CanBusMotionControl::helper_setCurPidRaw</a>(<span class="keywordtype">int</span> j, <span class="keyword">const</span> Pid &amp;pid)</div>
<div class="line"><a name="l06612"></a><span class="lineno"> 6612</span>&#160;{</div>
<div class="line"><a name="l06613"></a><span class="lineno"> 6613</span>&#160;    <span class="comment">// Our boards do not have a Velocity Pid</span></div>
<div class="line"><a name="l06614"></a><span class="lineno"> 6614</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="CanBusMotionControl_8cpp.html#a35a12201dd9ff39ea640f1d8b39f0770">NOT_YET_IMPLEMENTED</a>(<span class="stringliteral">&quot;Our boards do not have a Current Pid&quot;</span>);</div>
<div class="line"><a name="l06615"></a><span class="lineno"> 6615</span>&#160;}</div>
<div class="line"><a name="l06616"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#addea91884851d7b29d70049b11ca128f"> 6616</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#addea91884851d7b29d70049b11ca128f">CanBusMotionControl::helper_getCurPidRaw</a>(<span class="keywordtype">int</span> j, Pid *pid)</div>
<div class="line"><a name="l06617"></a><span class="lineno"> 6617</span>&#160;{</div>
<div class="line"><a name="l06618"></a><span class="lineno"> 6618</span>&#160;    <span class="comment">// Our boards do not have a Velocity Pid</span></div>
<div class="line"><a name="l06619"></a><span class="lineno"> 6619</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="CanBusMotionControl_8cpp.html#a35a12201dd9ff39ea640f1d8b39f0770">NOT_YET_IMPLEMENTED</a>(<span class="stringliteral">&quot;Our boards do not have a Current Pid&quot;</span>);</div>
<div class="line"><a name="l06620"></a><span class="lineno"> 6620</span>&#160;}</div>
<div class="line"><a name="l06621"></a><span class="lineno"> 6621</span>&#160; </div>
<div class="line"><a name="l06622"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ac5959a536ae829d502b0ebe3873ea6c1"> 6622</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ac5959a536ae829d502b0ebe3873ea6c1">CanBusMotionControl::helper_setVelPidRaw</a>(<span class="keywordtype">int</span> j, <span class="keyword">const</span> Pid &amp;pid)</div>
<div class="line"><a name="l06623"></a><span class="lineno"> 6623</span>&#160;{</div>
<div class="line"><a name="l06624"></a><span class="lineno"> 6624</span>&#160;    <span class="comment">// Our boards do not have a Velocity Pid</span></div>
<div class="line"><a name="l06625"></a><span class="lineno"> 6625</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="CanBusMotionControl_8cpp.html#a35a12201dd9ff39ea640f1d8b39f0770">NOT_YET_IMPLEMENTED</a>(<span class="stringliteral">&quot;Our boards do not have a Velocity Pid&quot;</span>);</div>
<div class="line"><a name="l06626"></a><span class="lineno"> 6626</span>&#160;}</div>
<div class="line"><a name="l06627"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a447c8a5d0560c821bc3d86f43fc23da4"> 6627</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a447c8a5d0560c821bc3d86f43fc23da4">CanBusMotionControl::helper_getVelPidRaw</a>(<span class="keywordtype">int</span> j, Pid *pid)</div>
<div class="line"><a name="l06628"></a><span class="lineno"> 6628</span>&#160;{</div>
<div class="line"><a name="l06629"></a><span class="lineno"> 6629</span>&#160;    <span class="comment">// Our boards do not have a Velocity Pid</span></div>
<div class="line"><a name="l06630"></a><span class="lineno"> 6630</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="CanBusMotionControl_8cpp.html#a35a12201dd9ff39ea640f1d8b39f0770">NOT_YET_IMPLEMENTED</a>(<span class="stringliteral">&quot;Our boards do not have a Velocity Pid&quot;</span>);</div>
<div class="line"><a name="l06631"></a><span class="lineno"> 6631</span>&#160;}</div>
<div class="line"><a name="l06632"></a><span class="lineno"> 6632</span>&#160; </div>
<div class="line"><a name="l06634"></a><span class="lineno"> 6634</span>&#160; </div>
<div class="line"><a name="l06635"></a><span class="lineno"> 6635</span>&#160;<span class="comment">// IControlLimits</span></div>
<div class="line"><a name="l06636"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a4c28a37de6845d48251f004d57951f16"> 6636</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a4c28a37de6845d48251f004d57951f16">CanBusMotionControl::setVelLimitsRaw</a>(<span class="keywordtype">int</span> axis, <span class="keywordtype">double</span> <a class="code" href="namespacestrain_1_1dsp_1_1fsc.html#a746ce6f9a14034939607ccead53e3fd6">min</a>, <span class="keywordtype">double</span> <a class="code" href="namespacestrain_1_1dsp_1_1fsc.html#a65804363dbaa9346e53442cb1bb9d73f">max</a>)</div>
<div class="line"><a name="l06637"></a><span class="lineno"> 6637</span>&#160;{</div>
<div class="line"><a name="l06638"></a><span class="lineno"> 6638</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a> - 1) * 2))</div>
<div class="line"><a name="l06639"></a><span class="lineno"> 6639</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l06640"></a><span class="lineno"> 6640</span>&#160;    std::lock_guard&lt;std::recursive_mutex&gt; lck(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>);</div>
<div class="line"><a name="l06641"></a><span class="lineno"> 6641</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a4c86489f94cca2de72da41bc2664b551">_max_vel_jnt_cmd</a>[axis]=<a class="code" href="namespacestrain_1_1dsp_1_1fsc.html#a65804363dbaa9346e53442cb1bb9d73f">max</a>;</div>
<div class="line"><a name="l06642"></a><span class="lineno"> 6642</span>&#160;    <span class="comment">//min not implemented</span></div>
<div class="line"><a name="l06643"></a><span class="lineno"> 6643</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l06644"></a><span class="lineno"> 6644</span>&#160;}</div>
<div class="line"><a name="l06645"></a><span class="lineno"> 6645</span>&#160; </div>
<div class="line"><a name="l06646"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a4ec5ee1a106a6407455793c869e4dc5e"> 6646</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a4ec5ee1a106a6407455793c869e4dc5e">CanBusMotionControl::getVelLimitsRaw</a>(<span class="keywordtype">int</span> axis, <span class="keywordtype">double</span> *<a class="code" href="namespacestrain_1_1dsp_1_1fsc.html#a746ce6f9a14034939607ccead53e3fd6">min</a>, <span class="keywordtype">double</span> *<a class="code" href="namespacestrain_1_1dsp_1_1fsc.html#a65804363dbaa9346e53442cb1bb9d73f">max</a>)</div>
<div class="line"><a name="l06647"></a><span class="lineno"> 6647</span>&#160;{</div>
<div class="line"><a name="l06648"></a><span class="lineno"> 6648</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a> - 1) * 2))</div>
<div class="line"><a name="l06649"></a><span class="lineno"> 6649</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l06650"></a><span class="lineno"> 6650</span>&#160;    std::lock_guard&lt;std::recursive_mutex&gt; lck(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>);</div>
<div class="line"><a name="l06651"></a><span class="lineno"> 6651</span>&#160;    *<a class="code" href="namespacestrain_1_1dsp_1_1fsc.html#a65804363dbaa9346e53442cb1bb9d73f">max</a> = <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a4c86489f94cca2de72da41bc2664b551">_max_vel_jnt_cmd</a>[axis];</div>
<div class="line"><a name="l06652"></a><span class="lineno"> 6652</span>&#160;    *<a class="code" href="namespacestrain_1_1dsp_1_1fsc.html#a746ce6f9a14034939607ccead53e3fd6">min</a> = 0;</div>
<div class="line"><a name="l06653"></a><span class="lineno"> 6653</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l06654"></a><span class="lineno"> 6654</span>&#160;}</div>
<div class="line"><a name="l06655"></a><span class="lineno"> 6655</span>&#160; </div>
<div class="line"><a name="l06656"></a><span class="lineno"> 6656</span>&#160;<span class="comment">// PositionDirect Interface</span></div>
<div class="line"><a name="l06657"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a9336bef6ae7cf393586d354f6f0adad5"> 6657</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a9336bef6ae7cf393586d354f6f0adad5">CanBusMotionControl::setPositionRaw</a>(<span class="keywordtype">int</span> j, <span class="keywordtype">double</span> ref)</div>
<div class="line"><a name="l06658"></a><span class="lineno"> 6658</span>&#160;{</div>
<div class="line"><a name="l06659"></a><span class="lineno"> 6659</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l06660"></a><span class="lineno"> 6660</span>&#160; </div>
<div class="line"><a name="l06661"></a><span class="lineno"> 6661</span>&#160;    <span class="keywordflow">if</span> (1<span class="comment">/*fabs(ref-r._bcastRecvBuffer[j]._position_joint._value) &lt; _axisPositionDirectHelper-&gt;getMaxHwStep(j)*/</span>)</div>
<div class="line"><a name="l06662"></a><span class="lineno"> 6662</span>&#160;    {</div>
<div class="line"><a name="l06663"></a><span class="lineno"> 6663</span>&#160; </div>
<div class="line"><a name="l06664"></a><span class="lineno"> 6664</span>&#160;        <span class="keywordtype">int</span> mode = 0;</div>
<div class="line"><a name="l06665"></a><span class="lineno"> 6665</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a70e12eba89c67a6805b978e8fd839685">getControlModeRaw</a>(j, &amp;mode);</div>
<div class="line"><a name="l06666"></a><span class="lineno"> 6666</span>&#160;        <span class="keywordflow">if</span> (mode != VOCAB_CM_POSITION_DIRECT &amp;&amp;</div>
<div class="line"><a name="l06667"></a><span class="lineno"> 6667</span>&#160;            mode != VOCAB_CM_IDLE)</div>
<div class="line"><a name="l06668"></a><span class="lineno"> 6668</span>&#160;        {</div>
<div class="line"><a name="l06669"></a><span class="lineno"> 6669</span>&#160;            yError() &lt;&lt; <span class="stringliteral">&quot;setPositionRaw: skipping command because &quot;</span> &lt;&lt; networkName.c_str() &lt;&lt; <span class="stringliteral">&quot; joint &quot;</span> &lt;&lt; j &lt;&lt; <span class="stringliteral">&quot;is not in VOCAB_CM_POSITION_DIRECT mode&quot;</span>;</div>
<div class="line"><a name="l06670"></a><span class="lineno"> 6670</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l06671"></a><span class="lineno"> 6671</span>&#160;        }</div>
<div class="line"><a name="l06672"></a><span class="lineno"> 6672</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a3c5883fff29d225096173b0209107362">_writeDWord</a> (ICUBCANPROTO_POL_MC_CMD__SET_COMMAND_POSITION, j, <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ae6ad0f0f8abc5fcd9469978a25c22e7a">S_32</a>(ref));</div>
<div class="line"><a name="l06673"></a><span class="lineno"> 6673</span>&#160;    }</div>
<div class="line"><a name="l06674"></a><span class="lineno"> 6674</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l06675"></a><span class="lineno"> 6675</span>&#160;    { </div>
<div class="line"><a name="l06676"></a><span class="lineno"> 6676</span>&#160;        yWarning(<span class="stringliteral">&quot;skipping setPosition() on %s, joint %d (req: %.1f curr %.1f) \n&quot;</span>, networkName.c_str() , j,</div>
<div class="line"><a name="l06677"></a><span class="lineno"> 6677</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a28a5ef0d465c731987826722346ff1a6">_axisPositionDirectHelper</a>-&gt;<a class="code" href="classaxisPositionDirectHelper.html#ad6e6e2932fc8ca891419f329f1812b21">posE2A</a>(ref, j),</div>
<div class="line"><a name="l06678"></a><span class="lineno"> 6678</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a28a5ef0d465c731987826722346ff1a6">_axisPositionDirectHelper</a>-&gt;<a class="code" href="classaxisPositionDirectHelper.html#ad6e6e2932fc8ca891419f329f1812b21">posE2A</a>(r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#af9b2502ea8bef890aec0d7f70205e2c0">_position_joint</a>.<a class="code" href="structBCastElement.html#a048622f3390102c83b081b8799ac97d1">_value</a>, j));</div>
<div class="line"><a name="l06679"></a><span class="lineno"> 6679</span>&#160;        <span class="comment">//double saturated_cmd = _axisPositionDirectHelper-&gt;getSaturatedValue(j,r._bcastRecvBuffer[j]._position_joint._value,ref);</span></div>
<div class="line"><a name="l06680"></a><span class="lineno"> 6680</span>&#160;        <span class="comment">//_writeDWord (CAN_SET_COMMAND_POSITION, j, S_32(saturated_cmd));</span></div>
<div class="line"><a name="l06681"></a><span class="lineno"> 6681</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l06682"></a><span class="lineno"> 6682</span>&#160;    }</div>
<div class="line"><a name="l06683"></a><span class="lineno"> 6683</span>&#160;}</div>
<div class="line"><a name="l06684"></a><span class="lineno"> 6684</span>&#160; </div>
<div class="line"><a name="l06685"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a38b22085c968f819b612edf96dbe3d6b"> 6685</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a38b22085c968f819b612edf96dbe3d6b">CanBusMotionControl::setPositionsRaw</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> n_joint, <span class="keyword">const</span> <span class="keywordtype">int</span> *joints, <span class="keyword">const</span> <span class="keywordtype">double</span> *refs)</div>
<div class="line"><a name="l06686"></a><span class="lineno"> 6686</span>&#160;{</div>
<div class="line"><a name="l06687"></a><span class="lineno"> 6687</span>&#160;    <span class="keywordflow">if</span> (refs == 0) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l06688"></a><span class="lineno"> 6688</span>&#160;    <span class="keywordflow">if</span> (joints == 0) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l06689"></a><span class="lineno"> 6689</span>&#160;    <span class="keywordtype">bool</span> ret = <span class="keyword">true</span>;</div>
<div class="line"><a name="l06690"></a><span class="lineno"> 6690</span>&#160; </div>
<div class="line"><a name="l06691"></a><span class="lineno"> 6691</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; n_joint; j++)</div>
<div class="line"><a name="l06692"></a><span class="lineno"> 6692</span>&#160;    {</div>
<div class="line"><a name="l06693"></a><span class="lineno"> 6693</span>&#160;        ret = ret &amp; <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a9336bef6ae7cf393586d354f6f0adad5">setPositionRaw</a>(joints[j],refs[j]);</div>
<div class="line"><a name="l06694"></a><span class="lineno"> 6694</span>&#160;    }</div>
<div class="line"><a name="l06695"></a><span class="lineno"> 6695</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l06696"></a><span class="lineno"> 6696</span>&#160;}</div>
<div class="line"><a name="l06697"></a><span class="lineno"> 6697</span>&#160; </div>
<div class="line"><a name="l06698"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a0c11ecda2606b2f17f1cbc8e2d7eb99f"> 6698</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a38b22085c968f819b612edf96dbe3d6b">CanBusMotionControl::setPositionsRaw</a>(<span class="keyword">const</span> <span class="keywordtype">double</span> *refs)</div>
<div class="line"><a name="l06699"></a><span class="lineno"> 6699</span>&#160;{</div>
<div class="line"><a name="l06700"></a><span class="lineno"> 6700</span>&#160;    <span class="keywordflow">if</span> (refs == 0) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l06701"></a><span class="lineno"> 6701</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l06702"></a><span class="lineno"> 6702</span>&#160;    <span class="keywordtype">bool</span> ret = <span class="keyword">true</span>;</div>
<div class="line"><a name="l06703"></a><span class="lineno"> 6703</span>&#160; </div>
<div class="line"><a name="l06704"></a><span class="lineno"> 6704</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>(); j++)</div>
<div class="line"><a name="l06705"></a><span class="lineno"> 6705</span>&#160;    {</div>
<div class="line"><a name="l06706"></a><span class="lineno"> 6706</span>&#160;        ret = ret &amp; <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a9336bef6ae7cf393586d354f6f0adad5">setPositionRaw</a>(j,refs[j]);</div>
<div class="line"><a name="l06707"></a><span class="lineno"> 6707</span>&#160;    }</div>
<div class="line"><a name="l06708"></a><span class="lineno"> 6708</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l06709"></a><span class="lineno"> 6709</span>&#160;}</div>
<div class="line"><a name="l06710"></a><span class="lineno"> 6710</span>&#160; </div>
<div class="line"><a name="l06711"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ab1fbba311bcc423521d94de59ab3318d"> 6711</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ab1fbba311bcc423521d94de59ab3318d">CanBusMotionControl::isPidEnabledRaw</a>(<span class="keyword">const</span> PidControlTypeEnum&amp; pidtype, <span class="keywordtype">int</span> j, <span class="keywordtype">bool</span>* enabled)</div>
<div class="line"><a name="l06712"></a><span class="lineno"> 6712</span>&#160;{</div>
<div class="line"><a name="l06713"></a><span class="lineno"> 6713</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="CanBusMotionControl_8cpp.html#a35a12201dd9ff39ea640f1d8b39f0770">NOT_YET_IMPLEMENTED</a>(<span class="stringliteral">&quot;isPidEnabled&quot;</span>);</div>
<div class="line"><a name="l06714"></a><span class="lineno"> 6714</span>&#160;}</div>
<div class="line"><a name="l06715"></a><span class="lineno"> 6715</span>&#160; </div>
<div class="line"><a name="l06716"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a7955fbd89c0ca495bcaef36f0aa8181f"> 6716</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a7955fbd89c0ca495bcaef36f0aa8181f">CanBusMotionControl::loadBootMemory</a>()</div>
<div class="line"><a name="l06717"></a><span class="lineno"> 6717</span>&#160;{</div>
<div class="line"><a name="l06718"></a><span class="lineno"> 6718</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l06719"></a><span class="lineno"> 6719</span>&#160; </div>
<div class="line"><a name="l06720"></a><span class="lineno"> 6720</span>&#160;    <span class="keywordtype">bool</span> ret=<span class="keyword">true</span>;</div>
<div class="line"><a name="l06721"></a><span class="lineno"> 6721</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0; j&lt;r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>(); j++)</div>
<div class="line"><a name="l06722"></a><span class="lineno"> 6722</span>&#160;    {</div>
<div class="line"><a name="l06723"></a><span class="lineno"> 6723</span>&#160;        ret=<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a893086dd6dade4b2fec570798f52262f">_writeNone</a>(ICUBCANPROTO_POL_MC_CMD__READ_FLASH_MEM, j);</div>
<div class="line"><a name="l06724"></a><span class="lineno"> 6724</span>&#160;        <span class="keywordflow">if</span> (!ret)</div>
<div class="line"><a name="l06725"></a><span class="lineno"> 6725</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l06726"></a><span class="lineno"> 6726</span>&#160;    }</div>
<div class="line"><a name="l06727"></a><span class="lineno"> 6727</span>&#160; </div>
<div class="line"><a name="l06728"></a><span class="lineno"> 6728</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l06729"></a><span class="lineno"> 6729</span>&#160;}</div>
<div class="line"><a name="l06730"></a><span class="lineno"> 6730</span>&#160; </div>
<div class="line"><a name="l06731"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a3bbfbe4b44432e87f15d5516847d9338"> 6731</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a3bbfbe4b44432e87f15d5516847d9338">CanBusMotionControl::saveBootMemory</a> ()</div>
<div class="line"><a name="l06732"></a><span class="lineno"> 6732</span>&#160;{</div>
<div class="line"><a name="l06733"></a><span class="lineno"> 6733</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l06734"></a><span class="lineno"> 6734</span>&#160; </div>
<div class="line"><a name="l06735"></a><span class="lineno"> 6735</span>&#160;    <span class="keywordtype">bool</span> ret=<span class="keyword">true</span>;</div>
<div class="line"><a name="l06736"></a><span class="lineno"> 6736</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0; j&lt;r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>(); j++)</div>
<div class="line"><a name="l06737"></a><span class="lineno"> 6737</span>&#160;    {</div>
<div class="line"><a name="l06738"></a><span class="lineno"> 6738</span>&#160;        ret=<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a893086dd6dade4b2fec570798f52262f">_writeNone</a>(ICUBCANPROTO_POL_MC_CMD__WRITE_FLASH_MEM, j);</div>
<div class="line"><a name="l06739"></a><span class="lineno"> 6739</span>&#160;        <span class="keywordflow">if</span> (!ret)</div>
<div class="line"><a name="l06740"></a><span class="lineno"> 6740</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l06741"></a><span class="lineno"> 6741</span>&#160;    }</div>
<div class="line"><a name="l06742"></a><span class="lineno"> 6742</span>&#160; </div>
<div class="line"><a name="l06743"></a><span class="lineno"> 6743</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l06744"></a><span class="lineno"> 6744</span>&#160;}</div>
<div class="line"><a name="l06745"></a><span class="lineno"> 6745</span>&#160; </div>
<div class="line"><a name="l06751"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a8ba29de2fc1d9e4bd2057f806da54001"> 6751</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a8ba29de2fc1d9e4bd2057f806da54001">CanBusMotionControl::setBCastMessages</a> (<span class="keywordtype">int</span> axis, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> v)</div>
<div class="line"><a name="l06752"></a><span class="lineno"> 6752</span>&#160;{</div>
<div class="line"><a name="l06753"></a><span class="lineno"> 6753</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>-1)*2))</div>
<div class="line"><a name="l06754"></a><span class="lineno"> 6754</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l06755"></a><span class="lineno"> 6755</span>&#160; </div>
<div class="line"><a name="l06756"></a><span class="lineno"> 6756</span>&#160;    <span class="comment">// why S_32??</span></div>
<div class="line"><a name="l06757"></a><span class="lineno"> 6757</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a3c5883fff29d225096173b0209107362">_writeDWord</a> (ICUBCANPROTO_POL_MC_CMD__SET_BCAST_POLICY, axis, <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ae6ad0f0f8abc5fcd9469978a25c22e7a">S_32</a>(v));</div>
<div class="line"><a name="l06758"></a><span class="lineno"> 6758</span>&#160;}</div>
<div class="line"><a name="l06759"></a><span class="lineno"> 6759</span>&#160; </div>
<div class="line"><a name="l06760"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a56978bb0d722116c2e86777743d17247"> 6760</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a56978bb0d722116c2e86777743d17247">CanBusMotionControl::ENABLED</a> (<span class="keywordtype">int</span> axis)</div>
<div class="line"><a name="l06761"></a><span class="lineno"> 6761</span>&#160;{</div>
<div class="line"><a name="l06762"></a><span class="lineno"> 6762</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l06763"></a><span class="lineno"> 6763</span>&#160;    <span class="keywordflow">return</span> ((r.<a class="code" href="classCanBusResources.html#aebb638eb231f9461b10f514b580dab67">_destinations</a>[axis/2] &amp; <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a04ca9a8b5a62f6b375400a901197fa7fa4136e50edff1ac67a235758df80a372c">CAN_SKIP_ADDR</a>) == 0) ? true : <span class="keyword">false</span>;</div>
<div class="line"><a name="l06764"></a><span class="lineno"> 6764</span>&#160;}</div>
<div class="line"><a name="l06765"></a><span class="lineno"> 6765</span>&#160; </div>
<div class="line"><a name="l06768"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a893086dd6dade4b2fec570798f52262f"> 6768</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a893086dd6dade4b2fec570798f52262f">CanBusMotionControl::_writeNone</a> (<span class="keywordtype">int</span> msg, <span class="keywordtype">int</span> axis)</div>
<div class="line"><a name="l06769"></a><span class="lineno"> 6769</span>&#160;{</div>
<div class="line"><a name="l06770"></a><span class="lineno"> 6770</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l06771"></a><span class="lineno"> 6771</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>-1)*2))</div>
<div class="line"><a name="l06772"></a><span class="lineno"> 6772</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l06773"></a><span class="lineno"> 6773</span>&#160; </div>
<div class="line"><a name="l06774"></a><span class="lineno"> 6774</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a56978bb0d722116c2e86777743d17247">ENABLED</a>(axis))</div>
<div class="line"><a name="l06775"></a><span class="lineno"> 6775</span>&#160;    {</div>
<div class="line"><a name="l06776"></a><span class="lineno"> 6776</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l06777"></a><span class="lineno"> 6777</span>&#160;    }</div>
<div class="line"><a name="l06778"></a><span class="lineno"> 6778</span>&#160; </div>
<div class="line"><a name="l06779"></a><span class="lineno"> 6779</span>&#160;    <a class="code" href="canControlUtils_8h.html#aed353ce9c28af351b98138a0a3cee032">DEBUG_FUNC</a>(<span class="stringliteral">&quot;Write None msg:%d axis:%d\n&quot;</span>, msg, axis);</div>
<div class="line"><a name="l06780"></a><span class="lineno"> 6780</span>&#160;    std::lock_guard&lt;std::recursive_mutex&gt; lck(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>);</div>
<div class="line"><a name="l06781"></a><span class="lineno"> 6781</span>&#160; </div>
<div class="line"><a name="l06782"></a><span class="lineno"> 6782</span>&#160;    r.<a class="code" href="classCanBusResources.html#a426cb1e9b09f03d70b8dbccb2346edb8">startPacket</a>();</div>
<div class="line"><a name="l06783"></a><span class="lineno"> 6783</span>&#160;    r.<a class="code" href="classCanBusResources.html#a1049ab4df32ee910f61efbe130ba9b41">addMessage</a> (msg, axis);</div>
<div class="line"><a name="l06784"></a><span class="lineno"> 6784</span>&#160; </div>
<div class="line"><a name="l06785"></a><span class="lineno"> 6785</span>&#160;    <span class="comment">// send immediatly</span></div>
<div class="line"><a name="l06786"></a><span class="lineno"> 6786</span>&#160;    r.<a class="code" href="classCanBusResources.html#a36f76a689330cd6163c3f13bb8ac28d9">writePacket</a>();</div>
<div class="line"><a name="l06787"></a><span class="lineno"> 6787</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l06788"></a><span class="lineno"> 6788</span>&#160;}</div>
<div class="line"><a name="l06789"></a><span class="lineno"> 6789</span>&#160; </div>
<div class="line"><a name="l06790"></a><span class="lineno"> 6790</span>&#160; </div>
<div class="line"><a name="l06792"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a100a40a38da173be134acb6308284b29"> 6792</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a100a40a38da173be134acb6308284b29">CanBusMotionControl::_writeWord16</a> (<span class="keywordtype">int</span> msg, <span class="keywordtype">int</span> axis, <span class="keywordtype">short</span> s)</div>
<div class="line"><a name="l06793"></a><span class="lineno"> 6793</span>&#160;{</div>
<div class="line"><a name="l06795"></a><span class="lineno"> 6795</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l06796"></a><span class="lineno"> 6796</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>-1)*2))</div>
<div class="line"><a name="l06797"></a><span class="lineno"> 6797</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l06798"></a><span class="lineno"> 6798</span>&#160; </div>
<div class="line"><a name="l06799"></a><span class="lineno"> 6799</span>&#160;    <a class="code" href="canControlUtils_8h.html#aed353ce9c28af351b98138a0a3cee032">DEBUG_FUNC</a>(<span class="stringliteral">&quot;Writing Word16 msg:%d axis:%d\n&quot;</span>, msg, axis);</div>
<div class="line"><a name="l06800"></a><span class="lineno"> 6800</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a56978bb0d722116c2e86777743d17247">ENABLED</a>(axis))</div>
<div class="line"><a name="l06801"></a><span class="lineno"> 6801</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l06802"></a><span class="lineno"> 6802</span>&#160; </div>
<div class="line"><a name="l06803"></a><span class="lineno"> 6803</span>&#160;    std::lock_guard&lt;std::recursive_mutex&gt; lck(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>);</div>
<div class="line"><a name="l06804"></a><span class="lineno"> 6804</span>&#160; </div>
<div class="line"><a name="l06805"></a><span class="lineno"> 6805</span>&#160;    r.<a class="code" href="classCanBusResources.html#a426cb1e9b09f03d70b8dbccb2346edb8">startPacket</a>();</div>
<div class="line"><a name="l06806"></a><span class="lineno"> 6806</span>&#160;    r.<a class="code" href="classCanBusResources.html#a1049ab4df32ee910f61efbe130ba9b41">addMessage</a> (msg, axis);</div>
<div class="line"><a name="l06807"></a><span class="lineno"> 6807</span>&#160; </div>
<div class="line"><a name="l06808"></a><span class="lineno"> 6808</span>&#160;    *((<span class="keywordtype">short</span> *)(r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()+1)) = s;</div>
<div class="line"><a name="l06809"></a><span class="lineno"> 6809</span>&#160;    r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].setLen(3);</div>
<div class="line"><a name="l06810"></a><span class="lineno"> 6810</span>&#160; </div>
<div class="line"><a name="l06811"></a><span class="lineno"> 6811</span>&#160;    r.<a class="code" href="classCanBusResources.html#a36f76a689330cd6163c3f13bb8ac28d9">writePacket</a>();</div>
<div class="line"><a name="l06812"></a><span class="lineno"> 6812</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l06813"></a><span class="lineno"> 6813</span>&#160;}</div>
<div class="line"><a name="l06814"></a><span class="lineno"> 6814</span>&#160; </div>
<div class="line"><a name="l06816"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#acfe73ef88e6f12e63c152e63f943fb09"> 6816</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#acfe73ef88e6f12e63c152e63f943fb09">CanBusMotionControl::_writeByte8</a> (<span class="keywordtype">int</span> msg, <span class="keywordtype">int</span> axis, <span class="keywordtype">int</span> value)</div>
<div class="line"><a name="l06817"></a><span class="lineno"> 6817</span>&#160;{</div>
<div class="line"><a name="l06818"></a><span class="lineno"> 6818</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l06819"></a><span class="lineno"> 6819</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>-1)*2))</div>
<div class="line"><a name="l06820"></a><span class="lineno"> 6820</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l06821"></a><span class="lineno"> 6821</span>&#160; </div>
<div class="line"><a name="l06822"></a><span class="lineno"> 6822</span>&#160;    <a class="code" href="canControlUtils_8h.html#aed353ce9c28af351b98138a0a3cee032">DEBUG_FUNC</a>(<span class="stringliteral">&quot;Writing byte msg:%d axis:%d\n&quot;</span>, msg, axis);</div>
<div class="line"><a name="l06823"></a><span class="lineno"> 6823</span>&#160; </div>
<div class="line"><a name="l06824"></a><span class="lineno"> 6824</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a56978bb0d722116c2e86777743d17247">ENABLED</a>(axis))</div>
<div class="line"><a name="l06825"></a><span class="lineno"> 6825</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l06826"></a><span class="lineno"> 6826</span>&#160; </div>
<div class="line"><a name="l06827"></a><span class="lineno"> 6827</span>&#160;    std::lock_guard&lt;std::recursive_mutex&gt; lck(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>);</div>
<div class="line"><a name="l06828"></a><span class="lineno"> 6828</span>&#160; </div>
<div class="line"><a name="l06829"></a><span class="lineno"> 6829</span>&#160;    r.<a class="code" href="classCanBusResources.html#a426cb1e9b09f03d70b8dbccb2346edb8">startPacket</a>();</div>
<div class="line"><a name="l06830"></a><span class="lineno"> 6830</span>&#160;    r.<a class="code" href="classCanBusResources.html#a1049ab4df32ee910f61efbe130ba9b41">addMessage</a> (msg, axis);</div>
<div class="line"><a name="l06831"></a><span class="lineno"> 6831</span>&#160; </div>
<div class="line"><a name="l06832"></a><span class="lineno"> 6832</span>&#160;    *((<span class="keywordtype">int</span>*)(r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()+1)) = (value &amp; 0xFF);</div>
<div class="line"><a name="l06833"></a><span class="lineno"> 6833</span>&#160;    r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].setLen(2);</div>
<div class="line"><a name="l06834"></a><span class="lineno"> 6834</span>&#160; </div>
<div class="line"><a name="l06835"></a><span class="lineno"> 6835</span>&#160;    r.<a class="code" href="classCanBusResources.html#a36f76a689330cd6163c3f13bb8ac28d9">writePacket</a>();</div>
<div class="line"><a name="l06836"></a><span class="lineno"> 6836</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l06837"></a><span class="lineno"> 6837</span>&#160;}</div>
<div class="line"><a name="l06838"></a><span class="lineno"> 6838</span>&#160; </div>
<div class="line"><a name="l06840"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a3c5883fff29d225096173b0209107362"> 6840</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a3c5883fff29d225096173b0209107362">CanBusMotionControl::_writeDWord</a> (<span class="keywordtype">int</span> msg, <span class="keywordtype">int</span> axis, <span class="keywordtype">int</span> value)</div>
<div class="line"><a name="l06841"></a><span class="lineno"> 6841</span>&#160;{</div>
<div class="line"><a name="l06842"></a><span class="lineno"> 6842</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l06843"></a><span class="lineno"> 6843</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>-1)*2))</div>
<div class="line"><a name="l06844"></a><span class="lineno"> 6844</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l06845"></a><span class="lineno"> 6845</span>&#160; </div>
<div class="line"><a name="l06846"></a><span class="lineno"> 6846</span>&#160;    <a class="code" href="canControlUtils_8h.html#aed353ce9c28af351b98138a0a3cee032">DEBUG_FUNC</a>(<span class="stringliteral">&quot;Writing DWord msg:%d axis:%d\n&quot;</span>, msg, axis);</div>
<div class="line"><a name="l06847"></a><span class="lineno"> 6847</span>&#160; </div>
<div class="line"><a name="l06848"></a><span class="lineno"> 6848</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a56978bb0d722116c2e86777743d17247">ENABLED</a>(axis))</div>
<div class="line"><a name="l06849"></a><span class="lineno"> 6849</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l06850"></a><span class="lineno"> 6850</span>&#160; </div>
<div class="line"><a name="l06851"></a><span class="lineno"> 6851</span>&#160;    std::lock_guard&lt;std::recursive_mutex&gt; lck(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>);</div>
<div class="line"><a name="l06852"></a><span class="lineno"> 6852</span>&#160; </div>
<div class="line"><a name="l06853"></a><span class="lineno"> 6853</span>&#160;    r.<a class="code" href="classCanBusResources.html#a426cb1e9b09f03d70b8dbccb2346edb8">startPacket</a>();</div>
<div class="line"><a name="l06854"></a><span class="lineno"> 6854</span>&#160;    r.<a class="code" href="classCanBusResources.html#a1049ab4df32ee910f61efbe130ba9b41">addMessage</a> (msg, axis);</div>
<div class="line"><a name="l06855"></a><span class="lineno"> 6855</span>&#160; </div>
<div class="line"><a name="l06856"></a><span class="lineno"> 6856</span>&#160;    *((<span class="keywordtype">int</span>*)(r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()+1)) = value;</div>
<div class="line"><a name="l06857"></a><span class="lineno"> 6857</span>&#160;    r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].setLen(5);</div>
<div class="line"><a name="l06858"></a><span class="lineno"> 6858</span>&#160; </div>
<div class="line"><a name="l06859"></a><span class="lineno"> 6859</span>&#160;    r.<a class="code" href="classCanBusResources.html#a36f76a689330cd6163c3f13bb8ac28d9">writePacket</a>();</div>
<div class="line"><a name="l06860"></a><span class="lineno"> 6860</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l06861"></a><span class="lineno"> 6861</span>&#160;}</div>
<div class="line"><a name="l06862"></a><span class="lineno"> 6862</span>&#160; </div>
<div class="line"><a name="l06864"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a38334546ab8ca06858c1cbc5cdcc08ba"> 6864</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a38334546ab8ca06858c1cbc5cdcc08ba">CanBusMotionControl::_writeWord16Ex</a> (<span class="keywordtype">int</span> msg, <span class="keywordtype">int</span> axis, <span class="keywordtype">short</span> s1, <span class="keywordtype">short</span> s2, <span class="keywordtype">bool</span> checkAxisEven)</div>
<div class="line"><a name="l06865"></a><span class="lineno"> 6865</span>&#160;{</div>
<div class="line"><a name="l06867"></a><span class="lineno"> 6867</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l06868"></a><span class="lineno"> 6868</span>&#160; </div>
<div class="line"><a name="l06869"></a><span class="lineno"> 6869</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>-1)*2))</div>
<div class="line"><a name="l06870"></a><span class="lineno"> 6870</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l06871"></a><span class="lineno"> 6871</span>&#160; </div>
<div class="line"><a name="l06872"></a><span class="lineno"> 6872</span>&#160;    <span class="keywordflow">if</span> (checkAxisEven)</div>
<div class="line"><a name="l06873"></a><span class="lineno"> 6873</span>&#160;        ACE_ASSERT ((axis % 2) == 0);</div>
<div class="line"><a name="l06874"></a><span class="lineno"> 6874</span>&#160; </div>
<div class="line"><a name="l06875"></a><span class="lineno"> 6875</span>&#160;    <a class="code" href="canControlUtils_8h.html#aed353ce9c28af351b98138a0a3cee032">DEBUG_FUNC</a>(<span class="stringliteral">&quot;Write Word16Ex  msg:%d axis:%d\n&quot;</span>, msg, axis);</div>
<div class="line"><a name="l06876"></a><span class="lineno"> 6876</span>&#160; </div>
<div class="line"><a name="l06877"></a><span class="lineno"> 6877</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a56978bb0d722116c2e86777743d17247">ENABLED</a>(axis))</div>
<div class="line"><a name="l06878"></a><span class="lineno"> 6878</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l06879"></a><span class="lineno"> 6879</span>&#160; </div>
<div class="line"><a name="l06880"></a><span class="lineno"> 6880</span>&#160;    std::lock_guard&lt;std::recursive_mutex&gt; lck(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>);</div>
<div class="line"><a name="l06881"></a><span class="lineno"> 6881</span>&#160; </div>
<div class="line"><a name="l06882"></a><span class="lineno"> 6882</span>&#160;    r.<a class="code" href="classCanBusResources.html#a426cb1e9b09f03d70b8dbccb2346edb8">startPacket</a>();</div>
<div class="line"><a name="l06883"></a><span class="lineno"> 6883</span>&#160;    r.<a class="code" href="classCanBusResources.html#a1049ab4df32ee910f61efbe130ba9b41">addMessage</a> (msg, axis);</div>
<div class="line"><a name="l06884"></a><span class="lineno"> 6884</span>&#160; </div>
<div class="line"><a name="l06885"></a><span class="lineno"> 6885</span>&#160;    *((<span class="keywordtype">short</span> *)(r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()+1)) = s1;</div>
<div class="line"><a name="l06886"></a><span class="lineno"> 6886</span>&#160;    *((<span class="keywordtype">short</span> *)(r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()+3)) = s2;</div>
<div class="line"><a name="l06887"></a><span class="lineno"> 6887</span>&#160;    r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].setLen(5);</div>
<div class="line"><a name="l06888"></a><span class="lineno"> 6888</span>&#160; </div>
<div class="line"><a name="l06889"></a><span class="lineno"> 6889</span>&#160;    r.<a class="code" href="classCanBusResources.html#a36f76a689330cd6163c3f13bb8ac28d9">writePacket</a>();</div>
<div class="line"><a name="l06890"></a><span class="lineno"> 6890</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l06891"></a><span class="lineno"> 6891</span>&#160;}</div>
<div class="line"><a name="l06892"></a><span class="lineno"> 6892</span>&#160; </div>
<div class="line"><a name="l06893"></a><span class="lineno"> 6893</span>&#160; </div>
<div class="line"><a name="l06894"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a7e4043b59bbeff7d30f1d85edb84df11"> 6894</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a7e4043b59bbeff7d30f1d85edb84df11">CanBusMotionControl::_writeByteWords16</a> (<span class="keywordtype">int</span> msg, <span class="keywordtype">int</span> axis, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> value, <span class="keywordtype">short</span> s1, <span class="keywordtype">short</span> s2, <span class="keywordtype">short</span> s3)</div>
<div class="line"><a name="l06895"></a><span class="lineno"> 6895</span>&#160;{</div>
<div class="line"><a name="l06897"></a><span class="lineno"> 6897</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l06898"></a><span class="lineno"> 6898</span>&#160; </div>
<div class="line"><a name="l06899"></a><span class="lineno"> 6899</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>-1)*2))</div>
<div class="line"><a name="l06900"></a><span class="lineno"> 6900</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l06901"></a><span class="lineno"> 6901</span>&#160; </div>
<div class="line"><a name="l06902"></a><span class="lineno"> 6902</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a56978bb0d722116c2e86777743d17247">ENABLED</a>(axis))</div>
<div class="line"><a name="l06903"></a><span class="lineno"> 6903</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l06904"></a><span class="lineno"> 6904</span>&#160; </div>
<div class="line"><a name="l06905"></a><span class="lineno"> 6905</span>&#160;    std::lock_guard&lt;std::recursive_mutex&gt; lck(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>);</div>
<div class="line"><a name="l06906"></a><span class="lineno"> 6906</span>&#160; </div>
<div class="line"><a name="l06907"></a><span class="lineno"> 6907</span>&#160;    <span class="keywordtype">int</span> id;</div>
<div class="line"><a name="l06908"></a><span class="lineno"> 6908</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a0de6c591abb8d8340378037eccf81951">threadPool</a>-&gt;<a class="code" href="classThreadPool2.html#af3e4ac95d374da92f359286d20bcba65">getId</a>(<span class="keywordtype">id</span>))</div>
<div class="line"><a name="l06909"></a><span class="lineno"> 6909</span>&#160;    {</div>
<div class="line"><a name="l06910"></a><span class="lineno"> 6910</span>&#160;        yError(<span class="stringliteral">&quot;More than %d threads, cannot allow more\n&quot;</span>, <a class="code" href="canControlConstants_8h.html#a3830b8707366b97dd5c993756d89f02d">CANCONTROL_MAX_THREADS</a>);</div>
<div class="line"><a name="l06911"></a><span class="lineno"> 6911</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l06912"></a><span class="lineno"> 6912</span>&#160;    }</div>
<div class="line"><a name="l06913"></a><span class="lineno"> 6913</span>&#160; </div>
<div class="line"><a name="l06914"></a><span class="lineno"> 6914</span>&#160;    r.<a class="code" href="classCanBusResources.html#a426cb1e9b09f03d70b8dbccb2346edb8">startPacket</a>();</div>
<div class="line"><a name="l06915"></a><span class="lineno"> 6915</span>&#160; </div>
<div class="line"><a name="l06916"></a><span class="lineno"> 6916</span>&#160;    r.<a class="code" href="classCanBusResources.html#a1049ab4df32ee910f61efbe130ba9b41">addMessage</a> (msg, axis);</div>
<div class="line"><a name="l06917"></a><span class="lineno"> 6917</span>&#160; </div>
<div class="line"><a name="l06918"></a><span class="lineno"> 6918</span>&#160;    *((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)(r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()+1)) = value;</div>
<div class="line"><a name="l06919"></a><span class="lineno"> 6919</span>&#160;    *((<span class="keywordtype">short</span> *)(r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()+2)) = s1;</div>
<div class="line"><a name="l06920"></a><span class="lineno"> 6920</span>&#160;    *((<span class="keywordtype">short</span> *)(r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()+4)) = s2;</div>
<div class="line"><a name="l06921"></a><span class="lineno"> 6921</span>&#160;    *((<span class="keywordtype">short</span> *)(r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].getData()+6)) = s3;</div>
<div class="line"><a name="l06922"></a><span class="lineno"> 6922</span>&#160;    r.<a class="code" href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">_writeBuffer</a>[0].setLen(8);</div>
<div class="line"><a name="l06923"></a><span class="lineno"> 6923</span>&#160; </div>
<div class="line"><a name="l06924"></a><span class="lineno"> 6924</span>&#160;    <span class="keywordflow">if</span> (r.<a class="code" href="classCanBusResources.html#a781a7267d7eab2315d49720c1d673f29">_writeMessages</a> &lt; 1)</div>
<div class="line"><a name="l06925"></a><span class="lineno"> 6925</span>&#160;    {</div>
<div class="line"><a name="l06926"></a><span class="lineno"> 6926</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l06927"></a><span class="lineno"> 6927</span>&#160;    }</div>
<div class="line"><a name="l06928"></a><span class="lineno"> 6928</span>&#160; </div>
<div class="line"><a name="l06929"></a><span class="lineno"> 6929</span>&#160;    r.<a class="code" href="classCanBusResources.html#a36f76a689330cd6163c3f13bb8ac28d9">writePacket</a>(); <span class="comment">//write now</span></div>
<div class="line"><a name="l06930"></a><span class="lineno"> 6930</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l06931"></a><span class="lineno"> 6931</span>&#160;}</div>
<div class="line"><a name="l06932"></a><span class="lineno"> 6932</span>&#160; </div>
<div class="line"><a name="l06936"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a93eee03780e92ffbf67eaa3cab11fbca"> 6936</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a93eee03780e92ffbf67eaa3cab11fbca">CanBusMotionControl::_readDWord</a> (<span class="keywordtype">int</span> msg, <span class="keywordtype">int</span> axis, <span class="keywordtype">int</span>&amp; value)</div>
<div class="line"><a name="l06937"></a><span class="lineno"> 6937</span>&#160;{</div>
<div class="line"><a name="l06938"></a><span class="lineno"> 6938</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l06939"></a><span class="lineno"> 6939</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>-1)*2))</div>
<div class="line"><a name="l06940"></a><span class="lineno"> 6940</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l06941"></a><span class="lineno"> 6941</span>&#160; </div>
<div class="line"><a name="l06942"></a><span class="lineno"> 6942</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a56978bb0d722116c2e86777743d17247">ENABLED</a>(axis))</div>
<div class="line"><a name="l06943"></a><span class="lineno"> 6943</span>&#160;    {</div>
<div class="line"><a name="l06944"></a><span class="lineno"> 6944</span>&#160;        value = 0;</div>
<div class="line"><a name="l06945"></a><span class="lineno"> 6945</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l06946"></a><span class="lineno"> 6946</span>&#160;    }</div>
<div class="line"><a name="l06947"></a><span class="lineno"> 6947</span>&#160; </div>
<div class="line"><a name="l06948"></a><span class="lineno"> 6948</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.lock();</div>
<div class="line"><a name="l06949"></a><span class="lineno"> 6949</span>&#160;    <span class="keywordtype">int</span> id;</div>
<div class="line"><a name="l06950"></a><span class="lineno"> 6950</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a0de6c591abb8d8340378037eccf81951">threadPool</a>-&gt;<a class="code" href="classThreadPool2.html#af3e4ac95d374da92f359286d20bcba65">getId</a>(<span class="keywordtype">id</span>))</div>
<div class="line"><a name="l06951"></a><span class="lineno"> 6951</span>&#160;    {</div>
<div class="line"><a name="l06952"></a><span class="lineno"> 6952</span>&#160;        yError(<span class="stringliteral">&quot;More than %d threads, cannot allow more\n&quot;</span>, <a class="code" href="canControlConstants_8h.html#a3830b8707366b97dd5c993756d89f02d">CANCONTROL_MAX_THREADS</a>);</div>
<div class="line"><a name="l06953"></a><span class="lineno"> 6953</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.unlock();</div>
<div class="line"><a name="l06954"></a><span class="lineno"> 6954</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l06955"></a><span class="lineno"> 6955</span>&#160;    }</div>
<div class="line"><a name="l06956"></a><span class="lineno"> 6956</span>&#160; </div>
<div class="line"><a name="l06957"></a><span class="lineno"> 6957</span>&#160;    r.<a class="code" href="classCanBusResources.html#a426cb1e9b09f03d70b8dbccb2346edb8">startPacket</a>();</div>
<div class="line"><a name="l06958"></a><span class="lineno"> 6958</span>&#160;    r.<a class="code" href="classCanBusResources.html#a1049ab4df32ee910f61efbe130ba9b41">addMessage</a> (<span class="keywordtype">id</span>, axis, msg);</div>
<div class="line"><a name="l06959"></a><span class="lineno"> 6959</span>&#160; </div>
<div class="line"><a name="l06960"></a><span class="lineno"> 6960</span>&#160;    r.<a class="code" href="classCanBusResources.html#a36f76a689330cd6163c3f13bb8ac28d9">writePacket</a>();</div>
<div class="line"><a name="l06961"></a><span class="lineno"> 6961</span>&#160; </div>
<div class="line"><a name="l06962"></a><span class="lineno"> 6962</span>&#160;    <a class="code" href="classThreadTable2.html">ThreadTable2</a> *t=<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a0de6c591abb8d8340378037eccf81951">threadPool</a>-&gt;<a class="code" href="classThreadPool2.html#abed580daad75544f3455f08beaa06cf4">getThreadTable</a>(<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l06963"></a><span class="lineno"> 6963</span>&#160;    t-&gt;<a class="code" href="classThreadTable2.html#adba368aea4ee8d37742e332ed2f4f26e">setPending</a>(r.<a class="code" href="classCanBusResources.html#a781a7267d7eab2315d49720c1d673f29">_writeMessages</a>);</div>
<div class="line"><a name="l06964"></a><span class="lineno"> 6964</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.unlock();</div>
<div class="line"><a name="l06965"></a><span class="lineno"> 6965</span>&#160;    t-&gt;<a class="code" href="classThreadTable2.html#a47cdedbcf45603cf2a45f1758472fbc7">synch</a>();</div>
<div class="line"><a name="l06966"></a><span class="lineno"> 6966</span>&#160; </div>
<div class="line"><a name="l06967"></a><span class="lineno"> 6967</span>&#160;    <span class="keywordflow">if</span> (!r.<a class="code" href="classCanBusResources.html#a1642d0476521a6b0c8f538cef04e2a59">getErrorStatus</a>() || (t-&gt;<a class="code" href="classThreadTable2.html#af31e5328380be26902f2c1853ce2cb29">timedOut</a>()))</div>
<div class="line"><a name="l06968"></a><span class="lineno"> 6968</span>&#160;    {</div>
<div class="line"><a name="l06969"></a><span class="lineno"> 6969</span>&#160;        yError(<span class="stringliteral">&quot;readDWord: message timed out\n&quot;</span>);</div>
<div class="line"><a name="l06970"></a><span class="lineno"> 6970</span>&#160;        value = 0;</div>
<div class="line"><a name="l06971"></a><span class="lineno"> 6971</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l06972"></a><span class="lineno"> 6972</span>&#160;    }</div>
<div class="line"><a name="l06973"></a><span class="lineno"> 6973</span>&#160; </div>
<div class="line"><a name="l06974"></a><span class="lineno"> 6974</span>&#160;    CanMessage *m=t-&gt;<a class="code" href="classThreadTable2.html#afbbc874a92650328926f44d8638dc618">get</a>(0);</div>
<div class="line"><a name="l06975"></a><span class="lineno"> 6975</span>&#160;    <span class="keywordflow">if</span> (m==0)</div>
<div class="line"><a name="l06976"></a><span class="lineno"> 6976</span>&#160;    {</div>
<div class="line"><a name="l06977"></a><span class="lineno"> 6977</span>&#160;        value=0;</div>
<div class="line"><a name="l06978"></a><span class="lineno"> 6978</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l06979"></a><span class="lineno"> 6979</span>&#160;    }</div>
<div class="line"><a name="l06980"></a><span class="lineno"> 6980</span>&#160; </div>
<div class="line"><a name="l06981"></a><span class="lineno"> 6981</span>&#160;    value = *((<span class="keywordtype">int</span> *)(m-&gt;getData()+1));</div>
<div class="line"><a name="l06982"></a><span class="lineno"> 6982</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l06983"></a><span class="lineno"> 6983</span>&#160;}</div>
<div class="line"><a name="l06984"></a><span class="lineno"> 6984</span>&#160; </div>
<div class="line"><a name="l06986"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a00914781d3d78fb7f24f5a900f71b52a"> 6986</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a00914781d3d78fb7f24f5a900f71b52a">CanBusMotionControl::_readDWordArray</a> (<span class="keywordtype">int</span> msg, <span class="keywordtype">double</span> *<a class="code" href="sine_8m.html#a2a89187d8e8e8fba509ef9ab5f815d88">out</a>)</div>
<div class="line"><a name="l06987"></a><span class="lineno"> 6987</span>&#160;{</div>
<div class="line"><a name="l06988"></a><span class="lineno"> 6988</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l06989"></a><span class="lineno"> 6989</span>&#160;    <span class="keywordtype">int</span> i = 0;</div>
<div class="line"><a name="l06990"></a><span class="lineno"> 6990</span>&#160; </div>
<div class="line"><a name="l06991"></a><span class="lineno"> 6991</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.lock();</div>
<div class="line"><a name="l06992"></a><span class="lineno"> 6992</span>&#160;    <span class="keywordtype">int</span> id;</div>
<div class="line"><a name="l06993"></a><span class="lineno"> 6993</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a0de6c591abb8d8340378037eccf81951">threadPool</a>-&gt;<a class="code" href="classThreadPool2.html#af3e4ac95d374da92f359286d20bcba65">getId</a>(<span class="keywordtype">id</span>))</div>
<div class="line"><a name="l06994"></a><span class="lineno"> 6994</span>&#160;    {</div>
<div class="line"><a name="l06995"></a><span class="lineno"> 6995</span>&#160;        yError(<span class="stringliteral">&quot;More than %d threads, cannot allow more\n&quot;</span>, <a class="code" href="canControlConstants_8h.html#a3830b8707366b97dd5c993756d89f02d">CANCONTROL_MAX_THREADS</a>);</div>
<div class="line"><a name="l06996"></a><span class="lineno"> 6996</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.unlock();</div>
<div class="line"><a name="l06997"></a><span class="lineno"> 6997</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l06998"></a><span class="lineno"> 6998</span>&#160;    }</div>
<div class="line"><a name="l06999"></a><span class="lineno"> 6999</span>&#160; </div>
<div class="line"><a name="l07000"></a><span class="lineno"> 7000</span>&#160;    r.<a class="code" href="classCanBusResources.html#a426cb1e9b09f03d70b8dbccb2346edb8">startPacket</a>();</div>
<div class="line"><a name="l07001"></a><span class="lineno"> 7001</span>&#160; </div>
<div class="line"><a name="l07002"></a><span class="lineno"> 7002</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>(); i++)</div>
<div class="line"><a name="l07003"></a><span class="lineno"> 7003</span>&#160;    {</div>
<div class="line"><a name="l07004"></a><span class="lineno"> 7004</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a56978bb0d722116c2e86777743d17247">ENABLED</a>(i))</div>
<div class="line"><a name="l07005"></a><span class="lineno"> 7005</span>&#160;        {</div>
<div class="line"><a name="l07006"></a><span class="lineno"> 7006</span>&#160;            r.<a class="code" href="classCanBusResources.html#a1049ab4df32ee910f61efbe130ba9b41">addMessage</a> (<span class="keywordtype">id</span>, msg, i);</div>
<div class="line"><a name="l07007"></a><span class="lineno"> 7007</span>&#160;            <span class="comment">//r.addMessage (msg, i);</span></div>
<div class="line"><a name="l07008"></a><span class="lineno"> 7008</span>&#160;        }</div>
<div class="line"><a name="l07009"></a><span class="lineno"> 7009</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l07010"></a><span class="lineno"> 7010</span>&#160;            <a class="code" href="sine_8m.html#a2a89187d8e8e8fba509ef9ab5f815d88">out</a>[i] = 0;</div>
<div class="line"><a name="l07011"></a><span class="lineno"> 7011</span>&#160;    }</div>
<div class="line"><a name="l07012"></a><span class="lineno"> 7012</span>&#160; </div>
<div class="line"><a name="l07013"></a><span class="lineno"> 7013</span>&#160;    <span class="keywordflow">if</span> (r.<a class="code" href="classCanBusResources.html#a781a7267d7eab2315d49720c1d673f29">_writeMessages</a> &lt; 1)</div>
<div class="line"><a name="l07014"></a><span class="lineno"> 7014</span>&#160;    {</div>
<div class="line"><a name="l07015"></a><span class="lineno"> 7015</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.unlock();</div>
<div class="line"><a name="l07016"></a><span class="lineno"> 7016</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l07017"></a><span class="lineno"> 7017</span>&#160;    }</div>
<div class="line"><a name="l07018"></a><span class="lineno"> 7018</span>&#160; </div>
<div class="line"><a name="l07019"></a><span class="lineno"> 7019</span>&#160;    r.<a class="code" href="classCanBusResources.html#a36f76a689330cd6163c3f13bb8ac28d9">writePacket</a>(); <span class="comment">//write now</span></div>
<div class="line"><a name="l07020"></a><span class="lineno"> 7020</span>&#160; </div>
<div class="line"><a name="l07021"></a><span class="lineno"> 7021</span>&#160;    <a class="code" href="classThreadTable2.html">ThreadTable2</a> *t=<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a0de6c591abb8d8340378037eccf81951">threadPool</a>-&gt;<a class="code" href="classThreadPool2.html#abed580daad75544f3455f08beaa06cf4">getThreadTable</a>(<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l07022"></a><span class="lineno"> 7022</span>&#160;    t-&gt;<a class="code" href="classThreadTable2.html#adba368aea4ee8d37742e332ed2f4f26e">setPending</a>(r.<a class="code" href="classCanBusResources.html#a781a7267d7eab2315d49720c1d673f29">_writeMessages</a>);</div>
<div class="line"><a name="l07023"></a><span class="lineno"> 7023</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.unlock();</div>
<div class="line"><a name="l07024"></a><span class="lineno"> 7024</span>&#160;    t-&gt;<a class="code" href="classThreadTable2.html#a47cdedbcf45603cf2a45f1758472fbc7">synch</a>();</div>
<div class="line"><a name="l07025"></a><span class="lineno"> 7025</span>&#160; </div>
<div class="line"><a name="l07026"></a><span class="lineno"> 7026</span>&#160;    <span class="keywordflow">if</span> (!r.<a class="code" href="classCanBusResources.html#a1642d0476521a6b0c8f538cef04e2a59">getErrorStatus</a>() || t-&gt;<a class="code" href="classThreadTable2.html#af31e5328380be26902f2c1853ce2cb29">timedOut</a>())</div>
<div class="line"><a name="l07027"></a><span class="lineno"> 7027</span>&#160;    {</div>
<div class="line"><a name="l07028"></a><span class="lineno"> 7028</span>&#160;        yError(<span class="stringliteral">&quot;readDWordArray: at least one message timed out\n&quot;</span>);</div>
<div class="line"><a name="l07029"></a><span class="lineno"> 7029</span>&#160;        memset (<a class="code" href="sine_8m.html#a2a89187d8e8e8fba509ef9ab5f815d88">out</a>, 0, <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>) * r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>());</div>
<div class="line"><a name="l07030"></a><span class="lineno"> 7030</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l07031"></a><span class="lineno"> 7031</span>&#160;    }</div>
<div class="line"><a name="l07032"></a><span class="lineno"> 7032</span>&#160; </div>
<div class="line"><a name="l07033"></a><span class="lineno"> 7033</span>&#160;    <span class="keywordtype">int</span> j;</div>
<div class="line"><a name="l07034"></a><span class="lineno"> 7034</span>&#160;    <span class="keywordflow">for</span> (i = 0, j = 0; i &lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>(); i++)</div>
<div class="line"><a name="l07035"></a><span class="lineno"> 7035</span>&#160;    {</div>
<div class="line"><a name="l07036"></a><span class="lineno"> 7036</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a56978bb0d722116c2e86777743d17247">ENABLED</a>(i))</div>
<div class="line"><a name="l07037"></a><span class="lineno"> 7037</span>&#160;        {</div>
<div class="line"><a name="l07038"></a><span class="lineno"> 7038</span>&#160;            CanMessage *m = t-&gt;<a class="code" href="classThreadTable2.html#a5ac48ab511cfb6e31f9b32ba005374b6">getByJoint</a>(i, r.<a class="code" href="classCanBusResources.html#a5eb200eec7f8c10314fc9349f4088ff3">_destInv</a>);</div>
<div class="line"><a name="l07039"></a><span class="lineno"> 7039</span>&#160;            <span class="keywordflow">if</span> ( (m!=0) &amp;&amp; (m-&gt;getId() != 0xffff) )</div>
<div class="line"><a name="l07040"></a><span class="lineno"> 7040</span>&#160;            {</div>
<div class="line"><a name="l07041"></a><span class="lineno"> 7041</span>&#160;                <a class="code" href="sine_8m.html#a2a89187d8e8e8fba509ef9ab5f815d88">out</a>[i] = *((<span class="keywordtype">int</span> *)(m-&gt;getData()+1));</div>
<div class="line"><a name="l07042"></a><span class="lineno"> 7042</span>&#160;            }</div>
<div class="line"><a name="l07043"></a><span class="lineno"> 7043</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l07044"></a><span class="lineno"> 7044</span>&#160;            {</div>
<div class="line"><a name="l07045"></a><span class="lineno"> 7045</span>&#160;                <a class="code" href="sine_8m.html#a2a89187d8e8e8fba509ef9ab5f815d88">out</a>[i]=0;</div>
<div class="line"><a name="l07046"></a><span class="lineno"> 7046</span>&#160;            }</div>
<div class="line"><a name="l07047"></a><span class="lineno"> 7047</span>&#160;            j++;</div>
<div class="line"><a name="l07048"></a><span class="lineno"> 7048</span>&#160;        }</div>
<div class="line"><a name="l07049"></a><span class="lineno"> 7049</span>&#160;    }</div>
<div class="line"><a name="l07050"></a><span class="lineno"> 7050</span>&#160;    t-&gt;<a class="code" href="classThreadTable2.html#a2129ef023b358d00c5b30de7176f2b3e">clear</a>();</div>
<div class="line"><a name="l07051"></a><span class="lineno"> 7051</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l07052"></a><span class="lineno"> 7052</span>&#160;}</div>
<div class="line"><a name="l07053"></a><span class="lineno"> 7053</span>&#160; </div>
<div class="line"><a name="l07054"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a41a5714a6c78ee694b7f694be991101a"> 7054</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a41a5714a6c78ee694b7f694be991101a">CanBusMotionControl::_readWord16</a> (<span class="keywordtype">int</span> msg, <span class="keywordtype">int</span> axis, <span class="keywordtype">short</span>&amp; value)</div>
<div class="line"><a name="l07055"></a><span class="lineno"> 7055</span>&#160;{</div>
<div class="line"><a name="l07056"></a><span class="lineno"> 7056</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l07057"></a><span class="lineno"> 7057</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>-1)*2))</div>
<div class="line"><a name="l07058"></a><span class="lineno"> 7058</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l07059"></a><span class="lineno"> 7059</span>&#160; </div>
<div class="line"><a name="l07060"></a><span class="lineno"> 7060</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a56978bb0d722116c2e86777743d17247">ENABLED</a>(axis))</div>
<div class="line"><a name="l07061"></a><span class="lineno"> 7061</span>&#160;    {</div>
<div class="line"><a name="l07062"></a><span class="lineno"> 7062</span>&#160;        value = short(0);</div>
<div class="line"><a name="l07063"></a><span class="lineno"> 7063</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l07064"></a><span class="lineno"> 7064</span>&#160;    }</div>
<div class="line"><a name="l07065"></a><span class="lineno"> 7065</span>&#160; </div>
<div class="line"><a name="l07066"></a><span class="lineno"> 7066</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.lock();</div>
<div class="line"><a name="l07067"></a><span class="lineno"> 7067</span>&#160;    <span class="keywordtype">int</span> id;</div>
<div class="line"><a name="l07068"></a><span class="lineno"> 7068</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a0de6c591abb8d8340378037eccf81951">threadPool</a>-&gt;<a class="code" href="classThreadPool2.html#af3e4ac95d374da92f359286d20bcba65">getId</a>(<span class="keywordtype">id</span>))</div>
<div class="line"><a name="l07069"></a><span class="lineno"> 7069</span>&#160;    {</div>
<div class="line"><a name="l07070"></a><span class="lineno"> 7070</span>&#160;        yError(<span class="stringliteral">&quot;More than %d threads, cannot allow more\n&quot;</span>, <a class="code" href="canControlConstants_8h.html#a3830b8707366b97dd5c993756d89f02d">CANCONTROL_MAX_THREADS</a>);</div>
<div class="line"><a name="l07071"></a><span class="lineno"> 7071</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.unlock();</div>
<div class="line"><a name="l07072"></a><span class="lineno"> 7072</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l07073"></a><span class="lineno"> 7073</span>&#160;    }</div>
<div class="line"><a name="l07074"></a><span class="lineno"> 7074</span>&#160; </div>
<div class="line"><a name="l07075"></a><span class="lineno"> 7075</span>&#160;    <a class="code" href="canControlUtils_8h.html#aed353ce9c28af351b98138a0a3cee032">DEBUG_FUNC</a>(<span class="stringliteral">&quot;readWord16: called from thread %d, axis %d msg %d\n&quot;</span>, <span class="keywordtype">id</span>, axis, msg);</div>
<div class="line"><a name="l07076"></a><span class="lineno"> 7076</span>&#160;    r.<a class="code" href="classCanBusResources.html#a426cb1e9b09f03d70b8dbccb2346edb8">startPacket</a>();</div>
<div class="line"><a name="l07077"></a><span class="lineno"> 7077</span>&#160;    r.<a class="code" href="classCanBusResources.html#a1049ab4df32ee910f61efbe130ba9b41">addMessage</a> (<span class="keywordtype">id</span>, axis, msg);</div>
<div class="line"><a name="l07078"></a><span class="lineno"> 7078</span>&#160;    r.<a class="code" href="classCanBusResources.html#a36f76a689330cd6163c3f13bb8ac28d9">writePacket</a>(); <span class="comment">//write immediatly</span></div>
<div class="line"><a name="l07079"></a><span class="lineno"> 7079</span>&#160; </div>
<div class="line"><a name="l07080"></a><span class="lineno"> 7080</span>&#160;    <a class="code" href="classThreadTable2.html">ThreadTable2</a> *t=<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a0de6c591abb8d8340378037eccf81951">threadPool</a>-&gt;<a class="code" href="classThreadPool2.html#abed580daad75544f3455f08beaa06cf4">getThreadTable</a>(<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l07081"></a><span class="lineno"> 7081</span>&#160;    <a class="code" href="canControlUtils_8h.html#aed353ce9c28af351b98138a0a3cee032">DEBUG_FUNC</a>(<span class="stringliteral">&quot;readWord16: going to wait for packet %d\n&quot;</span>, <span class="keywordtype">id</span>);</div>
<div class="line"><a name="l07082"></a><span class="lineno"> 7082</span>&#160;    t-&gt;<a class="code" href="classThreadTable2.html#adba368aea4ee8d37742e332ed2f4f26e">setPending</a>(r.<a class="code" href="classCanBusResources.html#a781a7267d7eab2315d49720c1d673f29">_writeMessages</a>);</div>
<div class="line"><a name="l07083"></a><span class="lineno"> 7083</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.unlock();</div>
<div class="line"><a name="l07084"></a><span class="lineno"> 7084</span>&#160;    t-&gt;<a class="code" href="classThreadTable2.html#a47cdedbcf45603cf2a45f1758472fbc7">synch</a>();</div>
<div class="line"><a name="l07085"></a><span class="lineno"> 7085</span>&#160;    <a class="code" href="canControlUtils_8h.html#aed353ce9c28af351b98138a0a3cee032">DEBUG_FUNC</a>(<span class="stringliteral">&quot;readWord16: ok, wait done %d\n&quot;</span>,<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l07086"></a><span class="lineno"> 7086</span>&#160; </div>
<div class="line"><a name="l07087"></a><span class="lineno"> 7087</span>&#160;    <span class="keywordflow">if</span> (!r.<a class="code" href="classCanBusResources.html#a1642d0476521a6b0c8f538cef04e2a59">getErrorStatus</a>() || (t-&gt;<a class="code" href="classThreadTable2.html#af31e5328380be26902f2c1853ce2cb29">timedOut</a>()))</div>
<div class="line"><a name="l07088"></a><span class="lineno"> 7088</span>&#160;    {</div>
<div class="line"><a name="l07089"></a><span class="lineno"> 7089</span>&#160;        yError(<span class="stringliteral">&quot;readWord16: message timed out\n&quot;</span>);</div>
<div class="line"><a name="l07090"></a><span class="lineno"> 7090</span>&#160;        value = 0;</div>
<div class="line"><a name="l07091"></a><span class="lineno"> 7091</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l07092"></a><span class="lineno"> 7092</span>&#160;    }</div>
<div class="line"><a name="l07093"></a><span class="lineno"> 7093</span>&#160; </div>
<div class="line"><a name="l07094"></a><span class="lineno"> 7094</span>&#160;    CanMessage *m=t-&gt;<a class="code" href="classThreadTable2.html#afbbc874a92650328926f44d8638dc618">get</a>(0);</div>
<div class="line"><a name="l07095"></a><span class="lineno"> 7095</span>&#160; </div>
<div class="line"><a name="l07096"></a><span class="lineno"> 7096</span>&#160;    <span class="keywordflow">if</span> (m==0)</div>
<div class="line"><a name="l07097"></a><span class="lineno"> 7097</span>&#160;    {</div>
<div class="line"><a name="l07098"></a><span class="lineno"> 7098</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l07099"></a><span class="lineno"> 7099</span>&#160;    }</div>
<div class="line"><a name="l07100"></a><span class="lineno"> 7100</span>&#160; </div>
<div class="line"><a name="l07101"></a><span class="lineno"> 7101</span>&#160;    value = *((<span class="keywordtype">short</span> *)(m-&gt;getData()+1));</div>
<div class="line"><a name="l07102"></a><span class="lineno"> 7102</span>&#160;    t-&gt;<a class="code" href="classThreadTable2.html#a2129ef023b358d00c5b30de7176f2b3e">clear</a>();</div>
<div class="line"><a name="l07103"></a><span class="lineno"> 7103</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l07104"></a><span class="lineno"> 7104</span>&#160;}</div>
<div class="line"><a name="l07105"></a><span class="lineno"> 7105</span>&#160; </div>
<div class="line"><a name="l07106"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a0c8ca57697ca8c81f8b798b1b59d55ae"> 7106</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a0c8ca57697ca8c81f8b798b1b59d55ae">CanBusMotionControl::_readByte8</a>(<span class="keywordtype">int</span> msg, <span class="keywordtype">int</span> axis, <span class="keywordtype">int</span>&amp; value)</div>
<div class="line"><a name="l07107"></a><span class="lineno"> 7107</span>&#160;{</div>
<div class="line"><a name="l07108"></a><span class="lineno"> 7108</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l07109"></a><span class="lineno"> 7109</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a> - 1) * 2))</div>
<div class="line"><a name="l07110"></a><span class="lineno"> 7110</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l07111"></a><span class="lineno"> 7111</span>&#160; </div>
<div class="line"><a name="l07112"></a><span class="lineno"> 7112</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a56978bb0d722116c2e86777743d17247">ENABLED</a>(axis))</div>
<div class="line"><a name="l07113"></a><span class="lineno"> 7113</span>&#160;    {</div>
<div class="line"><a name="l07114"></a><span class="lineno"> 7114</span>&#160;        value = short(0);</div>
<div class="line"><a name="l07115"></a><span class="lineno"> 7115</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l07116"></a><span class="lineno"> 7116</span>&#160;    }</div>
<div class="line"><a name="l07117"></a><span class="lineno"> 7117</span>&#160; </div>
<div class="line"><a name="l07118"></a><span class="lineno"> 7118</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.lock();</div>
<div class="line"><a name="l07119"></a><span class="lineno"> 7119</span>&#160;    <span class="keywordtype">int</span> id;</div>
<div class="line"><a name="l07120"></a><span class="lineno"> 7120</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a0de6c591abb8d8340378037eccf81951">threadPool</a>-&gt;<a class="code" href="classThreadPool2.html#af3e4ac95d374da92f359286d20bcba65">getId</a>(<span class="keywordtype">id</span>))</div>
<div class="line"><a name="l07121"></a><span class="lineno"> 7121</span>&#160;    {</div>
<div class="line"><a name="l07122"></a><span class="lineno"> 7122</span>&#160;        yError(<span class="stringliteral">&quot;More than %d threads, cannot allow more\n&quot;</span>, <a class="code" href="canControlConstants_8h.html#a3830b8707366b97dd5c993756d89f02d">CANCONTROL_MAX_THREADS</a>);</div>
<div class="line"><a name="l07123"></a><span class="lineno"> 7123</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.unlock();</div>
<div class="line"><a name="l07124"></a><span class="lineno"> 7124</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l07125"></a><span class="lineno"> 7125</span>&#160;    }</div>
<div class="line"><a name="l07126"></a><span class="lineno"> 7126</span>&#160; </div>
<div class="line"><a name="l07127"></a><span class="lineno"> 7127</span>&#160;    <a class="code" href="canControlUtils_8h.html#aed353ce9c28af351b98138a0a3cee032">DEBUG_FUNC</a>(<span class="stringliteral">&quot;_readByte8: called from thread %d, axis %d msg %d\n&quot;</span>, <span class="keywordtype">id</span>, axis, msg);</div>
<div class="line"><a name="l07128"></a><span class="lineno"> 7128</span>&#160;    r.<a class="code" href="classCanBusResources.html#a426cb1e9b09f03d70b8dbccb2346edb8">startPacket</a>();</div>
<div class="line"><a name="l07129"></a><span class="lineno"> 7129</span>&#160;    r.<a class="code" href="classCanBusResources.html#a1049ab4df32ee910f61efbe130ba9b41">addMessage</a>(<span class="keywordtype">id</span>, axis, msg);</div>
<div class="line"><a name="l07130"></a><span class="lineno"> 7130</span>&#160;    r.<a class="code" href="classCanBusResources.html#a36f76a689330cd6163c3f13bb8ac28d9">writePacket</a>(); <span class="comment">//write immediatly</span></div>
<div class="line"><a name="l07131"></a><span class="lineno"> 7131</span>&#160; </div>
<div class="line"><a name="l07132"></a><span class="lineno"> 7132</span>&#160;    <a class="code" href="classThreadTable2.html">ThreadTable2</a> *t = <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a0de6c591abb8d8340378037eccf81951">threadPool</a>-&gt;<a class="code" href="classThreadPool2.html#abed580daad75544f3455f08beaa06cf4">getThreadTable</a>(<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l07133"></a><span class="lineno"> 7133</span>&#160;    <a class="code" href="canControlUtils_8h.html#aed353ce9c28af351b98138a0a3cee032">DEBUG_FUNC</a>(<span class="stringliteral">&quot;_readByte8: going to wait for packet %d\n&quot;</span>, <span class="keywordtype">id</span>);</div>
<div class="line"><a name="l07134"></a><span class="lineno"> 7134</span>&#160;    t-&gt;<a class="code" href="classThreadTable2.html#adba368aea4ee8d37742e332ed2f4f26e">setPending</a>(r.<a class="code" href="classCanBusResources.html#a781a7267d7eab2315d49720c1d673f29">_writeMessages</a>);</div>
<div class="line"><a name="l07135"></a><span class="lineno"> 7135</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.unlock();</div>
<div class="line"><a name="l07136"></a><span class="lineno"> 7136</span>&#160;    t-&gt;<a class="code" href="classThreadTable2.html#a47cdedbcf45603cf2a45f1758472fbc7">synch</a>();</div>
<div class="line"><a name="l07137"></a><span class="lineno"> 7137</span>&#160;    <a class="code" href="canControlUtils_8h.html#aed353ce9c28af351b98138a0a3cee032">DEBUG_FUNC</a>(<span class="stringliteral">&quot;_readByte8: ok, wait done %d\n&quot;</span>, <span class="keywordtype">id</span>);</div>
<div class="line"><a name="l07138"></a><span class="lineno"> 7138</span>&#160; </div>
<div class="line"><a name="l07139"></a><span class="lineno"> 7139</span>&#160;    <span class="keywordflow">if</span> (!r.<a class="code" href="classCanBusResources.html#a1642d0476521a6b0c8f538cef04e2a59">getErrorStatus</a>() || (t-&gt;<a class="code" href="classThreadTable2.html#af31e5328380be26902f2c1853ce2cb29">timedOut</a>()))</div>
<div class="line"><a name="l07140"></a><span class="lineno"> 7140</span>&#160;    {</div>
<div class="line"><a name="l07141"></a><span class="lineno"> 7141</span>&#160;        yError(<span class="stringliteral">&quot;_readByte8: message timed out\n&quot;</span>);</div>
<div class="line"><a name="l07142"></a><span class="lineno"> 7142</span>&#160;        value = 0;</div>
<div class="line"><a name="l07143"></a><span class="lineno"> 7143</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l07144"></a><span class="lineno"> 7144</span>&#160;    }</div>
<div class="line"><a name="l07145"></a><span class="lineno"> 7145</span>&#160; </div>
<div class="line"><a name="l07146"></a><span class="lineno"> 7146</span>&#160;    CanMessage *m = t-&gt;<a class="code" href="classThreadTable2.html#afbbc874a92650328926f44d8638dc618">get</a>(0);</div>
<div class="line"><a name="l07147"></a><span class="lineno"> 7147</span>&#160; </div>
<div class="line"><a name="l07148"></a><span class="lineno"> 7148</span>&#160;    <span class="keywordflow">if</span> (m == 0)</div>
<div class="line"><a name="l07149"></a><span class="lineno"> 7149</span>&#160;    {</div>
<div class="line"><a name="l07150"></a><span class="lineno"> 7150</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l07151"></a><span class="lineno"> 7151</span>&#160;    }</div>
<div class="line"><a name="l07152"></a><span class="lineno"> 7152</span>&#160; </div>
<div class="line"><a name="l07153"></a><span class="lineno"> 7153</span>&#160;    value = *((<span class="keywordtype">char</span> *)(m-&gt;getData() + 1));</div>
<div class="line"><a name="l07154"></a><span class="lineno"> 7154</span>&#160;    t-&gt;<a class="code" href="classThreadTable2.html#a2129ef023b358d00c5b30de7176f2b3e">clear</a>();</div>
<div class="line"><a name="l07155"></a><span class="lineno"> 7155</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l07156"></a><span class="lineno"> 7156</span>&#160;}</div>
<div class="line"><a name="l07157"></a><span class="lineno"> 7157</span>&#160; </div>
<div class="line"><a name="l07158"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a1400c4368b36fa7383a8e66de10be345"> 7158</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a1400c4368b36fa7383a8e66de10be345">CanBusMotionControl::_readWord16Ex</a> (<span class="keywordtype">int</span> msg, <span class="keywordtype">int</span> axis, <span class="keywordtype">short</span>&amp; value1, <span class="keywordtype">short</span>&amp; value2)</div>
<div class="line"><a name="l07159"></a><span class="lineno"> 7159</span>&#160;{</div>
<div class="line"><a name="l07160"></a><span class="lineno"> 7160</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l07161"></a><span class="lineno"> 7161</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>-1)*2))</div>
<div class="line"><a name="l07162"></a><span class="lineno"> 7162</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l07163"></a><span class="lineno"> 7163</span>&#160; </div>
<div class="line"><a name="l07164"></a><span class="lineno"> 7164</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a56978bb0d722116c2e86777743d17247">ENABLED</a>(axis))</div>
<div class="line"><a name="l07165"></a><span class="lineno"> 7165</span>&#160;    {</div>
<div class="line"><a name="l07166"></a><span class="lineno"> 7166</span>&#160;        value1 = 0;</div>
<div class="line"><a name="l07167"></a><span class="lineno"> 7167</span>&#160;        value2 = 0;</div>
<div class="line"><a name="l07168"></a><span class="lineno"> 7168</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l07169"></a><span class="lineno"> 7169</span>&#160;    }</div>
<div class="line"><a name="l07170"></a><span class="lineno"> 7170</span>&#160; </div>
<div class="line"><a name="l07171"></a><span class="lineno"> 7171</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.lock();</div>
<div class="line"><a name="l07172"></a><span class="lineno"> 7172</span>&#160;    <span class="keywordtype">int</span> id;</div>
<div class="line"><a name="l07173"></a><span class="lineno"> 7173</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a0de6c591abb8d8340378037eccf81951">threadPool</a>-&gt;<a class="code" href="classThreadPool2.html#af3e4ac95d374da92f359286d20bcba65">getId</a>(<span class="keywordtype">id</span>))</div>
<div class="line"><a name="l07174"></a><span class="lineno"> 7174</span>&#160;    {</div>
<div class="line"><a name="l07175"></a><span class="lineno"> 7175</span>&#160;        yError(<span class="stringliteral">&quot;More than %d threads, cannot allow more\n&quot;</span>, <a class="code" href="canControlConstants_8h.html#a3830b8707366b97dd5c993756d89f02d">CANCONTROL_MAX_THREADS</a>);</div>
<div class="line"><a name="l07176"></a><span class="lineno"> 7176</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.unlock();</div>
<div class="line"><a name="l07177"></a><span class="lineno"> 7177</span>&#160;        value1 = 0;</div>
<div class="line"><a name="l07178"></a><span class="lineno"> 7178</span>&#160;        value2 = 0;</div>
<div class="line"><a name="l07179"></a><span class="lineno"> 7179</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l07180"></a><span class="lineno"> 7180</span>&#160;    }</div>
<div class="line"><a name="l07181"></a><span class="lineno"> 7181</span>&#160; </div>
<div class="line"><a name="l07182"></a><span class="lineno"> 7182</span>&#160;    <a class="code" href="canControlUtils_8h.html#aed353ce9c28af351b98138a0a3cee032">DEBUG_FUNC</a>(<span class="stringliteral">&quot;readWord16Ex: called from thread %d, axis %d msg %d\n&quot;</span>, <span class="keywordtype">id</span>, axis, msg);</div>
<div class="line"><a name="l07183"></a><span class="lineno"> 7183</span>&#160;    r.<a class="code" href="classCanBusResources.html#a426cb1e9b09f03d70b8dbccb2346edb8">startPacket</a>();</div>
<div class="line"><a name="l07184"></a><span class="lineno"> 7184</span>&#160;    r.<a class="code" href="classCanBusResources.html#a1049ab4df32ee910f61efbe130ba9b41">addMessage</a> (<span class="keywordtype">id</span>, axis, msg);</div>
<div class="line"><a name="l07185"></a><span class="lineno"> 7185</span>&#160;    r.<a class="code" href="classCanBusResources.html#a36f76a689330cd6163c3f13bb8ac28d9">writePacket</a>(); <span class="comment">//write immediatly</span></div>
<div class="line"><a name="l07186"></a><span class="lineno"> 7186</span>&#160; </div>
<div class="line"><a name="l07187"></a><span class="lineno"> 7187</span>&#160;    <a class="code" href="classThreadTable2.html">ThreadTable2</a> *t=<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a0de6c591abb8d8340378037eccf81951">threadPool</a>-&gt;<a class="code" href="classThreadPool2.html#abed580daad75544f3455f08beaa06cf4">getThreadTable</a>(<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l07188"></a><span class="lineno"> 7188</span>&#160;    <a class="code" href="canControlUtils_8h.html#aed353ce9c28af351b98138a0a3cee032">DEBUG_FUNC</a>(<span class="stringliteral">&quot;readWord16Ex: going to wait for packet %d\n&quot;</span>, <span class="keywordtype">id</span>);</div>
<div class="line"><a name="l07189"></a><span class="lineno"> 7189</span>&#160;    t-&gt;<a class="code" href="classThreadTable2.html#adba368aea4ee8d37742e332ed2f4f26e">setPending</a>(r.<a class="code" href="classCanBusResources.html#a781a7267d7eab2315d49720c1d673f29">_writeMessages</a>);</div>
<div class="line"><a name="l07190"></a><span class="lineno"> 7190</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.unlock();</div>
<div class="line"><a name="l07191"></a><span class="lineno"> 7191</span>&#160;    t-&gt;<a class="code" href="classThreadTable2.html#a47cdedbcf45603cf2a45f1758472fbc7">synch</a>();</div>
<div class="line"><a name="l07192"></a><span class="lineno"> 7192</span>&#160;    <a class="code" href="canControlUtils_8h.html#aed353ce9c28af351b98138a0a3cee032">DEBUG_FUNC</a>(<span class="stringliteral">&quot;readWord16Ex: ok, wait done %d\n&quot;</span>,<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l07193"></a><span class="lineno"> 7193</span>&#160; </div>
<div class="line"><a name="l07194"></a><span class="lineno"> 7194</span>&#160;    <span class="keywordflow">if</span> (!r.<a class="code" href="classCanBusResources.html#a1642d0476521a6b0c8f538cef04e2a59">getErrorStatus</a>() || (t-&gt;<a class="code" href="classThreadTable2.html#af31e5328380be26902f2c1853ce2cb29">timedOut</a>()))</div>
<div class="line"><a name="l07195"></a><span class="lineno"> 7195</span>&#160;    {</div>
<div class="line"><a name="l07196"></a><span class="lineno"> 7196</span>&#160;        yError(<span class="stringliteral">&quot;readWord16: message timed out\n&quot;</span>);</div>
<div class="line"><a name="l07197"></a><span class="lineno"> 7197</span>&#160;        value1 = 0;</div>
<div class="line"><a name="l07198"></a><span class="lineno"> 7198</span>&#160;        value2 = 0;</div>
<div class="line"><a name="l07199"></a><span class="lineno"> 7199</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l07200"></a><span class="lineno"> 7200</span>&#160;    }</div>
<div class="line"><a name="l07201"></a><span class="lineno"> 7201</span>&#160; </div>
<div class="line"><a name="l07202"></a><span class="lineno"> 7202</span>&#160;    CanMessage *m=t-&gt;<a class="code" href="classThreadTable2.html#afbbc874a92650328926f44d8638dc618">get</a>(0);</div>
<div class="line"><a name="l07203"></a><span class="lineno"> 7203</span>&#160; </div>
<div class="line"><a name="l07204"></a><span class="lineno"> 7204</span>&#160;    <span class="keywordflow">if</span> (m==0)</div>
<div class="line"><a name="l07205"></a><span class="lineno"> 7205</span>&#160;    {</div>
<div class="line"><a name="l07206"></a><span class="lineno"> 7206</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l07207"></a><span class="lineno"> 7207</span>&#160;    }</div>
<div class="line"><a name="l07208"></a><span class="lineno"> 7208</span>&#160; </div>
<div class="line"><a name="l07209"></a><span class="lineno"> 7209</span>&#160;    value1 = *((<span class="keywordtype">short</span> *)(m-&gt;getData()+1));</div>
<div class="line"><a name="l07210"></a><span class="lineno"> 7210</span>&#160;    value2 = *((<span class="keywordtype">short</span> *)(m-&gt;getData()+3));</div>
<div class="line"><a name="l07211"></a><span class="lineno"> 7211</span>&#160;    t-&gt;<a class="code" href="classThreadTable2.html#a2129ef023b358d00c5b30de7176f2b3e">clear</a>();</div>
<div class="line"><a name="l07212"></a><span class="lineno"> 7212</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l07213"></a><span class="lineno"> 7213</span>&#160;}</div>
<div class="line"><a name="l07214"></a><span class="lineno"> 7214</span>&#160; </div>
<div class="line"><a name="l07216"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a78a9592949771e34f4349e11a7415011"> 7216</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a78a9592949771e34f4349e11a7415011">CanBusMotionControl::_readWord16Array</a> (<span class="keywordtype">int</span> msg, <span class="keywordtype">double</span> *<a class="code" href="sine_8m.html#a2a89187d8e8e8fba509ef9ab5f815d88">out</a>)</div>
<div class="line"><a name="l07217"></a><span class="lineno"> 7217</span>&#160;{</div>
<div class="line"><a name="l07218"></a><span class="lineno"> 7218</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l07219"></a><span class="lineno"> 7219</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l07220"></a><span class="lineno"> 7220</span>&#160; </div>
<div class="line"><a name="l07221"></a><span class="lineno"> 7221</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.lock();</div>
<div class="line"><a name="l07222"></a><span class="lineno"> 7222</span>&#160;    <span class="keywordtype">int</span> id;</div>
<div class="line"><a name="l07223"></a><span class="lineno"> 7223</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a0de6c591abb8d8340378037eccf81951">threadPool</a>-&gt;<a class="code" href="classThreadPool2.html#af3e4ac95d374da92f359286d20bcba65">getId</a>(<span class="keywordtype">id</span>))</div>
<div class="line"><a name="l07224"></a><span class="lineno"> 7224</span>&#160;    {</div>
<div class="line"><a name="l07225"></a><span class="lineno"> 7225</span>&#160;        yError(<span class="stringliteral">&quot;More than %d threads, cannot allow more\n&quot;</span>, <a class="code" href="canControlConstants_8h.html#a3830b8707366b97dd5c993756d89f02d">CANCONTROL_MAX_THREADS</a>);</div>
<div class="line"><a name="l07226"></a><span class="lineno"> 7226</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.unlock();</div>
<div class="line"><a name="l07227"></a><span class="lineno"> 7227</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l07228"></a><span class="lineno"> 7228</span>&#160;    }</div>
<div class="line"><a name="l07229"></a><span class="lineno"> 7229</span>&#160; </div>
<div class="line"><a name="l07230"></a><span class="lineno"> 7230</span>&#160;    r.<a class="code" href="classCanBusResources.html#a426cb1e9b09f03d70b8dbccb2346edb8">startPacket</a> ();</div>
<div class="line"><a name="l07231"></a><span class="lineno"> 7231</span>&#160; </div>
<div class="line"><a name="l07232"></a><span class="lineno"> 7232</span>&#160;    <span class="keywordflow">for</span>(i = 0; i &lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>(); i++)</div>
<div class="line"><a name="l07233"></a><span class="lineno"> 7233</span>&#160;    {</div>
<div class="line"><a name="l07234"></a><span class="lineno"> 7234</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a56978bb0d722116c2e86777743d17247">ENABLED</a>(i))</div>
<div class="line"><a name="l07235"></a><span class="lineno"> 7235</span>&#160;        {</div>
<div class="line"><a name="l07236"></a><span class="lineno"> 7236</span>&#160;            r.<a class="code" href="classCanBusResources.html#a1049ab4df32ee910f61efbe130ba9b41">addMessage</a> (<span class="keywordtype">id</span>, i, msg);</div>
<div class="line"><a name="l07237"></a><span class="lineno"> 7237</span>&#160;            <span class="comment">//            r.addMessage (msg, i);</span></div>
<div class="line"><a name="l07238"></a><span class="lineno"> 7238</span>&#160;        }</div>
<div class="line"><a name="l07239"></a><span class="lineno"> 7239</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l07240"></a><span class="lineno"> 7240</span>&#160;            <a class="code" href="sine_8m.html#a2a89187d8e8e8fba509ef9ab5f815d88">out</a>[i] = 0;</div>
<div class="line"><a name="l07241"></a><span class="lineno"> 7241</span>&#160;    }</div>
<div class="line"><a name="l07242"></a><span class="lineno"> 7242</span>&#160; </div>
<div class="line"><a name="l07243"></a><span class="lineno"> 7243</span>&#160;    <span class="keywordflow">if</span> (r.<a class="code" href="classCanBusResources.html#a781a7267d7eab2315d49720c1d673f29">_writeMessages</a> &lt; 1)</div>
<div class="line"><a name="l07244"></a><span class="lineno"> 7244</span>&#160;    {</div>
<div class="line"><a name="l07245"></a><span class="lineno"> 7245</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.unlock();</div>
<div class="line"><a name="l07246"></a><span class="lineno"> 7246</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l07247"></a><span class="lineno"> 7247</span>&#160;    }</div>
<div class="line"><a name="l07248"></a><span class="lineno"> 7248</span>&#160; </div>
<div class="line"><a name="l07249"></a><span class="lineno"> 7249</span>&#160; </div>
<div class="line"><a name="l07250"></a><span class="lineno"> 7250</span>&#160;    r.<a class="code" href="classCanBusResources.html#a36f76a689330cd6163c3f13bb8ac28d9">writePacket</a>();</div>
<div class="line"><a name="l07251"></a><span class="lineno"> 7251</span>&#160; </div>
<div class="line"><a name="l07252"></a><span class="lineno"> 7252</span>&#160;    <a class="code" href="classThreadTable2.html">ThreadTable2</a> *t=<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a0de6c591abb8d8340378037eccf81951">threadPool</a>-&gt;<a class="code" href="classThreadPool2.html#abed580daad75544f3455f08beaa06cf4">getThreadTable</a>(<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l07253"></a><span class="lineno"> 7253</span>&#160;    t-&gt;<a class="code" href="classThreadTable2.html#adba368aea4ee8d37742e332ed2f4f26e">setPending</a>(r.<a class="code" href="classCanBusResources.html#a781a7267d7eab2315d49720c1d673f29">_writeMessages</a>);</div>
<div class="line"><a name="l07254"></a><span class="lineno"> 7254</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>.unlock();</div>
<div class="line"><a name="l07255"></a><span class="lineno"> 7255</span>&#160;    t-&gt;<a class="code" href="classThreadTable2.html#a47cdedbcf45603cf2a45f1758472fbc7">synch</a>();</div>
<div class="line"><a name="l07256"></a><span class="lineno"> 7256</span>&#160; </div>
<div class="line"><a name="l07257"></a><span class="lineno"> 7257</span>&#160;    <span class="keywordflow">if</span> (!r.<a class="code" href="classCanBusResources.html#a1642d0476521a6b0c8f538cef04e2a59">getErrorStatus</a>()||(t-&gt;<a class="code" href="classThreadTable2.html#af31e5328380be26902f2c1853ce2cb29">timedOut</a>()))</div>
<div class="line"><a name="l07258"></a><span class="lineno"> 7258</span>&#160;    {</div>
<div class="line"><a name="l07259"></a><span class="lineno"> 7259</span>&#160;        yError(<span class="stringliteral">&quot;readWord16Array: at least one message timed out\n&quot;</span>);</div>
<div class="line"><a name="l07260"></a><span class="lineno"> 7260</span>&#160;        memset (<a class="code" href="sine_8m.html#a2a89187d8e8e8fba509ef9ab5f815d88">out</a>, 0, <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>) * r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>());</div>
<div class="line"><a name="l07261"></a><span class="lineno"> 7261</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l07262"></a><span class="lineno"> 7262</span>&#160;    }</div>
<div class="line"><a name="l07263"></a><span class="lineno"> 7263</span>&#160; </div>
<div class="line"><a name="l07264"></a><span class="lineno"> 7264</span>&#160;    <span class="keywordtype">int</span> j;</div>
<div class="line"><a name="l07265"></a><span class="lineno"> 7265</span>&#160;    <span class="keywordflow">for</span> (i = 0, j = 0; i &lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>(); i++)</div>
<div class="line"><a name="l07266"></a><span class="lineno"> 7266</span>&#160;    {</div>
<div class="line"><a name="l07267"></a><span class="lineno"> 7267</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a56978bb0d722116c2e86777743d17247">ENABLED</a>(i))</div>
<div class="line"><a name="l07268"></a><span class="lineno"> 7268</span>&#160;        {</div>
<div class="line"><a name="l07269"></a><span class="lineno"> 7269</span>&#160;            CanMessage *m = t-&gt;<a class="code" href="classThreadTable2.html#a5ac48ab511cfb6e31f9b32ba005374b6">getByJoint</a>(i, r.<a class="code" href="classCanBusResources.html#a5eb200eec7f8c10314fc9349f4088ff3">_destInv</a>);</div>
<div class="line"><a name="l07270"></a><span class="lineno"> 7270</span>&#160;            <span class="keywordflow">if</span> ( (m!=0) &amp;&amp; (m-&gt;getId() != 0xffff) )</div>
<div class="line"><a name="l07271"></a><span class="lineno"> 7271</span>&#160;                <a class="code" href="sine_8m.html#a2a89187d8e8e8fba509ef9ab5f815d88">out</a>[i] = *((<span class="keywordtype">short</span> *)(m-&gt;getData()+1));</div>
<div class="line"><a name="l07272"></a><span class="lineno"> 7272</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l07273"></a><span class="lineno"> 7273</span>&#160;                <a class="code" href="sine_8m.html#a2a89187d8e8e8fba509ef9ab5f815d88">out</a>[i]=0;</div>
<div class="line"><a name="l07274"></a><span class="lineno"> 7274</span>&#160;            j++;</div>
<div class="line"><a name="l07275"></a><span class="lineno"> 7275</span>&#160;        }</div>
<div class="line"><a name="l07276"></a><span class="lineno"> 7276</span>&#160;    }</div>
<div class="line"><a name="l07277"></a><span class="lineno"> 7277</span>&#160; </div>
<div class="line"><a name="l07278"></a><span class="lineno"> 7278</span>&#160;    t-&gt;<a class="code" href="classThreadTable2.html#a2129ef023b358d00c5b30de7176f2b3e">clear</a>();</div>
<div class="line"><a name="l07279"></a><span class="lineno"> 7279</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l07280"></a><span class="lineno"> 7280</span>&#160;}</div>
<div class="line"><a name="l07281"></a><span class="lineno"> 7281</span>&#160; </div>
<div class="line"><a name="l07282"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a3a6a99db5a27c7b2741d35a63405e256"> 7282</a></span>&#160;yarp::dev::DeviceDriver *<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a3a6a99db5a27c7b2741d35a63405e256">CanBusMotionControl::createDevice</a>(yarp::os::Searchable&amp; config)</div>
<div class="line"><a name="l07283"></a><span class="lineno"> 7283</span>&#160;{</div>
<div class="line"><a name="l07284"></a><span class="lineno"> 7284</span>&#160;    <span class="comment">//analogSensor</span></div>
<div class="line"><a name="l07285"></a><span class="lineno"> 7285</span>&#160;    std::string deviceType=config.find(<span class="stringliteral">&quot;device&quot;</span>).asString().c_str();</div>
<div class="line"><a name="l07286"></a><span class="lineno"> 7286</span>&#160;    std::string deviceId=config.find(<span class="stringliteral">&quot;deviceid&quot;</span>).asString().c_str();</div>
<div class="line"><a name="l07287"></a><span class="lineno"> 7287</span>&#160; </div>
<div class="line"><a name="l07288"></a><span class="lineno"> 7288</span>&#160;    </div>
<div class="line"><a name="l07289"></a><span class="lineno"> 7289</span>&#160;    yDebug() &lt;&lt;<span class="stringliteral">&quot;CanBusMotionControl::createDevice() looking for device &quot;</span> &lt;&lt; deviceType &lt;&lt; <span class="stringliteral">&quot; with id &quot;</span> &lt;&lt; deviceId;</div>
<div class="line"><a name="l07290"></a><span class="lineno"> 7290</span>&#160; </div>
<div class="line"><a name="l07291"></a><span class="lineno"> 7291</span>&#160;    <span class="keywordflow">if</span> (deviceType==<span class="stringliteral">&quot;analog&quot;</span>)</div>
<div class="line"><a name="l07292"></a><span class="lineno"> 7292</span>&#160;    {</div>
<div class="line"><a name="l07293"></a><span class="lineno"> 7293</span>&#160;        std::list&lt;TBR_AnalogSensor *&gt;::iterator it=analogSensors.begin();</div>
<div class="line"><a name="l07294"></a><span class="lineno"> 7294</span>&#160;        <span class="keywordflow">while</span>(it!=analogSensors.end())</div>
<div class="line"><a name="l07295"></a><span class="lineno"> 7295</span>&#160;        {</div>
<div class="line"><a name="l07296"></a><span class="lineno"> 7296</span>&#160;            yDebug() &lt;&lt;<span class="stringliteral">&quot;CanBusMotionControl::createDevice() inspecting &quot;</span>&lt;&lt; (*it)-&gt;getDeviceId(); </div>
<div class="line"><a name="l07297"></a><span class="lineno"> 7297</span>&#160; </div>
<div class="line"><a name="l07298"></a><span class="lineno"> 7298</span>&#160;            <span class="keywordflow">if</span> ((*it)-&gt;getDeviceId()==deviceId)</div>
<div class="line"><a name="l07299"></a><span class="lineno"> 7299</span>&#160;            {</div>
<div class="line"><a name="l07300"></a><span class="lineno"> 7300</span>&#160;                yDebug() &lt;&lt;<span class="stringliteral">&quot;CanBusMotionControl::createDevice() found valid device&quot;</span>; </div>
<div class="line"><a name="l07301"></a><span class="lineno"> 7301</span>&#160;                <span class="keywordflow">return</span> (*it);</div>
<div class="line"><a name="l07302"></a><span class="lineno"> 7302</span>&#160;            }</div>
<div class="line"><a name="l07303"></a><span class="lineno"> 7303</span>&#160;            it++;</div>
<div class="line"><a name="l07304"></a><span class="lineno"> 7304</span>&#160;        }</div>
<div class="line"><a name="l07305"></a><span class="lineno"> 7305</span>&#160;    }</div>
<div class="line"><a name="l07306"></a><span class="lineno"> 7306</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l07307"></a><span class="lineno"> 7307</span>&#160;    {</div>
<div class="line"><a name="l07308"></a><span class="lineno"> 7308</span>&#160;        yDebug() &lt;&lt;<span class="stringliteral">&quot;CanBusMotionControl::createDevice() only works for analog kind of devices\n&quot;</span>;</div>
<div class="line"><a name="l07309"></a><span class="lineno"> 7309</span>&#160;    }</div>
<div class="line"><a name="l07310"></a><span class="lineno"> 7310</span>&#160; </div>
<div class="line"><a name="l07311"></a><span class="lineno"> 7311</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l07312"></a><span class="lineno"> 7312</span>&#160;}</div>
<div class="line"><a name="l07313"></a><span class="lineno"> 7313</span>&#160; </div>
<div class="line"><a name="l07314"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6e7b832cc1e5918c85ac603a631f6c29"> 7314</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6e7b832cc1e5918c85ac603a631f6c29">CanBusMotionControl::getEncodersTimedRaw</a>(<span class="keywordtype">double</span> *v, <span class="keywordtype">double</span> *t)</div>
<div class="line"><a name="l07315"></a><span class="lineno"> 7315</span>&#160;{</div>
<div class="line"><a name="l07316"></a><span class="lineno"> 7316</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l07317"></a><span class="lineno"> 7317</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l07318"></a><span class="lineno"> 7318</span>&#160; </div>
<div class="line"><a name="l07319"></a><span class="lineno"> 7319</span>&#160;    std::lock_guard&lt;std::recursive_mutex&gt; lck(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>);</div>
<div class="line"><a name="l07320"></a><span class="lineno"> 7320</span>&#160;    </div>
<div class="line"><a name="l07321"></a><span class="lineno"> 7321</span>&#160;    <span class="keywordtype">double</span> stamp=0;</div>
<div class="line"><a name="l07322"></a><span class="lineno"> 7322</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>(); i++) {</div>
<div class="line"><a name="l07323"></a><span class="lineno"> 7323</span>&#160;        v[i] = double(r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[i].<a class="code" href="classBCastBufferElement.html#af9b2502ea8bef890aec0d7f70205e2c0">_position_joint</a>.<a class="code" href="structBCastElement.html#a048622f3390102c83b081b8799ac97d1">_value</a>);</div>
<div class="line"><a name="l07324"></a><span class="lineno"> 7324</span>&#160;        t[i] = r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[i].<a class="code" href="classBCastBufferElement.html#af9b2502ea8bef890aec0d7f70205e2c0">_position_joint</a>.<a class="code" href="structBCastElement.html#abe5b0e1af1d11df4b9e32bd1e43555fa">_stamp</a>;</div>
<div class="line"><a name="l07325"></a><span class="lineno"> 7325</span>&#160; </div>
<div class="line"><a name="l07326"></a><span class="lineno"> 7326</span>&#160;        <span class="keywordflow">if</span> (stamp&lt;r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[i].<a class="code" href="classBCastBufferElement.html#af9b2502ea8bef890aec0d7f70205e2c0">_position_joint</a>.<a class="code" href="structBCastElement.html#abe5b0e1af1d11df4b9e32bd1e43555fa">_stamp</a>)</div>
<div class="line"><a name="l07327"></a><span class="lineno"> 7327</span>&#160;            stamp=r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[i].<a class="code" href="classBCastBufferElement.html#af9b2502ea8bef890aec0d7f70205e2c0">_position_joint</a>.<a class="code" href="structBCastElement.html#abe5b0e1af1d11df4b9e32bd1e43555fa">_stamp</a>;</div>
<div class="line"><a name="l07328"></a><span class="lineno"> 7328</span>&#160;    }</div>
<div class="line"><a name="l07329"></a><span class="lineno"> 7329</span>&#160; </div>
<div class="line"><a name="l07330"></a><span class="lineno"> 7330</span>&#160;    stampEncoders.update(stamp);</div>
<div class="line"><a name="l07331"></a><span class="lineno"> 7331</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l07332"></a><span class="lineno"> 7332</span>&#160;}</div>
<div class="line"><a name="l07333"></a><span class="lineno"> 7333</span>&#160; </div>
<div class="line"><a name="l07334"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a60ca5ff6a1c1e8aadde2b78be113f5fd"> 7334</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a60ca5ff6a1c1e8aadde2b78be113f5fd">CanBusMotionControl::getEncoderTimedRaw</a>(<span class="keywordtype">int</span> axis, <span class="keywordtype">double</span> *v, <span class="keywordtype">double</span> *t)</div>
<div class="line"><a name="l07335"></a><span class="lineno"> 7335</span>&#160;{</div>
<div class="line"><a name="l07336"></a><span class="lineno"> 7336</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l07337"></a><span class="lineno"> 7337</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>()))<span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l07338"></a><span class="lineno"> 7338</span>&#160; </div>
<div class="line"><a name="l07339"></a><span class="lineno"> 7339</span>&#160;    std::lock_guard&lt;std::recursive_mutex&gt; lck(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>);</div>
<div class="line"><a name="l07340"></a><span class="lineno"> 7340</span>&#160;    *v = double(r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[axis].<a class="code" href="classBCastBufferElement.html#af9b2502ea8bef890aec0d7f70205e2c0">_position_joint</a>.<a class="code" href="structBCastElement.html#a048622f3390102c83b081b8799ac97d1">_value</a>);</div>
<div class="line"><a name="l07341"></a><span class="lineno"> 7341</span>&#160;    *t = r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[axis].<a class="code" href="classBCastBufferElement.html#af9b2502ea8bef890aec0d7f70205e2c0">_position_joint</a>.<a class="code" href="structBCastElement.html#abe5b0e1af1d11df4b9e32bd1e43555fa">_stamp</a>;</div>
<div class="line"><a name="l07342"></a><span class="lineno"> 7342</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l07343"></a><span class="lineno"> 7343</span>&#160;}</div>
<div class="line"><a name="l07344"></a><span class="lineno"> 7344</span>&#160; </div>
<div class="line"><a name="l07345"></a><span class="lineno"> 7345</span>&#160; </div>
<div class="line"><a name="l07346"></a><span class="lineno"> 7346</span>&#160;<span class="comment">// IInteractionMode</span></div>
<div class="line"><a name="l07347"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a704477f7527f662b30eccb5f5e360a07"> 7347</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a704477f7527f662b30eccb5f5e360a07">CanBusMotionControl::getInteractionModeRaw</a>(<span class="keywordtype">int</span> axis, yarp::dev::InteractionModeEnum* mode)</div>
<div class="line"><a name="l07348"></a><span class="lineno"> 7348</span>&#160;{</div>
<div class="line"><a name="l07349"></a><span class="lineno"> 7349</span>&#160;    <a class="code" href="canControlUtils_8h.html#aed353ce9c28af351b98138a0a3cee032">DEBUG_FUNC</a>(<span class="stringliteral">&quot;Calling GET_INTERACTION_MODE SINGLE JOINT\n&quot;</span>);</div>
<div class="line"><a name="l07350"></a><span class="lineno"> 7350</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l07351"></a><span class="lineno"> 7351</span>&#160;    <span class="keywordtype">int</span> temp;</div>
<div class="line"><a name="l07352"></a><span class="lineno"> 7352</span>&#160; </div>
<div class="line"><a name="l07353"></a><span class="lineno"> 7353</span>&#160;    std::lock_guard&lt;std::recursive_mutex&gt; lck(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>);</div>
<div class="line"><a name="l07354"></a><span class="lineno"> 7354</span>&#160;    temp = int(r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[axis].<a class="code" href="classBCastBufferElement.html#a71c399116a5883ca93100eaa0ef26d4b">_interactionmodeStatus</a>);</div>
<div class="line"><a name="l07355"></a><span class="lineno"> 7355</span>&#160;    *mode=(yarp::dev::InteractionModeEnum)<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a1e1e02485fb399d2538e8c88ff39a450">from_interactionint_to_interactionvocab</a>(temp);</div>
<div class="line"><a name="l07356"></a><span class="lineno"> 7356</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l07357"></a><span class="lineno"> 7357</span>&#160;}</div>
<div class="line"><a name="l07358"></a><span class="lineno"> 7358</span>&#160; </div>
<div class="line"><a name="l07359"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a56022c38cbf4fb614abf0e54a0cc01e0"> 7359</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a56022c38cbf4fb614abf0e54a0cc01e0">CanBusMotionControl::getInteractionModesRaw</a>(<span class="keywordtype">int</span> n_joints, <span class="keywordtype">int</span> *joints, yarp::dev::InteractionModeEnum* modes)</div>
<div class="line"><a name="l07360"></a><span class="lineno"> 7360</span>&#160;{</div>
<div class="line"><a name="l07361"></a><span class="lineno"> 7361</span>&#160;    <a class="code" href="canControlUtils_8h.html#aed353ce9c28af351b98138a0a3cee032">DEBUG_FUNC</a>(<span class="stringliteral">&quot;Calling GET_INTERACTION_MODE MULTIPLE JOINTS \n&quot;</span>);</div>
<div class="line"><a name="l07362"></a><span class="lineno"> 7362</span>&#160;    <span class="keywordflow">if</span> (joints==0) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l07363"></a><span class="lineno"> 7363</span>&#160;    <span class="keywordflow">if</span> (modes==0) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l07364"></a><span class="lineno"> 7364</span>&#160; </div>
<div class="line"><a name="l07365"></a><span class="lineno"> 7365</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l07366"></a><span class="lineno"> 7366</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l07367"></a><span class="lineno"> 7367</span>&#160;    std::lock_guard&lt;std::recursive_mutex&gt; lck(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>);</div>
<div class="line"><a name="l07368"></a><span class="lineno"> 7368</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; n_joints; i++)</div>
<div class="line"><a name="l07369"></a><span class="lineno"> 7369</span>&#160;    {</div>
<div class="line"><a name="l07370"></a><span class="lineno"> 7370</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a704477f7527f662b30eccb5f5e360a07">getInteractionModeRaw</a>(joints[i], &amp;modes[i]);</div>
<div class="line"><a name="l07371"></a><span class="lineno"> 7371</span>&#160;    }</div>
<div class="line"><a name="l07372"></a><span class="lineno"> 7372</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l07373"></a><span class="lineno"> 7373</span>&#160;}</div>
<div class="line"><a name="l07374"></a><span class="lineno"> 7374</span>&#160; </div>
<div class="line"><a name="l07375"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a56a4c80ef14d78c5aa37a423f61dde93"> 7375</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a56022c38cbf4fb614abf0e54a0cc01e0">CanBusMotionControl::getInteractionModesRaw</a>(yarp::dev::InteractionModeEnum* modes)</div>
<div class="line"><a name="l07376"></a><span class="lineno"> 7376</span>&#160;{</div>
<div class="line"><a name="l07377"></a><span class="lineno"> 7377</span>&#160;    <a class="code" href="canControlUtils_8h.html#aed353ce9c28af351b98138a0a3cee032">DEBUG_FUNC</a>(<span class="stringliteral">&quot;Calling GET_INTERACTION_MODE ALL JOINTS \n&quot;</span>);</div>
<div class="line"><a name="l07378"></a><span class="lineno"> 7378</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l07379"></a><span class="lineno"> 7379</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l07380"></a><span class="lineno"> 7380</span>&#160;    <span class="keywordtype">int</span> temp;</div>
<div class="line"><a name="l07381"></a><span class="lineno"> 7381</span>&#160;    std::lock_guard&lt;std::recursive_mutex&gt; lck(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>);</div>
<div class="line"><a name="l07382"></a><span class="lineno"> 7382</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>(); i++)</div>
<div class="line"><a name="l07383"></a><span class="lineno"> 7383</span>&#160;    {</div>
<div class="line"><a name="l07384"></a><span class="lineno"> 7384</span>&#160;        temp = int(r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[i].<a class="code" href="classBCastBufferElement.html#a71c399116a5883ca93100eaa0ef26d4b">_interactionmodeStatus</a>);</div>
<div class="line"><a name="l07385"></a><span class="lineno"> 7385</span>&#160;        modes[i]=(yarp::dev::InteractionModeEnum)<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a1e1e02485fb399d2538e8c88ff39a450">from_interactionint_to_interactionvocab</a>(temp);</div>
<div class="line"><a name="l07386"></a><span class="lineno"> 7386</span>&#160;    }</div>
<div class="line"><a name="l07387"></a><span class="lineno"> 7387</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l07388"></a><span class="lineno"> 7388</span>&#160;}</div>
<div class="line"><a name="l07389"></a><span class="lineno"> 7389</span>&#160; </div>
<div class="line"><a name="l07390"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a002cd3eaf490f9c6fb9c5fc25b9a793d"> 7390</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a002cd3eaf490f9c6fb9c5fc25b9a793d">CanBusMotionControl::setInteractionModeRaw</a>(<span class="keywordtype">int</span> j, yarp::dev::InteractionModeEnum mode)</div>
<div class="line"><a name="l07391"></a><span class="lineno"> 7391</span>&#160;{</div>
<div class="line"><a name="l07392"></a><span class="lineno"> 7392</span>&#160;    <span class="keywordflow">if</span> (!(j &gt;= 0 &amp;&amp; j &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a>-1)*2))</div>
<div class="line"><a name="l07393"></a><span class="lineno"> 7393</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l07394"></a><span class="lineno"> 7394</span>&#160; </div>
<div class="line"><a name="l07395"></a><span class="lineno"> 7395</span>&#160;    <a class="code" href="canControlUtils_8h.html#aed353ce9c28af351b98138a0a3cee032">DEBUG_FUNC</a>(<span class="stringliteral">&quot;Calling SET_INTERACTION_MODE RAW\n&quot;</span>);</div>
<div class="line"><a name="l07396"></a><span class="lineno"> 7396</span>&#160; </div>
<div class="line"><a name="l07397"></a><span class="lineno"> 7397</span>&#160;    <span class="keywordflow">if</span> (mode == VOCAB_IM_COMPLIANT &amp;&amp; <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aec47204c6542b23914f2e0ac120fc0ca">_MCtorqueControlEnabled</a> == <span class="keyword">false</span>) {yError()&lt;&lt;<span class="stringliteral">&quot;Torque control is disabled. Check your configuration parameters&quot;</span>; <span class="keywordflow">return</span> <span class="keyword">false</span>;}</div>
<div class="line"><a name="l07398"></a><span class="lineno"> 7398</span>&#160;    <span class="keywordtype">int</span> v = <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a95ddbda0e604bb891811a1c25851d2c0">from_interactionvocab_to_interactionint</a>(mode);</div>
<div class="line"><a name="l07399"></a><span class="lineno"> 7399</span>&#160;    <span class="keywordflow">if</span> (v==icubCanProto_interactionmode_unknownError) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l07400"></a><span class="lineno"> 7400</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#acfe73ef88e6f12e63c152e63f943fb09">_writeByte8</a>(<a class="code" href="messages_8h.html#af11175c0bac91604d8a95f63342d207d">CAN_SET_INTERACTION_MODE</a>,j,v);</div>
<div class="line"><a name="l07401"></a><span class="lineno"> 7401</span>&#160; </div>
<div class="line"><a name="l07402"></a><span class="lineno"> 7402</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l07403"></a><span class="lineno"> 7403</span>&#160;}</div>
<div class="line"><a name="l07404"></a><span class="lineno"> 7404</span>&#160; </div>
<div class="line"><a name="l07405"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a2e03ea5d66d3b96d47a5394242fb1613"> 7405</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a2e03ea5d66d3b96d47a5394242fb1613">CanBusMotionControl::setInteractionModesRaw</a>(<span class="keywordtype">int</span> n_joints, <span class="keywordtype">int</span> *joints, yarp::dev::InteractionModeEnum* modes)</div>
<div class="line"><a name="l07406"></a><span class="lineno"> 7406</span>&#160;{</div>
<div class="line"><a name="l07407"></a><span class="lineno"> 7407</span>&#160;    <a class="code" href="canControlUtils_8h.html#aed353ce9c28af351b98138a0a3cee032">DEBUG_FUNC</a>(<span class="stringliteral">&quot;Calling SET_INTERACTION_MODE_RAW MULTIPLE JOINTS\n&quot;</span>);</div>
<div class="line"><a name="l07408"></a><span class="lineno"> 7408</span>&#160;    <span class="keywordflow">if</span> (n_joints==0) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l07409"></a><span class="lineno"> 7409</span>&#160;    <span class="keywordflow">if</span> (joints==0) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l07410"></a><span class="lineno"> 7410</span>&#160;    <span class="keywordtype">bool</span> ret = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07411"></a><span class="lineno"> 7411</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0;i&lt;n_joints; i++)</div>
<div class="line"><a name="l07412"></a><span class="lineno"> 7412</span>&#160;    {</div>
<div class="line"><a name="l07413"></a><span class="lineno"> 7413</span>&#160;        ret = ret &amp;&amp; <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a002cd3eaf490f9c6fb9c5fc25b9a793d">setInteractionModeRaw</a>(joints[i],modes[i]);</div>
<div class="line"><a name="l07414"></a><span class="lineno"> 7414</span>&#160;    }</div>
<div class="line"><a name="l07415"></a><span class="lineno"> 7415</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l07416"></a><span class="lineno"> 7416</span>&#160;}</div>
<div class="line"><a name="l07417"></a><span class="lineno"> 7417</span>&#160; </div>
<div class="line"><a name="l07418"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ac10e7331432265a2d853b78a7b7ef152"> 7418</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a2e03ea5d66d3b96d47a5394242fb1613">CanBusMotionControl::setInteractionModesRaw</a>(yarp::dev::InteractionModeEnum* modes)</div>
<div class="line"><a name="l07419"></a><span class="lineno"> 7419</span>&#160;{</div>
<div class="line"><a name="l07420"></a><span class="lineno"> 7420</span>&#160;    <a class="code" href="canControlUtils_8h.html#aed353ce9c28af351b98138a0a3cee032">DEBUG_FUNC</a>(<span class="stringliteral">&quot;Calling SET_CONTROL_MODE_RAW ALL JOINT\n&quot;</span>);</div>
<div class="line"><a name="l07421"></a><span class="lineno"> 7421</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l07422"></a><span class="lineno"> 7422</span>&#160; </div>
<div class="line"><a name="l07423"></a><span class="lineno"> 7423</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>(); i++)</div>
<div class="line"><a name="l07424"></a><span class="lineno"> 7424</span>&#160;    {</div>
<div class="line"><a name="l07425"></a><span class="lineno"> 7425</span>&#160;       <span class="keywordflow">if</span> (modes[i] == VOCAB_IM_COMPLIANT &amp;&amp; <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aec47204c6542b23914f2e0ac120fc0ca">_MCtorqueControlEnabled</a> == <span class="keyword">false</span>) {yError()&lt;&lt;<span class="stringliteral">&quot;Torque control is disabled. Check your configuration parameters&quot;</span>; <span class="keywordflow">continue</span>;}</div>
<div class="line"><a name="l07426"></a><span class="lineno"> 7426</span>&#160; </div>
<div class="line"><a name="l07427"></a><span class="lineno"> 7427</span>&#160;       <span class="keywordtype">int</span> v = <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a95ddbda0e604bb891811a1c25851d2c0">from_interactionvocab_to_interactionint</a>(modes[i]);</div>
<div class="line"><a name="l07428"></a><span class="lineno"> 7428</span>&#160;       <span class="keywordflow">if</span> (v==icubCanProto_interactionmode_unknownError) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l07429"></a><span class="lineno"> 7429</span>&#160;       <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#acfe73ef88e6f12e63c152e63f943fb09">_writeByte8</a>(<a class="code" href="messages_8h.html#af11175c0bac91604d8a95f63342d207d">CAN_SET_INTERACTION_MODE</a>,i,v);</div>
<div class="line"><a name="l07430"></a><span class="lineno"> 7430</span>&#160;    }</div>
<div class="line"><a name="l07431"></a><span class="lineno"> 7431</span>&#160; </div>
<div class="line"><a name="l07432"></a><span class="lineno"> 7432</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l07433"></a><span class="lineno"> 7433</span>&#160;}</div>
<div class="line"><a name="l07434"></a><span class="lineno"> 7434</span>&#160; </div>
<div class="line"><a name="l07435"></a><span class="lineno"> 7435</span>&#160;<span class="comment">//PWM interface</span></div>
<div class="line"><a name="l07436"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af5c46d06259093d928674e21ad8e26b1"> 7436</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af5c46d06259093d928674e21ad8e26b1">CanBusMotionControl::setRefDutyCycleRaw</a>(<span class="keywordtype">int</span> j, <span class="keywordtype">double</span> v)</div>
<div class="line"><a name="l07437"></a><span class="lineno"> 7437</span>&#160;{</div>
<div class="line"><a name="l07438"></a><span class="lineno"> 7438</span>&#160;    <span class="keywordflow">if</span> (!(j &gt;= 0 &amp;&amp; j &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a> - 1) * 2))</div>
<div class="line"><a name="l07439"></a><span class="lineno"> 7439</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l07440"></a><span class="lineno"> 7440</span>&#160; </div>
<div class="line"><a name="l07441"></a><span class="lineno"> 7441</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a100a40a38da173be134acb6308284b29">_writeWord16</a>(ICUBCANPROTO_POL_MC_CMD__SET_OPENLOOP_PARAMS, j, <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af5c4f789e8b29d4a63d538b48fc9cd77">S_16</a>(v));</div>
<div class="line"><a name="l07442"></a><span class="lineno"> 7442</span>&#160;}</div>
<div class="line"><a name="l07443"></a><span class="lineno"> 7443</span>&#160; </div>
<div class="line"><a name="l07444"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ab620c4dd901f6e1e1d3e68240f3f5d0f"> 7444</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ab620c4dd901f6e1e1d3e68240f3f5d0f">CanBusMotionControl::setRefDutyCyclesRaw</a>(<span class="keyword">const</span> <span class="keywordtype">double</span> *v)</div>
<div class="line"><a name="l07445"></a><span class="lineno"> 7445</span>&#160;{</div>
<div class="line"><a name="l07446"></a><span class="lineno"> 7446</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l07447"></a><span class="lineno"> 7447</span>&#160; </div>
<div class="line"><a name="l07448"></a><span class="lineno"> 7448</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l07449"></a><span class="lineno"> 7449</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>(); i++)</div>
<div class="line"><a name="l07450"></a><span class="lineno"> 7450</span>&#160;    {</div>
<div class="line"><a name="l07451"></a><span class="lineno"> 7451</span>&#160;        <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#af5c46d06259093d928674e21ad8e26b1">setRefDutyCycleRaw</a>(i, v[i]);</div>
<div class="line"><a name="l07452"></a><span class="lineno"> 7452</span>&#160;    }</div>
<div class="line"><a name="l07453"></a><span class="lineno"> 7453</span>&#160; </div>
<div class="line"><a name="l07454"></a><span class="lineno"> 7454</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l07455"></a><span class="lineno"> 7455</span>&#160;}</div>
<div class="line"><a name="l07456"></a><span class="lineno"> 7456</span>&#160; </div>
<div class="line"><a name="l07457"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aaccf3a08e17f1af3278713baf0ddb0d9"> 7457</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aaccf3a08e17f1af3278713baf0ddb0d9">CanBusMotionControl::getRefDutyCycleRaw</a>(<span class="keywordtype">int</span> j, <span class="keywordtype">double</span> *v)</div>
<div class="line"><a name="l07458"></a><span class="lineno"> 7458</span>&#160;{</div>
<div class="line"><a name="l07459"></a><span class="lineno"> 7459</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> axis = j;</div>
<div class="line"><a name="l07460"></a><span class="lineno"> 7460</span>&#160;    <span class="keywordflow">if</span> (!(axis &gt;= 0 &amp;&amp; axis &lt;= (<a class="code" href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a> - 1) * 2))</div>
<div class="line"><a name="l07461"></a><span class="lineno"> 7461</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l07462"></a><span class="lineno"> 7462</span>&#160; </div>
<div class="line"><a name="l07463"></a><span class="lineno"> 7463</span>&#160;    <span class="keywordtype">short</span> <span class="keywordtype">int</span> value = 0;</div>
<div class="line"><a name="l07464"></a><span class="lineno"> 7464</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a41a5714a6c78ee694b7f694be991101a">_readWord16</a>(ICUBCANPROTO_POL_MC_CMD__GET_OPENLOOP_PARAMS, axis, value) == <span class="keyword">true</span>)</div>
<div class="line"><a name="l07465"></a><span class="lineno"> 7465</span>&#160;        *v = double(value);</div>
<div class="line"><a name="l07466"></a><span class="lineno"> 7466</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l07467"></a><span class="lineno"> 7467</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l07468"></a><span class="lineno"> 7468</span>&#160; </div>
<div class="line"><a name="l07469"></a><span class="lineno"> 7469</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l07470"></a><span class="lineno"> 7470</span>&#160;}</div>
<div class="line"><a name="l07471"></a><span class="lineno"> 7471</span>&#160; </div>
<div class="line"><a name="l07472"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ab0670384c9bc64fcd5cc96a61352e5d3"> 7472</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ab0670384c9bc64fcd5cc96a61352e5d3">CanBusMotionControl::getRefDutyCyclesRaw</a>(<span class="keywordtype">double</span> *v)</div>
<div class="line"><a name="l07473"></a><span class="lineno"> 7473</span>&#160;{</div>
<div class="line"><a name="l07474"></a><span class="lineno"> 7474</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l07475"></a><span class="lineno"> 7475</span>&#160;    <span class="keywordflow">if</span> (v == 0) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l07476"></a><span class="lineno"> 7476</span>&#160;    <span class="keywordtype">int</span> i = 0;</div>
<div class="line"><a name="l07477"></a><span class="lineno"> 7477</span>&#160;    <span class="keywordtype">bool</span> ret = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07478"></a><span class="lineno"> 7478</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>(); i++)</div>
<div class="line"><a name="l07479"></a><span class="lineno"> 7479</span>&#160;    {</div>
<div class="line"><a name="l07480"></a><span class="lineno"> 7480</span>&#160;        ret = ret &amp; <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aaccf3a08e17f1af3278713baf0ddb0d9">getRefDutyCycleRaw</a>(i, &amp;v[i]);</div>
<div class="line"><a name="l07481"></a><span class="lineno"> 7481</span>&#160;    }</div>
<div class="line"><a name="l07482"></a><span class="lineno"> 7482</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l07483"></a><span class="lineno"> 7483</span>&#160;}</div>
<div class="line"><a name="l07484"></a><span class="lineno"> 7484</span>&#160; </div>
<div class="line"><a name="l07485"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa4457fe900182176aad57756c9b411f0"> 7485</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa4457fe900182176aad57756c9b411f0">CanBusMotionControl::getDutyCycleRaw</a>(<span class="keywordtype">int</span> j, <span class="keywordtype">double</span> *v)</div>
<div class="line"><a name="l07486"></a><span class="lineno"> 7486</span>&#160;{</div>
<div class="line"><a name="l07487"></a><span class="lineno"> 7487</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l07488"></a><span class="lineno"> 7488</span>&#160;    <span class="keywordflow">if</span> (!(j &gt;= 0 &amp;&amp; j &lt;= r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>()))</div>
<div class="line"><a name="l07489"></a><span class="lineno"> 7489</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l07490"></a><span class="lineno"> 7490</span>&#160;    std::lock_guard&lt;std::recursive_mutex&gt; lck(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>);</div>
<div class="line"><a name="l07491"></a><span class="lineno"> 7491</span>&#160;    *(v) = <span class="keywordtype">double</span>(r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[j].<a class="code" href="classBCastBufferElement.html#a96b136248573dc3f1b4f245f402bd18c">_pid_value</a>);</div>
<div class="line"><a name="l07492"></a><span class="lineno"> 7492</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l07493"></a><span class="lineno"> 7493</span>&#160;}</div>
<div class="line"><a name="l07494"></a><span class="lineno"> 7494</span>&#160; </div>
<div class="line"><a name="l07495"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a322ffc5f6913a64d4aa494c0d7670ba1"> 7495</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a322ffc5f6913a64d4aa494c0d7670ba1">CanBusMotionControl::getDutyCyclesRaw</a>(<span class="keywordtype">double</span> *v)</div>
<div class="line"><a name="l07496"></a><span class="lineno"> 7496</span>&#160;{</div>
<div class="line"><a name="l07497"></a><span class="lineno"> 7497</span>&#160;    <a class="code" href="classCanBusResources.html">CanBusResources</a>&amp; r = <a class="code" href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a>(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">system_resources</a>);</div>
<div class="line"><a name="l07498"></a><span class="lineno"> 7498</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l07499"></a><span class="lineno"> 7499</span>&#160; </div>
<div class="line"><a name="l07500"></a><span class="lineno"> 7500</span>&#160;    std::lock_guard&lt;std::recursive_mutex&gt; lck(<a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">_mutex</a>);</div>
<div class="line"><a name="l07501"></a><span class="lineno"> 7501</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; r.<a class="code" href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">getJoints</a>(); i++)</div>
<div class="line"><a name="l07502"></a><span class="lineno"> 7502</span>&#160;    {</div>
<div class="line"><a name="l07503"></a><span class="lineno"> 7503</span>&#160;        v[i] = double(r.<a class="code" href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">_bcastRecvBuffer</a>[i].<a class="code" href="classBCastBufferElement.html#a96b136248573dc3f1b4f245f402bd18c">_pid_value</a>);</div>
<div class="line"><a name="l07504"></a><span class="lineno"> 7504</span>&#160;    }</div>
<div class="line"><a name="l07505"></a><span class="lineno"> 7505</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l07506"></a><span class="lineno"> 7506</span>&#160;}</div>
<div class="line"><a name="l07507"></a><span class="lineno"> 7507</span>&#160; </div>
<div class="line"><a name="l07508"></a><span class="lineno"> 7508</span>&#160;<span class="comment">// Current interface</span></div>
<div class="line"><a name="l07509"></a><span class="lineno"> 7509</span>&#160;<span class="comment">/*bool CanBusMotionControl::getCurrentRaw(int j, double *t)</span></div>
<div class="line"><a name="l07510"></a><span class="lineno"> 7510</span>&#160;<span class="comment">{</span></div>
<div class="line"><a name="l07511"></a><span class="lineno"> 7511</span>&#160;<span class="comment">return NOT_YET_IMPLEMENTED(&quot;getCurrentRaw&quot;);</span></div>
<div class="line"><a name="l07512"></a><span class="lineno"> 7512</span>&#160;<span class="comment">}</span></div>
<div class="line"><a name="l07513"></a><span class="lineno"> 7513</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l07514"></a><span class="lineno"> 7514</span>&#160;<span class="comment">bool CanBusMotionControl::getCurrentsRaw(double *t)</span></div>
<div class="line"><a name="l07515"></a><span class="lineno"> 7515</span>&#160;<span class="comment">{</span></div>
<div class="line"><a name="l07516"></a><span class="lineno"> 7516</span>&#160;<span class="comment">return NOT_YET_IMPLEMENTED(&quot;getCurrentsRaw&quot;);</span></div>
<div class="line"><a name="l07517"></a><span class="lineno"> 7517</span>&#160;<span class="comment">}</span></div>
<div class="line"><a name="l07518"></a><span class="lineno"> 7518</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l07519"></a><span class="lineno"> 7519</span>&#160; </div>
<div class="line"><a name="l07520"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a54e9e3f2cbafa9c5ea61bf11edcdbf5d"> 7520</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a54e9e3f2cbafa9c5ea61bf11edcdbf5d">CanBusMotionControl::getCurrentRangeRaw</a>(<span class="keywordtype">int</span> j, <span class="keywordtype">double</span> *<a class="code" href="namespacestrain_1_1dsp_1_1fsc.html#a746ce6f9a14034939607ccead53e3fd6">min</a>, <span class="keywordtype">double</span> *<a class="code" href="namespacestrain_1_1dsp_1_1fsc.html#a65804363dbaa9346e53442cb1bb9d73f">max</a>)</div>
<div class="line"><a name="l07521"></a><span class="lineno"> 7521</span>&#160;{</div>
<div class="line"><a name="l07522"></a><span class="lineno"> 7522</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="CanBusMotionControl_8cpp.html#a1711c4677515dd7b3a4e0813cb08528b">NOT_YET_IMPLEMENTED_WARNING</a>(<span class="stringliteral">&quot;getCurrentRangeRaw&quot;</span>);</div>
<div class="line"><a name="l07523"></a><span class="lineno"> 7523</span>&#160;}</div>
<div class="line"><a name="l07524"></a><span class="lineno"> 7524</span>&#160; </div>
<div class="line"><a name="l07525"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a65b8b33f133848f38e8d2a155a84f080"> 7525</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a65b8b33f133848f38e8d2a155a84f080">CanBusMotionControl::getCurrentRangesRaw</a>(<span class="keywordtype">double</span> *<a class="code" href="namespacestrain_1_1dsp_1_1fsc.html#a746ce6f9a14034939607ccead53e3fd6">min</a>, <span class="keywordtype">double</span> *<a class="code" href="namespacestrain_1_1dsp_1_1fsc.html#a65804363dbaa9346e53442cb1bb9d73f">max</a>)</div>
<div class="line"><a name="l07526"></a><span class="lineno"> 7526</span>&#160;{</div>
<div class="line"><a name="l07527"></a><span class="lineno"> 7527</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="CanBusMotionControl_8cpp.html#a1711c4677515dd7b3a4e0813cb08528b">NOT_YET_IMPLEMENTED_WARNING</a>(<span class="stringliteral">&quot;getCurrentRangesRaw&quot;</span>);</div>
<div class="line"><a name="l07528"></a><span class="lineno"> 7528</span>&#160;}</div>
<div class="line"><a name="l07529"></a><span class="lineno"> 7529</span>&#160; </div>
<div class="line"><a name="l07530"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a0fc55e21ff4fb23597c93814f979c90b"> 7530</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a0fc55e21ff4fb23597c93814f979c90b">CanBusMotionControl::setRefCurrentsRaw</a>(<span class="keyword">const</span> <span class="keywordtype">double</span> *t)</div>
<div class="line"><a name="l07531"></a><span class="lineno"> 7531</span>&#160;{</div>
<div class="line"><a name="l07532"></a><span class="lineno"> 7532</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="CanBusMotionControl_8cpp.html#a35a12201dd9ff39ea640f1d8b39f0770">NOT_YET_IMPLEMENTED</a>(<span class="stringliteral">&quot;setRefCurrentsRaw&quot;</span>);</div>
<div class="line"><a name="l07533"></a><span class="lineno"> 7533</span>&#160;}</div>
<div class="line"><a name="l07534"></a><span class="lineno"> 7534</span>&#160; </div>
<div class="line"><a name="l07535"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a9b42cfe7437a5aaf8efd8b9aaf56ad46"> 7535</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a9b42cfe7437a5aaf8efd8b9aaf56ad46">CanBusMotionControl::setRefCurrentRaw</a>(<span class="keywordtype">int</span> j, <span class="keywordtype">double</span> t)</div>
<div class="line"><a name="l07536"></a><span class="lineno"> 7536</span>&#160;{</div>
<div class="line"><a name="l07537"></a><span class="lineno"> 7537</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="CanBusMotionControl_8cpp.html#a35a12201dd9ff39ea640f1d8b39f0770">NOT_YET_IMPLEMENTED</a>(<span class="stringliteral">&quot;setRefCurrentRaw&quot;</span>);</div>
<div class="line"><a name="l07538"></a><span class="lineno"> 7538</span>&#160;}</div>
<div class="line"><a name="l07539"></a><span class="lineno"> 7539</span>&#160; </div>
<div class="line"><a name="l07540"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#ab0e3e939b4d9b38c5cfff91b7b4cf83c"> 7540</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a0fc55e21ff4fb23597c93814f979c90b">CanBusMotionControl::setRefCurrentsRaw</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> n_joint, <span class="keyword">const</span> <span class="keywordtype">int</span> *joints, <span class="keyword">const</span> <span class="keywordtype">double</span> *t)</div>
<div class="line"><a name="l07541"></a><span class="lineno"> 7541</span>&#160;{</div>
<div class="line"><a name="l07542"></a><span class="lineno"> 7542</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="CanBusMotionControl_8cpp.html#a35a12201dd9ff39ea640f1d8b39f0770">NOT_YET_IMPLEMENTED</a>(<span class="stringliteral">&quot;setRefCurrentsRaw&quot;</span>);</div>
<div class="line"><a name="l07543"></a><span class="lineno"> 7543</span>&#160;}</div>
<div class="line"><a name="l07544"></a><span class="lineno"> 7544</span>&#160; </div>
<div class="line"><a name="l07545"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a74651ba6ae46c35e3650ba709b7b8b45"> 7545</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a74651ba6ae46c35e3650ba709b7b8b45">CanBusMotionControl::getRefCurrentsRaw</a>(<span class="keywordtype">double</span> *t)</div>
<div class="line"><a name="l07546"></a><span class="lineno"> 7546</span>&#160;{</div>
<div class="line"><a name="l07547"></a><span class="lineno"> 7547</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="CanBusMotionControl_8cpp.html#a35a12201dd9ff39ea640f1d8b39f0770">NOT_YET_IMPLEMENTED</a>(<span class="stringliteral">&quot;getRefCurrentsRaw&quot;</span>);</div>
<div class="line"><a name="l07548"></a><span class="lineno"> 7548</span>&#160;}</div>
<div class="line"><a name="l07549"></a><span class="lineno"> 7549</span>&#160; </div>
<div class="line"><a name="l07550"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a84202859aaa87ab52691fac937b71cba"> 7550</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1CanBusMotionControl.html#a84202859aaa87ab52691fac937b71cba">CanBusMotionControl::getRefCurrentRaw</a>(<span class="keywordtype">int</span> j, <span class="keywordtype">double</span> *t)</div>
<div class="line"><a name="l07551"></a><span class="lineno"> 7551</span>&#160;{</div>
<div class="line"><a name="l07552"></a><span class="lineno"> 7552</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="CanBusMotionControl_8cpp.html#a35a12201dd9ff39ea640f1d8b39f0770">NOT_YET_IMPLEMENTED</a>(<span class="stringliteral">&quot;getRefCurrentRaw&quot;</span>);</div>
<div class="line"><a name="l07553"></a><span class="lineno"> 7553</span>&#160;}</div>
<div class="line"><a name="l07554"></a><span class="lineno"> 7554</span>&#160; </div>
<div class="ttc" id="aCanBusMotionControl_8cpp_html_a087655066ba7d69958b10f50e82201a3"><div class="ttname"><a href="CanBusMotionControl_8cpp.html#a087655066ba7d69958b10f50e82201a3">cstring</a></div><div class="ttdeci">static can_string_generic cstring[CAN_MAX_CARDS]</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00129">CanBusMotionControl.cpp:129</a></div></div>
<div class="ttc" id="aCanBusMotionControl_8cpp_html_a0ab4e4dd65b3c5c0fa0e1da33335cf31"><div class="ttname"><a href="CanBusMotionControl_8cpp.html#a0ab4e4dd65b3c5c0fa0e1da33335cf31">validate_optional</a></div><div class="ttdeci">bool validate_optional(Bottle &amp;input, Bottle &amp;out, const std::string &amp;key1, const std::string &amp;txt, int size)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00113">CanBusMotionControl.cpp:113</a></div></div>
<div class="ttc" id="aCanBusMotionControl_8cpp_html_a1711c4677515dd7b3a4e0813cb08528b"><div class="ttname"><a href="CanBusMotionControl_8cpp.html#a1711c4677515dd7b3a4e0813cb08528b">NOT_YET_IMPLEMENTED_WARNING</a></div><div class="ttdeci">bool NOT_YET_IMPLEMENTED_WARNING(const char *txt)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00079">CanBusMotionControl.cpp:79</a></div></div>
<div class="ttc" id="aCanBusMotionControl_8cpp_html_a29c8e26191fdd1aa2db47d6906ae1a14"><div class="ttname"><a href="CanBusMotionControl_8cpp.html#a29c8e26191fdd1aa2db47d6906ae1a14">BCAST_STATUS_TIMEOUT</a></div><div class="ttdeci">const double BCAST_STATUS_TIMEOUT</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00057">CanBusMotionControl.cpp:57</a></div></div>
<div class="ttc" id="aCanBusMotionControl_8cpp_html_a3404ea0f0b680b0d2409a6298c9ecb11"><div class="ttname"><a href="CanBusMotionControl_8cpp.html#a3404ea0f0b680b0d2409a6298c9ecb11">PRINT_BUFFER_LENGTH</a></div><div class="ttdeci">const int PRINT_BUFFER_LENGTH</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00352">CanBusMotionControl.cpp:352</a></div></div>
<div class="ttc" id="aCanBusMotionControl_8cpp_html_a35a12201dd9ff39ea640f1d8b39f0770"><div class="ttname"><a href="CanBusMotionControl_8cpp.html#a35a12201dd9ff39ea640f1d8b39f0770">NOT_YET_IMPLEMENTED</a></div><div class="ttdeci">bool NOT_YET_IMPLEMENTED(const char *txt)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00072">CanBusMotionControl.cpp:72</a></div></div>
<div class="ttc" id="aCanBusMotionControl_8cpp_html_a69602775927cc5539c5d78d79cd0a973"><div class="ttname"><a href="CanBusMotionControl_8cpp.html#a69602775927cc5539c5d78d79cd0a973">REPORT_PERIOD</a></div><div class="ttdeci">const int REPORT_PERIOD</div><div class="ttdoc">general purpose stuff.</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00056">CanBusMotionControl.cpp:56</a></div></div>
<div class="ttc" id="aCanBusMotionControl_8cpp_html_ab301646ccc75ebb5979e44d5170ac055"><div class="ttname"><a href="CanBusMotionControl_8cpp.html#ab301646ccc75ebb5979e44d5170ac055">RES</a></div><div class="ttdeci">CanBusResources &amp; RES(void *res)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00442">CanBusMotionControl.cpp:442</a></div></div>
<div class="ttc" id="aCanBusMotionControl_8cpp_html_ac7fb8baadd4641d17b25e7076ff25336"><div class="ttname"><a href="CanBusMotionControl_8cpp.html#ac7fb8baadd4641d17b25e7076ff25336">DEPRECATED</a></div><div class="ttdeci">bool DEPRECATED(const char *txt)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00086">CanBusMotionControl.cpp:86</a></div></div>
<div class="ttc" id="aCanBusMotionControl_8cpp_html_acbf0048ef8c7caa8bdd9defc76fb0def"><div class="ttname"><a href="CanBusMotionControl_8cpp.html#acbf0048ef8c7caa8bdd9defc76fb0def">PRINT_CAN_MESSAGE</a></div><div class="ttdeci">void PRINT_CAN_MESSAGE(const char *str, CanMessage &amp;m)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00064">CanBusMotionControl.cpp:64</a></div></div>
<div class="ttc" id="aCanBusMotionControl_8cpp_html_ad43675dac090e874d6abe01dabd4f931"><div class="ttname"><a href="CanBusMotionControl_8cpp.html#ad43675dac090e874d6abe01dabd4f931">validate</a></div><div class="ttdeci">bool validate(Bottle &amp;input, Bottle &amp;out, const std::string &amp;key1, const std::string &amp;txt, int size)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00096">CanBusMotionControl.cpp:96</a></div></div>
<div class="ttc" id="aCanBusMotionControl_8h_html"><div class="ttname"><a href="CanBusMotionControl_8h.html">CanBusMotionControl.h</a></div><div class="ttdoc">class for interfacing with a generic can device driver.</div></div>
<div class="ttc" id="aCanBusMotionControl_8h_html_a03faabee96d29afede2fd4537351c6fe"><div class="ttname"><a href="CanBusMotionControl_8h.html#a03faabee96d29afede2fd4537351c6fe">logNetworkData</a></div><div class="ttdeci">#define logNetworkData(a, b, c, d)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00828">CanBusMotionControl.h:828</a></div></div>
<div class="ttc" id="aCanBusMotionControl_8h_html_aa051d60eae501813d4a93a240f3e3088"><div class="ttname"><a href="CanBusMotionControl_8h.html#aa051d60eae501813d4a93a240f3e3088">MAX_POSITION_MOVE_INTERVAL</a></div><div class="ttdeci">#define MAX_POSITION_MOVE_INTERVAL</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l01177">CanBusMotionControl.h:1177</a></div></div>
<div class="ttc" id="aCanBusMotionControl_8h_html_ae6ea930d226c19296f184951d8a8daf9"><div class="ttname"><a href="CanBusMotionControl_8h.html#ae6ea930d226c19296f184951d8a8daf9">logJointData</a></div><div class="ttdeci">#define logJointData(a, b, c, d, e)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00827">CanBusMotionControl.h:827</a></div></div>
<div class="ttc" id="aST__M1__dataType_8h_html_a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b"><div class="ttname"><a href="ST__M1__dataType_8h.html#a15adfd049ddfba39d5286280f0bc13fda604ac82e88d7a367d4c2830411520c2b">data</a></div><div class="ttdeci">@ data</div><div class="ttdef"><b>Definition:</b> <a href="ST__M1__dataType_8h_source.html#l00064">ST_M1_dataType.h:64</a></div></div>
<div class="ttc" id="aThreadPool2_8h_html"><div class="ttname"><a href="ThreadPool2_8h.html">ThreadPool2.h</a></div></div>
<div class="ttc" id="aThreadTable2_8h_html"><div class="ttname"><a href="ThreadTable2_8h.html">ThreadTable2.h</a></div></div>
<div class="ttc" id="acanControlConstants_8h_html"><div class="ttname"><a href="canControlConstants_8h.html">canControlConstants.h</a></div></div>
<div class="ttc" id="acanControlConstants_8h_html_a36bc189fb5890a73e1e00d53972cb90c"><div class="ttname"><a href="canControlConstants_8h.html#a36bc189fb5890a73e1e00d53972cb90c">BUF_SIZE</a></div><div class="ttdeci">const int BUF_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="canControlConstants_8h_source.html#l00027">canControlConstants.h:27</a></div></div>
<div class="ttc" id="acanControlConstants_8h_html_a3830b8707366b97dd5c993756d89f02d"><div class="ttname"><a href="canControlConstants_8h.html#a3830b8707366b97dd5c993756d89f02d">CANCONTROL_MAX_THREADS</a></div><div class="ttdeci">const int CANCONTROL_MAX_THREADS</div><div class="ttdef"><b>Definition:</b> <a href="canControlConstants_8h_source.html#l00040">canControlConstants.h:40</a></div></div>
<div class="ttc" id="acanControlConstants_8h_html_a463aba8fe0c5577ed48e1d67a26effe3"><div class="ttname"><a href="canControlConstants_8h.html#a463aba8fe0c5577ed48e1d67a26effe3">CAN_MAX_CARDS</a></div><div class="ttdeci">const int CAN_MAX_CARDS</div><div class="ttdoc">Max number of addressable cards in this implementation.</div><div class="ttdef"><b>Definition:</b> <a href="canControlConstants_8h_source.html#l00033">canControlConstants.h:33</a></div></div>
<div class="ttc" id="acanControlUtils_8h_html"><div class="ttname"><a href="canControlUtils_8h.html">canControlUtils.h</a></div></div>
<div class="ttc" id="acanControlUtils_8h_html_a22d86c76c1c95a75d3dc8f370f3fa5e5"><div class="ttname"><a href="canControlUtils_8h.html#a22d86c76c1c95a75d3dc8f370f3fa5e5">getJoint</a></div><div class="ttdeci">int getJoint(const yarp::dev::CanMessage &amp;m, const unsigned char *invM)</div><div class="ttdoc">Extract the joint number to which a RECEIVED message is referring to.</div><div class="ttdef"><b>Definition:</b> <a href="canControlUtils_8h_source.html#l00070">canControlUtils.h:70</a></div></div>
<div class="ttc" id="acanControlUtils_8h_html_a6a6fc113eb9bd6a5be6e43737403df92"><div class="ttname"><a href="canControlUtils_8h.html#a6a6fc113eb9bd6a5be6e43737403df92">getRcp</a></div><div class="ttdeci">int getRcp(const yarp::dev::CanMessage &amp;m)</div><div class="ttdoc">Extract least significative 4 bits, from the id of a can msg.</div><div class="ttdef"><b>Definition:</b> <a href="canControlUtils_8h_source.html#l00033">canControlUtils.h:33</a></div></div>
<div class="ttc" id="acanControlUtils_8h_html_a808da5f145544e5d3b379857e83d7e07"><div class="ttname"><a href="canControlUtils_8h.html#a808da5f145544e5d3b379857e83d7e07">DEBUG_PRINTF_BUFFER_LENGTH</a></div><div class="ttdeci">const int DEBUG_PRINTF_BUFFER_LENGTH</div><div class="ttdef"><b>Definition:</b> <a href="canControlUtils_8h_source.html#l00132">canControlUtils.h:132</a></div></div>
<div class="ttc" id="acanControlUtils_8h_html_ab1b7c20c98149177b4a08c9b8227ac6e"><div class="ttname"><a href="canControlUtils_8h.html#ab1b7c20c98149177b4a08c9b8227ac6e">getSender</a></div><div class="ttdeci">int getSender(const yarp::dev::CanMessage &amp;m)</div><div class="ttdoc">Extract most significative 4 bits of the least significative byte from the id of a can msg.</div><div class="ttdef"><b>Definition:</b> <a href="canControlUtils_8h_source.html#l00043">canControlUtils.h:43</a></div></div>
<div class="ttc" id="acanControlUtils_8h_html_ac9a0489744aa46905cbec820c68521f3"><div class="ttname"><a href="canControlUtils_8h.html#ac9a0489744aa46905cbec820c68521f3">getClass</a></div><div class="ttdeci">int getClass(const yarp::dev::CanMessage &amp;m)</div><div class="ttdoc">Extract message class, three bit least significative of the first byte of the message ID.</div><div class="ttdef"><b>Definition:</b> <a href="canControlUtils_8h_source.html#l00052">canControlUtils.h:52</a></div></div>
<div class="ttc" id="acanControlUtils_8h_html_aed353ce9c28af351b98138a0a3cee032"><div class="ttname"><a href="canControlUtils_8h.html#aed353ce9c28af351b98138a0a3cee032">DEBUG_FUNC</a></div><div class="ttdeci">void DEBUG_FUNC(const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="canControlUtils_8h_source.html#l00134">canControlUtils.h:134</a></div></div>
<div class="ttc" id="acan__string__generic_8h_html"><div class="ttname"><a href="can__string__generic_8h.html">can_string_generic.h</a></div></div>
<div class="ttc" id="aclassBCastBufferElement_html"><div class="ttname"><a href="classBCastBufferElement.html">BCastBufferElement</a></div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00212">CanBusMotionControl.cpp:213</a></div></div>
<div class="ttc" id="aclassBCastBufferElement_html_a029be0874497b8ea39a5deeb2e8ea647"><div class="ttname"><a href="classBCastBufferElement.html#a029be0874497b8ea39a5deeb2e8ea647">BCastBufferElement::_update_t</a></div><div class="ttdeci">double _update_t</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00252">CanBusMotionControl.cpp:252</a></div></div>
<div class="ttc" id="aclassBCastBufferElement_html_a0965ebdd231975fe93e2953f22372375"><div class="ttname"><a href="classBCastBufferElement.html#a0965ebdd231975fe93e2953f22372375">BCastBufferElement::_canRxError</a></div><div class="ttdeci">unsigned int _canRxError</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00257">CanBusMotionControl.cpp:257</a></div></div>
<div class="ttc" id="aclassBCastBufferElement_html_a1babf79cf17faffbd70514135d9c138d"><div class="ttname"><a href="classBCastBufferElement.html#a1babf79cf17faffbd70514135d9c138d">BCastBufferElement::isCanRxWarning</a></div><div class="ttdeci">bool isCanRxWarning()</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00278">CanBusMotionControl.cpp:278</a></div></div>
<div class="ttc" id="aclassBCastBufferElement_html_a1cec8f1619a8b7c899dcd7a4306de86c"><div class="ttname"><a href="classBCastBufferElement.html#a1cec8f1619a8b7c899dcd7a4306de86c">BCastBufferElement::isMainLoopOverflow</a></div><div class="ttdeci">bool isMainLoopOverflow()</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00280">CanBusMotionControl.cpp:280</a></div></div>
<div class="ttc" id="aclassBCastBufferElement_html_a289a7b16904634f10a09deadb2755681"><div class="ttname"><a href="classBCastBufferElement.html#a289a7b16904634f10a09deadb2755681">BCastBufferElement::BCastBufferElement</a></div><div class="ttdeci">BCastBufferElement()</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00264">CanBusMotionControl.cpp:264</a></div></div>
<div class="ttc" id="aclassBCastBufferElement_html_a29b51142f3d04e71ecead4169a18b701"><div class="ttname"><a href="classBCastBufferElement.html#a29b51142f3d04e71ecead4169a18b701">BCastBufferElement::isCanRxError</a></div><div class="ttdeci">bool isCanRxError()</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00276">CanBusMotionControl.cpp:276</a></div></div>
<div class="ttc" id="aclassBCastBufferElement_html_a39ee1efa63d85c40529cf5e07217a612"><div class="ttname"><a href="classBCastBufferElement.html#a39ee1efa63d85c40529cf5e07217a612">BCastBufferElement::isCanBusOff</a></div><div class="ttdeci">bool isCanBusOff()</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00274">CanBusMotionControl.cpp:274</a></div></div>
<div class="ttc" id="aclassBCastBufferElement_html_a3f37bcb9974cf615241d3ad9ebf6802f"><div class="ttname"><a href="classBCastBufferElement.html#a3f37bcb9974cf615241d3ad9ebf6802f">BCastBufferElement::isOverTempCh2</a></div><div class="ttdeci">bool isOverTempCh2()</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00282">CanBusMotionControl.cpp:282</a></div></div>
<div class="ttc" id="aclassBCastBufferElement_html_a48ea9a1004af73e6a26856770b97cc54"><div class="ttname"><a href="classBCastBufferElement.html#a48ea9a1004af73e6a26856770b97cc54">BCastBufferElement::isCanTxError</a></div><div class="ttdeci">bool isCanTxError()</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00275">CanBusMotionControl.cpp:275</a></div></div>
<div class="ttc" id="aclassBCastBufferElement_html_a49caa935408c48141fc7e02fd1b3ca46"><div class="ttname"><a href="classBCastBufferElement.html#a49caa935408c48141fc7e02fd1b3ca46">BCastBufferElement::isHallSensorError</a></div><div class="ttdeci">bool isHallSensorError()</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00270">CanBusMotionControl.cpp:270</a></div></div>
<div class="ttc" id="aclassBCastBufferElement_html_a4b1f8acb88916c3e6fb526e86b2a9283"><div class="ttname"><a href="classBCastBufferElement.html#a4b1f8acb88916c3e6fb526e86b2a9283">BCastBufferElement::_address</a></div><div class="ttdeci">int _address</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00262">CanBusMotionControl.cpp:262</a></div></div>
<div class="ttc" id="aclassBCastBufferElement_html_a5aec6fa032a5754a96bf613504c69d85"><div class="ttname"><a href="classBCastBufferElement.html#a5aec6fa032a5754a96bf613504c69d85">BCastBufferElement::isOverCurrent</a></div><div class="ttdeci">bool isOverCurrent()</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00268">CanBusMotionControl.cpp:268</a></div></div>
<div class="ttc" id="aclassBCastBufferElement_html_a6533f7a83218f088b0d7e44b30262d95"><div class="ttname"><a href="classBCastBufferElement.html#a6533f7a83218f088b0d7e44b30262d95">BCastBufferElement::isCanRxOverrun</a></div><div class="ttdeci">bool isCanRxOverrun()</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00279">CanBusMotionControl.cpp:279</a></div></div>
<div class="ttc" id="aclassBCastBufferElement_html_a6b20c5c27c60bb16c95cd88182b94850"><div class="ttname"><a href="classBCastBufferElement.html#a6b20c5c27c60bb16c95cd88182b94850">BCastBufferElement::_update_r</a></div><div class="ttdeci">double _update_r</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00243">CanBusMotionControl.cpp:243</a></div></div>
<div class="ttc" id="aclassBCastBufferElement_html_a6b3107f9a2233e1e5529ffe072d59edc"><div class="ttname"><a href="classBCastBufferElement.html#a6b3107f9a2233e1e5529ffe072d59edc">BCastBufferElement::_update_v</a></div><div class="ttdeci">double _update_v</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00223">CanBusMotionControl.cpp:223</a></div></div>
<div class="ttc" id="aclassBCastBufferElement_html_a6c3023c76f86ef3ecbd1b61098be56b7"><div class="ttname"><a href="classBCastBufferElement.html#a6c3023c76f86ef3ecbd1b61098be56b7">BCastBufferElement::_update_c</a></div><div class="ttdeci">double _update_c</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00238">CanBusMotionControl.cpp:238</a></div></div>
<div class="ttc" id="aclassBCastBufferElement_html_a6d942303fa98a4ee95f885be66fe3440"><div class="ttname"><a href="classBCastBufferElement.html#a6d942303fa98a4ee95f885be66fe3440">BCastBufferElement::_controlmodeStatus</a></div><div class="ttdeci">unsigned char _controlmodeStatus</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00229">CanBusMotionControl.cpp:229</a></div></div>
<div class="ttc" id="aclassBCastBufferElement_html_a6d9a031bf195a1452f7986496a71216f"><div class="ttname"><a href="classBCastBufferElement.html#a6d9a031bf195a1452f7986496a71216f">BCastBufferElement::isFaultUndervoltage</a></div><div class="ttdeci">bool isFaultUndervoltage()</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00266">CanBusMotionControl.cpp:266</a></div></div>
<div class="ttc" id="aclassBCastBufferElement_html_a6eeb5abeec2dce513e72606bee1398d7"><div class="ttname"><a href="classBCastBufferElement.html#a6eeb5abeec2dce513e72606bee1398d7">BCastBufferElement::zero</a></div><div class="ttdeci">void zero(void)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00314">CanBusMotionControl.cpp:314</a></div></div>
<div class="ttc" id="aclassBCastBufferElement_html_a6fc27e477fad391a765419a20ecb92cf"><div class="ttname"><a href="classBCastBufferElement.html#a6fc27e477fad391a765419a20ecb92cf">BCastBufferElement::isCanTxOverrun</a></div><div class="ttdeci">bool isCanTxOverrun()</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00277">CanBusMotionControl.cpp:277</a></div></div>
<div class="ttc" id="aclassBCastBufferElement_html_a71c399116a5883ca93100eaa0ef26d4b"><div class="ttname"><a href="classBCastBufferElement.html#a71c399116a5883ca93100eaa0ef26d4b">BCastBufferElement::_interactionmodeStatus</a></div><div class="ttdeci">unsigned char _interactionmodeStatus</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00233">CanBusMotionControl.cpp:233</a></div></div>
<div class="ttc" id="aclassBCastBufferElement_html_a88ce6518b4ce93049d015c9994b21bc1"><div class="ttname"><a href="classBCastBufferElement.html#a88ce6518b4ce93049d015c9994b21bc1">BCastBufferElement::_torque_error</a></div><div class="ttdeci">short _torque_error</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00242">CanBusMotionControl.cpp:242</a></div></div>
<div class="ttc" id="aclassBCastBufferElement_html_a96b136248573dc3f1b4f245f402bd18c"><div class="ttname"><a href="classBCastBufferElement.html#a96b136248573dc3f1b4f245f402bd18c">BCastBufferElement::_pid_value</a></div><div class="ttdeci">short _pid_value</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00222">CanBusMotionControl.cpp:222</a></div></div>
<div class="ttc" id="aclassBCastBufferElement_html_a98693471f12823d0432c353fca09b3df"><div class="ttname"><a href="classBCastBufferElement.html#a98693471f12823d0432c353fca09b3df">BCastBufferElement::isOverTempCh1</a></div><div class="ttdeci">bool isOverTempCh1()</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00281">CanBusMotionControl.cpp:281</a></div></div>
<div class="ttc" id="aclassBCastBufferElement_html_a98a2371848368d28cc00f180375a9161"><div class="ttname"><a href="classBCastBufferElement.html#a98a2371848368d28cc00f180375a9161">BCastBufferElement::_speed_rotor</a></div><div class="ttdeci">BCastElement _speed_rotor</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00218">CanBusMotionControl.cpp:218</a></div></div>
<div class="ttc" id="aclassBCastBufferElement_html_a9b63eaaf5853d209b692e0f928242993"><div class="ttname"><a href="classBCastBufferElement.html#a9b63eaaf5853d209b692e0f928242993">BCastBufferElement::_speed_joint</a></div><div class="ttdeci">short _speed_joint</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00246">CanBusMotionControl.cpp:246</a></div></div>
<div class="ttc" id="aclassBCastBufferElement_html_a9ccee7fd979022713c5992f27bf7f6de"><div class="ttname"><a href="classBCastBufferElement.html#a9ccee7fd979022713c5992f27bf7f6de">BCastBufferElement::_mainLoopOverflowCounter</a></div><div class="ttdeci">unsigned int _mainLoopOverflowCounter</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00260">CanBusMotionControl.cpp:260</a></div></div>
<div class="ttc" id="aclassBCastBufferElement_html_a9d6191faa521e997e5e581f8ef8eb116"><div class="ttname"><a href="classBCastBufferElement.html#a9d6191faa521e997e5e581f8ef8eb116">BCastBufferElement::isCanTxOverflow</a></div><div class="ttdeci">bool isCanTxOverflow()</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00273">CanBusMotionControl.cpp:273</a></div></div>
<div class="ttc" id="aclassBCastBufferElement_html_a9f1be6e90a870951a2f8221aab3dfdd6"><div class="ttname"><a href="classBCastBufferElement.html#a9f1be6e90a870951a2f8221aab3dfdd6">BCastBufferElement::_current</a></div><div class="ttdeci">short _current</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00237">CanBusMotionControl.cpp:237</a></div></div>
<div class="ttc" id="aclassBCastBufferElement_html_aa4cfa0e52a1c9291419df6ba364d4ea1"><div class="ttname"><a href="classBCastBufferElement.html#aa4cfa0e52a1c9291419df6ba364d4ea1">BCastBufferElement::_canStatus</a></div><div class="ttdeci">char _canStatus</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00227">CanBusMotionControl.cpp:227</a></div></div>
<div class="ttc" id="aclassBCastBufferElement_html_aad2f2a8e02636dcdbd2dee6f4f918d9d"><div class="ttname"><a href="classBCastBufferElement.html#aad2f2a8e02636dcdbd2dee6f4f918d9d">BCastBufferElement::_boardStatus</a></div><div class="ttdeci">char _boardStatus</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00228">CanBusMotionControl.cpp:228</a></div></div>
<div class="ttc" id="aclassBCastBufferElement_html_aae5bf68c1e48bee944c5586deac0e05d"><div class="ttname"><a href="classBCastBufferElement.html#aae5bf68c1e48bee944c5586deac0e05d">BCastBufferElement::_update_s</a></div><div class="ttdeci">double _update_s</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00248">CanBusMotionControl.cpp:248</a></div></div>
<div class="ttc" id="aclassBCastBufferElement_html_ab107e1d8c7a67873bcfa3057dd4f443c"><div class="ttname"><a href="classBCastBufferElement.html#ab107e1d8c7a67873bcfa3057dd4f443c">BCastBufferElement::ControlStatus</a></div><div class="ttdeci">void ControlStatus(int net, short controlmode, short addr)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00285">CanBusMotionControl.cpp:285</a></div></div>
<div class="ttc" id="aclassBCastBufferElement_html_ab8f6b1986e4351ffb64ea4b6d6f069d8"><div class="ttname"><a href="classBCastBufferElement.html#ab8f6b1986e4351ffb64ea4b6d6f069d8">BCastBufferElement::_update_e2</a></div><div class="ttdeci">double _update_e2</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00234">CanBusMotionControl.cpp:234</a></div></div>
<div class="ttc" id="aclassBCastBufferElement_html_abf8059d68e80affbbdd1c1f423f4ef13"><div class="ttname"><a href="classBCastBufferElement.html#abf8059d68e80affbbdd1c1f423f4ef13">BCastBufferElement::isOpticalEncoderError</a></div><div class="ttdeci">bool isOpticalEncoderError()</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00272">CanBusMotionControl.cpp:272</a></div></div>
<div class="ttc" id="aclassBCastBufferElement_html_abfdbb13a97f15c594f606c9cd058e283"><div class="ttname"><a href="classBCastBufferElement.html#abfdbb13a97f15c594f606c9cd058e283">BCastBufferElement::isAbsEncoderError</a></div><div class="ttdeci">bool isAbsEncoderError()</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00271">CanBusMotionControl.cpp:271</a></div></div>
<div class="ttc" id="aclassBCastBufferElement_html_acbfdbac488f2b8e1dd751fd467fead56"><div class="ttname"><a href="classBCastBufferElement.html#acbfdbac488f2b8e1dd751fd467fead56">BCastBufferElement::isFaultOk</a></div><div class="ttdeci">bool isFaultOk()</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00265">CanBusMotionControl.cpp:265</a></div></div>
<div class="ttc" id="aclassBCastBufferElement_html_acbfdea5c30c6cff7e50a75b42233b460"><div class="ttname"><a href="classBCastBufferElement.html#acbfdea5c30c6cff7e50a75b42233b460">BCastBufferElement::_accel_rotor</a></div><div class="ttdeci">BCastElement _accel_rotor</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00219">CanBusMotionControl.cpp:219</a></div></div>
<div class="ttc" id="aclassBCastBufferElement_html_adb3883163551f9385171a86386f56231"><div class="ttname"><a href="classBCastBufferElement.html#adb3883163551f9385171a86386f56231">BCastBufferElement::isTempErrorCh2</a></div><div class="ttdeci">bool isTempErrorCh2()</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00284">CanBusMotionControl.cpp:284</a></div></div>
<div class="ttc" id="aclassBCastBufferElement_html_adbe355548c9b25de0c625a1dabd76ab7"><div class="ttname"><a href="classBCastBufferElement.html#adbe355548c9b25de0c625a1dabd76ab7">BCastBufferElement::isTempErrorCh1</a></div><div class="ttdeci">bool isTempErrorCh1()</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00283">CanBusMotionControl.cpp:283</a></div></div>
<div class="ttc" id="aclassBCastBufferElement_html_add58648b082b014052e572683e0c821b"><div class="ttname"><a href="classBCastBufferElement.html#add58648b082b014052e572683e0c821b">BCastBufferElement::_update_e</a></div><div class="ttdeci">double _update_e</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00230">CanBusMotionControl.cpp:230</a></div></div>
<div class="ttc" id="aclassBCastBufferElement_html_af13a3497fba917355754e42c77235163"><div class="ttname"><a href="classBCastBufferElement.html#af13a3497fba917355754e42c77235163">BCastBufferElement::_accel_joint</a></div><div class="ttdeci">short _accel_joint</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00247">CanBusMotionControl.cpp:247</a></div></div>
<div class="ttc" id="aclassBCastBufferElement_html_af468ae55809a2d6b8ffe2d9e657606cd"><div class="ttname"><a href="classBCastBufferElement.html#af468ae55809a2d6b8ffe2d9e657606cd">BCastBufferElement::_torque</a></div><div class="ttdeci">double _torque</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00251">CanBusMotionControl.cpp:251</a></div></div>
<div class="ttc" id="aclassBCastBufferElement_html_af521bd74a402411d52e25d07ce009801"><div class="ttname"><a href="classBCastBufferElement.html#af521bd74a402411d52e25d07ce009801">BCastBufferElement::_axisStatus</a></div><div class="ttdeci">short _axisStatus</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00226">CanBusMotionControl.cpp:226</a></div></div>
<div class="ttc" id="aclassBCastBufferElement_html_af6132fac4729f6262580d8d941b3f0a6"><div class="ttname"><a href="classBCastBufferElement.html#af6132fac4729f6262580d8d941b3f0a6">BCastBufferElement::isFaultExternal</a></div><div class="ttdeci">bool isFaultExternal()</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00269">CanBusMotionControl.cpp:269</a></div></div>
<div class="ttc" id="aclassBCastBufferElement_html_af7fcbef201ebbd71f56df7ec94ef15b5"><div class="ttname"><a href="classBCastBufferElement.html#af7fcbef201ebbd71f56df7ec94ef15b5">BCastBufferElement::_position_rotor</a></div><div class="ttdeci">BCastElement _position_rotor</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00217">CanBusMotionControl.cpp:217</a></div></div>
<div class="ttc" id="aclassBCastBufferElement_html_af8335d1d20eaf06c3ec15c6424894b4c"><div class="ttname"><a href="classBCastBufferElement.html#af8335d1d20eaf06c3ec15c6424894b4c">BCastBufferElement::_position_error</a></div><div class="ttdeci">short _position_error</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00241">CanBusMotionControl.cpp:241</a></div></div>
<div class="ttc" id="aclassBCastBufferElement_html_af859f2a7245aef9476d74e14c204708f"><div class="ttname"><a href="classBCastBufferElement.html#af859f2a7245aef9476d74e14c204708f">BCastBufferElement::isFaultOverload</a></div><div class="ttdeci">bool isFaultOverload()</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00267">CanBusMotionControl.cpp:267</a></div></div>
<div class="ttc" id="aclassBCastBufferElement_html_af8625ef3029a59bea61aaf7fed60b5a6"><div class="ttname"><a href="classBCastBufferElement.html#af8625ef3029a59bea61aaf7fed60b5a6">BCastBufferElement::_canTxError</a></div><div class="ttdeci">unsigned int _canTxError</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00255">CanBusMotionControl.cpp:255</a></div></div>
<div class="ttc" id="aclassBCastBufferElement_html_af9b2502ea8bef890aec0d7f70205e2c0"><div class="ttname"><a href="classBCastBufferElement.html#af9b2502ea8bef890aec0d7f70205e2c0">BCastBufferElement::_position_joint</a></div><div class="ttdeci">BCastElement _position_joint</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00216">CanBusMotionControl.cpp:216</a></div></div>
<div class="ttc" id="aclassCanBusResources_html"><div class="ttname"><a href="classCanBusResources.html">CanBusResources</a></div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00353">CanBusMotionControl.cpp:354</a></div></div>
<div class="ttc" id="aclassCanBusResources_html_a01693f537c51494be7345cbd89e22d44"><div class="ttname"><a href="classCanBusResources.html#a01693f537c51494be7345cbd89e22d44">CanBusResources::_echoMessages</a></div><div class="ttdeci">unsigned int _echoMessages</div><div class="ttdoc">size of the write packet.</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00417">CanBusMotionControl.cpp:417</a></div></div>
<div class="ttc" id="aclassCanBusResources_html_a01fd28d9638b166afda40872939ac15b"><div class="ttname"><a href="classCanBusResources.html#a01fd28d9638b166afda40872939ac15b">CanBusResources::iCanErrors</a></div><div class="ttdeci">ICanBusErrors * iCanErrors</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00363">CanBusMotionControl.cpp:363</a></div></div>
<div class="ttc" id="aclassCanBusResources_html_a027e66115c366272c8ee81b36297178f"><div class="ttname"><a href="classCanBusResources.html#a027e66115c366272c8ee81b36297178f">CanBusResources::_rxQueueSize</a></div><div class="ttdeci">int _rxQueueSize</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00411">CanBusMotionControl.cpp:411</a></div></div>
<div class="ttc" id="aclassCanBusResources_html_a0b4b1900273079b69f1e10abdce9f295"><div class="ttname"><a href="classCanBusResources.html#a0b4b1900273079b69f1e10abdce9f295">CanBusResources::_error_status</a></div><div class="ttdeci">bool _error_status</div><div class="ttdoc">number of joints (ncards * 2).</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00434">CanBusMotionControl.cpp:434</a></div></div>
<div class="ttc" id="aclassCanBusResources_html_a1049ab4df32ee910f61efbe130ba9b41"><div class="ttname"><a href="classCanBusResources.html#a1049ab4df32ee910f61efbe130ba9b41">CanBusResources::addMessage</a></div><div class="ttdeci">bool addMessage(int msg_id, int joint)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l02270">CanBusMotionControl.cpp:2270</a></div></div>
<div class="ttc" id="aclassCanBusResources_html_a1642d0476521a6b0c8f538cef04e2a59"><div class="ttname"><a href="classCanBusResources.html#a1642d0476521a6b0c8f538cef04e2a59">CanBusResources::getErrorStatus</a></div><div class="ttdeci">bool getErrorStatus(void) const</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00383">CanBusMotionControl.cpp:383</a></div></div>
<div class="ttc" id="aclassCanBusResources_html_a1db33f4c5115794fad9dbe81c0108f46"><div class="ttname"><a href="classCanBusResources.html#a1db33f4c5115794fad9dbe81c0108f46">CanBusResources::_velShifts</a></div><div class="ttdeci">int _velShifts[CAN_MAX_CARDS]</div><div class="ttdoc">list of connected cards (and their addresses).</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00428">CanBusMotionControl.cpp:428</a></div></div>
<div class="ttc" id="aclassCanBusResources_html_a1eed1867edaefc8303954e7b5d41446f"><div class="ttname"><a href="classCanBusResources.html#a1eed1867edaefc8303954e7b5d41446f">CanBusResources::_readBuffer</a></div><div class="ttdeci">CanBuffer _readBuffer</div><div class="ttdoc">size of the last read buffer.</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00419">CanBusMotionControl.cpp:419</a></div></div>
<div class="ttc" id="aclassCanBusResources_html_a2008aec86a510d0ace83fc1ed3713a86"><div class="ttname"><a href="classCanBusResources.html#a2008aec86a510d0ace83fc1ed3713a86">CanBusResources::CanBusResources</a></div><div class="ttdeci">CanBusResources()</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l02030">CanBusMotionControl.cpp:2030</a></div></div>
<div class="ttc" id="aclassCanBusResources_html_a36f76a689330cd6163c3f13bb8ac28d9"><div class="ttname"><a href="classCanBusResources.html#a36f76a689330cd6163c3f13bb8ac28d9">CanBusResources::writePacket</a></div><div class="ttdeci">bool writePacket()</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l02308">CanBusMotionControl.cpp:2308</a></div></div>
<div class="ttc" id="aclassCanBusResources_html_a426cb1e9b09f03d70b8dbccb2346edb8"><div class="ttname"><a href="classCanBusResources.html#a426cb1e9b09f03d70b8dbccb2346edb8">CanBusResources::startPacket</a></div><div class="ttdeci">bool startPacket()</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l02264">CanBusMotionControl.cpp:2264</a></div></div>
<div class="ttc" id="aclassCanBusResources_html_a43f2a5de6393714ab78221e31c3f0080"><div class="ttname"><a href="classCanBusResources.html#a43f2a5de6393714ab78221e31c3f0080">CanBusResources::uninitialize</a></div><div class="ttdeci">bool uninitialize()</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l02212">CanBusMotionControl.cpp:2212</a></div></div>
<div class="ttc" id="aclassCanBusResources_html_a4b48266bb10663a63311c6872d708e8e"><div class="ttname"><a href="classCanBusResources.html#a4b48266bb10663a63311c6872d708e8e">CanBusResources::initialize</a></div><div class="ttdeci">bool initialize(const CanBusMotionControlParameters &amp;parms)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l02093">CanBusMotionControl.cpp:2093</a></div></div>
<div class="ttc" id="aclassCanBusResources_html_a4ed02109256d51db03823b7983470328"><div class="ttname"><a href="classCanBusResources.html#a4ed02109256d51db03823b7983470328">CanBusResources::iCanBus</a></div><div class="ttdeci">ICanBus * iCanBus</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00361">CanBusMotionControl.cpp:361</a></div></div>
<div class="ttc" id="aclassCanBusResources_html_a50b95da6c76d088586d87a0b68f66ec3"><div class="ttname"><a href="classCanBusResources.html#a50b95da6c76d088586d87a0b68f66ec3">CanBusResources::_timeout</a></div><div class="ttdeci">unsigned int _timeout</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00404">CanBusMotionControl.cpp:404</a></div></div>
<div class="ttc" id="aclassCanBusResources_html_a53e1ca73739299b650e1d04400775fd6"><div class="ttname"><a href="classCanBusResources.html#a53e1ca73739299b650e1d04400775fd6">CanBusResources::_polling_interval</a></div><div class="ttdeci">int _polling_interval</div><div class="ttdoc">this is my thread timeout.</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00406">CanBusMotionControl.cpp:406</a></div></div>
<div class="ttc" id="aclassCanBusResources_html_a5434ee36839850ff8330ef5322171ff8"><div class="ttname"><a href="classCanBusResources.html#a5434ee36839850ff8330ef5322171ff8">CanBusResources::_networkN</a></div><div class="ttdeci">int _networkN</div><div class="ttdoc">speed of the bus.</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00408">CanBusMotionControl.cpp:408</a></div></div>
<div class="ttc" id="aclassCanBusResources_html_a5578569ff3a6f15dbb1ed47428bd2c24"><div class="ttname"><a href="classCanBusResources.html#a5578569ff3a6f15dbb1ed47428bd2c24">CanBusResources::printMessage</a></div><div class="ttdeci">bool printMessage(const CanMessage &amp;m)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l02331">CanBusMotionControl.cpp:2331</a></div></div>
<div class="ttc" id="aclassCanBusResources_html_a5e3818363b4599d4fbb882cdb260184a"><div class="ttname"><a href="classCanBusResources.html#a5e3818363b4599d4fbb882cdb260184a">CanBusResources::printMessage</a></div><div class="ttdeci">void printMessage(const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00385">CanBusMotionControl.cpp:385</a></div></div>
<div class="ttc" id="aclassCanBusResources_html_a5eb200eec7f8c10314fc9349f4088ff3"><div class="ttname"><a href="classCanBusResources.html#a5eb200eec7f8c10314fc9349f4088ff3">CanBusResources::_destInv</a></div><div class="ttdeci">unsigned char * _destInv</div><div class="ttdoc">list of velocity shift</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00429">CanBusMotionControl.cpp:429</a></div></div>
<div class="ttc" id="aclassCanBusResources_html_a6607e1a396c1573011dcad00055ba899"><div class="ttname"><a href="classCanBusResources.html#a6607e1a396c1573011dcad00055ba899">CanBusResources::dumpBuffers</a></div><div class="ttdeci">bool dumpBuffers(void)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l02365">CanBusMotionControl.cpp:2365</a></div></div>
<div class="ttc" id="aclassCanBusResources_html_a6785040f8650d0ecfb945e295808a377"><div class="ttname"><a href="classCanBusResources.html#a6785040f8650d0ecfb945e295808a377">CanBusResources::_readMessages</a></div><div class="ttdeci">unsigned int _readMessages</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00415">CanBusMotionControl.cpp:415</a></div></div>
<div class="ttc" id="aclassCanBusResources_html_a781a7267d7eab2315d49720c1d673f29"><div class="ttname"><a href="classCanBusResources.html#a781a7267d7eab2315d49720c1d673f29">CanBusResources::_writeMessages</a></div><div class="ttdeci">unsigned int _writeMessages</div><div class="ttdoc">size of the last read buffer.</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00416">CanBusMotionControl.cpp:416</a></div></div>
<div class="ttc" id="aclassCanBusResources_html_a7a22e68e5f94e2ca74aa2006dbea6c21"><div class="ttname"><a href="classCanBusResources.html#a7a22e68e5f94e2ca74aa2006dbea6c21">CanBusResources::_txQueueSize</a></div><div class="ttdeci">int _txQueueSize</div><div class="ttdoc">network number.</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00410">CanBusMotionControl.cpp:410</a></div></div>
<div class="ttc" id="aclassCanBusResources_html_a7c1c1eabc99ef8c947e0ebb9ea263a55"><div class="ttname"><a href="classCanBusResources.html#a7c1c1eabc99ef8c947e0ebb9ea263a55">CanBusResources::~CanBusResources</a></div><div class="ttdeci">~CanBusResources()</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l02059">CanBusMotionControl.cpp:2059</a></div></div>
<div class="ttc" id="aclassCanBusResources_html_a7df58d2dc97da0775a53caaed3545726"><div class="ttname"><a href="classCanBusResources.html#a7df58d2dc97da0775a53caaed3545726">CanBusResources::_njoints</a></div><div class="ttdeci">int _njoints</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00432">CanBusMotionControl.cpp:432</a></div></div>
<div class="ttc" id="aclassCanBusResources_html_a8345d59d58c2a3c3c49f01e0041b01b2"><div class="ttname"><a href="classCanBusResources.html#a8345d59d58c2a3c3c49f01e0041b01b2">CanBusResources::_bcastRecvBuffer</a></div><div class="ttdeci">BCastBufferElement * _bcastRecvBuffer</div><div class="ttdoc">echo buffer.</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00424">CanBusMotionControl.cpp:424</a></div></div>
<div class="ttc" id="aclassCanBusResources_html_a9ea7178d577ad82942ca0593121da31f"><div class="ttname"><a href="classCanBusResources.html#a9ea7178d577ad82942ca0593121da31f">CanBusResources::_jointNames</a></div><div class="ttdeci">std::string * _jointNames</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00430">CanBusMotionControl.cpp:430</a></div></div>
<div class="ttc" id="aclassCanBusResources_html_aa3590eb4e4505850080f2054f4e5f254"><div class="ttname"><a href="classCanBusResources.html#aa3590eb4e4505850080f2054f4e5f254">CanBusResources::_speed</a></div><div class="ttdeci">int _speed</div><div class="ttdoc">thread polling interval.</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00407">CanBusMotionControl.cpp:407</a></div></div>
<div class="ttc" id="aclassCanBusResources_html_ab5e61b157528b835621b4c073c42bf1d"><div class="ttname"><a href="classCanBusResources.html#ab5e61b157528b835621b4c073c42bf1d">CanBusResources::requestsQueue</a></div><div class="ttdeci">RequestsQueue * requestsQueue</div><div class="ttdoc">might be better with dynamic allocation.</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00440">CanBusMotionControl.cpp:440</a></div></div>
<div class="ttc" id="aclassCanBusResources_html_ac2a6bcce74c6ce44b65d940e2087ba05"><div class="ttname"><a href="classCanBusResources.html#ac2a6bcce74c6ce44b65d940e2087ba05">CanBusResources::_my_address</a></div><div class="ttdeci">unsigned char _my_address</div><div class="ttdoc">local storage for bcast messages.</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00426">CanBusMotionControl.cpp:426</a></div></div>
<div class="ttc" id="aclassCanBusResources_html_ad95be556fbbb56c95b3f21e5a15bdd69"><div class="ttname"><a href="classCanBusResources.html#ad95be556fbbb56c95b3f21e5a15bdd69">CanBusResources::getJoints</a></div><div class="ttdeci">int getJoints(void) const</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00382">CanBusMotionControl.cpp:382</a></div></div>
<div class="ttc" id="aclassCanBusResources_html_adbbcd48000bf7bbf38dc41cb422147fb"><div class="ttname"><a href="classCanBusResources.html#adbbcd48000bf7bbf38dc41cb422147fb">CanBusResources::_rxTimeout</a></div><div class="ttdeci">int _rxTimeout</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00413">CanBusMotionControl.cpp:413</a></div></div>
<div class="ttc" id="aclassCanBusResources_html_ae31dbfd6d9458c803d5976bf80d2df29"><div class="ttname"><a href="classCanBusResources.html#ae31dbfd6d9458c803d5976bf80d2df29">CanBusResources::read</a></div><div class="ttdeci">bool read()</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l02254">CanBusMotionControl.cpp:2254</a></div></div>
<div class="ttc" id="aclassCanBusResources_html_ae3cca62d3fd0f43e0bc8d64a15911aef"><div class="ttname"><a href="classCanBusResources.html#ae3cca62d3fd0f43e0bc8d64a15911aef">CanBusResources::_txTimeout</a></div><div class="ttdeci">int _txTimeout</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00412">CanBusMotionControl.cpp:412</a></div></div>
<div class="ttc" id="aclassCanBusResources_html_ae56286106947372dfd8763c30f414214"><div class="ttname"><a href="classCanBusResources.html#ae56286106947372dfd8763c30f414214">CanBusResources::iBufferFactory</a></div><div class="ttdeci">ICanBufferFactory * iBufferFactory</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00362">CanBusMotionControl.cpp:362</a></div></div>
<div class="ttc" id="aclassCanBusResources_html_aebb638eb231f9461b10f514b580dab67"><div class="ttname"><a href="classCanBusResources.html#aebb638eb231f9461b10f514b580dab67">CanBusResources::_destinations</a></div><div class="ttdeci">unsigned char _destinations[CAN_MAX_CARDS]</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00427">CanBusMotionControl.cpp:427</a></div></div>
<div class="ttc" id="aclassCanBusResources_html_aef13292fa1702e5116a1cfe2f222a008"><div class="ttname"><a href="classCanBusResources.html#aef13292fa1702e5116a1cfe2f222a008">CanBusResources::_initialized</a></div><div class="ttdeci">bool _initialized</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00403">CanBusMotionControl.cpp:403</a></div></div>
<div class="ttc" id="aclassCanBusResources_html_af24a0c2f42a9c9b3823eb9efad294ca7"><div class="ttname"><a href="classCanBusResources.html#af24a0c2f42a9c9b3823eb9efad294ca7">CanBusResources::_replyBuffer</a></div><div class="ttdeci">CanBuffer _replyBuffer</div><div class="ttdoc">write buffer.</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00421">CanBusMotionControl.cpp:421</a></div></div>
<div class="ttc" id="aclassCanBusResources_html_af39b42503e37f91bc21de3efa9bc0d16"><div class="ttname"><a href="classCanBusResources.html#af39b42503e37f91bc21de3efa9bc0d16">CanBusResources::_echoBuffer</a></div><div class="ttdeci">CanBuffer _echoBuffer</div><div class="ttdoc">reply buffer.</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00422">CanBusMotionControl.cpp:422</a></div></div>
<div class="ttc" id="aclassCanBusResources_html_afdf8fa1a711f5e65bae262b603d2ea09"><div class="ttname"><a href="classCanBusResources.html#afdf8fa1a711f5e65bae262b603d2ea09">CanBusResources::_writeBuffer</a></div><div class="ttdeci">CanBuffer _writeBuffer</div><div class="ttdoc">read buffer.</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00420">CanBusMotionControl.cpp:420</a></div></div>
<div class="ttc" id="aclassCanBusResources_html_afe943f09593ee918e0a05e010c586e23"><div class="ttname"><a href="classCanBusResources.html#afe943f09593ee918e0a05e010c586e23">CanBusResources::_filter</a></div><div class="ttdeci">int _filter</div><div class="ttdoc">error status of the last packet.</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00437">CanBusMotionControl.cpp:437</a></div></div>
<div class="ttc" id="aclassRequestsQueue_html"><div class="ttname"><a href="classRequestsQueue.html">RequestsQueue</a></div><div class="ttdef"><b>Definition:</b> <a href="canControlUtils_8h_source.html#l00201">canControlUtils.h:202</a></div></div>
<div class="ttc" id="aclassRequestsQueue_html_a069bf378e30859b33427d370d65d8ba3"><div class="ttname"><a href="classRequestsQueue.html#a069bf378e30859b33427d370d65d8ba3">RequestsQueue::getNJoints</a></div><div class="ttdeci">int getNJoints()</div><div class="ttdef"><b>Definition:</b> <a href="canControlUtils_8h_source.html#l00274">canControlUtils.h:274</a></div></div>
<div class="ttc" id="aclassRequestsQueue_html_a35294789a7ce3686849ca5756f5d2e14"><div class="ttname"><a href="classRequestsQueue.html#a35294789a7ce3686849ca5756f5d2e14">RequestsQueue::getFifo</a></div><div class="ttdeci">ThreadFifo * getFifo(int j, int msg)</div><div class="ttdef"><b>Definition:</b> <a href="canControlUtils_8h_source.html#l00225">canControlUtils.h:225</a></div></div>
<div class="ttc" id="aclassRequestsQueue_html_ab08fc14815bc2ea1e3a7d06fe1a73450"><div class="ttname"><a href="classRequestsQueue.html#ab08fc14815bc2ea1e3a7d06fe1a73450">RequestsQueue::getNMessages</a></div><div class="ttdeci">int getNMessages()</div><div class="ttdef"><b>Definition:</b> <a href="canControlUtils_8h_source.html#l00276">canControlUtils.h:276</a></div></div>
<div class="ttc" id="aclassRequestsQueue_html_ab1973fa297615c4bcaa1fa7c63c925bd"><div class="ttname"><a href="classRequestsQueue.html#ab1973fa297615c4bcaa1fa7c63c925bd">RequestsQueue::getPending</a></div><div class="ttdeci">int getPending()</div><div class="ttdef"><b>Definition:</b> <a href="canControlUtils_8h_source.html#l00258">canControlUtils.h:258</a></div></div>
<div class="ttc" id="aclassRequestsQueue_html_ad4f421c5043a2dfaf20dd6938a58128a"><div class="ttname"><a href="classRequestsQueue.html#ad4f421c5043a2dfaf20dd6938a58128a">RequestsQueue::pop</a></div><div class="ttdeci">int pop(int j, int msg)</div><div class="ttdef"><b>Definition:</b> <a href="canControlUtils_8h_source.html#l00239">canControlUtils.h:239</a></div></div>
<div class="ttc" id="aclassTBR__AnalogData_html"><div class="ttname"><a href="classTBR__AnalogData.html">TBR_AnalogData</a></div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00195">CanBusMotionControl.h:196</a></div></div>
<div class="ttc" id="aclassTBR__AnalogData_html_a1a5f9d4645de54371eefc1ba61bfd1a4"><div class="ttname"><a href="classTBR__AnalogData.html#a1a5f9d4645de54371eefc1ba61bfd1a4">TBR_AnalogData::size</a></div><div class="ttdeci">int size()</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00216">CanBusMotionControl.h:216</a></div></div>
<div class="ttc" id="aclassTBR__AnalogSensor_html"><div class="ttname"><a href="classTBR__AnalogSensor.html">TBR_AnalogSensor</a></div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00227">CanBusMotionControl.h:229</a></div></div>
<div class="ttc" id="aclassTBR__AnalogSensor_html_a0c0f8840159840bed3a350df8edb08f5"><div class="ttname"><a href="classTBR__AnalogSensor.html#a0c0f8840159840bed3a350df8edb08f5">TBR_AnalogSensor::calibrateChannel</a></div><div class="ttdeci">virtual int calibrateChannel(int ch, double v)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00830">CanBusMotionControl.cpp:830</a></div></div>
<div class="ttc" id="aclassTBR__AnalogSensor_html_a1806e6078dfdcea26718abb96650ace2"><div class="ttname"><a href="classTBR__AnalogSensor.html#a1806e6078dfdcea26718abb96650ace2">TBR_AnalogSensor::isOpen</a></div><div class="ttdeci">bool isOpen()</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00308">CanBusMotionControl.h:308</a></div></div>
<div class="ttc" id="aclassTBR__AnalogSensor_html_a192722cecb0aa650cfc802c0fb6ac6d0"><div class="ttname"><a href="classTBR__AnalogSensor.html#a192722cecb0aa650cfc802c0fb6ac6d0">TBR_AnalogSensor::handleAnalog</a></div><div class="ttdeci">bool handleAnalog(void *)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00925">CanBusMotionControl.cpp:925</a></div></div>
<div class="ttc" id="aclassTBR__AnalogSensor_html_a19c19f95cd78be8433ddb2b486421038"><div class="ttname"><a href="classTBR__AnalogSensor.html#a19c19f95cd78be8433ddb2b486421038">TBR_AnalogSensor::TBR_AnalogSensor</a></div><div class="ttdeci">TBR_AnalogSensor()</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00722">CanBusMotionControl.cpp:722</a></div></div>
<div class="ttc" id="aclassTBR__AnalogSensor_html_a243cc72aa6e1e45d27061a22902f9c69"><div class="ttname"><a href="classTBR__AnalogSensor.html#a243cc72aa6e1e45d27061a22902f9c69">TBR_AnalogSensor::getDeviceId</a></div><div class="ttdeci">std::string getDeviceId()</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00297">CanBusMotionControl.h:297</a></div></div>
<div class="ttc" id="aclassTBR__AnalogSensor_html_a2bf1640f8a4b0a4410e4ab70371abdea"><div class="ttname"><a href="classTBR__AnalogSensor.html#a2bf1640f8a4b0a4410e4ab70371abdea">TBR_AnalogSensor::resetCounters</a></div><div class="ttdeci">void resetCounters()</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00278">CanBusMotionControl.h:278</a></div></div>
<div class="ttc" id="aclassTBR__AnalogSensor_html_a718c9c67ae22d5b5c4b71a42c3d00a9f"><div class="ttname"><a href="classTBR__AnalogSensor.html#a718c9c67ae22d5b5c4b71a42c3d00a9f">TBR_AnalogSensor::open</a></div><div class="ttdeci">bool open(int channels, AnalogDataFormat f, short bId, short useCalib, bool isVirtualSensor)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00750">CanBusMotionControl.cpp:750</a></div></div>
<div class="ttc" id="aclassTBR__AnalogSensor_html_a737b0aa3995d55d9726710f400be979a"><div class="ttname"><a href="classTBR__AnalogSensor.html#a737b0aa3995d55d9726710f400be979a">TBR_AnalogSensor::getState</a></div><div class="ttdeci">virtual int getState(int ch)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00745">CanBusMotionControl.cpp:745</a></div></div>
<div class="ttc" id="aclassTBR__AnalogSensor_html_a79e009e21fe109f5fceb852a427d080b"><div class="ttname"><a href="classTBR__AnalogSensor.html#a79e009e21fe109f5fceb852a427d080b">TBR_AnalogSensor::~TBR_AnalogSensor</a></div><div class="ttdeci">~TBR_AnalogSensor()</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00737">CanBusMotionControl.cpp:737</a></div></div>
<div class="ttc" id="aclassTBR__AnalogSensor_html_a83c8ffd97189fd7bb16eb8010a71a3d5"><div class="ttname"><a href="classTBR__AnalogSensor.html#a83c8ffd97189fd7bb16eb8010a71a3d5">TBR_AnalogSensor::backDoor</a></div><div class="ttdeci">TBR_CanBackDoor * backDoor</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00272">CanBusMotionControl.h:272</a></div></div>
<div class="ttc" id="aclassTBR__AnalogSensor_html_a94c6a336072fff1baf2bb975db606251"><div class="ttname"><a href="classTBR__AnalogSensor.html#a94c6a336072fff1baf2bb975db606251">TBR_AnalogSensor::read</a></div><div class="ttdeci">virtual int read(yarp::sig::Vector &amp;out)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00784">CanBusMotionControl.cpp:784</a></div></div>
<div class="ttc" id="aclassTBR__AnalogSensor_html_a97a605bedbb705bcbdb0861e02c53ddf"><div class="ttname"><a href="classTBR__AnalogSensor.html#a97a605bedbb705bcbdb0861e02c53ddf">TBR_AnalogSensor::getCounters</a></div><div class="ttdeci">void getCounters(unsigned int &amp;sat, unsigned int &amp;err, unsigned int &amp;to)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00285">CanBusMotionControl.h:285</a></div></div>
<div class="ttc" id="aclassTBR__AnalogSensor_html_aabd6f3ff4d28d15df1ec8107c7e9588a"><div class="ttname"><a href="classTBR__AnalogSensor.html#aabd6f3ff4d28d15df1ec8107c7e9588a">TBR_AnalogSensor::getChannels</a></div><div class="ttdeci">virtual int getChannels()</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00779">CanBusMotionControl.cpp:779</a></div></div>
<div class="ttc" id="aclassTBR__AnalogSensor_html_aabf2c460035a3398a4d4bed8cf37949d"><div class="ttname"><a href="classTBR__AnalogSensor.html#aabf2c460035a3398a4d4bed8cf37949d">TBR_AnalogSensor::getId</a></div><div class="ttdeci">short getId()</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00302">CanBusMotionControl.h:302</a></div></div>
<div class="ttc" id="aclassTBR__AnalogSensor_html_aafc42f1ec580545db8e02bdd91a2e985"><div class="ttname"><a href="classTBR__AnalogSensor.html#aafc42f1ec580545db8e02bdd91a2e985">TBR_AnalogSensor::setDeviceId</a></div><div class="ttdeci">void setDeviceId(std::string id)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00292">CanBusMotionControl.h:292</a></div></div>
<div class="ttc" id="aclassTBR__AnalogSensor_html_ab6ceff743749dbf91134476d9cb536d8"><div class="ttname"><a href="classTBR__AnalogSensor.html#ab6ceff743749dbf91134476d9cb536d8">TBR_AnalogSensor::getScaleFactor</a></div><div class="ttdeci">double * getScaleFactor()</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00318">CanBusMotionControl.h:318</a></div></div>
<div class="ttc" id="aclassTBR__AnalogSensor_html_aec3878d376487355972a09ffdb8307ff"><div class="ttname"><a href="classTBR__AnalogSensor.html#aec3878d376487355972a09ffdb8307ff">TBR_AnalogSensor::calibrateSensor</a></div><div class="ttdeci">virtual int calibrateSensor()</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00835">CanBusMotionControl.cpp:835</a></div></div>
<div class="ttc" id="aclassTBR__AnalogSensor_html_afa92092d0139836d6f6a830fb33946a2"><div class="ttname"><a href="classTBR__AnalogSensor.html#afa92092d0139836d6f6a830fb33946a2">TBR_AnalogSensor::AnalogDataFormat</a></div><div class="ttdeci">AnalogDataFormat</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00231">CanBusMotionControl.h:232</a></div></div>
<div class="ttc" id="aclassTBR__AnalogSensor_html_afa92092d0139836d6f6a830fb33946a2a195c739874d6d3dffbebf83a42315b04"><div class="ttname"><a href="classTBR__AnalogSensor.html#afa92092d0139836d6f6a830fb33946a2a195c739874d6d3dffbebf83a42315b04">TBR_AnalogSensor::ANALOG_FORMAT_16</a></div><div class="ttdeci">@ ANALOG_FORMAT_16</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00234">CanBusMotionControl.h:234</a></div></div>
<div class="ttc" id="aclassTBR__AnalogSensor_html_afa92092d0139836d6f6a830fb33946a2ae6493121d2b88f8bc93fedac07afd60e"><div class="ttname"><a href="classTBR__AnalogSensor.html#afa92092d0139836d6f6a830fb33946a2ae6493121d2b88f8bc93fedac07afd60e">TBR_AnalogSensor::ANALOG_FORMAT_8</a></div><div class="ttdeci">@ ANALOG_FORMAT_8</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00233">CanBusMotionControl.h:233</a></div></div>
<div class="ttc" id="aclassTBR__CanBackDoor_html"><div class="ttname"><a href="classTBR__CanBackDoor.html">TBR_CanBackDoor</a></div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00444">CanBusMotionControl.cpp:445</a></div></div>
<div class="ttc" id="aclassTBR__CanBackDoor_html_ade7f162a5b4ce02c6518ab8ebb23e761"><div class="ttname"><a href="classTBR__CanBackDoor.html#ade7f162a5b4ce02c6518ab8ebb23e761">TBR_CanBackDoor::onRead</a></div><div class="ttdeci">virtual void onRead(Bottle &amp;b)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00473">CanBusMotionControl.cpp:473</a></div></div>
<div class="ttc" id="aclassTBR__CanBackDoor_html_af220fc2005bc1d4aa324db228f624e54"><div class="ttname"><a href="classTBR__CanBackDoor.html#af220fc2005bc1d4aa324db228f624e54">TBR_CanBackDoor::TBR_CanBackDoor</a></div><div class="ttdeci">TBR_CanBackDoor()</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00452">CanBusMotionControl.cpp:452</a></div></div>
<div class="ttc" id="aclassTBR__CanBackDoor_html_afd309ca183ade66c467261a0814b84d8"><div class="ttname"><a href="classTBR__CanBackDoor.html#afd309ca183ade66c467261a0814b84d8">TBR_CanBackDoor::setUp</a></div><div class="ttdeci">void setUp(CanBusResources *p, std::recursive_mutex *mut, bool echo, TBR_AnalogSensor *owner)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00460">CanBusMotionControl.cpp:460</a></div></div>
<div class="ttc" id="aclassThreadFifo_html"><div class="ttname"><a href="classThreadFifo.html">ThreadFifo</a></div><div class="ttdef"><b>Definition:</b> <a href="canControlUtils_8h_source.html#l00158">canControlUtils.h:159</a></div></div>
<div class="ttc" id="aclassThreadPool2_html"><div class="ttname"><a href="classThreadPool2.html">ThreadPool2</a></div><div class="ttdef"><b>Definition:</b> <a href="ThreadPool2_8h_source.html#l00027">ThreadPool2.h:28</a></div></div>
<div class="ttc" id="aclassThreadPool2_html_abed580daad75544f3455f08beaa06cf4"><div class="ttname"><a href="classThreadPool2.html#abed580daad75544f3455f08beaa06cf4">ThreadPool2::getThreadTable</a></div><div class="ttdeci">ThreadTable2 * getThreadTable(int id)</div><div class="ttdef"><b>Definition:</b> <a href="ThreadPool2_8h_source.html#l00085">ThreadPool2.h:85</a></div></div>
<div class="ttc" id="aclassThreadPool2_html_af3e4ac95d374da92f359286d20bcba65"><div class="ttname"><a href="classThreadPool2.html#af3e4ac95d374da92f359286d20bcba65">ThreadPool2::getId</a></div><div class="ttdeci">bool getId(int &amp;i)</div><div class="ttdef"><b>Definition:</b> <a href="ThreadPool2_8h_source.html#l00070">ThreadPool2.h:70</a></div></div>
<div class="ttc" id="aclassThreadTable2_html"><div class="ttname"><a href="classThreadTable2.html">ThreadTable2</a></div><div class="ttdef"><b>Definition:</b> <a href="ThreadTable2_8h_source.html#l00032">ThreadTable2.h:33</a></div></div>
<div class="ttc" id="aclassThreadTable2_html_a2129ef023b358d00c5b30de7176f2b3e"><div class="ttname"><a href="classThreadTable2.html#a2129ef023b358d00c5b30de7176f2b3e">ThreadTable2::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="ThreadTable2_8cpp_source.html#l00036">ThreadTable2.cpp:36</a></div></div>
<div class="ttc" id="aclassThreadTable2_html_a42190aa0dd2d82764f64c35f5f99f78c"><div class="ttname"><a href="classThreadTable2.html#a42190aa0dd2d82764f64c35f5f99f78c">ThreadTable2::timeout</a></div><div class="ttdeci">bool timeout()</div><div class="ttdef"><b>Definition:</b> <a href="ThreadTable2_8h_source.html#l00154">ThreadTable2.h:154</a></div></div>
<div class="ttc" id="aclassThreadTable2_html_a47cdedbcf45603cf2a45f1758472fbc7"><div class="ttname"><a href="classThreadTable2.html#a47cdedbcf45603cf2a45f1758472fbc7">ThreadTable2::synch</a></div><div class="ttdeci">void synch()</div><div class="ttdef"><b>Definition:</b> <a href="ThreadTable2_8h_source.html#l00066">ThreadTable2.h:66</a></div></div>
<div class="ttc" id="aclassThreadTable2_html_a5ac48ab511cfb6e31f9b32ba005374b6"><div class="ttname"><a href="classThreadTable2.html#a5ac48ab511cfb6e31f9b32ba005374b6">ThreadTable2::getByJoint</a></div><div class="ttdeci">yarp::dev::CanMessage * getByJoint(int j, const unsigned char *destInv)</div><div class="ttdef"><b>Definition:</b> <a href="ThreadTable2_8h_source.html#l00118">ThreadTable2.h:118</a></div></div>
<div class="ttc" id="aclassThreadTable2_html_aba06db494b5ba3dbb3223f235fb28743"><div class="ttname"><a href="classThreadTable2.html#aba06db494b5ba3dbb3223f235fb28743">ThreadTable2::push</a></div><div class="ttdeci">bool push(const yarp::dev::CanMessage &amp;m)</div><div class="ttdef"><b>Definition:</b> <a href="ThreadTable2_8h_source.html#l00126">ThreadTable2.h:126</a></div></div>
<div class="ttc" id="aclassThreadTable2_html_adba368aea4ee8d37742e332ed2f4f26e"><div class="ttname"><a href="classThreadTable2.html#adba368aea4ee8d37742e332ed2f4f26e">ThreadTable2::setPending</a></div><div class="ttdeci">void setPending(int pend)</div><div class="ttdef"><b>Definition:</b> <a href="ThreadTable2_8h_source.html#l00168">ThreadTable2.h:168</a></div></div>
<div class="ttc" id="aclassThreadTable2_html_af31e5328380be26902f2c1853ce2cb29"><div class="ttname"><a href="classThreadTable2.html#af31e5328380be26902f2c1853ce2cb29">ThreadTable2::timedOut</a></div><div class="ttdeci">bool timedOut()</div><div class="ttdef"><b>Definition:</b> <a href="ThreadTable2_8h_source.html#l00082">ThreadTable2.h:82</a></div></div>
<div class="ttc" id="aclassThreadTable2_html_afbbc874a92650328926f44d8638dc618"><div class="ttname"><a href="classThreadTable2.html#afbbc874a92650328926f44d8638dc618">ThreadTable2::get</a></div><div class="ttdeci">yarp::dev::CanMessage * get(int n)</div><div class="ttdef"><b>Definition:</b> <a href="ThreadTable2_8h_source.html#l00110">ThreadTable2.h:110</a></div></div>
<div class="ttc" id="aclassaxisImpedanceHelper_html"><div class="ttname"><a href="classaxisImpedanceHelper.html">axisImpedanceHelper</a></div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00545">CanBusMotionControl.h:546</a></div></div>
<div class="ttc" id="aclassaxisImpedanceHelper_html_a09e17bc09de2c793bf1b49ab54bd71d6"><div class="ttname"><a href="classaxisImpedanceHelper.html#a09e17bc09de2c793bf1b49ab54bd71d6">axisImpedanceHelper::axisImpedanceHelper</a></div><div class="ttdeci">axisImpedanceHelper(int njoints, ImpedanceLimits *imped_limits)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00643">CanBusMotionControl.cpp:643</a></div></div>
<div class="ttc" id="aclassaxisImpedanceHelper_html_aa371f5034c3dd7f1547f091fb14b428a"><div class="ttname"><a href="classaxisImpedanceHelper.html#aa371f5034c3dd7f1547f091fb14b428a">axisImpedanceHelper::getImpedanceLimits</a></div><div class="ttdeci">ImpedanceLimits * getImpedanceLimits()</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00559">CanBusMotionControl.h:559</a></div></div>
<div class="ttc" id="aclassaxisPositionDirectHelper_html"><div class="ttname"><a href="classaxisPositionDirectHelper.html">axisPositionDirectHelper</a></div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00562">CanBusMotionControl.h:563</a></div></div>
<div class="ttc" id="aclassaxisPositionDirectHelper_html_a97b8b33f939060eedeee47cf3dba6d7a"><div class="ttname"><a href="classaxisPositionDirectHelper.html#a97b8b33f939060eedeee47cf3dba6d7a">axisPositionDirectHelper::getSaturatedValue</a></div><div class="ttdeci">double getSaturatedValue(int j, double curr_value, double ref_value)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00669">CanBusMotionControl.cpp:669</a></div></div>
<div class="ttc" id="aclassaxisPositionDirectHelper_html_aa083baa12bd850daa9c8e45adf14b667"><div class="ttname"><a href="classaxisPositionDirectHelper.html#aa083baa12bd850daa9c8e45adf14b667">axisPositionDirectHelper::axisPositionDirectHelper</a></div><div class="ttdeci">axisPositionDirectHelper(int njoints, const int *aMap, const double *angToEncs, double *_maxStep)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00653">CanBusMotionControl.cpp:653</a></div></div>
<div class="ttc" id="aclassaxisPositionDirectHelper_html_ad6e6e2932fc8ca891419f329f1812b21"><div class="ttname"><a href="classaxisPositionDirectHelper.html#ad6e6e2932fc8ca891419f329f1812b21">axisPositionDirectHelper::posE2A</a></div><div class="ttdeci">double posE2A(double ang, int j)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00583">CanBusMotionControl.h:583</a></div></div>
<div class="ttc" id="aclassaxisTorqueHelper_html"><div class="ttname"><a href="classaxisTorqueHelper.html">axisTorqueHelper</a></div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00589">CanBusMotionControl.h:590</a></div></div>
<div class="ttc" id="aclassaxisTorqueHelper_html_a7d1d66be5efc1ae5c7d3953311afd626"><div class="ttname"><a href="classaxisTorqueHelper.html#a7d1d66be5efc1ae5c7d3953311afd626">axisTorqueHelper::getMaximumTorque</a></div><div class="ttdeci">double getMaximumTorque(int jnt)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00609">CanBusMotionControl.h:609</a></div></div>
<div class="ttc" id="aclassaxisTorqueHelper_html_a9067fd62d4f5d118aeceaab375aad2cc"><div class="ttname"><a href="classaxisTorqueHelper.html#a9067fd62d4f5d118aeceaab375aad2cc">axisTorqueHelper::getNewtonsToSensor</a></div><div class="ttdeci">double getNewtonsToSensor(int jnt)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00614">CanBusMotionControl.h:614</a></div></div>
<div class="ttc" id="aclassaxisTorqueHelper_html_acad80e6ebe423eb86fb9e4b6082ca107"><div class="ttname"><a href="classaxisTorqueHelper.html#acad80e6ebe423eb86fb9e4b6082ca107">axisTorqueHelper::axisTorqueHelper</a></div><div class="ttdeci">axisTorqueHelper(int njoints, int *id, int *chan, double *maxTrq, double *newtons2sens)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00696">CanBusMotionControl.cpp:696</a></div></div>
<div class="ttc" id="aclassaxisTorqueHelper_html_ae170949c7144ea04b81a3b2958971e13"><div class="ttname"><a href="classaxisTorqueHelper.html#ae170949c7144ea04b81a3b2958971e13">axisTorqueHelper::getTorqueSensorChan</a></div><div class="ttdeci">int getTorqueSensorChan(int jnt)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00604">CanBusMotionControl.h:604</a></div></div>
<div class="ttc" id="aclassaxisTorqueHelper_html_ae678c98b7446156b16016bbef1a9eccb"><div class="ttname"><a href="classaxisTorqueHelper.html#ae678c98b7446156b16016bbef1a9eccb">axisTorqueHelper::getTorqueSensorId</a></div><div class="ttdeci">int getTorqueSensorId(int jnt)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00599">CanBusMotionControl.h:599</a></div></div>
<div class="ttc" id="aclassaxisTorqueHelper_html_af2ade90a05259e9fd2ee8b4fb09f1372"><div class="ttname"><a href="classaxisTorqueHelper.html#af2ade90a05259e9fd2ee8b4fb09f1372">axisTorqueHelper::getNumberOfJoints</a></div><div class="ttdeci">int getNumberOfJoints()</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00619">CanBusMotionControl.h:619</a></div></div>
<div class="ttc" id="aclasscan__string__generic_html"><div class="ttname"><a href="classcan__string__generic.html">can_string_generic</a></div><div class="ttdef"><b>Definition:</b> <a href="can__string__generic_8h_source.html#l00031">can_string_generic.h:32</a></div></div>
<div class="ttc" id="aclasscan__string__generic_html_a12187a154fbebdb08c4bfd2c85a92543"><div class="ttname"><a href="classcan__string__generic.html#a12187a154fbebdb08c4bfd2c85a92543">can_string_generic::clear_string</a></div><div class="ttdeci">void clear_string(int buffer_num)</div><div class="ttdoc">Resets the string buffer.</div><div class="ttdef"><b>Definition:</b> <a href="can__string__generic_8h_source.html#l00090">can_string_generic.h:90</a></div></div>
<div class="ttc" id="aclasscan__string__generic_html_a99096fda39fe6b3df580dd9660228245"><div class="ttname"><a href="classcan__string__generic.html#a99096fda39fe6b3df580dd9660228245">can_string_generic::print</a></div><div class="ttdeci">char * print(int buffer_num, const char *canDevName, int netNum)</div><div class="ttdoc">Prints a string buffer.</div><div class="ttdef"><b>Definition:</b> <a href="can__string__generic_8h_source.html#l00167">can_string_generic.h:167</a></div></div>
<div class="ttc" id="aclasscan__string__generic_html_ab66d08ed0f136ed0630e0713e85b01df"><div class="ttname"><a href="classcan__string__generic.html#ab66d08ed0f136ed0630e0713e85b01df">can_string_generic::add_string</a></div><div class="ttdeci">int add_string(void *can_packet)</div><div class="ttdoc">Process a string can packet.</div><div class="ttdef"><b>Definition:</b> <a href="can__string__generic_8h_source.html#l00103">can_string_generic.h:103</a></div></div>
<div class="ttc" id="aclassfirmwareVersionHelper_html"><div class="ttname"><a href="classfirmwareVersionHelper.html">firmwareVersionHelper</a></div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00410">CanBusMotionControl.h:411</a></div></div>
<div class="ttc" id="aclassfirmwareVersionHelper_html_a297b80b8170a09fa0e7246b1cddfcd03"><div class="ttname"><a href="classfirmwareVersionHelper.html#a297b80b8170a09fa0e7246b1cddfcd03">firmwareVersionHelper::printFirmwareVersions</a></div><div class="ttdeci">void printFirmwareVersions()</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00480">CanBusMotionControl.h:480</a></div></div>
<div class="ttc" id="aclassfirmwareVersionHelper_html_a99c662dcdfb92b125b54d5bcf039182d"><div class="ttname"><a href="classfirmwareVersionHelper.html#a99c662dcdfb92b125b54d5bcf039182d">firmwareVersionHelper::checkFirmwareVersions</a></div><div class="ttdeci">bool checkFirmwareVersions()</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00432">CanBusMotionControl.h:432</a></div></div>
<div class="ttc" id="aclassspeedEstimationHelper_html"><div class="ttname"><a href="classspeedEstimationHelper.html">speedEstimationHelper</a></div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00348">CanBusMotionControl.h:349</a></div></div>
<div class="ttc" id="aclassspeedEstimationHelper_html_a03fd09509baac1aab8d4864ea0a47371"><div class="ttname"><a href="classspeedEstimationHelper.html#a03fd09509baac1aab8d4864ea0a47371">speedEstimationHelper::speedEstimationHelper</a></div><div class="ttdeci">speedEstimationHelper(int njoints, SpeedEstimationParameters *estim_parameters)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00633">CanBusMotionControl.cpp:633</a></div></div>
<div class="ttc" id="aclassspeedEstimationHelper_html_a21efd7fea69f13304b98f2370674913b"><div class="ttname"><a href="classspeedEstimationHelper.html#a21efd7fea69f13304b98f2370674913b">speedEstimationHelper::getEstimationParameters</a></div><div class="ttdeci">SpeedEstimationParameters getEstimationParameters(int jnt)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00359">CanBusMotionControl.h:359</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html">yarp::dev::CanBusMotionControlParameters</a></div><div class="ttdoc">The PlxCan motion controller device driver.</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00098">CanBusMotionControl.h:99</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_a045a065763e995ff69770b99462fe1f9"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a045a065763e995ff69770b99462fe1f9">yarp::dev::CanBusMotionControlParameters::alloc</a></div><div class="ttdeci">bool alloc(int nj)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l01921">CanBusMotionControl.cpp:1921</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_a04f4f153cd60977178c14c6a491efde2"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a04f4f153cd60977178c14c6a491efde2">yarp::dev::CanBusMotionControlParameters::_motorPwmLimits</a></div><div class="ttdeci">double * _motorPwmLimits</div><div class="ttdoc">current limits</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00178">CanBusMotionControl.h:178</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_a0508d5fd826d46d3ddc3d6864aea49e7"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a0508d5fd826d46d3ddc3d6864aea49e7">yarp::dev::CanBusMotionControlParameters::_maxTorque</a></div><div class="ttdeci">double * _maxTorque</div><div class="ttdoc">Channel of associated Joint Torque Sensor.</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00186">CanBusMotionControl.h:186</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_a087665b704539d68433df0672dc665b5"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a087665b704539d68433df0672dc665b5">yarp::dev::CanBusMotionControlParameters::_pids</a></div><div class="ttdeci">Pid * _pids</div><div class="ttdoc">encoder zeros</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00165">CanBusMotionControl.h:165</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_a1984e4bdfecb8ca9fa80cd8332c1a511"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a1984e4bdfecb8ca9fa80cd8332c1a511">yarp::dev::CanBusMotionControlParameters::_timeout</a></div><div class="ttdeci">int _timeout</div><div class="ttdoc">thread polling interval [ms]</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00157">CanBusMotionControl.h:157</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_a1a5b8bdbae78cb12c80f48f18d0f435a"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a1a5b8bdbae78cb12c80f48f18d0f435a">yarp::dev::CanBusMotionControlParameters::_axisName</a></div><div class="ttdeci">std::string * _axisName</div><div class="ttdoc">number of cycles before timing out</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00159">CanBusMotionControl.h:159</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_a241d53b770b1253d3d7ea3ca8e6aacd7"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a241d53b770b1253d3d7ea3ca8e6aacd7">yarp::dev::CanBusMotionControlParameters::_debug_params</a></div><div class="ttdeci">DebugParameters * _debug_params</div><div class="ttdoc">parameters for speed/acceleration estimation</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00169">CanBusMotionControl.h:169</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_a2cd04f97df73fa11ebfb39e896e3b946"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a2cd04f97df73fa11ebfb39e896e3b946">yarp::dev::CanBusMotionControlParameters::_polling_interval</a></div><div class="ttdeci">int _polling_interval</div><div class="ttdoc">my address</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00156">CanBusMotionControl.h:156</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_a4367039ae1dc97703025003aa0f2f75d"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a4367039ae1dc97703025003aa0f2f75d">yarp::dev::CanBusMotionControlParameters::_optical_factor</a></div><div class="ttdeci">double * _optical_factor</div><div class="ttdoc">max velocity command for a joint</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00183">CanBusMotionControl.h:183</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_a437871bdfe1d8fefa2a57c4ef0744260a1a41a461e18396fe65451fb53b83ccb2"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a437871bdfe1d8fefa2a57c4ef0744260a1a41a461e18396fe65451fb53b83ccb2">yarp::dev::CanBusMotionControlParameters::MACHINE_UNITS</a></div><div class="ttdeci">@ MACHINE_UNITS</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00190">CanBusMotionControl.h:190</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_a437871bdfe1d8fefa2a57c4ef0744260a62ff5f18df2ada5f080f9d73150c541f"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a437871bdfe1d8fefa2a57c4ef0744260a62ff5f18df2ada5f080f9d73150c541f">yarp::dev::CanBusMotionControlParameters::METRIC_UNITS</a></div><div class="ttdeci">@ METRIC_UNITS</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00190">CanBusMotionControl.h:190</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_a43d552134ec5567386d7c8b9f4798417"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a43d552134ec5567386d7c8b9f4798417">yarp::dev::CanBusMotionControlParameters::parseImpedanceGroup_NewFormat</a></div><div class="ttdeci">bool parseImpedanceGroup_NewFormat(yarp::os::Bottle &amp;pidsGroup, ImpedanceParameters vals[])</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l01126">CanBusMotionControl.cpp:1126</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_a4fe8bb48d8ea41df0e4df2904c7c62d0"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a4fe8bb48d8ea41df0e4df2904c7c62d0">yarp::dev::CanBusMotionControlParameters::_torqueSensorId</a></div><div class="ttdeci">int * _torqueSensorId</div><div class="ttdoc">reduction ratio of the optical encoder on motor axis</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00184">CanBusMotionControl.h:184</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_a539d4d49d1bdfd092d66d5647a4e05de"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a539d4d49d1bdfd092d66d5647a4e05de">yarp::dev::CanBusMotionControlParameters::_ktau</a></div><div class="ttdeci">double * _ktau</div><div class="ttdoc">bemf compensation gain</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00173">CanBusMotionControl.h:173</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_a55272902bf1e3398f7b476ce3ca6c574"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a55272902bf1e3398f7b476ce3ca6c574">yarp::dev::CanBusMotionControlParameters::_ampsToSensor</a></div><div class="ttdeci">double * _ampsToSensor</div><div class="ttdoc">Newtons to force sensor units conversion factors.</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00188">CanBusMotionControl.h:188</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_a559591b54d78639691579558ae701700"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a559591b54d78639691579558ae701700">yarp::dev::CanBusMotionControlParameters::_rotToEncoder</a></div><div class="ttdeci">double * _rotToEncoder</div><div class="ttdoc">angle to encoder conversion factors</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00163">CanBusMotionControl.h:163</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_a56dceb3467a6f1061f272d1b6dbd9b66"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a56dceb3467a6f1061f272d1b6dbd9b66">yarp::dev::CanBusMotionControlParameters::_zeros</a></div><div class="ttdeci">double * _zeros</div><div class="ttdoc">angle to rotor conversion factors</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00164">CanBusMotionControl.h:164</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_a612a2893fcecf9f9ba6cb3dc6d369c9d"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a612a2893fcecf9f9ba6cb3dc6d369c9d">yarp::dev::CanBusMotionControlParameters::_dutycycleToPwm</a></div><div class="ttdeci">double * _dutycycleToPwm</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00189">CanBusMotionControl.h:189</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_a6aec78de2cb23c7b8cb964c2244aeba1"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a6aec78de2cb23c7b8cb964c2244aeba1">yarp::dev::CanBusMotionControlParameters::parseTrqPidsGroup_OldFormat</a></div><div class="ttdeci">bool parseTrqPidsGroup_OldFormat(yarp::os::Bottle &amp;pidsGroup, int nj, Pid myPid[])</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l01070">CanBusMotionControl.cpp:1070</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_a6e876530e1093ae831fc2c47ba228fbe"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a6e876530e1093ae831fc2c47ba228fbe">yarp::dev::CanBusMotionControlParameters::setBroadCastMask</a></div><div class="ttdeci">bool setBroadCastMask(yarp::os::Bottle &amp;list, int MASK)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l01014">CanBusMotionControl.cpp:1014</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_a767dda240906970d0969ce5b7ebdd7a9"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a767dda240906970d0969ce5b7ebdd7a9">yarp::dev::CanBusMotionControlParameters::_estim_params</a></div><div class="ttdeci">SpeedEstimationParameters * _estim_params</div><div class="ttdoc">set to true if pwm is limited</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00168">CanBusMotionControl.h:168</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_a7680212b727dbc1cfa1da8c924106253"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a7680212b727dbc1cfa1da8c924106253">yarp::dev::CanBusMotionControlParameters::_my_address</a></div><div class="ttdeci">unsigned char _my_address</div><div class="ttdoc">destination addresses</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00155">CanBusMotionControl.h:155</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_a781b20f8e50e734d75d1a05ca766cca5"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a781b20f8e50e734d75d1a05ca766cca5">yarp::dev::CanBusMotionControlParameters::parsePosPidsGroup_OldFormat</a></div><div class="ttdeci">bool parsePosPidsGroup_OldFormat(yarp::os::Bottle &amp;pidsGroup, int nj, Pid myPid[])</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l01042">CanBusMotionControl.cpp:1042</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_a7861dd017f448ebf6659e80fa6c7e911"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a7861dd017f448ebf6659e80fa6c7e911">yarp::dev::CanBusMotionControlParameters::_destinations</a></div><div class="ttdeci">unsigned char * _destinations</div><div class="ttdoc">number of joints/axes/controlled motors</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00154">CanBusMotionControl.h:154</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_a7bce21eb343ce9f04ee52f2da6b6ad8a"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a7bce21eb343ce9f04ee52f2da6b6ad8a">yarp::dev::CanBusMotionControlParameters::_tpids</a></div><div class="ttdeci">Pid * _tpids</div><div class="ttdoc">initial gains</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00166">CanBusMotionControl.h:166</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_a7d1d3ff6226b4e8aaea60e1f9c38b38f"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a7d1d3ff6226b4e8aaea60e1f9c38b38f">yarp::dev::CanBusMotionControlParameters::_rxTimeout</a></div><div class="ttdeci">int _rxTimeout</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00148">CanBusMotionControl.h:148</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_a815a8514bf823de1e6ca9e99075280b8"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a815a8514bf823de1e6ca9e99075280b8">yarp::dev::CanBusMotionControlParameters::_axisType</a></div><div class="ttdeci">std::string * _axisType</div><div class="ttdoc">axis name</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00160">CanBusMotionControl.h:160</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_a8de67083105cb8150ab9cb447d55221c"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a8de67083105cb8150ab9cb447d55221c">yarp::dev::CanBusMotionControlParameters::fromConfig</a></div><div class="ttdeci">bool fromConfig(yarp::os::Searchable &amp;config)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l01151">CanBusMotionControl.cpp:1151</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_a95c6b5f6ccb42aee8e1bdcb834de357b"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a95c6b5f6ccb42aee8e1bdcb834de357b">yarp::dev::CanBusMotionControlParameters::_rxQueueSize</a></div><div class="ttdeci">int _rxQueueSize</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00146">CanBusMotionControl.h:146</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_a99a8fae012b649c35c2ec35fa65a4f73"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#a99a8fae012b649c35c2ec35fa65a4f73">yarp::dev::CanBusMotionControlParameters::_currentLimits</a></div><div class="ttdeci">double * _currentLimits</div><div class="ttdoc">joint limits, min</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00177">CanBusMotionControl.h:177</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_aa0ec68ecd5419da2cd5dd96bf4c637cb"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aa0ec68ecd5419da2cd5dd96bf4c637cb">yarp::dev::CanBusMotionControlParameters::_angleToEncoder</a></div><div class="ttdeci">double * _angleToEncoder</div><div class="ttdoc">axis remapping lookup-table</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00162">CanBusMotionControl.h:162</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_aa843f78c2438fe1eece0c5aa7b1d5990"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aa843f78c2438fe1eece0c5aa7b1d5990">yarp::dev::CanBusMotionControlParameters::_axisMap</a></div><div class="ttdeci">int * _axisMap</div><div class="ttdoc">axis type</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00161">CanBusMotionControl.h:161</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_aab161d0e2e9f1890c69b13338d62289a"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aab161d0e2e9f1890c69b13338d62289a">yarp::dev::CanBusMotionControlParameters::_txTimeout</a></div><div class="ttdeci">int _txTimeout</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00147">CanBusMotionControl.h:147</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_ab0f5f6a8430ea836caec60d00cd41719"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ab0f5f6a8430ea836caec60d00cd41719">yarp::dev::CanBusMotionControlParameters::~CanBusMotionControlParameters</a></div><div class="ttdeci">~CanBusMotionControlParameters()</div><div class="ttdoc">Destructor, with memory deallocation.</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l01986">CanBusMotionControl.cpp:1986</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_ac33cda915f9bcfac46bca3baae9ff78d"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ac33cda915f9bcfac46bca3baae9ff78d">yarp::dev::CanBusMotionControlParameters::_maxJntCmdVelocity</a></div><div class="ttdeci">double * _maxJntCmdVelocity</div><div class="ttdoc">max size of a positionDirect step</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00182">CanBusMotionControl.h:182</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_ac575b87f412507a61e1c657cebcdb8c1"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ac575b87f412507a61e1c657cebcdb8c1">yarp::dev::CanBusMotionControlParameters::_pwmIsLimited</a></div><div class="ttdeci">bool _pwmIsLimited</div><div class="ttdoc">initial torque gains</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00167">CanBusMotionControl.h:167</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_ac8301c209035458e40349621f325ac96"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ac8301c209035458e40349621f325ac96">yarp::dev::CanBusMotionControlParameters::_bemfGain</a></div><div class="ttdeci">double * _bemfGain</div><div class="ttdoc">impedancel imits</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00172">CanBusMotionControl.h:172</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_ac838d9a2d9dab425a1dcc24816c57109"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ac838d9a2d9dab425a1dcc24816c57109">yarp::dev::CanBusMotionControlParameters::_torqueSensorChan</a></div><div class="ttdeci">int * _torqueSensorChan</div><div class="ttdoc">Id of associated Joint Torque Sensor.</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00185">CanBusMotionControl.h:185</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_ac9034bd11839f3821b3062d6680f662c"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ac9034bd11839f3821b3062d6680f662c">yarp::dev::CanBusMotionControlParameters::_velocityShifts</a></div><div class="ttdeci">int * _velocityShifts</div><div class="ttdoc">pwm limits</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00179">CanBusMotionControl.h:179</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_acd767cc2d7760615d4dffca1bce4a07c"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#acd767cc2d7760615d4dffca1bce4a07c">yarp::dev::CanBusMotionControlParameters::_newtonsToSensor</a></div><div class="ttdeci">double * _newtonsToSensor</div><div class="ttdoc">Max torque of a joint.</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00187">CanBusMotionControl.h:187</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_acde818af785eb36718b8e2e5ba5c59fa"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#acde818af785eb36718b8e2e5ba5c59fa">yarp::dev::CanBusMotionControlParameters::_filterType</a></div><div class="ttdeci">int * _filterType</div><div class="ttdoc">motor torque constant</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00174">CanBusMotionControl.h:174</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_ad8e4f717273d101d2b028d29d13b40e1"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ad8e4f717273d101d2b028d29d13b40e1">yarp::dev::CanBusMotionControlParameters::_networkN</a></div><div class="ttdeci">int _networkN</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00151">CanBusMotionControl.h:151</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_adbdebc6cbe3bf31f7efeb4e0de0755c2"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#adbdebc6cbe3bf31f7efeb4e0de0755c2">yarp::dev::CanBusMotionControlParameters::_torqueControlUnits</a></div><div class="ttdeci">torqueControlUnitsType _torqueControlUnits</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00191">CanBusMotionControl.h:191</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_adc5c896973556f50f5043ff66df781f7"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#adc5c896973556f50f5043ff66df781f7">yarp::dev::CanBusMotionControlParameters::_impedance_params</a></div><div class="ttdeci">ImpedanceParameters * _impedance_params</div><div class="ttdoc">debug parameters</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00170">CanBusMotionControl.h:170</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_adc791be96bed6b9ae3feaf08b8d5e7d6"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#adc791be96bed6b9ae3feaf08b8d5e7d6">yarp::dev::CanBusMotionControlParameters::_networkName</a></div><div class="ttdeci">std::string _networkName</div><div class="ttdoc">network number</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00152">CanBusMotionControl.h:152</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_addbb71cc77868bf0fe41a52d597c9e19"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#addbb71cc77868bf0fe41a52d597c9e19">yarp::dev::CanBusMotionControlParameters::CanBusMotionControlParameters</a></div><div class="ttdeci">CanBusMotionControlParameters()</div><div class="ttdoc">Constructor (please make sure you use the constructor to allocate memory).</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l01873">CanBusMotionControl.cpp:1873</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_ae15538b8cb1694bc6178f780da8db370"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ae15538b8cb1694bc6178f780da8db370">yarp::dev::CanBusMotionControlParameters::parsePidsGroup_NewFormat</a></div><div class="ttdeci">bool parsePidsGroup_NewFormat(yarp::os::Bottle &amp;pidsGroup, Pid myPid[])</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l01097">CanBusMotionControl.cpp:1097</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_ae4e1b8660e7f371105011b07abb0d608"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ae4e1b8660e7f371105011b07abb0d608">yarp::dev::CanBusMotionControlParameters::_impedance_limits</a></div><div class="ttdeci">ImpedanceLimits * _impedance_limits</div><div class="ttdoc">impedance parameters</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00171">CanBusMotionControl.h:171</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_ae942e7739d24298f278452f206a434c7"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ae942e7739d24298f278452f206a434c7">yarp::dev::CanBusMotionControlParameters::_broadcast_mask</a></div><div class="ttdeci">int * _broadcast_mask</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00149">CanBusMotionControl.h:149</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_ae9802594f2028c3fdeddc1d380fa1645"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#ae9802594f2028c3fdeddc1d380fa1645">yarp::dev::CanBusMotionControlParameters::_limitsMax</a></div><div class="ttdeci">double * _limitsMax</div><div class="ttdoc">joint limits, max</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00176">CanBusMotionControl.h:176</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_aea74aef9268f3752df27264a0fb6fb90"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aea74aef9268f3752df27264a0fb6fb90">yarp::dev::CanBusMotionControlParameters::_velocityTimeout</a></div><div class="ttdeci">int * _velocityTimeout</div><div class="ttdoc">velocity shifts</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00180">CanBusMotionControl.h:180</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_aebac840500409b6ab4dc4d7e44e4e216"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aebac840500409b6ab4dc4d7e44e4e216">yarp::dev::CanBusMotionControlParameters::_njoints</a></div><div class="ttdeci">int _njoints</div><div class="ttdoc">network name</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00153">CanBusMotionControl.h:153</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_aef9551940add65103085bd92a10a5ab7"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aef9551940add65103085bd92a10a5ab7">yarp::dev::CanBusMotionControlParameters::_torqueControlEnabled</a></div><div class="ttdeci">bool _torqueControlEnabled</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00192">CanBusMotionControl.h:192</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_aefe5b16491298ed2272aba2b5bc79e10"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#aefe5b16491298ed2272aba2b5bc79e10">yarp::dev::CanBusMotionControlParameters::_maxStep</a></div><div class="ttdeci">double * _maxStep</div><div class="ttdoc">velocity shifts</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00181">CanBusMotionControl.h:181</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_af079a5912157e00e7baba4caeb1cd8d3"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#af079a5912157e00e7baba4caeb1cd8d3">yarp::dev::CanBusMotionControlParameters::_limitsMin</a></div><div class="ttdeci">double * _limitsMin</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00175">CanBusMotionControl.h:175</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_af30091c7c9e4fef4454c0a072353071c"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#af30091c7c9e4fef4454c0a072353071c">yarp::dev::CanBusMotionControlParameters::parseDebugGroup_NewFormat</a></div><div class="ttdeci">bool parseDebugGroup_NewFormat(yarp::os::Bottle &amp;pidsGroup, DebugParameters vals[])</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l01135">CanBusMotionControl.cpp:1135</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControlParameters_html_afb65c740ca4adb2c69fb44cc72252343"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControlParameters.html#afb65c740ca4adb2c69fb44cc72252343">yarp::dev::CanBusMotionControlParameters::_txQueueSize</a></div><div class="ttdeci">int _txQueueSize</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00145">CanBusMotionControl.h:145</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a002cd3eaf490f9c6fb9c5fc25b9a793d"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a002cd3eaf490f9c6fb9c5fc25b9a793d">yarp::dev::CanBusMotionControl::setInteractionModeRaw</a></div><div class="ttdeci">virtual bool setInteractionModeRaw(int axis, yarp::dev::InteractionModeEnum mode) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l07390">CanBusMotionControl.cpp:7390</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a00914781d3d78fb7f24f5a900f71b52a"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a00914781d3d78fb7f24f5a900f71b52a">yarp::dev::CanBusMotionControl::_readDWordArray</a></div><div class="ttdeci">bool _readDWordArray(int msg, double *out)</div><div class="ttdoc">reads an array of double words.</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06986">CanBusMotionControl.cpp:6986</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a01cd42df21de5e00a242ec2392a86055"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a01cd42df21de5e00a242ec2392a86055">yarp::dev::CanBusMotionControl::enablePidRaw</a></div><div class="ttdeci">virtual bool enablePidRaw(const PidControlTypeEnum &amp;pidtype, int j) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l05359">CanBusMotionControl.cpp:5359</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a036ca01cd47d5361c27c2478a371b6c4"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a036ca01cd47d5361c27c2478a371b6c4">yarp::dev::CanBusMotionControl::getTemperatureLimitRaw</a></div><div class="ttdeci">virtual bool getTemperatureLimitRaw(int m, double *temp) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06339">CanBusMotionControl.cpp:6339</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a04ca9a8b5a62f6b375400a901197fa7fa4136e50edff1ac67a235758df80a372c"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a04ca9a8b5a62f6b375400a901197fa7fa4136e50edff1ac67a235758df80a372c">yarp::dev::CanBusMotionControl::CAN_SKIP_ADDR</a></div><div class="ttdeci">@ CAN_SKIP_ADDR</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l01181">CanBusMotionControl.h:1181</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a04de8a391b709a777e33b34f65e082aa"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a04de8a391b709a777e33b34f65e082aa">yarp::dev::CanBusMotionControl::setEncoderRaw</a></div><div class="ttdeci">virtual bool setEncoderRaw(int j, double val) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l05978">CanBusMotionControl.cpp:5978</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a0c8ca57697ca8c81f8b798b1b59d55ae"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a0c8ca57697ca8c81f8b798b1b59d55ae">yarp::dev::CanBusMotionControl::_readByte8</a></div><div class="ttdeci">bool _readByte8(int msg, int axis, int &amp;value)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l07106">CanBusMotionControl.cpp:7106</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a0d09a2eed60640ebea43058e6f539100"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a0d09a2eed60640ebea43058e6f539100">yarp::dev::CanBusMotionControl::getRefVelocitiesRaw</a></div><div class="ttdeci">virtual bool getRefVelocitiesRaw(double *refs) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l05001">CanBusMotionControl.cpp:5001</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a0de6c591abb8d8340378037eccf81951"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a0de6c591abb8d8340378037eccf81951">yarp::dev::CanBusMotionControl::threadPool</a></div><div class="ttdeci">ThreadPool2 * threadPool</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l01125">CanBusMotionControl.h:1125</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a0fc55e21ff4fb23597c93814f979c90b"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a0fc55e21ff4fb23597c93814f979c90b">yarp::dev::CanBusMotionControl::setRefCurrentsRaw</a></div><div class="ttdeci">virtual bool setRefCurrentsRaw(const double *t) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l07530">CanBusMotionControl.cpp:7530</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a100a40a38da173be134acb6308284b29"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a100a40a38da173be134acb6308284b29">yarp::dev::CanBusMotionControl::_writeWord16</a></div><div class="ttdeci">bool _writeWord16(int msg, int axis, short s)</div><div class="ttdoc">to send a Word16.</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06792">CanBusMotionControl.cpp:6792</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a10c73f4260062bdbb2a02aac0e8ee98b"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a10c73f4260062bdbb2a02aac0e8ee98b">yarp::dev::CanBusMotionControl::getMotorEncodersTimedRaw</a></div><div class="ttdeci">virtual bool getMotorEncodersTimedRaw(double *v, double *t) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06160">CanBusMotionControl.cpp:6160</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a11e3d9124f279bbed1ed351cd2672061"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a11e3d9124f279bbed1ed351cd2672061">yarp::dev::CanBusMotionControl::getCurrentImpedanceLimitRaw</a></div><div class="ttdeci">virtual bool getCurrentImpedanceLimitRaw(int j, double *min_stiff, double *max_stiff, double *min_damp, double *max_damp) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l04383">CanBusMotionControl.cpp:4383</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a1400c4368b36fa7383a8e66de10be345"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a1400c4368b36fa7383a8e66de10be345">yarp::dev::CanBusMotionControl::_readWord16Ex</a></div><div class="ttdeci">bool _readWord16Ex(int msg, int axis, short &amp;value1, short &amp;value2)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l07158">CanBusMotionControl.cpp:7158</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a1697d27654489934e64e0e3d83fd419f"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a1697d27654489934e64e0e3d83fd419f">yarp::dev::CanBusMotionControl::getEncoderAccelerationsRaw</a></div><div class="ttdeci">virtual bool getEncoderAccelerationsRaw(double *accs) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06083">CanBusMotionControl.cpp:6083</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a196ca3abd5139d92111b6ca128c2ae3c"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a196ca3abd5139d92111b6ca128c2ae3c">yarp::dev::CanBusMotionControl::setRefSpeedsRaw</a></div><div class="ttdeci">virtual bool setRefSpeedsRaw(const double *spds) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l05629">CanBusMotionControl.cpp:5629</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a1a353ca1cf3cb26c4e03211209c089f8"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a1a353ca1cf3cb26c4e03211209c089f8">yarp::dev::CanBusMotionControl::getMotorEncoderRaw</a></div><div class="ttdeci">virtual bool getMotorEncoderRaw(int m, double *v) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06150">CanBusMotionControl.cpp:6150</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a1ab119705abe4eab89d1f9b52f4518b5"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a1ab119705abe4eab89d1f9b52f4518b5">yarp::dev::CanBusMotionControl::from_modevocab_to_modeint</a></div><div class="ttdeci">icubCanProto_controlmode_t from_modevocab_to_modeint(int modevocab)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l03906">CanBusMotionControl.cpp:3906</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a1acee8c7a619502c5eb23ab5d4b74b76"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a1acee8c7a619502c5eb23ab5d4b74b76">yarp::dev::CanBusMotionControl::setPrintFunction</a></div><div class="ttdeci">virtual bool setPrintFunction(int(*f)(const char *fmt,...))</div><div class="ttdoc">IControlDebug Interface.</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06444">CanBusMotionControl.cpp:6444</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a1db552b282131ca7edcdbe42d4060021"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a1db552b282131ca7edcdbe42d4060021">yarp::dev::CanBusMotionControl::getRemoteVariableRaw</a></div><div class="ttdeci">virtual bool getRemoteVariableRaw(std::string key, yarp::os::Bottle &amp;val) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l04146">CanBusMotionControl.cpp:4146</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a1e1114403cdf59539cb26cded8dc5345"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a1e1114403cdf59539cb26cded8dc5345">yarp::dev::CanBusMotionControl::getNominalCurrentRaw</a></div><div class="ttdeci">virtual bool getNominalCurrentRaw(int m, double *val) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06359">CanBusMotionControl.cpp:6359</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a1e1e02485fb399d2538e8c88ff39a450"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a1e1e02485fb399d2538e8c88ff39a450">yarp::dev::CanBusMotionControl::from_interactionint_to_interactionvocab</a></div><div class="ttdeci">int from_interactionint_to_interactionvocab(unsigned char interactionint)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l03888">CanBusMotionControl.cpp:3888</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a1e84ac9733f8795e5d1cb820280c7c97"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a1e84ac9733f8795e5d1cb820280c7c97">yarp::dev::CanBusMotionControl::setPidReferenceRaw</a></div><div class="ttdeci">virtual bool setPidReferenceRaw(const PidControlTypeEnum &amp;pidtype, int j, double ref) override</div><div class="ttdoc">cmd is a SingleAxis poitner with 1 double arg</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l04806">CanBusMotionControl.cpp:4806</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a229bc3278bbdea2ff36c29c1f49715ed"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a229bc3278bbdea2ff36c29c1f49715ed">yarp::dev::CanBusMotionControl::getCurrentRaw</a></div><div class="ttdeci">virtual bool getCurrentRaw(int j, double *val) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06288">CanBusMotionControl.cpp:6288</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a26d920313a34bdd2fc33dfdd558df799"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a26d920313a34bdd2fc33dfdd558df799">yarp::dev::CanBusMotionControl::setRefAccelerationRaw</a></div><div class="ttdeci">virtual bool setRefAccelerationRaw(int j, double acc) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l05640">CanBusMotionControl.cpp:5640</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a270549824ae8e51788213867a918a2b0"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a270549824ae8e51788213867a918a2b0">yarp::dev::CanBusMotionControl::getEncoderRaw</a></div><div class="ttdeci">virtual bool getEncoderRaw(int j, double *v) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06048">CanBusMotionControl.cpp:6048</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a27edda0012e79ac8e0e6cb1c71a17352"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a27edda0012e79ac8e0e6cb1c71a17352">yarp::dev::CanBusMotionControl::setParameterRaw</a></div><div class="ttdeci">virtual bool setParameterRaw(int j, unsigned int type, double value)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l05373">CanBusMotionControl.cpp:5373</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a28a5ef0d465c731987826722346ff1a6"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a28a5ef0d465c731987826722346ff1a6">yarp::dev::CanBusMotionControl::_axisPositionDirectHelper</a></div><div class="ttdeci">axisPositionDirectHelper * _axisPositionDirectHelper</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l01161">CanBusMotionControl.h:1161</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a29de21188120dab9597097265fa5d031"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a29de21188120dab9597097265fa5d031">yarp::dev::CanBusMotionControl::_firmwareVersionHelper</a></div><div class="ttdeci">firmwareVersionHelper * _firmwareVersionHelper</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l01159">CanBusMotionControl.h:1159</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a2aa8ad25903bc5904b047b26da615ca4"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a2aa8ad25903bc5904b047b26da615ca4">yarp::dev::CanBusMotionControl::getPidRaw</a></div><div class="ttdeci">virtual bool getPidRaw(const PidControlTypeEnum &amp;pidtype, int j, Pid *pid) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l04561">CanBusMotionControl.cpp:4561</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a2c64ab9c1bb700af940611bc271248d0"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a2c64ab9c1bb700af940611bc271248d0">yarp::dev::CanBusMotionControl::stopRaw</a></div><div class="ttdeci">virtual bool stopRaw() override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l05903">CanBusMotionControl.cpp:5903</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a2c7b55ce33c01fef128c2f81debd2da8"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a2c7b55ce33c01fef128c2f81debd2da8">yarp::dev::CanBusMotionControl::getEncodersRaw</a></div><div class="ttdeci">virtual bool getEncodersRaw(double *encs) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06022">CanBusMotionControl.cpp:6022</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a2ccc4340a732887e159d1bc6de46f18a"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a2ccc4340a732887e159d1bc6de46f18a">yarp::dev::CanBusMotionControl::getLimitsRaw</a></div><div class="ttdeci">virtual bool getLimitsRaw(int axis, double *min, double *max) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06489">CanBusMotionControl.cpp:6489</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a2cd0b63638e5344e6c39772a0f61a7e4"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a2cd0b63638e5344e6c39772a0f61a7e4">yarp::dev::CanBusMotionControl::~CanBusMotionControl</a></div><div class="ttdeci">virtual ~CanBusMotionControl()</div><div class="ttdoc">Destructor.</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l02431">CanBusMotionControl.cpp:2431</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a2cd4eeacac3d01517a552971e20cf21f"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a2cd4eeacac3d01517a552971e20cf21f">yarp::dev::CanBusMotionControl::disableAmpRaw</a></div><div class="ttdeci">virtual bool disableAmpRaw(int j) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06263">CanBusMotionControl.cpp:6263</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a2cf4b19d42711422f3682923d31ee57f"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a2cf4b19d42711422f3682923d31ee57f">yarp::dev::CanBusMotionControl::setTorqueSource</a></div><div class="ttdeci">virtual bool setTorqueSource(int axis, char board_id, char board_chan)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l04483">CanBusMotionControl.cpp:4483</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a2dee256b3714b4999a2174f966adec4b"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a2dee256b3714b4999a2174f966adec4b">yarp::dev::CanBusMotionControl::getRefVelocityRaw</a></div><div class="ttdeci">virtual bool getRefVelocityRaw(const int joint, double *ref) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l04991">CanBusMotionControl.cpp:4991</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a2e03ea5d66d3b96d47a5394242fb1613"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a2e03ea5d66d3b96d47a5394242fb1613">yarp::dev::CanBusMotionControl::setInteractionModesRaw</a></div><div class="ttdeci">virtual bool setInteractionModesRaw(int n_joints, int *joints, yarp::dev::InteractionModeEnum *modes) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l07405">CanBusMotionControl.cpp:7405</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a2f388f86340ab8742d247c6579edb7f6"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a2f388f86340ab8742d247c6579edb7f6">yarp::dev::CanBusMotionControl::setMotorEncoderCountsPerRevolutionRaw</a></div><div class="ttdeci">virtual bool setMotorEncoderCountsPerRevolutionRaw(int m, const double cpr) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06196">CanBusMotionControl.cpp:6196</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a3065556e1b6df46bad9345d2298a114b"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a3065556e1b6df46bad9345d2298a114b">yarp::dev::CanBusMotionControl::setPidOffsetRaw</a></div><div class="ttdeci">virtual bool setPidOffsetRaw(const PidControlTypeEnum &amp;pidtype, int j, double v) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l05364">CanBusMotionControl.cpp:5364</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a31db37a26531bfecdfb362a9ba247da0"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a31db37a26531bfecdfb362a9ba247da0">yarp::dev::CanBusMotionControl::getTorqueRangesRaw</a></div><div class="ttdeci">virtual bool getTorqueRangesRaw(double *min, double *max) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l04928">CanBusMotionControl.cpp:4928</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a322ffc5f6913a64d4aa494c0d7670ba1"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a322ffc5f6913a64d4aa494c0d7670ba1">yarp::dev::CanBusMotionControl::getDutyCyclesRaw</a></div><div class="ttdeci">virtual bool getDutyCyclesRaw(double *v) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l07495">CanBusMotionControl.cpp:7495</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a339d51a632c762c73c6336ab8a129804"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a339d51a632c762c73c6336ab8a129804">yarp::dev::CanBusMotionControl::helper_getTrqPidRaw</a></div><div class="ttdeci">bool helper_getTrqPidRaw(int j, Pid *pid)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l04646">CanBusMotionControl.cpp:4646</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a3460f4c7956afff624247030fd977e28"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a3460f4c7956afff624247030fd977e28">yarp::dev::CanBusMotionControl::getRefTorqueRaw</a></div><div class="ttdeci">virtual bool getRefTorqueRaw(int j, double *ref_trq) override</div><div class="ttdoc">TORQUE CONTROL INTERFACE RAW.</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l05764">CanBusMotionControl.cpp:5764</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a34fc7603311c0487a086c1e30de773a6"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a34fc7603311c0487a086c1e30de773a6">yarp::dev::CanBusMotionControl::setRefTorquesRaw</a></div><div class="ttdeci">virtual bool setRefTorquesRaw(const double *ref_trqs) override</div><div class="ttdoc">cmd is an array of double (LATER: to be optimized).</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l04863">CanBusMotionControl.cpp:4863</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a38334546ab8ca06858c1cbc5cdcc08ba"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a38334546ab8ca06858c1cbc5cdcc08ba">yarp::dev::CanBusMotionControl::_writeWord16Ex</a></div><div class="ttdeci">bool _writeWord16Ex(int msg, int axis, short s1, short s2, bool check=true)</div><div class="ttdoc">two shorts in a single Can message (both must belong to the same control card).</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06864">CanBusMotionControl.cpp:6864</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a38b22085c968f819b612edf96dbe3d6b"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a38b22085c968f819b612edf96dbe3d6b">yarp::dev::CanBusMotionControl::setPositionsRaw</a></div><div class="ttdeci">virtual bool setPositionsRaw(const int n_joint, const int *joints, const double *refs) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06685">CanBusMotionControl.cpp:6685</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a38c5618c9ad516e570bd362e4526d1e9"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a38c5618c9ad516e570bd362e4526d1e9">yarp::dev::CanBusMotionControl::helper_setTrqPidRaw</a></div><div class="ttdeci">bool helper_setTrqPidRaw(int j, const Pid &amp;pid)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l04601">CanBusMotionControl.cpp:4601</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a39ce60ad15b6d7d93d172cbc94c19010"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a39ce60ad15b6d7d93d172cbc94c19010">yarp::dev::CanBusMotionControl::getPidOutputRaw</a></div><div class="ttdeci">virtual bool getPidOutputRaw(const PidControlTypeEnum &amp;pidtype, int j, double *out) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l05410">CanBusMotionControl.cpp:5410</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a39d04a47c66340a06d79edfc52f4d93d"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a39d04a47c66340a06d79edfc52f4d93d">yarp::dev::CanBusMotionControl::_speedEstimationHelper</a></div><div class="ttdeci">speedEstimationHelper * _speedEstimationHelper</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l01160">CanBusMotionControl.h:1160</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a39fcd6bd101753e1b3a6e8b1819bfc8d"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a39fcd6bd101753e1b3a6e8b1819bfc8d">yarp::dev::CanBusMotionControl::resetEncodersRaw</a></div><div class="ttdeci">virtual bool resetEncodersRaw() override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06006">CanBusMotionControl.cpp:6006</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a3a6a99db5a27c7b2741d35a63405e256"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a3a6a99db5a27c7b2741d35a63405e256">yarp::dev::CanBusMotionControl::createDevice</a></div><div class="ttdeci">yarp::dev::DeviceDriver * createDevice(yarp::os::Searchable &amp;config)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l07282">CanBusMotionControl.cpp:7282</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a3bbfbe4b44432e87f15d5516847d9338"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a3bbfbe4b44432e87f15d5516847d9338">yarp::dev::CanBusMotionControl::saveBootMemory</a></div><div class="ttdeci">virtual bool saveBootMemory()</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06731">CanBusMotionControl.cpp:6731</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a3c5883fff29d225096173b0209107362"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a3c5883fff29d225096173b0209107362">yarp::dev::CanBusMotionControl::_writeDWord</a></div><div class="ttdeci">bool _writeDWord(int msg, int axis, int value)</div><div class="ttdoc">write a DWord</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06840">CanBusMotionControl.cpp:6840</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a3e7d3d9d8d1a2e55d8cd336d2a746ead"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a3e7d3d9d8d1a2e55d8cd336d2a746ead">yarp::dev::CanBusMotionControl::CanBusMotionControl</a></div><div class="ttdeci">CanBusMotionControl()</div><div class="ttdoc">Default constructor.</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l02391">CanBusMotionControl.cpp:2391</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a3ff04a178ecced486d2f997b0d5c5a4f"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a3ff04a178ecced486d2f997b0d5c5a4f">yarp::dev::CanBusMotionControl::getImpedanceOffsetRaw</a></div><div class="ttdeci">virtual bool getImpedanceOffsetRaw(int j, double *offs) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l04400">CanBusMotionControl.cpp:4400</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a41a5714a6c78ee694b7f694be991101a"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a41a5714a6c78ee694b7f694be991101a">yarp::dev::CanBusMotionControl::_readWord16</a></div><div class="ttdeci">bool _readWord16(int msg, int axis, short &amp;value)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l07054">CanBusMotionControl.cpp:7054</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a4221e933dd6de9c0e15e90d50faa409d"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a4221e933dd6de9c0e15e90d50faa409d">yarp::dev::CanBusMotionControl::getLastInputStamp</a></div><div class="ttdeci">virtual yarp::os::Stamp getLastInputStamp() override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06041">CanBusMotionControl.cpp:6041</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a427f1c66bcf0bd7a9a593c59516bb238"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a427f1c66bcf0bd7a9a593c59516bb238">yarp::dev::CanBusMotionControl::getEncoderSpeedsRaw</a></div><div class="ttdeci">virtual bool getEncoderSpeedsRaw(double *spds) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06058">CanBusMotionControl.cpp:6058</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a4286bc93ffcb7c6ae79eb8436909b2e3"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a4286bc93ffcb7c6ae79eb8436909b2e3">yarp::dev::CanBusMotionControl::setMotorEncodersRaw</a></div><div class="ttdeci">virtual bool setMotorEncodersRaw(const double *vals) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06116">CanBusMotionControl.cpp:6116</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a447c8a5d0560c821bc3d86f43fc23da4"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a447c8a5d0560c821bc3d86f43fc23da4">yarp::dev::CanBusMotionControl::helper_getVelPidRaw</a></div><div class="ttdeci">bool helper_getVelPidRaw(int j, Pid *pid)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06627">CanBusMotionControl.cpp:6627</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a458b0963c915e8fb0ad02d4b5f968484"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a458b0963c915e8fb0ad02d4b5f968484">yarp::dev::CanBusMotionControl::calibrationDoneRaw</a></div><div class="ttdeci">virtual bool calibrationDoneRaw(int j) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06424">CanBusMotionControl.cpp:6424</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a45a4d8f2668d10afc8b28314f9c8551a"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a45a4d8f2668d10afc8b28314f9c8551a">yarp::dev::CanBusMotionControl::_axisTorqueHelper</a></div><div class="ttdeci">axisTorqueHelper * _axisTorqueHelper</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l01157">CanBusMotionControl.h:1157</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a46cea1139fde278cba304cfa8d970a0b"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a46cea1139fde278cba304cfa8d970a0b">yarp::dev::CanBusMotionControl::getMotorEncoderAccelerationRaw</a></div><div class="ttdeci">virtual bool getMotorEncoderAccelerationRaw(int m, double *spds) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06251">CanBusMotionControl.cpp:6251</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a4bdebbadade4e8f2d28dd784d16a5f6d"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a4bdebbadade4e8f2d28dd784d16a5f6d">yarp::dev::CanBusMotionControl::getControlModesRaw</a></div><div class="ttdeci">virtual bool getControlModesRaw(int *v) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l03833">CanBusMotionControl.cpp:3833</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a4c28a37de6845d48251f004d57951f16"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a4c28a37de6845d48251f004d57951f16">yarp::dev::CanBusMotionControl::setVelLimitsRaw</a></div><div class="ttdeci">virtual bool setVelLimitsRaw(int axis, double min, double max) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06636">CanBusMotionControl.cpp:6636</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a4c86489f94cca2de72da41bc2664b551"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a4c86489f94cca2de72da41bc2664b551">yarp::dev::CanBusMotionControl::_max_vel_jnt_cmd</a></div><div class="ttdeci">double * _max_vel_jnt_cmd</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l01175">CanBusMotionControl.h:1175</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a4e695811ced457896e07213c4307742a"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a4e695811ced457896e07213c4307742a">yarp::dev::CanBusMotionControl::setMaxCurrentRaw</a></div><div class="ttdeci">virtual bool setMaxCurrentRaw(int j, double val) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06299">CanBusMotionControl.cpp:6299</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a4e7658c799be9e171612809cd43cecd5"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a4e7658c799be9e171612809cd43cecd5">yarp::dev::CanBusMotionControl::checkMotionDoneRaw</a></div><div class="ttdeci">virtual bool checkMotionDoneRaw(bool *flag) override</div><div class="ttdoc">ret is a pointer to a bool</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l05542">CanBusMotionControl.cpp:5542</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a4ec5ee1a106a6407455793c869e4dc5e"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a4ec5ee1a106a6407455793c869e4dc5e">yarp::dev::CanBusMotionControl::getVelLimitsRaw</a></div><div class="ttdeci">virtual bool getVelLimitsRaw(int axis, double *min, double *max) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06646">CanBusMotionControl.cpp:6646</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a51bc7c2609f0103e6c99f28be3e4fb64"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a51bc7c2609f0103e6c99f28be3e4fb64">yarp::dev::CanBusMotionControl::getCurrentsRaw</a></div><div class="ttdeci">virtual bool getCurrentsRaw(double *vals) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06274">CanBusMotionControl.cpp:6274</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a54ab847f95be3ccd3d0d33b39437c3ba"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a54ab847f95be3ccd3d0d33b39437c3ba">yarp::dev::CanBusMotionControl::getFilterTypeRaw</a></div><div class="ttdeci">bool getFilterTypeRaw(int j, int *type)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l05835">CanBusMotionControl.cpp:5835</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a54e9e3f2cbafa9c5ea61bf11edcdbf5d"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a54e9e3f2cbafa9c5ea61bf11edcdbf5d">yarp::dev::CanBusMotionControl::getCurrentRangeRaw</a></div><div class="ttdeci">virtual bool getCurrentRangeRaw(int j, double *min, double *max) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l07520">CanBusMotionControl.cpp:7520</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a553bb4c4e517a5ad8776bad694fa5d88"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a553bb4c4e517a5ad8776bad694fa5d88">yarp::dev::CanBusMotionControl::_noreply</a></div><div class="ttdeci">bool _noreply</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l01123">CanBusMotionControl.h:1123</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a56022c38cbf4fb614abf0e54a0cc01e0"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a56022c38cbf4fb614abf0e54a0cc01e0">yarp::dev::CanBusMotionControl::getInteractionModesRaw</a></div><div class="ttdeci">virtual bool getInteractionModesRaw(int n_joints, int *joints, yarp::dev::InteractionModeEnum *modes) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l07359">CanBusMotionControl.cpp:7359</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a5650c30673f98427eade9f0822d99138"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a5650c30673f98427eade9f0822d99138">yarp::dev::CanBusMotionControl::getRefPositionsRaw</a></div><div class="ttdeci">virtual bool getRefPositionsRaw(double *refs) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l05031">CanBusMotionControl.cpp:5031</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a56978bb0d722116c2e86777743d17247"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a56978bb0d722116c2e86777743d17247">yarp::dev::CanBusMotionControl::ENABLED</a></div><div class="ttdeci">bool ENABLED(int axis)</div><div class="ttdoc">helper function to check whether the enabled flag is on or off.</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06760">CanBusMotionControl.cpp:6760</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a577a5b439ed2ed7fc9d7cd6ddefc553b"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a577a5b439ed2ed7fc9d7cd6ddefc553b">yarp::dev::CanBusMotionControl::helper_setPosPidRaw</a></div><div class="ttdeci">bool helper_setPosPidRaw(int j, const Pid &amp;pid)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l04278">CanBusMotionControl.cpp:4278</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a5ba3e43009b5ce20ac1b7fdd2014f359"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a5ba3e43009b5ce20ac1b7fdd2014f359">yarp::dev::CanBusMotionControl::setControlModesRaw</a></div><div class="ttdeci">virtual bool setControlModesRaw(const int n_joint, const int *joints, int *modes) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l04098">CanBusMotionControl.cpp:4098</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a5e22d6c2d25fd1e5b84f699f8b472746"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a5e22d6c2d25fd1e5b84f699f8b472746">yarp::dev::CanBusMotionControl::getPidReferencesRaw</a></div><div class="ttdeci">virtual bool getPidReferencesRaw(const PidControlTypeEnum &amp;pidtype, double *refs) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l05321">CanBusMotionControl.cpp:5321</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a6011bd2cc00e7e845fc1ee685e50c60b"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6011bd2cc00e7e845fc1ee685e50c60b">yarp::dev::CanBusMotionControl::setImpedanceRaw</a></div><div class="ttdeci">virtual bool setImpedanceRaw(int j, double stiff, double damp) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l04457">CanBusMotionControl.cpp:4457</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a604f3de83a8e787c9b4e404fa4201d7f"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a604f3de83a8e787c9b4e404fa4201d7f">yarp::dev::CanBusMotionControl::setPidErrorLimitRaw</a></div><div class="ttdeci">virtual bool setPidErrorLimitRaw(const PidControlTypeEnum &amp;pidtype, int j, double limit) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l05344">CanBusMotionControl.cpp:5344</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a60ca5ff6a1c1e8aadde2b78be113f5fd"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a60ca5ff6a1c1e8aadde2b78be113f5fd">yarp::dev::CanBusMotionControl::getEncoderTimedRaw</a></div><div class="ttdeci">virtual bool getEncoderTimedRaw(int j, double *v, double *t) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l07334">CanBusMotionControl.cpp:7334</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a65b8b33f133848f38e8d2a155a84f080"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a65b8b33f133848f38e8d2a155a84f080">yarp::dev::CanBusMotionControl::getCurrentRangesRaw</a></div><div class="ttdeci">virtual bool getCurrentRangesRaw(double *min, double *max) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l07525">CanBusMotionControl.cpp:7525</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a667f8febb3fa047ae938e45b8c194da1"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a667f8febb3fa047ae938e45b8c194da1">yarp::dev::CanBusMotionControl::getMotorEncoderTimedRaw</a></div><div class="ttdeci">virtual bool getMotorEncoderTimedRaw(int m, double *v, double *t) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06180">CanBusMotionControl.cpp:6180</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a6751a3f27900877fbb7f98084f5fedd0"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6751a3f27900877fbb7f98084f5fedd0">yarp::dev::CanBusMotionControl::getJointTypeRaw</a></div><div class="ttdeci">virtual bool getJointTypeRaw(int axis, yarp::dev::JointTypeEnum &amp;type) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l04213">CanBusMotionControl.cpp:4213</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a6780fc9bcff42d64716005c61e32e82e"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6780fc9bcff42d64716005c61e32e82e">yarp::dev::CanBusMotionControl::_mutex</a></div><div class="ttdeci">std::recursive_mutex _mutex</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l01119">CanBusMotionControl.h:1119</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a686ec747cea2d0b6d8733d01763cff54"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a686ec747cea2d0b6d8733d01763cff54">yarp::dev::CanBusMotionControl::_axisImpedanceHelper</a></div><div class="ttdeci">axisImpedanceHelper * _axisImpedanceHelper</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l01158">CanBusMotionControl.h:1158</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a69df21943550a704c6276e10ef9360d4"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a69df21943550a704c6276e10ef9360d4">yarp::dev::CanBusMotionControl::getMotorEncoderSpeedRaw</a></div><div class="ttdeci">virtual bool getMotorEncoderSpeedRaw(int m, double *sp) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06227">CanBusMotionControl.cpp:6227</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a6a3bb265be70ccfd4d148e01b263916e"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6a3bb265be70ccfd4d148e01b263916e">yarp::dev::CanBusMotionControl::setTemperatureLimitRaw</a></div><div class="ttdeci">virtual bool setTemperatureLimitRaw(int m, const double temp) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06344">CanBusMotionControl.cpp:6344</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a6e7b832cc1e5918c85ac603a631f6c29"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6e7b832cc1e5918c85ac603a631f6c29">yarp::dev::CanBusMotionControl::getEncodersTimedRaw</a></div><div class="ttdeci">virtual bool getEncodersTimedRaw(double *v, double *t) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l07314">CanBusMotionControl.cpp:7314</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a6f1d725e38b7c6938cb1b1342d4eceb8"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a6f1d725e38b7c6938cb1b1342d4eceb8">yarp::dev::CanBusMotionControl::resetMotorEncodersRaw</a></div><div class="ttdeci">virtual bool resetMotorEncodersRaw() override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06126">CanBusMotionControl.cpp:6126</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a702233c10d2353eb3cad82ce32bcaced"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a702233c10d2353eb3cad82ce32bcaced">yarp::dev::CanBusMotionControl::getPidErrorsRaw</a></div><div class="ttdeci">virtual bool getPidErrorsRaw(const PidControlTypeEnum &amp;pidtype, double *errs) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l05052">CanBusMotionControl.cpp:5052</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a703140d587d4c5eb582e35005df73057"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a703140d587d4c5eb582e35005df73057">yarp::dev::CanBusMotionControl::_ref_command_positions</a></div><div class="ttdeci">double * _ref_command_positions</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l01173">CanBusMotionControl.h:1173</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a704477f7527f662b30eccb5f5e360a07"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a704477f7527f662b30eccb5f5e360a07">yarp::dev::CanBusMotionControl::getInteractionModeRaw</a></div><div class="ttdeci">virtual bool getInteractionModeRaw(int axis, yarp::dev::InteractionModeEnum *mode) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l07347">CanBusMotionControl.cpp:7347</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a7090c184b1080e3cf7d946d66ab640eb"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a7090c184b1080e3cf7d946d66ab640eb">yarp::dev::CanBusMotionControl::setImpedanceOffsetRaw</a></div><div class="ttdeci">virtual bool setImpedanceOffsetRaw(int j, double offs) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l04510">CanBusMotionControl.cpp:4510</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a70e12eba89c67a6805b978e8fd839685"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a70e12eba89c67a6805b978e8fd839685">yarp::dev::CanBusMotionControl::getControlModeRaw</a></div><div class="ttdeci">virtual bool getControlModeRaw(int j, int *v) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l04019">CanBusMotionControl.cpp:4019</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a74651ba6ae46c35e3650ba709b7b8b45"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a74651ba6ae46c35e3650ba709b7b8b45">yarp::dev::CanBusMotionControl::getRefCurrentsRaw</a></div><div class="ttdeci">virtual bool getRefCurrentsRaw(double *t) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l07545">CanBusMotionControl.cpp:7545</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a74c983063011ad78f4dc08cc3a3f5a49"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a74c983063011ad78f4dc08cc3a3f5a49">yarp::dev::CanBusMotionControl::helper_getPosPidRaw</a></div><div class="ttdeci">bool helper_getPosPidRaw(int j, Pid *pid)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l04531">CanBusMotionControl.cpp:4531</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a78a9592949771e34f4349e11a7415011"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a78a9592949771e34f4349e11a7415011">yarp::dev::CanBusMotionControl::_readWord16Array</a></div><div class="ttdeci">bool _readWord16Array(int msg, double *out)</div><div class="ttdoc">reads an array.</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l07216">CanBusMotionControl.cpp:7216</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a793810fa043a4432de3c7d849994d338"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a793810fa043a4432de3c7d849994d338">yarp::dev::CanBusMotionControl::getPowerSupplyVoltageRaw</a></div><div class="ttdeci">virtual bool getPowerSupplyVoltageRaw(int j, double *val) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06393">CanBusMotionControl.cpp:6393</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a7955fbd89c0ca495bcaef36f0aa8181f"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a7955fbd89c0ca495bcaef36f0aa8181f">yarp::dev::CanBusMotionControl::loadBootMemory</a></div><div class="ttdeci">virtual bool loadBootMemory()</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06716">CanBusMotionControl.cpp:6716</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a79706f32809c64c6cbccd6bc90bb927b"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a79706f32809c64c6cbccd6bc90bb927b">yarp::dev::CanBusMotionControl::getTargetPositionRaw</a></div><div class="ttdeci">virtual bool getTargetPositionRaw(const int joint, double *ref) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l04960">CanBusMotionControl.cpp:4960</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a79749b0a501197275aa7ae043fbaa011"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a79749b0a501197275aa7ae043fbaa011">yarp::dev::CanBusMotionControl::getNumberOfMotorEncodersRaw</a></div><div class="ttdeci">virtual bool getNumberOfMotorEncodersRaw(int *num) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06201">CanBusMotionControl.cpp:6201</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a7a18a7426b30c7fcbc39941f73acaaa5"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a7a18a7426b30c7fcbc39941f73acaaa5">yarp::dev::CanBusMotionControl::helper_setCurPidRaw</a></div><div class="ttdeci">bool helper_setCurPidRaw(int j, const Pid &amp;pid)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06611">CanBusMotionControl.cpp:6611</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a7a8c5cb09b35c7e8d4e8a25295b4662f"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a7a8c5cb09b35c7e8d4e8a25295b4662f">yarp::dev::CanBusMotionControl::from_modeint_to_modevocab</a></div><div class="ttdeci">int from_modeint_to_modevocab(unsigned char modeint)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l03953">CanBusMotionControl.cpp:3953</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a7e4043b59bbeff7d30f1d85edb84df11"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a7e4043b59bbeff7d30f1d85edb84df11">yarp::dev::CanBusMotionControl::_writeByteWords16</a></div><div class="ttdeci">bool _writeByteWords16(int msg, int axis, unsigned char value, short s1, short s2, short s3)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06894">CanBusMotionControl.cpp:6894</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a7f8904e7fbc8fb307cf494a5b0957a22"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a7f8904e7fbc8fb307cf494a5b0957a22">yarp::dev::CanBusMotionControl::getAxes</a></div><div class="ttdeci">virtual bool getAxes(int *ax) override</div><div class="ttdoc">POSITION CONTROL INTERFACE RAW.</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l04270">CanBusMotionControl.cpp:4270</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a83fe2d898506633721c8bb367d206069"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a83fe2d898506633721c8bb367d206069">yarp::dev::CanBusMotionControl::setMotorEncoderRaw</a></div><div class="ttdeci">virtual bool setMotorEncoderRaw(int m, const double val) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06111">CanBusMotionControl.cpp:6111</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a84202859aaa87ab52691fac937b71cba"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a84202859aaa87ab52691fac937b71cba">yarp::dev::CanBusMotionControl::getRefCurrentRaw</a></div><div class="ttdeci">virtual bool getRefCurrentRaw(int j, double *t) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l07550">CanBusMotionControl.cpp:7550</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a86266c3dc40fd836fdbd1cd04d1f18f5"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a86266c3dc40fd836fdbd1cd04d1f18f5">yarp::dev::CanBusMotionControl::getRefAccelerationRaw</a></div><div class="ttdeci">virtual bool getRefAccelerationRaw(int j, double *acc) override</div><div class="ttdoc">cmd is an array of double (LATER: to be optimized).</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l05726">CanBusMotionControl.cpp:5726</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a86ce098d289c6a426a27c94e1a155e49"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a86ce098d289c6a426a27c94e1a155e49">yarp::dev::CanBusMotionControl::setPWMLimitRaw</a></div><div class="ttdeci">virtual bool setPWMLimitRaw(int j, const double val) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06385">CanBusMotionControl.cpp:6385</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a893086dd6dade4b2fec570798f52262f"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a893086dd6dade4b2fec570798f52262f">yarp::dev::CanBusMotionControl::_writeNone</a></div><div class="ttdeci">bool _writeNone(int msg, int axis)</div><div class="ttdoc">WRITE functions sends a message without parameters.</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06768">CanBusMotionControl.cpp:6768</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a8ba29de2fc1d9e4bd2057f806da54001"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a8ba29de2fc1d9e4bd2057f806da54001">yarp::dev::CanBusMotionControl::setBCastMessages</a></div><div class="ttdeci">bool setBCastMessages(int axis, unsigned int v)</div><div class="ttdoc">sets the broadcast policy for a given board (don't need to be called twice).</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06751">CanBusMotionControl.cpp:6751</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a8d778a17670e47541df4fe4296fa8ef4"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a8d778a17670e47541df4fe4296fa8ef4">yarp::dev::CanBusMotionControl::calibrateAxisWithParamsRaw</a></div><div class="ttdeci">virtual bool calibrateAxisWithParamsRaw(int axis, unsigned int type, double p1, double p2, double p3) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l05608">CanBusMotionControl.cpp:5608</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a904f51287296939ef50721ea4d0a59fa"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a904f51287296939ef50721ea4d0a59fa">yarp::dev::CanBusMotionControl::getRefSpeedsRaw</a></div><div class="ttdeci">virtual bool getRefSpeedsRaw(double *spds) override</div><div class="ttdoc">cmd is an array of double (LATER: to be optimized).</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l05683">CanBusMotionControl.cpp:5683</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a90861ff1fa245a6c09b2df2d462d4805"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a90861ff1fa245a6c09b2df2d462d4805">yarp::dev::CanBusMotionControl::close</a></div><div class="ttdeci">virtual bool close(void)</div><div class="ttdoc">Closes the device driver.</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l02972">CanBusMotionControl.cpp:2972</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a9336bef6ae7cf393586d354f6f0adad5"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a9336bef6ae7cf393586d354f6f0adad5">yarp::dev::CanBusMotionControl::setPositionRaw</a></div><div class="ttdeci">virtual bool setPositionRaw(int j, double ref) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06657">CanBusMotionControl.cpp:6657</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a9366f5c9884b85cc8e333fc329d71383"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a9366f5c9884b85cc8e333fc329d71383">yarp::dev::CanBusMotionControl::open</a></div><div class="ttdeci">virtual bool open(yarp::os::Searchable &amp;config)</div><div class="ttdoc">Open the device driver and start communication with the hardware.</div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a93eee03780e92ffbf67eaa3cab11fbca"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a93eee03780e92ffbf67eaa3cab11fbca">yarp::dev::CanBusMotionControl::_readDWord</a></div><div class="ttdeci">bool _readDWord(int msg, int axis, int &amp;value)</div><div class="ttdoc">READ functions sends a message and gets a dword back.</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06936">CanBusMotionControl.cpp:6936</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a954bb681bc7e21d05ac6f48e939979b1"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a954bb681bc7e21d05ac6f48e939979b1">yarp::dev::CanBusMotionControl::setDebugReferencePositionRaw</a></div><div class="ttdeci">virtual bool setDebugReferencePositionRaw(int j, double value)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l05401">CanBusMotionControl.cpp:5401</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a958bd4c0de730eb0fe77967dcad80158"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a958bd4c0de730eb0fe77967dcad80158">yarp::dev::CanBusMotionControl::getPWMLimitRaw</a></div><div class="ttdeci">virtual bool getPWMLimitRaw(int j, double *val) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06374">CanBusMotionControl.cpp:6374</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a95ddbda0e604bb891811a1c25851d2c0"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a95ddbda0e604bb891811a1c25851d2c0">yarp::dev::CanBusMotionControl::from_interactionvocab_to_interactionint</a></div><div class="ttdeci">unsigned char from_interactionvocab_to_interactionint(int interactionvocab)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l03871">CanBusMotionControl.cpp:3871</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a9660ce1aaae968abadfc2db98ea097ce"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a9660ce1aaae968abadfc2db98ea097ce">yarp::dev::CanBusMotionControl::getAxisNameRaw</a></div><div class="ttdeci">virtual bool getAxisNameRaw(int axis, std::string &amp;name) override</div><div class="ttdoc">IAxisInfo.</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l04198">CanBusMotionControl.cpp:4198</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a96bfa233fcea3beaae56851757c38fa7"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a96bfa233fcea3beaae56851757c38fa7">yarp::dev::CanBusMotionControl::positionMoveRaw</a></div><div class="ttdeci">virtual bool positionMoveRaw(int j, double ref) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l05453">CanBusMotionControl.cpp:5453</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a99115334b9f83d15917d2572f7cd0fc5"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a99115334b9f83d15917d2572f7cd0fc5">yarp::dev::CanBusMotionControl::setPidErrorLimitsRaw</a></div><div class="ttdeci">virtual bool setPidErrorLimitsRaw(const PidControlTypeEnum &amp;pidtype, const double *limits) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l05349">CanBusMotionControl.cpp:5349</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a99eecc5d575ce4300bb673edba383d03"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a99eecc5d575ce4300bb673edba383d03">yarp::dev::CanBusMotionControl::run</a></div><div class="ttdeci">virtual void run(void)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l03475">CanBusMotionControl.cpp:3475</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a9b42cfe7437a5aaf8efd8b9aaf56ad46"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a9b42cfe7437a5aaf8efd8b9aaf56ad46">yarp::dev::CanBusMotionControl::setRefCurrentRaw</a></div><div class="ttdeci">virtual bool setRefCurrentRaw(int j, double t) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l07535">CanBusMotionControl.cpp:7535</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a9b85f390ba6214fba74696779f0f9a24"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a9b85f390ba6214fba74696779f0f9a24">yarp::dev::CanBusMotionControl::getEncoderAccelerationRaw</a></div><div class="ttdeci">virtual bool getEncoderAccelerationRaw(int j, double *spds) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06096">CanBusMotionControl.cpp:6096</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a9d158cd029d79928dc35fa3a6a71c594"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a9d158cd029d79928dc35fa3a6a71c594">yarp::dev::CanBusMotionControl::getTorqueRangeRaw</a></div><div class="ttdeci">virtual bool getTorqueRangeRaw(int j, double *min, double *max) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l04890">CanBusMotionControl.cpp:4890</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a9d7832df957f9d959d952e5055369fd0"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a9d7832df957f9d959d952e5055369fd0">yarp::dev::CanBusMotionControl::threadInit</a></div><div class="ttdeci">virtual bool threadInit()</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l03450">CanBusMotionControl.cpp:3450</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a9ee2be499ae0dfd75b1e6ecb6bc313c0"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a9ee2be499ae0dfd75b1e6ecb6bc313c0">yarp::dev::CanBusMotionControl::setPidReferencesRaw</a></div><div class="ttdeci">virtual bool setPidReferencesRaw(const PidControlTypeEnum &amp;pidtype, const double *refs) override</div><div class="ttdoc">cmd is an array of double (LATER: to be optimized).</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l04812">CanBusMotionControl.cpp:4812</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a9f68e24ec7c34b3c12a7a534929ca6a9"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a9f68e24ec7c34b3c12a7a534929ca6a9">yarp::dev::CanBusMotionControl::setPidRaw</a></div><div class="ttdeci">virtual bool setPidRaw(const PidControlTypeEnum &amp;pidtype, int j, const Pid &amp;pid) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l04293">CanBusMotionControl.cpp:4293</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_a9fdde85f4719086043eb7132a26a6eb6"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#a9fdde85f4719086043eb7132a26a6eb6">yarp::dev::CanBusMotionControl::_last_position_move_time</a></div><div class="ttdeci">double * _last_position_move_time</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l01178">CanBusMotionControl.h:1178</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_aa01b48069f592569a91293308853c3a0"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa01b48069f592569a91293308853c3a0">yarp::dev::CanBusMotionControl::setPeakCurrentRaw</a></div><div class="ttdeci">virtual bool setPeakCurrentRaw(int m, const double val) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06354">CanBusMotionControl.cpp:6354</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_aa0a2b4f0b4ccbaeb30f396c1df211e9e"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa0a2b4f0b4ccbaeb30f396c1df211e9e">yarp::dev::CanBusMotionControl::_writerequested</a></div><div class="ttdeci">bool _writerequested</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l01122">CanBusMotionControl.h:1122</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_aa166e4acc7fcdb65672b19c12e00d1d2"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa166e4acc7fcdb65672b19c12e00d1d2">yarp::dev::CanBusMotionControl::system_resources</a></div><div class="ttdeci">void * system_resources</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l01118">CanBusMotionControl.h:1118</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_aa174e460ecec714071cc563626c06b6b"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa174e460ecec714071cc563626c06b6b">yarp::dev::CanBusMotionControl::setLimitsRaw</a></div><div class="ttdeci">virtual bool setLimitsRaw(int axis, double min, double max) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06476">CanBusMotionControl.cpp:6476</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_aa21418ca3d7f90d67e06b17fbf3b77f3"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa21418ca3d7f90d67e06b17fbf3b77f3">yarp::dev::CanBusMotionControl::getFirmwareVersionRaw</a></div><div class="ttdeci">virtual bool getFirmwareVersionRaw(int axis, can_protocol_info const &amp;icub_interface_protocol, firmware_info *info)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l05193">CanBusMotionControl.cpp:5193</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_aa3467a610690ac610627aeb3e6f08785"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa3467a610690ac610627aeb3e6f08785">yarp::dev::CanBusMotionControl::getTemperatureRaw</a></div><div class="ttdeci">virtual bool getTemperatureRaw(int m, double *val) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06329">CanBusMotionControl.cpp:6329</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_aa4457fe900182176aad57756c9b411f0"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa4457fe900182176aad57756c9b411f0">yarp::dev::CanBusMotionControl::getDutyCycleRaw</a></div><div class="ttdeci">virtual bool getDutyCycleRaw(int j, double *v) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l07485">CanBusMotionControl.cpp:7485</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_aa6881bd76bad201475623452a0f060f0"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa6881bd76bad201475623452a0f060f0">yarp::dev::CanBusMotionControl::relativeMoveRaw</a></div><div class="ttdeci">virtual bool relativeMoveRaw(int j, double delta) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l05512">CanBusMotionControl.cpp:5512</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_aa6958d7c7dd77d9733631fa78e7ab270"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa6958d7c7dd77d9733631fa78e7ab270">yarp::dev::CanBusMotionControl::getNumberOfMotorsRaw</a></div><div class="ttdeci">virtual bool getNumberOfMotorsRaw(int *m) override</div><div class="ttdoc">IMotor.</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06208">CanBusMotionControl.cpp:6208</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_aa892a2a25975c1b8d9fc3ec03522cfa1"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#aa892a2a25975c1b8d9fc3ec03522cfa1">yarp::dev::CanBusMotionControl::_ref_speeds</a></div><div class="ttdeci">double * _ref_speeds</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l01169">CanBusMotionControl.h:1169</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_aaa58a7981fab4acc421df6a31dd2efca"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#aaa58a7981fab4acc421df6a31dd2efca">yarp::dev::CanBusMotionControl::getDebugParameterRaw</a></div><div class="ttdeci">virtual bool getDebugParameterRaw(int j, unsigned int index, double *value)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l05119">CanBusMotionControl.cpp:5119</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_aaccf3a08e17f1af3278713baf0ddb0d9"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#aaccf3a08e17f1af3278713baf0ddb0d9">yarp::dev::CanBusMotionControl::getRefDutyCycleRaw</a></div><div class="ttdeci">virtual bool getRefDutyCycleRaw(int j, double *v) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l07457">CanBusMotionControl.cpp:7457</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_aadac75213b34aa68903c3e89af8f6769"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#aadac75213b34aa68903c3e89af8f6769">yarp::dev::CanBusMotionControl::getMaxCurrentRaw</a></div><div class="ttdeci">virtual bool getMaxCurrentRaw(int j, double *val) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06307">CanBusMotionControl.cpp:6307</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_aadc14355889d5bee0c5c70de24f2caf1"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#aadc14355889d5bee0c5c70de24f2caf1">yarp::dev::CanBusMotionControl::_filter</a></div><div class="ttdeci">int _filter</div><div class="ttdoc">filter for recurrent messages.</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l01130">CanBusMotionControl.h:1130</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_ab0670384c9bc64fcd5cc96a61352e5d3"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#ab0670384c9bc64fcd5cc96a61352e5d3">yarp::dev::CanBusMotionControl::getRefDutyCyclesRaw</a></div><div class="ttdeci">virtual bool getRefDutyCyclesRaw(double *v) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l07472">CanBusMotionControl.cpp:7472</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_ab1fbba311bcc423521d94de59ab3318d"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#ab1fbba311bcc423521d94de59ab3318d">yarp::dev::CanBusMotionControl::isPidEnabledRaw</a></div><div class="ttdeci">virtual bool isPidEnabledRaw(const PidControlTypeEnum &amp;pidtype, int j, bool *enabled)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06711">CanBusMotionControl.cpp:6711</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_ab380747605ad8dd73338cd2dce39a2ab"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#ab380747605ad8dd73338cd2dce39a2ab">yarp::dev::CanBusMotionControl::getMotorTorqueParamsRaw</a></div><div class="ttdeci">virtual bool getMotorTorqueParamsRaw(int j, MotorTorqueParameters *params) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l05782">CanBusMotionControl.cpp:5782</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_ab3fe4733ea9b51882ec4561619d08aea"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#ab3fe4733ea9b51882ec4561619d08aea">yarp::dev::CanBusMotionControl::getMotorEncodersRaw</a></div><div class="ttdeci">virtual bool getMotorEncodersRaw(double *encs) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06131">CanBusMotionControl.cpp:6131</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_ab620c4dd901f6e1e1d3e68240f3f5d0f"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#ab620c4dd901f6e1e1d3e68240f3f5d0f">yarp::dev::CanBusMotionControl::setRefDutyCyclesRaw</a></div><div class="ttdeci">virtual bool setRefDutyCyclesRaw(const double *v) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l07444">CanBusMotionControl.cpp:7444</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_ab69427e35b91b6a76c2c75d2467c17b5"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#ab69427e35b91b6a76c2c75d2467c17b5">yarp::dev::CanBusMotionControl::getMotorEncoderSpeedsRaw</a></div><div class="ttdeci">virtual bool getMotorEncoderSpeedsRaw(double *spds) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06215">CanBusMotionControl.cpp:6215</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_ab77e86fff33c35b8f61dc18315966602"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#ab77e86fff33c35b8f61dc18315966602">yarp::dev::CanBusMotionControl::getRefAccelerationsRaw</a></div><div class="ttdeci">virtual bool getRefAccelerationsRaw(double *accs) override</div><div class="ttdoc">cmd is an array of double (LATER: to be optimized).</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l05705">CanBusMotionControl.cpp:5705</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_ab8b40537c6f99b99c3a6b87784394de9"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#ab8b40537c6f99b99c3a6b87784394de9">yarp::dev::CanBusMotionControl::getMotorEncoderCountsPerRevolutionRaw</a></div><div class="ttdeci">virtual bool getMotorEncoderCountsPerRevolutionRaw(int m, double *cpr) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06191">CanBusMotionControl.cpp:6191</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_ab9883108643d2bf367239e7d7e1d3d08"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#ab9883108643d2bf367239e7d7e1d3d08">yarp::dev::CanBusMotionControl::velocityMoveRaw</a></div><div class="ttdeci">virtual bool velocityMoveRaw(int j, double sp) override</div><div class="ttdoc">Velocity control interface raw.</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l05919">CanBusMotionControl.cpp:5919</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_abbc6d69a556c4c7dce9cb49249f122ed"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#abbc6d69a556c4c7dce9cb49249f122ed">yarp::dev::CanBusMotionControl::setVelocityShiftRaw</a></div><div class="ttdeci">bool setVelocityShiftRaw(int j, double val)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06321">CanBusMotionControl.cpp:6321</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_abc0ee2abe55ebb081094106e63db584c"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#abc0ee2abe55ebb081094106e63db584c">yarp::dev::CanBusMotionControl::setFilterTypeRaw</a></div><div class="ttdeci">bool setFilterTypeRaw(int j, int type)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l05854">CanBusMotionControl.cpp:5854</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_abc6148aa0f69586ad3ddbfea4fcd9771"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#abc6148aa0f69586ad3ddbfea4fcd9771">yarp::dev::CanBusMotionControl::_ref_positions</a></div><div class="ttdeci">double * _ref_positions</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l01174">CanBusMotionControl.h:1174</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_abe49eae6376553508886ff721da9b23f"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#abe49eae6376553508886ff721da9b23f">yarp::dev::CanBusMotionControl::getPidsRaw</a></div><div class="ttdeci">virtual bool getPidsRaw(const PidControlTypeEnum &amp;pidtype, Pid *pids) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l04588">CanBusMotionControl.cpp:4588</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_abe9ae05191a1daf39f64829e7704bece"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#abe9ae05191a1daf39f64829e7704bece">yarp::dev::CanBusMotionControl::_ref_torques</a></div><div class="ttdeci">double * _ref_torques</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l01172">CanBusMotionControl.h:1172</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_ac072c8d4077289a7a4defba390c20065"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#ac072c8d4077289a7a4defba390c20065">yarp::dev::CanBusMotionControl::getPeakCurrentRaw</a></div><div class="ttdeci">virtual bool getPeakCurrentRaw(int m, double *val) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06349">CanBusMotionControl.cpp:6349</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_ac07fc3ea7235575023fa2f818a31ce79"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#ac07fc3ea7235575023fa2f818a31ce79">yarp::dev::CanBusMotionControl::getTargetPositionsRaw</a></div><div class="ttdeci">virtual bool getTargetPositionsRaw(double *refs) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l04970">CanBusMotionControl.cpp:4970</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_ac18e9c911763b7adb7c64639bb4c8b39"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#ac18e9c911763b7adb7c64639bb4c8b39">yarp::dev::CanBusMotionControl::setVelocityTimeoutRaw</a></div><div class="ttdeci">bool setVelocityTimeoutRaw(int j, double val)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06416">CanBusMotionControl.cpp:6416</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_ac2df9083b7693c20112789bbe9234f71"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#ac2df9083b7693c20112789bbe9234f71">yarp::dev::CanBusMotionControl::resetEncoderRaw</a></div><div class="ttdeci">virtual bool resetEncoderRaw(int j) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06001">CanBusMotionControl.cpp:6001</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_ac32d488241bd47a8491154d5afec3060"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#ac32d488241bd47a8491154d5afec3060">yarp::dev::CanBusMotionControl::getRemoteVariablesListRaw</a></div><div class="ttdeci">virtual bool getRemoteVariablesListRaw(yarp::os::Bottle *listOfKeys) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l04138">CanBusMotionControl.cpp:4138</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_ac487a396bb662ac59bf498fe32ef1c37"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#ac487a396bb662ac59bf498fe32ef1c37">yarp::dev::CanBusMotionControl::setCalibrationParametersRaw</a></div><div class="ttdeci">virtual bool setCalibrationParametersRaw(int j, const CalibrationParameters &amp;params) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l05614">CanBusMotionControl.cpp:5614</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_ac5959a536ae829d502b0ebe3873ea6c1"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#ac5959a536ae829d502b0ebe3873ea6c1">yarp::dev::CanBusMotionControl::helper_setVelPidRaw</a></div><div class="ttdeci">bool helper_setVelPidRaw(int j, const Pid &amp;pid)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06622">CanBusMotionControl.cpp:6622</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_ac71b1f64e2f1192cf1e60f01117806b0"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#ac71b1f64e2f1192cf1e60f01117806b0">yarp::dev::CanBusMotionControl::setSpeedEstimatorShiftRaw</a></div><div class="ttdeci">bool setSpeedEstimatorShiftRaw(int j, double jnt_speed, double jnt_acc, double mot_speed, double mot_acc)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06398">CanBusMotionControl.cpp:6398</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_ac77b8c41b69bd9fc8b357c8af8f16fda"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#ac77b8c41b69bd9fc8b357c8af8f16fda">yarp::dev::CanBusMotionControl::setRefTorqueRaw</a></div><div class="ttdeci">virtual bool setRefTorqueRaw(int j, double ref_trq) override</div><div class="ttdoc">cmd is a SingleAxis poitner with 1 double arg</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l04828">CanBusMotionControl.cpp:4828</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_aca4bb6d1007e82920e3647a00321f998"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#aca4bb6d1007e82920e3647a00321f998">yarp::dev::CanBusMotionControl::setControlModeRaw</a></div><div class="ttdeci">virtual bool setControlModeRaw(const int j, const int mode) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l04057">CanBusMotionControl.cpp:4057</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_acb562cd6f8c00ca3e0bbb1f716093131"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#acb562cd6f8c00ca3e0bbb1f716093131">yarp::dev::CanBusMotionControl::_ref_command_speeds</a></div><div class="ttdeci">double * _ref_command_speeds</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l01170">CanBusMotionControl.h:1170</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_ace239ebe508b3562b18091abf552833a"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#ace239ebe508b3562b18091abf552833a">yarp::dev::CanBusMotionControl::getParameterRaw</a></div><div class="ttdeci">virtual bool getParameterRaw(int j, unsigned int type, double *value)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l05062">CanBusMotionControl.cpp:5062</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_acfd878d2d3ffed1c9e3d5375bb36eec5"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#acfd878d2d3ffed1c9e3d5375bb36eec5">yarp::dev::CanBusMotionControl::getPWMRaw</a></div><div class="ttdeci">virtual bool getPWMRaw(int j, double *val) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06369">CanBusMotionControl.cpp:6369</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_acfe73ef88e6f12e63c152e63f943fb09"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#acfe73ef88e6f12e63c152e63f943fb09">yarp::dev::CanBusMotionControl::_writeByte8</a></div><div class="ttdeci">bool _writeByte8(int msg, int axis, int value)</div><div class="ttdoc">write a byte</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06816">CanBusMotionControl.cpp:6816</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_ad26e63d069d56c37db49786881c90bd2"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#ad26e63d069d56c37db49786881c90bd2">yarp::dev::CanBusMotionControl::setDebugParameterRaw</a></div><div class="ttdeci">virtual bool setDebugParameterRaw(int j, unsigned int index, double value)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l05382">CanBusMotionControl.cpp:5382</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_ad3b095127494a1b493e19c9e68e032ea"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#ad3b095127494a1b493e19c9e68e032ea">yarp::dev::CanBusMotionControl::getAmpStatusRaw</a></div><div class="ttdeci">virtual bool getAmpStatusRaw(int *st) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06450">CanBusMotionControl.cpp:6450</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_ad6effdecfeccf6d39f5f2f577115c38b"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#ad6effdecfeccf6d39f5f2f577115c38b">yarp::dev::CanBusMotionControl::getRefTorquesRaw</a></div><div class="ttdeci">virtual bool getRefTorquesRaw(double *ref_trqs) override</div><div class="ttdoc">cmd is an array of double (LATER: to be optimized).</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l05745">CanBusMotionControl.cpp:5745</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_ad755610d67121248660e90f5f0a42999"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#ad755610d67121248660e90f5f0a42999">yarp::dev::CanBusMotionControl::getPidOutputsRaw</a></div><div class="ttdeci">virtual bool getPidOutputsRaw(const PidControlTypeEnum &amp;pidtype, double *outs) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l05438">CanBusMotionControl.cpp:5438</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_ad85fd01bf9bf0f346d222435d038d893"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#ad85fd01bf9bf0f346d222435d038d893">yarp::dev::CanBusMotionControl::getPidErrorRaw</a></div><div class="ttdeci">virtual bool getPidErrorRaw(const PidControlTypeEnum &amp;pidtype, int j, double *err) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l04933">CanBusMotionControl.cpp:4933</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_ad8edcd7ce7c101e2fec93d36a674a706"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#ad8edcd7ce7c101e2fec93d36a674a706">yarp::dev::CanBusMotionControl::setRemoteVariableRaw</a></div><div class="ttdeci">virtual bool setRemoteVariableRaw(std::string key, const yarp::os::Bottle &amp;val) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l04164">CanBusMotionControl.cpp:4164</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_ad947172b9a8d2b73de893cdc41224af2"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#ad947172b9a8d2b73de893cdc41224af2">yarp::dev::CanBusMotionControl::setRefAccelerationsRaw</a></div><div class="ttdeci">virtual bool setRefAccelerationsRaw(const double *accs) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l05658">CanBusMotionControl.cpp:5658</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_ad9759a858596ced17882d868059cee1f"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#ad9759a858596ced17882d868059cee1f">yarp::dev::CanBusMotionControl::getRefPositionRaw</a></div><div class="ttdeci">virtual bool getRefPositionRaw(const int joint, double *ref) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l05022">CanBusMotionControl.cpp:5022</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_adca5112eb82f000d352c59fda6e94440"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#adca5112eb82f000d352c59fda6e94440">yarp::dev::CanBusMotionControl::getPidReferenceRaw</a></div><div class="ttdeci">virtual bool getPidReferenceRaw(const PidControlTypeEnum &amp;pidtype, int j, double *ref) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l05274">CanBusMotionControl.cpp:5274</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_addea91884851d7b29d70049b11ca128f"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#addea91884851d7b29d70049b11ca128f">yarp::dev::CanBusMotionControl::helper_getCurPidRaw</a></div><div class="ttdeci">bool helper_getCurPidRaw(int j, Pid *pid)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06616">CanBusMotionControl.cpp:6616</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_adfc3233779afe865fd7c3eb8b527273b"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#adfc3233779afe865fd7c3eb8b527273b">yarp::dev::CanBusMotionControl::_opened</a></div><div class="ttdeci">bool _opened</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l01124">CanBusMotionControl.h:1124</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_ae2889234f938e7a9ca52abdc0a6a0e35"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#ae2889234f938e7a9ca52abdc0a6a0e35">yarp::dev::CanBusMotionControl::getImpedanceRaw</a></div><div class="ttdeci">virtual bool getImpedanceRaw(int j, double *stiff, double *damp) override</div><div class="ttdoc">IMPEDANCE CONTROL INTERFACE RAW.</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l04320">CanBusMotionControl.cpp:4320</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_ae670c17b8e8d56844cd15dbd17153abf"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#ae670c17b8e8d56844cd15dbd17153abf">yarp::dev::CanBusMotionControl::getPidErrorLimitsRaw</a></div><div class="ttdeci">virtual bool getPidErrorLimitsRaw(const PidControlTypeEnum &amp;pidtype, double *limits) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l05339">CanBusMotionControl.cpp:5339</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_ae6ad0f0f8abc5fcd9469978a25c22e7a"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#ae6ad0f0f8abc5fcd9469978a25c22e7a">yarp::dev::CanBusMotionControl::S_32</a></div><div class="ttdeci">int S_32(double x) const</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l01197">CanBusMotionControl.h:1197</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_ae7407df4c6b55bbe923fdfa5afb69c7f"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#ae7407df4c6b55bbe923fdfa5afb69c7f">yarp::dev::CanBusMotionControl::setRefSpeedRaw</a></div><div class="ttdeci">virtual bool setRefSpeedRaw(int j, double sp) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l05619">CanBusMotionControl.cpp:5619</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_ae7548afd722f10263a27471e2f797289"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#ae7548afd722f10263a27471e2f797289">yarp::dev::CanBusMotionControl::getTorqueRaw</a></div><div class="ttdeci">virtual bool getTorqueRaw(int j, double *trq) override</div><div class="ttdoc">cmd is a SingleAxis pointer with 1 double arg</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l04849">CanBusMotionControl.cpp:4849</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_ae7d41075196d8f415a4dbde0ac84aed7"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#ae7d41075196d8f415a4dbde0ac84aed7">yarp::dev::CanBusMotionControl::resetMotorEncoderRaw</a></div><div class="ttdeci">virtual bool resetMotorEncoderRaw(int m) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06121">CanBusMotionControl.cpp:6121</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_ae7e725d08c542ce4a21f23d834984379"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#ae7e725d08c542ce4a21f23d834984379">yarp::dev::CanBusMotionControl::_ref_accs</a></div><div class="ttdeci">double * _ref_accs</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l01171">CanBusMotionControl.h:1171</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_aeb1b3151a9ae48f4f380360091533945"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#aeb1b3151a9ae48f4f380360091533945">yarp::dev::CanBusMotionControl::getDebugReferencePositionRaw</a></div><div class="ttdeci">virtual bool getDebugReferencePositionRaw(int j, double *value)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l05178">CanBusMotionControl.cpp:5178</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_aebf315644fb4a7ed908b2cd64cc30caf"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#aebf315644fb4a7ed908b2cd64cc30caf">yarp::dev::CanBusMotionControl::getTemperaturesRaw</a></div><div class="ttdeci">virtual bool getTemperaturesRaw(double *vals) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06334">CanBusMotionControl.cpp:6334</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_aec47204c6542b23914f2e0ac120fc0ca"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#aec47204c6542b23914f2e0ac120fc0ca">yarp::dev::CanBusMotionControl::_MCtorqueControlEnabled</a></div><div class="ttdeci">bool _MCtorqueControlEnabled</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l01176">CanBusMotionControl.h:1176</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_aec9e9f394703224e97edbee245c7c405"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#aec9e9f394703224e97edbee245c7c405">yarp::dev::CanBusMotionControl::setEncodersRaw</a></div><div class="ttdeci">virtual bool setEncodersRaw(const double *vals) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l05987">CanBusMotionControl.cpp:5987</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_aee1771fee1454527b31eeabc3388141e"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#aee1771fee1454527b31eeabc3388141e">yarp::dev::CanBusMotionControl::getEncoderSpeedRaw</a></div><div class="ttdeci">virtual bool getEncoderSpeedRaw(int j, double *sp) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06070">CanBusMotionControl.cpp:6070</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_aee1b5836c505d87a94a82d460e67216e"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#aee1b5836c505d87a94a82d460e67216e">yarp::dev::CanBusMotionControl::disablePidRaw</a></div><div class="ttdeci">virtual bool disablePidRaw(const PidControlTypeEnum &amp;pidtype, int j) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l05448">CanBusMotionControl.cpp:5448</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_af06842e3a7356d29441d0f00f773d1be"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#af06842e3a7356d29441d0f00f773d1be">yarp::dev::CanBusMotionControl::getTorquesRaw</a></div><div class="ttdeci">virtual bool getTorquesRaw(double *trqs) override</div><div class="ttdoc">cmd is an array of double (LATER: to be optimized).</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l04879">CanBusMotionControl.cpp:4879</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_af0a19ea62af20604ad5068e6d471652c"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#af0a19ea62af20604ad5068e6d471652c">yarp::dev::CanBusMotionControl::setMotorTorqueParamsRaw</a></div><div class="ttdeci">virtual bool setMotorTorqueParamsRaw(int j, const MotorTorqueParameters params) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l05873">CanBusMotionControl.cpp:5873</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_af253e0caf312fc039e6a22f2b91b00dd"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#af253e0caf312fc039e6a22f2b91b00dd">yarp::dev::CanBusMotionControl::resetPidRaw</a></div><div class="ttdeci">virtual bool resetPidRaw(const PidControlTypeEnum &amp;pidtype, int j) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l05354">CanBusMotionControl.cpp:5354</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_af5c46d06259093d928674e21ad8e26b1"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#af5c46d06259093d928674e21ad8e26b1">yarp::dev::CanBusMotionControl::setRefDutyCycleRaw</a></div><div class="ttdeci">virtual bool setRefDutyCycleRaw(int j, double v) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l07436">CanBusMotionControl.cpp:7436</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_af5c4f789e8b29d4a63d538b48fc9cd77"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#af5c4f789e8b29d4a63d538b48fc9cd77">yarp::dev::CanBusMotionControl::S_16</a></div><div class="ttdeci">short S_16(double x) const</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l01183">CanBusMotionControl.h:1183</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_af791f726f8ee2ed45e43cb1813d5f444"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#af791f726f8ee2ed45e43cb1813d5f444">yarp::dev::CanBusMotionControl::getPidErrorLimitRaw</a></div><div class="ttdeci">virtual bool getPidErrorLimitRaw(const PidControlTypeEnum &amp;pidtype, int j, double *limit) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l05334">CanBusMotionControl.cpp:5334</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_af7c58d6043fc6a82e3a8b3e80c92a194"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#af7c58d6043fc6a82e3a8b3e80c92a194">yarp::dev::CanBusMotionControl::setPidsRaw</a></div><div class="ttdeci">virtual bool setPidsRaw(const PidControlTypeEnum &amp;pidtype, const Pid *pids) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l04791">CanBusMotionControl.cpp:4791</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_afa9e0f8809718c951eee334a7a6a350d"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#afa9e0f8809718c951eee334a7a6a350d">yarp::dev::CanBusMotionControl::enableAmpRaw</a></div><div class="ttdeci">virtual bool enableAmpRaw(int j) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06268">CanBusMotionControl.cpp:6268</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_afcffd07a1f94b6f8203ed4e332bc5a1c"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#afcffd07a1f94b6f8203ed4e332bc5a1c">yarp::dev::CanBusMotionControl::threadRelease</a></div><div class="ttdeci">virtual void threadRelease()</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l03470">CanBusMotionControl.cpp:3470</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_afd2de980685371cebfa860de6afe6094"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#afd2de980685371cebfa860de6afe6094">yarp::dev::CanBusMotionControl::getRefSpeedRaw</a></div><div class="ttdeci">virtual bool getRefSpeedRaw(int j, double *ref) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l05695">CanBusMotionControl.cpp:5695</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_aff2fed3fa7ee5608b184114d47fd252b"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#aff2fed3fa7ee5608b184114d47fd252b">yarp::dev::CanBusMotionControl::setNominalCurrentRaw</a></div><div class="ttdeci">virtual bool setNominalCurrentRaw(int m, const double val) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06364">CanBusMotionControl.cpp:6364</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1CanBusMotionControl_html_aff346c382fd5cf57f33a3a3f5d4d9585"><div class="ttname"><a href="classyarp_1_1dev_1_1CanBusMotionControl.html#aff346c382fd5cf57f33a3a3f5d4d9585">yarp::dev::CanBusMotionControl::getMotorEncoderAccelerationsRaw</a></div><div class="ttdeci">virtual bool getMotorEncoderAccelerationsRaw(double *accs) override</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l06238">CanBusMotionControl.cpp:6238</a></div></div>
<div class="ttc" id="acompute__ekf__fast_8m_html_a08a4415e9d594ff960030b921d42b91e"><div class="ttname"><a href="compute__ekf__fast_8m.html#a08a4415e9d594ff960030b921d42b91e">e</a></div><div class="ttdeci">e</div><div class="ttdef"><b>Definition:</b> <a href="compute__ekf__fast_8m_source.html#l00013">compute_ekf_fast.m:13</a></div></div>
<div class="ttc" id="acompute__ekf__sym_8m_html_a633de4b0c14ca52ea2432a3c8a5c4c31"><div class="ttname"><a href="compute__ekf__sym_8m.html#a633de4b0c14ca52ea2432a3c8a5c4c31">f</a></div><div class="ttdeci">f</div><div class="ttdef"><b>Definition:</b> <a href="compute__ekf__sym_8m_source.html#l00022">compute_ekf_sym.m:22</a></div></div>
<div class="ttc" id="adataTypes_8h_html_ae0191316140fce1e08c6f21b0a2dbf0a"><div class="ttname"><a href="dataTypes_8h.html#ae0191316140fce1e08c6f21b0a2dbf0a">acc</a></div><div class="ttdeci">_3f_vect_t acc</div><div class="ttdef"><b>Definition:</b> <a href="dataTypes_8h_source.html#l00001">dataTypes.h:1</a></div></div>
<div class="ttc" id="adebugFunctions_8cpp_html_a76f11d9a0a47b94f72c2d0e77fb32240"><div class="ttname"><a href="debugFunctions_8cpp.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a></div><div class="ttdeci">int n</div><div class="ttdef"><b>Definition:</b> <a href="debugFunctions_8cpp_source.html#l00058">debugFunctions.cpp:58</a></div></div>
<div class="ttc" id="aicub-main_2src_2tools_2simpleClient_2main_8cpp_html_aac40ef34e7573177f3e908c5195594a6"><div class="ttname"><a href="icub-main_2src_2tools_2simpleClient_2main_8cpp.html#aac40ef34e7573177f3e908c5195594a6">jnts</a></div><div class="ttdeci">int jnts</div><div class="ttdef"><b>Definition:</b> <a href="icub-main_2src_2tools_2simpleClient_2main_8cpp_source.html#l00060">main.cpp:60</a></div></div>
<div class="ttc" id="amessages_8h_html"><div class="ttname"><a href="messages_8h.html">messages.h</a></div></div>
<div class="ttc" id="amessages_8h_html_a7dfd6f43d4b01f7caf21fb9e7e1d9d92"><div class="ttname"><a href="messages_8h.html#a7dfd6f43d4b01f7caf21fb9e7e1d9d92">CAN_PROTOCOL_MAJOR</a></div><div class="ttdeci">#define CAN_PROTOCOL_MAJOR</div><div class="ttdef"><b>Definition:</b> <a href="messages_8h_source.html#l00022">messages.h:22</a></div></div>
<div class="ttc" id="amessages_8h_html_aa4e0fb76e6db031b8d60d1fa69ce935b"><div class="ttname"><a href="messages_8h.html#aa4e0fb76e6db031b8d60d1fa69ce935b">CAN_PROTOCOL_MINOR</a></div><div class="ttdeci">#define CAN_PROTOCOL_MINOR</div><div class="ttdef"><b>Definition:</b> <a href="messages_8h_source.html#l00023">messages.h:23</a></div></div>
<div class="ttc" id="amessages_8h_html_aa9a5f8926fc20e7cb83a1851031303af"><div class="ttname"><a href="messages_8h.html#aa9a5f8926fc20e7cb83a1851031303af">CAN_BCAST_NONE</a></div><div class="ttdeci">#define CAN_BCAST_NONE</div><div class="ttdef"><b>Definition:</b> <a href="messages_8h_source.html#l00183">messages.h:183</a></div></div>
<div class="ttc" id="amessages_8h_html_af11175c0bac91604d8a95f63342d207d"><div class="ttname"><a href="messages_8h.html#af11175c0bac91604d8a95f63342d207d">CAN_SET_INTERACTION_MODE</a></div><div class="ttdeci">#define CAN_SET_INTERACTION_MODE</div><div class="ttdef"><b>Definition:</b> <a href="messages_8h_source.html#l00166">messages.h:166</a></div></div>
<div class="ttc" id="amodules_2iKinGazeCtrl_2include_2iCub_2utils_8h_html_ac5ed384388ea1d12d65a38b44870351c"><div class="ttname"><a href="modules_2iKinGazeCtrl_2include_2iCub_2utils_8h.html#ac5ed384388ea1d12d65a38b44870351c">sat</a></div><div class="ttdeci">double sat(const double val, const double min, const double max)</div><div class="ttdef"><b>Definition:</b> <a href="modules_2iKinGazeCtrl_2include_2iCub_2utils_8h_source.html#l00183">utils.h:183</a></div></div>
<div class="ttc" id="anamespaceeth_1_1parser_html_a8ec58da625146082584ad1a365bdd0e5"><div class="ttname"><a href="namespaceeth_1_1parser.html#a8ec58da625146082584ad1a365bdd0e5">eth::parser::read</a></div><div class="ttdeci">bool read(yarp::os::Searchable &amp;cfgtotal, pc104Data &amp;pc104data)</div><div class="ttdef"><b>Definition:</b> <a href="ethParser_8cpp_source.html#l00092">ethParser.cpp:92</a></div></div>
<div class="ttc" id="anamespaceiCub_1_1action_1_1log_html_a4ba5ea132464d0ea49d618130163c769a432470a52cfded222c35744229d1069e"><div class="ttname"><a href="namespaceiCub_1_1action_1_1log.html#a4ba5ea132464d0ea49d618130163c769a432470a52cfded222c35744229d1069e">iCub::action::log::info</a></div><div class="ttdeci">@ info</div><div class="ttdef"><b>Definition:</b> <a href="actionPrimitives_8cpp_source.html#l00066">actionPrimitives.cpp:66</a></div></div>
<div class="ttc" id="anamespacepython-motor-control_html_aa48897549d21fee7c0824a33753804e2"><div class="ttname"><a href="namespacepython-motor-control.html#aa48897549d21fee7c0824a33753804e2">python-motor-control.tmp</a></div><div class="ttdeci">tmp</div><div class="ttdef"><b>Definition:</b> <a href="python-motor-control_8py_source.html#l00043">python-motor-control.py:43</a></div></div>
<div class="ttc" id="anamespacestrain_1_1dsp_1_1fsc_html_a65804363dbaa9346e53442cb1bb9d73f"><div class="ttname"><a href="namespacestrain_1_1dsp_1_1fsc.html#a65804363dbaa9346e53442cb1bb9d73f">strain::dsp::fsc::max</a></div><div class="ttdeci">const FSC max</div><div class="ttdef"><b>Definition:</b> <a href="strain_8h_source.html#l00048">strain.h:48</a></div></div>
<div class="ttc" id="anamespacestrain_1_1dsp_1_1fsc_html_a746ce6f9a14034939607ccead53e3fd6"><div class="ttname"><a href="namespacestrain_1_1dsp_1_1fsc.html#a746ce6f9a14034939607ccead53e3fd6">strain::dsp::fsc::min</a></div><div class="ttdeci">const FSC min</div><div class="ttdef"><b>Definition:</b> <a href="strain_8h_source.html#l00049">strain.h:49</a></div></div>
<div class="ttc" id="anamespacestrain_1_1dsp_1_1q15_html_aa01560d9326d2e80b2f9030422dc4671"><div class="ttname"><a href="namespacestrain_1_1dsp_1_1q15.html#aa01560d9326d2e80b2f9030422dc4671">strain::dsp::q15::zero</a></div><div class="ttdeci">const Q15 zero</div><div class="ttdef"><b>Definition:</b> <a href="strain_8h_source.html#l00067">strain.h:67</a></div></div>
<div class="ttc" id="anamespaceyarp_1_1dev_html"><div class="ttname"><a href="namespaceyarp_1_1dev.html">yarp::dev</a></div><div class="ttdef"><b>Definition:</b> <a href="DebugInterfaces_8h_source.html#l00052">DebugInterfaces.h:52</a></div></div>
<div class="ttc" id="anamespaceyarp_html"><div class="ttname"><a href="namespaceyarp.html">yarp</a></div><div class="ttdoc">Copyright (C) 2008 RobotCub Consortium.</div><div class="ttdef"><b>Definition:</b> <a href="DebugInterfaces_8h_source.html#l00051">DebugInterfaces.h:51</a></div></div>
<div class="ttc" id="ashow__eyes__axes_8m_html_ac483f6ce851c9ecd9fb835ff7551737c"><div class="ttname"><a href="show__eyes__axes_8m.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a></div><div class="ttdeci">p</div><div class="ttdef"><b>Definition:</b> <a href="show__eyes__axes_8m_source.html#l00023">show_eyes_axes.m:23</a></div></div>
<div class="ttc" id="asine_8m_html_a2a89187d8e8e8fba509ef9ab5f815d88"><div class="ttname"><a href="sine_8m.html#a2a89187d8e8e8fba509ef9ab5f815d88">out</a></div><div class="ttdeci">out</div><div class="ttdef"><b>Definition:</b> <a href="sine_8m_source.html#l00008">sine.m:8</a></div></div>
<div class="ttc" id="asine_8m_html_aaaa5252a687ef2d373ec966bbbf630ff"><div class="ttname"><a href="sine_8m.html#aaaa5252a687ef2d373ec966bbbf630ff">offset</a></div><div class="ttdeci">degrees offset</div><div class="ttdef"><b>Definition:</b> <a href="sine_8m_source.html#l00004">sine.m:4</a></div></div>
<div class="ttc" id="astructBCastElement_html"><div class="ttname"><a href="structBCastElement.html">BCastElement</a></div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00133">CanBusMotionControl.cpp:134</a></div></div>
<div class="ttc" id="astructBCastElement_html_a048622f3390102c83b081b8799ac97d1"><div class="ttname"><a href="structBCastElement.html#a048622f3390102c83b081b8799ac97d1">BCastElement::_value</a></div><div class="ttdeci">int _value</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00151">CanBusMotionControl.cpp:151</a></div></div>
<div class="ttc" id="astructBCastElement_html_a04a2aecb36f9d1147185e8ab760cbb82"><div class="ttname"><a href="structBCastElement.html#a04a2aecb36f9d1147185e8ab760cbb82">BCastElement::_accDt</a></div><div class="ttdeci">double _accDt</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00153">CanBusMotionControl.cpp:153</a></div></div>
<div class="ttc" id="astructBCastElement_html_a24717b8c836714d7a359e1cd75185b8e"><div class="ttname"><a href="structBCastElement.html#a24717b8c836714d7a359e1cd75185b8e">BCastElement::BCastElement</a></div><div class="ttdeci">BCastElement()</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00145">CanBusMotionControl.cpp:145</a></div></div>
<div class="ttc" id="astructBCastElement_html_a2ec4acf73f98aaf6c709719a1fe43eec"><div class="ttname"><a href="structBCastElement.html#a2ec4acf73f98aaf6c709719a1fe43eec">BCastElement::getStamp</a></div><div class="ttdeci">double getStamp()</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00201">CanBusMotionControl.cpp:201</a></div></div>
<div class="ttc" id="astructBCastElement_html_a42d310eeecd0c43db89e90639c860a32"><div class="ttname"><a href="structBCastElement.html#a42d310eeecd0c43db89e90639c860a32">BCastElement::update</a></div><div class="ttdeci">void update(int value)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00159">CanBusMotionControl.cpp:159</a></div></div>
<div class="ttc" id="astructBCastElement_html_a542a7240322286cf5437d16525ab05ca"><div class="ttname"><a href="structBCastElement.html#a542a7240322286cf5437d16525ab05ca">BCastElement::_count</a></div><div class="ttdeci">int _count</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00154">CanBusMotionControl.cpp:154</a></div></div>
<div class="ttc" id="astructBCastElement_html_a59eba3c5785458c26d3e7c0eb8259c54"><div class="ttname"><a href="structBCastElement.html#a59eba3c5785458c26d3e7c0eb8259c54">BCastElement::resetStats</a></div><div class="ttdeci">void resetStats()</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00135">CanBusMotionControl.cpp:135</a></div></div>
<div class="ttc" id="astructBCastElement_html_a7f4f4c0bd9562a75b18a5fd1de5fb0af"><div class="ttname"><a href="structBCastElement.html#a7f4f4c0bd9562a75b18a5fd1de5fb0af">BCastElement::_lastDt</a></div><div class="ttdeci">double _lastDt</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00157">CanBusMotionControl.cpp:157</a></div></div>
<div class="ttc" id="astructBCastElement_html_a81d75ca969cb217dedadfe466f598cf2"><div class="ttname"><a href="structBCastElement.html#a81d75ca969cb217dedadfe466f598cf2">BCastElement::update</a></div><div class="ttdeci">void update(int value, double st)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00186">CanBusMotionControl.cpp:186</a></div></div>
<div class="ttc" id="astructBCastElement_html_a85fe828a88a5b82705123c8191bf6ef5"><div class="ttname"><a href="structBCastElement.html#a85fe828a88a5b82705123c8191bf6ef5">BCastElement::getStats</a></div><div class="ttdeci">void getStats(int &amp;it, double &amp;dT, double &amp;min, double &amp;max)</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00165">CanBusMotionControl.cpp:165</a></div></div>
<div class="ttc" id="astructBCastElement_html_abe5b0e1af1d11df4b9e32bd1e43555fa"><div class="ttname"><a href="structBCastElement.html#abe5b0e1af1d11df4b9e32bd1e43555fa">BCastElement::_stamp</a></div><div class="ttdeci">double _stamp</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00152">CanBusMotionControl.cpp:152</a></div></div>
<div class="ttc" id="astructBCastElement_html_abefe5f97dc29a44d7bf89979da7a4a51"><div class="ttname"><a href="structBCastElement.html#abefe5f97dc29a44d7bf89979da7a4a51">BCastElement::_maxDt</a></div><div class="ttdeci">double _maxDt</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00155">CanBusMotionControl.cpp:155</a></div></div>
<div class="ttc" id="astructBCastElement_html_ad39b3393741de6762a40785c55b47813"><div class="ttname"><a href="structBCastElement.html#ad39b3393741de6762a40785c55b47813">BCastElement::getValue</a></div><div class="ttdeci">int getValue()</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00162">CanBusMotionControl.cpp:162</a></div></div>
<div class="ttc" id="astructBCastElement_html_af4ed0fbacb2f6ea80994dfcf6d9261b0"><div class="ttname"><a href="structBCastElement.html#af4ed0fbacb2f6ea80994dfcf6d9261b0">BCastElement::_minDt</a></div><div class="ttdeci">double _minDt</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8cpp_source.html#l00156">CanBusMotionControl.cpp:156</a></div></div>
<div class="ttc" id="astructCanRequest_html"><div class="ttname"><a href="structCanRequest.html">CanRequest</a></div><div class="ttdef"><b>Definition:</b> <a href="canControlUtils_8h_source.html#l00189">canControlUtils.h:190</a></div></div>
<div class="ttc" id="astructCanRequest_html_a1c10ddcc136851e57382d0377074ef56"><div class="ttname"><a href="structCanRequest.html#a1c10ddcc136851e57382d0377074ef56">CanRequest::threadId</a></div><div class="ttdeci">int threadId</div><div class="ttdef"><b>Definition:</b> <a href="canControlUtils_8h_source.html#l00193">canControlUtils.h:193</a></div></div>
<div class="ttc" id="astructCanRequest_html_a72199d25f1e5e66a6992f09fe9e00107"><div class="ttname"><a href="structCanRequest.html#a72199d25f1e5e66a6992f09fe9e00107">CanRequest::msg</a></div><div class="ttdeci">int msg</div><div class="ttdef"><b>Definition:</b> <a href="canControlUtils_8h_source.html#l00192">canControlUtils.h:192</a></div></div>
<div class="ttc" id="astructCanRequest_html_aa1f81c8b647dd2e97978188cb3adda8e"><div class="ttname"><a href="structCanRequest.html#aa1f81c8b647dd2e97978188cb3adda8e">CanRequest::joint</a></div><div class="ttdeci">int joint</div><div class="ttdef"><b>Definition:</b> <a href="canControlUtils_8h_source.html#l00191">canControlUtils.h:191</a></div></div>
<div class="ttc" id="astructImpedanceLimits_html"><div class="ttname"><a href="structImpedanceLimits.html">ImpedanceLimits</a></div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00056">CanBusMotionControl.h:57</a></div></div>
<div class="ttc" id="astructImpedanceLimits_html_a066ba871ffc15e8873754b147321e784"><div class="ttname"><a href="structImpedanceLimits.html#a066ba871ffc15e8873754b147321e784">ImpedanceLimits::min_damp</a></div><div class="ttdeci">double min_damp</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00060">CanBusMotionControl.h:60</a></div></div>
<div class="ttc" id="astructImpedanceLimits_html_a1fee7cb60090ea19af25da21defb155e"><div class="ttname"><a href="structImpedanceLimits.html#a1fee7cb60090ea19af25da21defb155e">ImpedanceLimits::param_a</a></div><div class="ttdeci">double param_a</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00062">CanBusMotionControl.h:62</a></div></div>
<div class="ttc" id="astructImpedanceLimits_html_a2af3b799c70d3752ef797ca1f9f5b894"><div class="ttname"><a href="structImpedanceLimits.html#a2af3b799c70d3752ef797ca1f9f5b894">ImpedanceLimits::param_c</a></div><div class="ttdeci">double param_c</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00064">CanBusMotionControl.h:64</a></div></div>
<div class="ttc" id="astructImpedanceLimits_html_a2e2485a171d0dc27f1789ecc4f462bb8"><div class="ttname"><a href="structImpedanceLimits.html#a2e2485a171d0dc27f1789ecc4f462bb8">ImpedanceLimits::param_b</a></div><div class="ttdeci">double param_b</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00063">CanBusMotionControl.h:63</a></div></div>
<div class="ttc" id="astructImpedanceLimits_html_a35624ecb07e5793336d4156a23e1083e"><div class="ttname"><a href="structImpedanceLimits.html#a35624ecb07e5793336d4156a23e1083e">ImpedanceLimits::max_stiff</a></div><div class="ttdeci">double max_stiff</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00059">CanBusMotionControl.h:59</a></div></div>
<div class="ttc" id="astructImpedanceLimits_html_a560c5bfd8bfecfc0afd6e7ab0277b568"><div class="ttname"><a href="structImpedanceLimits.html#a560c5bfd8bfecfc0afd6e7ab0277b568">ImpedanceLimits::max_damp</a></div><div class="ttdeci">double max_damp</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00061">CanBusMotionControl.h:61</a></div></div>
<div class="ttc" id="astructImpedanceLimits_html_a6a54ce5c7a144fae8cedd83c29ed1d5d"><div class="ttname"><a href="structImpedanceLimits.html#a6a54ce5c7a144fae8cedd83c29ed1d5d">ImpedanceLimits::get_max_stiff</a></div><div class="ttdeci">double get_max_stiff()</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00075">CanBusMotionControl.h:75</a></div></div>
<div class="ttc" id="astructImpedanceLimits_html_a7916265f2ed76e768ef5adc5985d9010"><div class="ttname"><a href="structImpedanceLimits.html#a7916265f2ed76e768ef5adc5985d9010">ImpedanceLimits::min_stiff</a></div><div class="ttdeci">double min_stiff</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00058">CanBusMotionControl.h:58</a></div></div>
<div class="ttc" id="astructImpedanceLimits_html_ab4db3ea93c199daa27701a24f53a88e7"><div class="ttname"><a href="structImpedanceLimits.html#ab4db3ea93c199daa27701a24f53a88e7">ImpedanceLimits::get_max_damp</a></div><div class="ttdeci">double get_max_damp()</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00077">CanBusMotionControl.h:77</a></div></div>
<div class="ttc" id="astructImpedanceLimits_html_acc59545ff476028fa1bfb8bafddbef46"><div class="ttname"><a href="structImpedanceLimits.html#acc59545ff476028fa1bfb8bafddbef46">ImpedanceLimits::get_min_stiff</a></div><div class="ttdeci">double get_min_stiff()</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00074">CanBusMotionControl.h:74</a></div></div>
<div class="ttc" id="astructImpedanceLimits_html_af6ca2b2a2af0885abf824f7baf8cff56"><div class="ttname"><a href="structImpedanceLimits.html#af6ca2b2a2af0885abf824f7baf8cff56">ImpedanceLimits::get_min_damp</a></div><div class="ttdeci">double get_min_damp()</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00076">CanBusMotionControl.h:76</a></div></div>
<div class="ttc" id="astructSpeedEstimationParameters_html"><div class="ttname"><a href="structSpeedEstimationParameters.html">SpeedEstimationParameters</a></div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00040">CanBusMotionControl.h:41</a></div></div>
<div class="ttc" id="astructSpeedEstimationParameters_html_a41921b59d93b2adb33b9e4746a02d273"><div class="ttname"><a href="structSpeedEstimationParameters.html#a41921b59d93b2adb33b9e4746a02d273">SpeedEstimationParameters::jnt_Vel_estimator_shift</a></div><div class="ttdeci">double jnt_Vel_estimator_shift</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00042">CanBusMotionControl.h:42</a></div></div>
<div class="ttc" id="astructSpeedEstimationParameters_html_a89b69c29d7642ee7d5aa4c9080d9a8fe"><div class="ttname"><a href="structSpeedEstimationParameters.html#a89b69c29d7642ee7d5aa4c9080d9a8fe">SpeedEstimationParameters::mot_Acc_estimator_shift</a></div><div class="ttdeci">double mot_Acc_estimator_shift</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00045">CanBusMotionControl.h:45</a></div></div>
<div class="ttc" id="astructSpeedEstimationParameters_html_a8ca61687daf50b0654e6609825e43820"><div class="ttname"><a href="structSpeedEstimationParameters.html#a8ca61687daf50b0654e6609825e43820">SpeedEstimationParameters::mot_Vel_estimator_shift</a></div><div class="ttdeci">double mot_Vel_estimator_shift</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00044">CanBusMotionControl.h:44</a></div></div>
<div class="ttc" id="astructSpeedEstimationParameters_html_afdbee7f31bfb779d001f2da46f53963c"><div class="ttname"><a href="structSpeedEstimationParameters.html#afdbee7f31bfb779d001f2da46f53963c">SpeedEstimationParameters::jnt_Acc_estimator_shift</a></div><div class="ttdeci">double jnt_Acc_estimator_shift</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00043">CanBusMotionControl.h:43</a></div></div>
<div class="ttc" id="astructcan__protocol__info_html"><div class="ttname"><a href="structcan__protocol__info.html">can_protocol_info</a></div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00374">CanBusMotionControl.h:375</a></div></div>
<div class="ttc" id="astructcan__protocol__info_html_a128ed1b70a1b00817997462b084084e4"><div class="ttname"><a href="structcan__protocol__info.html#a128ed1b70a1b00817997462b084084e4">can_protocol_info::major</a></div><div class="ttdeci">int major</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00376">CanBusMotionControl.h:376</a></div></div>
<div class="ttc" id="astructcan__protocol__info_html_acb049abee5fd6b84ad261b85fb675ced"><div class="ttname"><a href="structcan__protocol__info.html#acb049abee5fd6b84ad261b85fb675ced">can_protocol_info::minor</a></div><div class="ttdeci">int minor</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00377">CanBusMotionControl.h:377</a></div></div>
<div class="ttc" id="astructfirmware__info_html"><div class="ttname"><a href="structfirmware__info.html">firmware_info</a></div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00380">CanBusMotionControl.h:381</a></div></div>
<div class="ttc" id="astructfirmware__info_html_a0a71018e94ae5ba2d2f4043864b68943"><div class="ttname"><a href="structfirmware__info.html#a0a71018e94ae5ba2d2f4043864b68943">firmware_info::network_name</a></div><div class="ttdeci">std::string network_name</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00384">CanBusMotionControl.h:384</a></div></div>
<div class="ttc" id="astructfirmware__info_html_a19f4bea78f6c27ec57ca5942043a099f"><div class="ttname"><a href="structfirmware__info.html#a19f4bea78f6c27ec57ca5942043a099f">firmware_info::fw_version</a></div><div class="ttdeci">int fw_version</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00388">CanBusMotionControl.h:388</a></div></div>
<div class="ttc" id="astructfirmware__info_html_a31a8139337c38e480c9c1a228b087fd5"><div class="ttname"><a href="structfirmware__info.html#a31a8139337c38e480c9c1a228b087fd5">firmware_info::fw_build</a></div><div class="ttdeci">int fw_build</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00389">CanBusMotionControl.h:389</a></div></div>
<div class="ttc" id="astructfirmware__info_html_a374d9a5a6471c545990044cca9debd20"><div class="ttname"><a href="structfirmware__info.html#a374d9a5a6471c545990044cca9debd20">firmware_info::board_can_id</a></div><div class="ttdeci">int board_can_id</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00385">CanBusMotionControl.h:385</a></div></div>
<div class="ttc" id="astructfirmware__info_html_a65242ee2c04da206accf7c2854ad16aa"><div class="ttname"><a href="structfirmware__info.html#a65242ee2c04da206accf7c2854ad16aa">firmware_info::joint</a></div><div class="ttdeci">int joint</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00382">CanBusMotionControl.h:382</a></div></div>
<div class="ttc" id="astructfirmware__info_html_a72f5f4284ca9591d4049437eec4ee401"><div class="ttname"><a href="structfirmware__info.html#a72f5f4284ca9591d4049437eec4ee401">firmware_info::ack</a></div><div class="ttdeci">int ack</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00391">CanBusMotionControl.h:391</a></div></div>
<div class="ttc" id="astructfirmware__info_html_a7b9273550f30a4cde15716811d8a7beb"><div class="ttname"><a href="structfirmware__info.html#a7b9273550f30a4cde15716811d8a7beb">firmware_info::network_number</a></div><div class="ttdeci">int network_number</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00383">CanBusMotionControl.h:383</a></div></div>
<div class="ttc" id="astructfirmware__info_html_a977bdc2d76c6f7457b9168d2b2fe0968"><div class="ttname"><a href="structfirmware__info.html#a977bdc2d76c6f7457b9168d2b2fe0968">firmware_info::can_protocol</a></div><div class="ttdeci">can_protocol_info can_protocol</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00390">CanBusMotionControl.h:390</a></div></div>
<div class="ttc" id="astructfirmware__info_html_a9a623e585680454696e15f7b68c3a03a"><div class="ttname"><a href="structfirmware__info.html#a9a623e585680454696e15f7b68c3a03a">firmware_info::fw_major</a></div><div class="ttdeci">int fw_major</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00387">CanBusMotionControl.h:387</a></div></div>
<div class="ttc" id="astructfirmware__info_html_abfb4c0e64322ed052f8a50f5f07ca402"><div class="ttname"><a href="structfirmware__info.html#abfb4c0e64322ed052f8a50f5f07ca402">firmware_info::board_type</a></div><div class="ttdeci">int board_type</div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00386">CanBusMotionControl.h:386</a></div></div>
<div class="ttc" id="astructyarp_1_1dev_1_1CanBusMotionControlParameters_1_1DebugParameters_html"><div class="ttname"><a href="structyarp_1_1dev_1_1CanBusMotionControlParameters_1_1DebugParameters.html">yarp::dev::CanBusMotionControlParameters::DebugParameters</a></div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00119">CanBusMotionControl.h:120</a></div></div>
<div class="ttc" id="astructyarp_1_1dev_1_1CanBusMotionControlParameters_1_1ImpedanceParameters_html"><div class="ttname"><a href="structyarp_1_1dev_1_1CanBusMotionControlParameters_1_1ImpedanceParameters.html">yarp::dev::CanBusMotionControlParameters::ImpedanceParameters</a></div><div class="ttdef"><b>Definition:</b> <a href="CanBusMotionControl_8h_source.html#l00126">CanBusMotionControl.h:127</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Mar 26 2024 16:02:16 for iCub-main by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
