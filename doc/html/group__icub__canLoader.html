<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>iCub-main: canLoader</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">iCub-main
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">canLoader<div class="ingroups"><a class="el" href="group__icub__modules__all.html">Software</a> &raquo; <a class="el" href="group__icub__tools.html">Tools</a> &#124; <a class="el" href="group__icub__modules__all.html">Software</a> &raquo; <a class="el" href="group__icub__guis.html">Graphic User Interfaces</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Use this application to download your firmware in DSP boards.  
</p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Collaboration diagram for canLoader:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="group__icub__canLoader.png" border="0" usemap="#agroup____icub____canLoader" alt=""/></div>
<map name="agroup____icub____canLoader" id="agroup____icub____canLoader">
<area shape="rect" href="group__icub__tools.html" title="This is a list of iCub basic tools." alt="" coords="65,5,120,31"/>
<area shape="rect" title="Use this application to download your firmware in DSP boards." alt="" coords="228,31,317,56"/>
<area shape="rect" href="group__icub__guis.html" title="This is a list of Graphic User Interfaces." alt="" coords="5,55,180,80"/>
</map>
</div>
<p>Use this application to download your firmware in DSP boards. </p>
<h1><a class="anchor" id="intro_sec"></a>
Description</h1>
<p>CanLoder20 is a YARP based application that allows the firmware update of the DSP boards of <a class="el" href="namespaceiCub.html" title="This file contains the definition of unique IDs for the body parts and the skin parts of the robot.">iCub</a>. The board types currently supported by the CanLoader application are:</p><ul>
<li>MC4 (Motorola 56807 DSP for control of bushed CC motors)</li>
<li>BLL (Motorola 56807 DSP for control of brushless motors)</li>
<li>STRAIN (DSPIC 30f4013 6 axis force/torque sensor)</li>
<li>MAIS (DSPIC 30f4013 Hall-effect position sensor) _ SKIN (DSPIC 30f4011 Tactile Sensor board) In order to successfully transfer the firmware to the boards using the CanLoader application, the desired boards must be powered on and properly connected to the CAN Bus using either the 'ecan' or 'pcan' or 'cfw2can' or 'socketcan' CAN Bus driver, or, alternatively, canLoader can program the boards connected to a ETH board. The CanLoader application can run in two different modalities:</li>
<li>Graphical User Interface (GUI) modality: This modality allows the user to examinate the status of the DSP boards detected on the specified CAN Bus, to download the firmware to multiple bords and to change other settings, such as the individual CAN addresses or the identification labels.</li>
<li>Command line modality: This modality allows to the user to update the firmware of one DSP board in a fast and scriptable way. The application requires in input a set of parameters (specified in the parameters section) in order to identify the board to be updated. The application returns a value that specifies the result of the download.</li>
</ul>
<h1><a class="anchor" id="lib_sec"></a>
Libraries</h1>
<p>YARP libraries.</p>
<h1><a class="anchor" id="parameters_sec"></a>
Parameters</h1>
<p>You can use the canLoader application in two ways: using a GUI or by command line. The GUI is executed by default if the canLoader application is launched without parameters. For example: ./canLoader executes the graphical version of the canLoader.</p>
<p>To use the canLoader application by command line, without the graphical interface, use the following syntax: ./canLoader &ndash;canDeviceType t &ndash;canDeviceNum x &ndash;boardId y &ndash;firmware myFirmware.out.S ./canLoader &ndash;canDeviceType ETH &ndash;canDeviceNum 1|2 &ndash;boardId y &ndash;firmware myFirmware.out.S &ndash;boardIPAddr aaa.aaa.aaa.aaa All of the parameters are mandatory. A description of the parameters follows: &ndash;canDeviceType t: specifies the type of canBusDriver used. The parameter t can assume the values 'ecan' or 'pcan' or 'cfw2can' or 'socketcan' &ndash;canDeviceNum x: specifies the canBus identification number. The parameter x can be 0,1,2 or 3. &ndash;boardId y: specifies the can address of the board on which the firmware will be downloaded. The parameter y ranges from 1 to 15. &ndash;firmware myFirmware.out.S: specifies the file name containing the firmware (binary code) that will be downloaded. &ndash;boardIPAddr aaa.aaa.aaa.aaa: it is the ETH board IP address.</p>
<h1><a class="anchor" id="portsa_sec"></a>
Ports Accessed</h1>
<p>None</p>
<h1><a class="anchor" id="portsc_sec"></a>
Ports Created</h1>
<p>None</p>
<h1><a class="anchor" id="in_files_sec"></a>
Input Data Files</h1>
<p>The canLoader application requires in input a file containing the firmware that will be downloaded. The extension of the firmware file is typically '.out.s' for the Motorola DSP-based boards and '.hex' fot DSPIC-based boards. The name of the file containing the firmware is specified using the &ndash;firmware parameter if the canLoader application is executed by command line or browsing the directories if the GUI is used.</p>
<h1><a class="anchor" id="out_data_sec"></a>
Output Data Files</h1>
<p>No output files are generated by the canLoader application.</p>
<p>If the application is executed using the command line modality, the following codes are retuned by the application, identifying the status (success or not) of the download.</p>
<p>#define ALL_OK 0</p>
<p>#define INVALID_CMD_STRING -1</p>
<p>#define INVALID_PARAM_CANTYPE -2</p>
<p>#define INVALID_PARAM_CANNUM -3</p>
<p>#define INVALID_PARAM_BOARDID -4</p>
<p>#define INVALID_PARAM_FILE -5</p>
<p>#define ERR_NO_BOARDS_FOUND -10</p>
<p>#define ERR_BOARD_ID_NOT_FOUND -11</p>
<p>#define ERR_UNKNOWN -12</p>
<p>#define DOWNLOADERR_NOT_CONNECTED -20</p>
<p>#define DOWNLOADERR_BOARD_NOT_SEL -21</p>
<p>#define DOWNLOADERR_FILE_NOT_SEL -22</p>
<p>#define DOWNLOADERR_FILE_NOT_OPEN -23</p>
<p>#define DOWNLOADERR_BOARD_NOT_START -24</p>
<p>#define DOWNLOADERR_TRANSFER_ERROR -25</p>
<p>In this way, an external script that invokes the canLoader application can check the result of the firmware download operation.</p>
<h1><a class="anchor" id="conf_file_sec"></a>
Configuration Files</h1>
<p>The canLoader application uses a configuration file (config.txt) located in the same diretory of the executable. The configuration file specifies the filename of the firmware used in the last download operation. If the configuration file is not found when the canLoader application is executed in graphical modality, a new config.txt is generated. The configuration file is not used when the canLoader is executed in command line modality.</p>
<h1><a class="anchor" id="tested_os_sec"></a>
Tested OS</h1>
<p>Linux and Windows.</p>
<h1><a class="anchor" id="example_sec"></a>
Example Instantiation of the Module</h1>
<p>canLoader canLoader &ndash;help canLoader &ndash;canDeviceType esd &ndash;canDeviceNum 2 &ndash;boardId 1 &ndash;firmware myFirmware.out.S canLoader &ndash;canDeviceType ETH &ndash;canDeviceNum 1 &ndash;boardId 4 &ndash;firmware myFirmware.out.S &ndash;boardIPAddr 10.0.1.8</p>
<dl class="section author"><dt>Author</dt><dd>Marco Randazzo</dd></dl>
<p>Copyright (C) 2008 RobotCub Consortium</p>
<p>CopyPolicy: Released under the terms of the GNU GPL v2.0.</p>
<p>This file can be edited at src/myModule/main.cpp. </p>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Mar 26 2024 16:02:19 for iCub-main by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
